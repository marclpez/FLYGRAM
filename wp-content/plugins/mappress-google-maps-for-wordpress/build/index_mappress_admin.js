!function(){var e={215:function(e,t,n){"use strict";n.r(t);var o=n(525),a=n(143);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,c=window.mapp||{},p=wp.element.createElement;s=jQuery,c.Editor=function(e){this.drawingManager=null,this.map=e,this.poiEditor=null;var t=this;this.initialize=function(){this.map.display(),this.poiEditor=new c.PoiEditor(this.map),this.initDrawingManager(),s(this.map.places).off("search.mapp"),s(this.map.places).on("search.mapp",(function(e,n){t.insert(n)}))},this.insert=function(e){if(e)if(this.drawingManager&&this.drawingManager.setDrawingMode(null),this.map.poiClose(),e.geometry){var n=e.formatted_address?e.formatted_address.replace(/, United States of America/i,"").replace(/, United States/i,"").replace(/, USA/i,""):null,o=e.name==n?"":n,a=new c.Poi({address:n,body:o,iconid:this.poiEditor.lastIcon,point:e.geometry.location,title:e.name,viewport:e.geometry.viewport?e.geometry.viewport:null});this.map.poiInsert(a),a.center()}else e.overlay?(this.map.poiHover(null),"marker"==e.type?(a=new c.Poi({body:"",iconid:null,overlay:null,point:e.overlay.getPosition().toJSON(),title:e.overlay.getPosition().toUrlValue(6),type:null}),e.overlay.setMap(null)):a=new c.Poi({body:"",iconid:null,overlay:e.overlay,title:mappl10n.shape,type:e.type}),this.map.poiInsert(a)):"string"==typeof e&&"http"==e.substring(0,4)&&(a=new c.Poi({iconid:this.poiEditor.lastIcon,kml:{url:e},title:"KML",type:"kml"}),t.map.poiInsert(a),c.event.addListenerOnce(a.overlay,"ready defaultviewport_changed",(function(){a.center()})))},this.initDrawingManager=function(){var e={fillColor:"#0000FF",fillOpacity:.4,strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:2};"leaflet"==mappl10n.options.engine||google.maps.drawing&&(this.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},circleOptions:e,polygonOptions:e,polylineOptions:e,rectangleOptions:e}),this.drawingManager.setMap(this.map.getMap()),c.event.addListener(this.drawingManager,"overlaycomplete",(function(e){t.drawingManager.get("drawingMode")&&t.insert(e)})))},this.initialize.apply(this)},c.PoiEditor=function(e){this.map=e,this.poi=null,this.sel=null,this.lastIcon=null;var t=this;this.initialize=function(){this.sel=s(this.map.iw.getContent()),s(this.map).on("mapp.open",(function(e,n){t.render(n)})),s(this.map).on("mapp.close",(function(){t.mce(!1)})),this.sel.on("click","[data-mapp-poi]",(function(e){e.preventDefault();var n=s(this).attr("data-mapp-poi");t[n]()})),this.sel.on("click",".mapp-poi-visual, .mapp-poi-html",(function(e){var n=s(this).hasClass("mapp-poi-visual");t.mce(n)})),this.sel.on("keydown",(function(e){13==e.which&&"mapp-poi-body"!=e.target.id&&(e.preventDefault(),t.save())}))},this.cancel=function(){this.map.poiClose()},this.initMCE=function(){if("undefined"!=typeof tinyMCE&&void 0!==tinyMCE.init){var e="en";if(void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit&&void 0!==window.tinyMCEPreInit.mceInit.content){var t=window.tinyMCEPreInit.mceInit.content;e=void 0!==t.language?t.language:"en"}var n={mode:"none",height:"100%",convert_urls:!1,language:e,menubar:!1,plugins:"image,paste,textcolor,wordpress,wpeditimage,wplink,wpview",relative_urls:!1,remove_script_host:!1,statusbar:!1,theme:"modern",toolbar1:"bold,italic,link",toolbar2:"",toolbar3:"",toolbar4:""};tinyMCE.init(n),this.mce(!0)}},this.mce=function(e){var n=e?"mceAddEditor":"mceRemoveEditor";"undefined"!=typeof tinyMCE&&tinyMCE.execCommand(n,!1,"mapp-poi-body"),s(".mapp-poi-visual, .mapp-poi-html",t.sel).removeClass("mapp-active"),e?s(".mapp-poi-visual",t.sel).addClass("mapp-active"):s(".mapp-poi-html",t.sel).addClass("mapp-active")},this.remove=function(){confirm(mappl10n.delete_prompt)&&(this.map.poiClose(),this.map.poiRemove(this.poi))},this.render=function(e){this.poi=e,this.renderColorPicker(this.poi),this.renderIconPicker(this.poi),this.initMCE()},this.renderColorPicker=function(e){var t=this;document.getElementById("mapp-poi-colorpicker")&&wp.element.render(p(o.o,r(r({},e.getTemplateColors()),{},{isExtended:!0,onChange:function(n){e.set({dirty:!0}),e.setTemplateColors(n),t.map.renderList(),t.renderColorPicker(e)}})),document.getElementById("mapp-poi-colorpicker"))},this.renderIconPicker=function(e){var t=this;document.getElementById("mapp-poi-iconpicker")&&wp.element.render(p(a.G,{iconid:e.iconid,onChange:function(n){e.set({dirty:!0,iconid:n}),t.lastIcon=n,t.map.renderList(),t.renderIconPicker(e)}}),document.getElementById("mapp-poi-iconpicker"))},this.save=function(){"undefined"!=typeof tinyMCE&&tinyMCE.get("mapp-poi-body")&&tinyMCE.get("mapp-poi-body").save(),this.poi.set({dirty:!0,title:s(".mapp-poi-title").val(),body:s(".mapp-poi-body").val()}),this.map.renderList(),this.map.poiClose()},this.initialize.apply(this)}},525:function(e,t,n){"use strict";n.d(t,{o:function(){return b}});var o=n(824);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=wp.element.createElement,p=wp.element,u=p.Fragment,m=p.useEffect,d=(p.useLayoutEffect,p.useCallback,p.useRef,p.useState),f=(wp.data.useSelect,wp.compose.withState,wp.components),h=f.Button,g=(f.ColorPalette,f.ColorPicker),y=(f.Dashicon,f.Dropdown,f.ExternalLink,f.Modal),__=(f.Panel,f.PanelBody,f.PanelRow,f.Popover,f.RadioControl,f.Spinner,f.TabPanel,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function b(e){var t=l(d({isCustomOpen:!1,isOpen:!1}),2),n=t[0],a=t[1];function r(e){a((function(t){return i(i({},t),e)}))}function s(t,n){switch(t){case"close":r({isOpen:!1});break;case"open":r({isOpen:!0});break;case"select":e.onChange(n),s("close");break;case"set":e.onChange(n)}}return m((function(){}),[]),c(u,null,c("span",{className:"mapp-colors-toggle",onClick:function(){return s("open",null)},style:{backgroundColor:e.color,border:e.isExtended?"1px solid "+e.color:"1px solid gray",opacity:e.isExtended&&e.opacity?e.opacity/100:1},tabIndex:0}),function(){if(!n.isOpen)return null;var t=_.map([100,90,80,70,60,50,40,30,20,10,0],(function(e){return{label:e+"%",value:e}})),a=_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],(function(e){return{label:e+"px",value:e}}));return c(y,{title:__("Select a color"),className:"mapp-colors-modal",onRequestClose:function(e){return s("close")}},c("div",{className:"mapp-colors"},c("div",{className:"mapp-colors-list"},_.map([["yellow","yellowgreen","green","seagreen","blue","cornflowerblue","darkslateblue","purple","firebrick","red","darkorange","orange","saddlebrown"],["lightyellow","greenyellow","lightgreen","darkseagreen","lightblue","skyblue","slateblue","orchid","plum","pink","sandybrown","goldenrod","peru"],["white","lightgray","gray","black"]],(function(t,n){return c("div",{key:n},_.map(t,(function(t){return c("span",{className:"mapp-color"+(t==e.color?" mapp-selected":""),key:t,onClick:function(){r({isCustomOpen:!1}),s("select",{color:t})},style:{backgroundColor:t},title:t})})))}))),n.isCustomOpen&&c(g,{color:e.color,onChangeComplete:function(e){return s("set",{color:e.hex})},disableAlpha:!0}),e.isExtended&&c(o.Ph,{label:__("Opacity"),options:t,value:e.opacity?e.opacity:"",onChange:function(e){return s("set",{opacity:e})}}),e.isExtended&&c(o.Ph,{label:__("Stroke"),options:a,value:e.weight?e.weight:"",onChange:function(e){return s("set",{weight:e})}}),c("div",{className:"mapp-colors-toolbar"},c(h,{isPrimary:!0,onClick:function(){return s("close")}},__("Done")),c(h,{isLink:!0,onClick:function(){return r({isCustomOpen:!n.isCustomOpen})}},__("Custom color")))))}())}},999:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n(429);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=window.mapp||{},p=wp.element.createElement,u=wp.element,m=(u.Fragment,u.useEffect),d=(u.useLayoutEffect,u.useRef),f=u.useState,h=wp.components,g=h.Button,y=(h.Dropdown,h.Modal,h.Panel,h.PanelBody),b=(h.Popover,h.Spinner,h.TextControl),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function v(e){var t,n,a=l(f({dragging:null,dragover:null,isFetchingMap:!!e.mapid,isPoiListOpen:!0,isSavingMap:!1,map:null}),2),r=a[0],s=a[1],u=d(null);function h(e){s((function(t){return i(i({},t),e)}))}function v(e){h({map:r.map})}function w(t,n){switch(t){case"change-settings":r.map.set(n),h({map:r.map});break;case"change-title":r.map.set({dirty:!0,title:n}),h({map:r.map});break;case"close":e.onAction("edit-close");break;case"destroy":confirm(mappl10n.delete_map_prompt)&&(c.store.destroyMap({mapid:e.mapid}),e.onAction("edit-destroy"));break;case"save":c.store.saveMap({mapdata:r.map.toJSON(),success:function(t){r.map.set({dirty:!1}),e.onAction("edit-save",t.mapid)}})}}return m((function(){r.map&&(jQuery(r.map.div.list).off("render",v),jQuery(r.map.div.list).on("render",(function(e){return v()})))}),[r.map]),m((function(){var t=function(t){h({mapdata:t.maps[e.mapid],isFetchingMap:t.isFetchingMap,isSavingMap:t.isSavingMap})};return c.store.subscribe(t),function(){return c.store.unsubscribe(t)}})),m((function(){e.mapid&&c.store.fetchMap({mapid:e.mapid})}),[e.mapid]),m((function(){if(!r.isFetchingMap){var t={editable:!0,embed:!0,layout:"left",mapOpts:{mapTypeControl:!0,streetViewControl:!1},menu:!1,name:"media-map",poiList:!1,sel:jQuery(u.current)};"map"!=e.context&&"mashup"!=e.context||(t.center=null,t.zoom=null);var n=new c.Map(r.mapdata,t);new c.Editor(n);h({map:n})}}),[r.mapdata]),m((function(){r.map&&setTimeout((function(){return r.map.resize()}),100)}),[r.isPoiListOpen]),p("div",{className:"mapp-edit"},(t=r.map&&!r.isFetchingMap&&r.map.title?r.map.title:"",n=r.map&&!r.isFetchingMap?__("Untitled"):"",p("div",{className:"mapp-gt-modal-header"},p(b,{className:"mapp-edit-title",placeholder:n,value:t,onChange:function(e){return w("change-title",e)}}))),p("div",{className:"mapp-edit-main"},p("div",{className:"mapp-list mapp-edit-list"+(r.isPoiListOpen?" mapp-list-open":"")},function(){if("mce"!=e.context&&"library"!=e.context)return null;if(!r.map)return null;var t=r.map,n=t.center,a=t.height,i=t.poiList,l=t.width,s=t.zoom;return p("div",{className:"mapp-gt-inspector"},p(y,{initialOpen:!1,title:__("Map settings")},p(o.MappSettings,{map:r.map,context:e.context,onAction:w,center:n,height:a,poiList:i,width:l,zoom:s})))}(),function(){if(r.map){var e=function(e,t){var n=r.dragging,o=n<o?t-1:t;r.map.pois_.splice(o,0,r.map.pois_.splice(n,1)[0]),h({map:r.map,dragover:null})};return p("div",{className:"mapp-items"},_.map(r.map.pois_,(function(t,n){return p("div",{className:r.dragover==n?"mapp-item mapp-edit-dragover":"mapp-item",draggable:!0,key:n,onClick:function(){return r.map.poiOpen(r.map.pois_[n])},onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){return h({dragging:n})},onDragEnter:function(e){return h({dragover:n})},onDragEnd:function(e){return h({dragging:null,dragover:null})},onDrop:function(t){return e(t,n)}},p("img",{className:"mapp-icon",src:c.Icons.getUrl(t.iconid)}),p("div",{className:"mapp-title"},t.title))})))}}(),p("div",{className:"mapp-list-toggle",onClick:function(){return h({isPoiListOpen:!r.isPoiListOpen})}})),p("div",{className:"mapp-edit-map",key:e.mapid,ref:u,onKeyDown:function(e){return e.stopPropagation()},tabIndex:-1})),p("div",{className:"mapp-edit-toolbar",tabIndex:-1,onKeyDown:function(e){return e.stopPropagation()}},p(g,{isPrimary:!0,isBusy:r.isSavingMap,onClick:function(){return w("save")}},__("Save")),p(g,{disabled:r.isSavingMap,onClick:function(){return w("close")}},__("Cancel")),p(g,{disabled:!e.mapid||r.isSavingMap,isDestructive:!0,className:"mapp-edit-delete",onClick:function(){return w("destroy")}},__("Delete"))))}},143:function(e,t,n){"use strict";n.d(t,{G:function(){return w}});var o=n(525),a=n(824);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var p=wp.element.createElement,u=wp.element,m=u.Fragment,d=u.useEffect,f=(u.useLayoutEffect,u.useCallback,u.useRef,u.useState),h=(wp.data.useSelect,wp.compose.withState,wp.components),g=h.Button,y=(h.ColorPicker,h.DropZone,h.DropZoneProvider,h.FormFileUpload),b=h.Modal,__=(h.Popover,h.Spinner,h.TabPanel,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")}),v={"mapp-icons":{label:"Map icons",glyphs:[{name:"abseiling",codepoint:59392},{name:"accounting",codepoint:59393},{name:"airport",codepoint:59394},{name:"amusement-park",codepoint:59395},{name:"aquarium",codepoint:59396},{name:"archery",codepoint:59397},{name:"art-gallery",codepoint:59398},{name:"assistive-listening-system",codepoint:59399},{name:"atm",codepoint:59400},{name:"audio-description",codepoint:59401},{name:"bakery",codepoint:59402},{name:"bank",codepoint:59403},{name:"bar",codepoint:59404},{name:"baseball",codepoint:59405},{name:"beauty-salon",codepoint:59406},{name:"bicycle-store",codepoint:59407},{name:"bicycling",codepoint:59408},{name:"boat-ramp",codepoint:59409},{name:"boat-tour",codepoint:59410},{name:"boating",codepoint:59411},{name:"book-store",codepoint:59412},{name:"bowling-alley",codepoint:59413},{name:"braille",codepoint:59414},{name:"bus-station",codepoint:59415},{name:"cafe",codepoint:59416},{name:"campground",codepoint:59417},{name:"canoe",codepoint:59418},{name:"car-dealer",codepoint:59419},{name:"car-rental",codepoint:59420},{name:"car-repair",codepoint:59421},{name:"car-wash",codepoint:59422},{name:"casino",codepoint:59423},{name:"cemetery",codepoint:59424},{name:"chairlift",codepoint:59425},{name:"church",codepoint:59426},{name:"skip",codepoint:59427},{name:"city-hall",codepoint:59428},{name:"climbing",codepoint:59429},{name:"closed-captioning",codepoint:59430},{name:"clothing-store",codepoint:59431},{name:"compass",codepoint:59432},{name:"convenience-store",codepoint:59433},{name:"courthouse",codepoint:59434},{name:"cross-country-skiing",codepoint:59435},{name:"crosshairs",codepoint:59436},{name:"dentist",codepoint:59437},{name:"department-store",codepoint:59438},{name:"diving",codepoint:59439},{name:"doctor",codepoint:59440},{name:"electrician",codepoint:59441},{name:"electronics-store",codepoint:59442},{name:"embassy",codepoint:59443},{name:"expand",codepoint:59444},{name:"female",codepoint:59445},{name:"finance",codepoint:59446},{name:"fire-station",codepoint:59447},{name:"fish-cleaning",codepoint:59448},{name:"fishing-pier",codepoint:59449},{name:"fishing",codepoint:59450},{name:"florist",codepoint:59451},{name:"food",codepoint:59452},{name:"fullscreen",codepoint:59453},{name:"funeral-home",codepoint:59454},{name:"furniture-store",codepoint:59455},{name:"gas-station",codepoint:59456},{name:"general-contractor",codepoint:59457},{name:"golf",codepoint:59458},{name:"grocery-or-supermarket",codepoint:59459},{name:"gym",codepoint:59460},{name:"hair-care",codepoint:59461},{name:"hang-gliding",codepoint:59462},{name:"hardware-store",codepoint:59463},{name:"health",codepoint:59464},{name:"hindu-temple",codepoint:59465},{name:"horse-riding",codepoint:59466},{name:"hospital",codepoint:59467},{name:"ice-fishing",codepoint:59468},{name:"ice-skating",codepoint:59469},{name:"inline-skating",codepoint:59470},{name:"insurance-agency",codepoint:59471},{name:"jet-skiing",codepoint:59472},{name:"jewelry-store",codepoint:59473},{name:"kayaking",codepoint:59474},{name:"laundry",codepoint:59475},{name:"lawyer",codepoint:59476},{name:"library",codepoint:59477},{name:"liquor-store",codepoint:59478},{name:"local-government",codepoint:59479},{name:"location-arrow",codepoint:59480},{name:"locksmith",codepoint:59481},{name:"lodging",codepoint:59482},{name:"low-vision-access",codepoint:59483},{name:"male",codepoint:59484},{name:"skip",codepoint:59485},{name:"marina",codepoint:59486},{name:"mosque",codepoint:59487},{name:"motobike-trail",codepoint:59488},{name:"movie-rental",codepoint:59489},{name:"movie-theater",codepoint:59490},{name:"moving-company",codepoint:59491},{name:"museum",codepoint:59492},{name:"natural-feature",codepoint:59493},{name:"night-club",codepoint:59494},{name:"open-captioning",codepoint:59495},{name:"painter",codepoint:59496},{name:"park",codepoint:59497},{name:"parking",codepoint:59498},{name:"pet-store",codepoint:59499},{name:"pharmacy",codepoint:59500},{name:"physiotherapist",codepoint:59501},{name:"place-of-worship",codepoint:59502},{name:"playground",codepoint:59503},{name:"plumber",codepoint:59504},{name:"point-of-interest",codepoint:59505},{name:"police",codepoint:59506},{name:"political",codepoint:59507},{name:"post-box",codepoint:59508},{name:"post-office",codepoint:59509},{name:"skip",codepoint:59510},{name:"skip",codepoint:59511},{name:"rafting",codepoint:59512},{name:"real-estate-agency",codepoint:59513},{name:"restaurant",codepoint:59514},{name:"roofing-contractor",codepoint:59515},{name:"skip",codepoint:59516},{name:"route",codepoint:59517},{name:"rv-park",codepoint:59518},{name:"sailing",codepoint:59519},{name:"school",codepoint:59520},{name:"scuba-diving",codepoint:59521},{name:"search",codepoint:59522},{name:"skip",codepoint:59523},{name:"shopping-mall",codepoint:59524},{name:"sign-language",codepoint:59525},{name:"skateboarding",codepoint:59526},{name:"ski-jumping",codepoint:59527},{name:"skiing",codepoint:59528},{name:"sledding",codepoint:59529},{name:"snow-shoeing",codepoint:59530},{name:"snow",codepoint:59531},{name:"snowboarding",codepoint:59532},{name:"snowmobile",codepoint:59533},{name:"spa",codepoint:59534},{name:"skip",codepoint:59535},{name:"skip",codepoint:59536},{name:"skip",codepoint:59537},{name:"stadium",codepoint:59538},{name:"storage",codepoint:59539},{name:"store",codepoint:59540},{name:"subway-station",codepoint:59541},{name:"surfing",codepoint:59542},{name:"swimming",codepoint:59543},{name:"synagogue",codepoint:59544},{name:"taxi-stand",codepoint:59545},{name:"tennis",codepoint:59546},{name:"toilet",codepoint:59547},{name:"trail-walking",codepoint:59548},{name:"train-station",codepoint:59549},{name:"transit-station",codepoint:59550},{name:"travel-agency",codepoint:59551},{name:"unisex",codepoint:59552},{name:"university",codepoint:59553},{name:"veterinary-care",codepoint:59554},{name:"viewing",codepoint:59555},{name:"volume-control-telephone",codepoint:59556},{name:"walking",codepoint:59557},{name:"waterskiing",codepoint:59558},{name:"whale-watching",codepoint:59559},{name:"wheelchair",codepoint:59560},{name:"wind-surfing",codepoint:59561},{name:"zoo",codepoint:59562}]},"mapp-shapes":{label:"Map shapes",glyphs:[{name:"circle",codepoint:59648,center:[16,16]},{name:"widepin",codepoint:59649,center:[16,14]},{name:"route",codepoint:59650,center:[16,14]},{name:"shield",codepoint:59651,center:[16,14]},{name:"squarepin",codepoint:59653,center:[16,14]},{name:"square",codepoint:59652,center:[16,16]},{name:"squarerounded",codepoint:59654,center:[16,16]},{name:"roundpin",codepoint:59657,center:[16,13]},{name:"pin",codepoint:59655,center:null},{name:"pindot",codepoint:59656,center:null}]}};function w(e){var t,n,i,l=s(f({defaultIcon:mappl10n.options.defaultIcon,filename:null,fillColor:"gray",filter:"",glyph:"",glyphColor:"white",glyphFont:"mapp-icons",isFontLoaded:!1,isOpen:!1,mode:"list",shape:"circle",shapeFont:"mapp-shapes",showNames:!0,strokeColor:"black",strokeWidth:4,urls:{},userIcons:mappl10n.options.userIcons}),2),c=l[0],u=l[1];function h(e){u((function(t){return r(r({},t),e)}))}function w(t,n){switch(t){case"close":h({isOpen:!1});break;case"edit-cancel":h({mode:"list"});break;case"edit-save":!function(e){c.glyphFont;var t=2,n=32*t,o=16*t,a=document.createElement("canvas");a.width=n,a.height=n,a.style.imageRendering="pixelated";var i=a.getContext("2d");i.font=n+"px "+c.shapeFont,i.fillStyle=c.fillColor,i.textBaseline="bottom";var r=_.findWhere(v[c.shapeFont].glyphs,{name:c.shape});i.fillText(String.fromCharCode(r.codepoint),0,n);var l=1,s=l*t;if(i.strokeStyle="white",i.lineWidth=s,i.font=n-l*t+"px "+c.shapeFont,i.strokeText(String.fromCharCode(r.codepoint),l,n-l),r.center){i.imageSmoothingEnabled=!1,i.font=o+"px "+c.glyphFont,i.fillStyle=c.glyphColor;var p=[r.center[0]*t,r.center[1]*t],u=_.findWhere(v[c.glyphFont].glyphs,{name:c.glyph});i.fillText(String.fromCharCode(u.codepoint),p[0]-o/2,p[1]+o/2)}"undefined"!=typeof debug?document.getElementById("mapp-edit-debug").append(a):a.toBlob((function(e){var t=new FormData;t.append("image0",e,c.filename),k(t)}),"image/png",100)}();break;case"edit-upload":o=n,a=new FormData,_.map(o,(function(e,t){e.type.match("image.*")?a.append("image"+t,e):alert("File "+e.name+" is not an image.")})),k(a);break;case"list-clear":e.onChange&&e.onChange(null),w("close");break;case"list-delete":e.iconid&&confirm(mappl10n.delete_prompt)&&mapp.lib.ajax({type:"POST",data:{action:"mapp_icon_delete",iconids:e.iconid,nonce:mappl10n.options.nonce},callback:function(t){if(t&&"OK"==t.status){var n=mappl10n.options.userIcons.indexOf(e.iconid);n>=0&&void 0!==mappl10n.options.userIcons[n+1]?e.onChange(mappl10n.options.userIcons[n+1]):e.onChange(null),mappl10n.options.userIcons=t.data,h({userIcons:mappl10n.options.userIcons})}else alert("Delete error: "+t.status)}});break;case"list-select":e.onChange&&(n==e.iconid?e.onChange(null):e.onChange(n));break;case"mode":h({mode:n});break;case"open":h({isOpen:!0})}var o,a}function O(t){var n="user"==t?mappl10n.options.userIcons:mappl10n.options.standardIcons;return _.map(n,(function(t){return p("div",{alt:t,className:e.iconid==t?"mapp-icon-wrapper mapp-selected":"mapp-icon-wrapper",key:t,onClick:function(){return w("list-select",t)}},p("img",{className:"mapp-icon",src:mapp.Icons.getUrl(t),title:t}))}))}function k(e){e.append("action","mapp_icon_save"),e.append("nonce",mappl10n.options.nonce),mapp.lib.ajax({type:"POST",contentType:!1,processData:!1,data:e,success:function(e){e&&"OK"==e.status?(mappl10n.options.userIcons=e.data.icons,h({userIcons:mappl10n.options.userIcons}),h({mode:"list"}),w("list-select",e.data.filename)):alert("Upload error: "+e.status)}})}return d((function(){var e=[];_.map(v,(function(t,n){var o=new FontFace(n,"url("+mappl10n.options.baseurl+"/pro/fonts/"+n+".woff?"+mappl10n.options.version+")");document.fonts.add(o),e.push(o.loaded)})),Promise.all(e).then((function(){h({isFontLoaded:!0})}))}),[]),d((function(){h({filename:c.shape+"_"+c.fillColor.replace("#","")+(c.glyph?"_"+c.glyph:"")+".png"})}),[c.shape,c.fillColor,c.glyph]),p(m,null,p("img",{className:"mapp-icon",onClick:function(){return w("open",null)},src:mapp.Icons.getUrl(e.iconid)}),"list"==c.mode&&function(){if(!c.isOpen)return null;var t=e.iconid&&mappl10n.options.userIcons.indexOf(e.iconid)>=0;return p(b,{title:p("div",{className:"mapp-icons-header"},__("Select an icon"),p(g,{isSecondary:!0,onClick:function(){return w("mode","edit")}},__("New icon"))),className:"mapp-icons-modal",onRequestClose:function(){return w("close")}},p("div",{className:"mapp-icons"},p("div",{className:"mapp-icons-list"},p("div",{className:"mapp-icons-user"},O("user")),p("div",{className:"mapp-icons-standard"},O("standard"))),p("div",{className:"mapp-icons-edit-filename"},e.iconid?e.iconid:__("No icon selected")),p("div",{className:"mapp-icons-toolbar"},p("div",null,p(g,{isPrimary:!0,onClick:function(){return w("close")}},__("Select")),p(g,{isSecondary:!0,onClick:function(){return w("list-clear")}},__("Use default icon"))),p(g,{isDestructive:!0,onClick:function(){return w("list-delete")},disabled:!t},__("Delete")))))}(),"edit"==c.mode&&p(b,{title:__("Create new icon"),className:"mapp-icons-edit-modal",onRequestClose:function(){return w("edit-cancel")},shouldCloseOnClickOutside:!1},p("div",{className:"mapp-icons-edit"},p("div",{id:"mapp-edit-debug"}),p("div",{className:"mapp-icons-edit-shape-section"},p("div",{className:"mapp-icons-shape-heading"},__("Shape and color"),p(o.o,{color:c.fillColor,isExtended:!1,onChange:function(e){return h({fillColor:e.color})}})),(t=v[c.shapeFont],n=_.findWhere(v[c.glyphFont].glyphs,{name:c.glyph}),i=n?String.fromCharCode(n.codepoint):null,p("div",{className:"mapp-icons-edit-shapes",style:{color:c.fillColor,fontFamily:c.shapeFont}},_.map(t.glyphs,(function(e,t){var o=c.shape==e.name;return p("span",{className:"mapp-icons-edit-shape-wrapper"+(o?" mapp-selected":""),key:e.name,onClick:function(){return h({shape:e.name})},title:e.name},p("span",{className:"mapp-icons-edit-shape"},String.fromCharCode(e.codepoint),e.center&&n&&p("span",{className:"mapp-icons-edit-glyph",style:{left:e.center[0],top:e.center[1],color:c.glyphColor,fontFamily:c.glyphFont}},i)))}))))),p("div",{className:"mapp-icons-edit-glyph-section"},p("div",{className:"mapp-icons-glyph-heading"},__("Glyph"),p("div",null,__("Search"),p(a.II,{onChange:function(e){return h({filter:e})}}))),function(){c.glyphFont;var e=_.filter(v[c.glyphFont].glyphs,(function(e){return(!c.filter||e.name.includes(c.filter))&&"skip"!=e.name}));return p("div",{className:"mapp-icons-edit-glyph-list",style:{color:c.glyphColor,fontFamily:c.glyphFont}},_.map(e,(function(e,t){return p("div",{className:"mapp-icons-edit-glyph-wrapper"+(c.glyph==e.name?" mapp-selected":""),key:t,onClick:function(){return h({glyph:c.glyph==e.name?null:e.name})}},p("span",{className:"mapp-icons-edit-glyph"},String.fromCharCode(e.codepoint)),p("div",{className:"mapp-icons-edit-glyph-title"},e.name))})))}()),p("div",{className:"mapp-icons-edit-toolbar"},p("div",null,p(g,{isPrimary:!0,onClick:function(){return w("edit-save")}},__("Save")),p(g,{isSecondary:!0,onClick:function(){return w("edit-cancel")}},__("Cancel"))),p(y,{accept:"image/*",icon:"upload",multiple:!0,onChange:function(e){w("edit-upload",e.target.files)}},__("Upload icons"))))))}},800:function(e,t,n){"use strict";n.r(t);var o=n(557);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}window.mapp;var c=wp.element.createElement,p=wp.element,u=(p.Fragment,p.useEffect,p.useLayoutEffect,p.useRef,p.useState),m=wp.components;m.Button,m.Dashicon,m.Modal;function d(e){var t=l(u({mapid:null}),2),n=t[0],a=t[1];return c(o.default,{context:"mce",mapid:n.mapid,onAction:function(t,n){switch(t){case"pick-close":o={mapid:null},a((function(e){return i(i({},e),o)})),e.onAction("pick-close",n);break;case"pick-insert":e.onAction("pick-insert",n)}var o}})}window.parent&&(window.mappIframeRender=function(e){wp.element.render(c(d,e),document.getElementById("mapp-iframe-react"))}),function(e){function t(){var t=this;this.contentWindow=null,this.iframe=null;e(".mapp-iframe-button").on("click",(function(e){e.preventDefault(),t.open()}))}t.prototype={load:function(t){var n=this;if(this.iframe)return this.iframe.show(),void t();this.iframe=e('<iframe class="mapp-iframe" allowtransparency="true"></iframe>').appendTo("body"),e("iframe").on("load",(function(){t()})),e.get(mappl10n.options.ajaxurl,{action:"mapp_iframe",nonce:mappl10n.options.nonce},(function(e){n.contentWindow=n.iframe.get(0).contentWindow,n.contentWindow.document.open("text/html","replace"),n.contentWindow.document.write(e),n.contentWindow.document.close()}))},open:function(){var e=this;this.load((function(){e.contentWindow&&e.contentWindow.mappIframeRender&&e.contentWindow.mappIframeRender({onAction:function(t,n){return e.onAction(t,n)}})}))},onAction:function(e,t){switch(e){case"pick-close":this.iframe.hide();break;case"pick-insert":var n='[mappress mapid="'+t+'"]';"undefined"==typeof wpActiveEditor?alert(mappl10n.need_classic):send_to_editor(n),this.iframe.hide()}}},e(".mapp-iframe-button").length&&new t(this)}(jQuery)},938:function(e,t,n){"use strict";n.r(t);var o=n(557);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}window.mapp;var r=wp.element.createElement,l=wp.element,s=(l.Fragment,l.render,l.useEffect),c=(l.useLayoutEffect,l.useRef,l.useState),p=wp.components;p.Button,p.Modal;document.getElementById("mapp-library")&&(mappl10n.options.postid=0,wp.element.render(r((function(e){var t=a(c({mapid:null}),2),n=t[0];return t[1],s((function(){}),[]),r(o.default,{context:"library",mapid:n.mapid,onAction:function(e,t){switch(e){case"pick-shortcode":var n=jQuery("<input>");jQuery("body").append(n),n.val('[mappress mapid="'+t+'"]').select(),document.execCommand("copy"),n.remove(),alert((o="Shortcode copied",wp.i18n.__(o,"mappress-google-maps-for-wordpress")))}var o}})})),document.getElementById("mapp-library")))},816:function(e,t,n){"use strict";n.r(t);var o=n(429),a=n(557);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var p=window.mapp||{},u=wp.element.createElement,m=wp.element,d=m.Fragment,f=m.useEffect,h=(m.useLayoutEffect,m.useRef),g=m.useState,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function y(e){var t=wp.components,n=(t.BaseControl,t.Button),i=(t.ButtonGroup,t.CheckboxControl,t.Dropdown,t.Modal,t.Panel,t.PanelBody),l=(t.PanelRow,t.Placeholder),c=(t.RadioControl,t.SelectControl,t.TextControl,t.ToggleControl,t.Toolbar),m=t.ToolbarButton,y=(t.ToolbarGroup,wp.blockEditor),b=y.BlockControls,v=y.InspectorControls,w=s(g({isOpen:!1,map:null,mapdata:null,pickerMode:"list",pickerMapid:null}),2),O=w[0],k=w[1],C=h(null);function S(e){k((function(t){return r(r({},t),e)}))}function P(t,n){switch(t){case"add":S({isOpen:!0,pickerMapid:null,pickerMode:"edit"}),e.setAttributes({center:void 0,zoom:void 0});break;case"change-settings":e.setAttributes(n);break;case"edit":S({isOpen:!0,pickerMapid:e.attributes.mapid,pickerMode:"edit"});break;case"edit-close":S({isOpen:!1});break;case"pick-destroy":e.setAttributes({mapid:void 0,center:void 0,zoom:void 0,width:void 0,height:void 0}),S({isOpen:!1});break;case"pick-close":S({isOpen:!1});break;case"pick-insert":case"pick-duplicate":n!=e.attributes.mapid&&e.setAttributes({center:void 0,mapid:n,zoom:void 0}),S({isOpen:!1});break;case"open":S({isOpen:!0,pickerMapid:e.attributes.mapid,pickerMode:"list"})}}function j(){var t=void 0!==t?t:c;return u(b,null,u(t,null,e.attributes.mapid&&u(m,{icon:"edit",label:__("Edit map"),onClick:function(){return P("edit")}}),u(m,{icon:"portfolio",label:__("Map Library"),onClick:function(){return P("open")}})))}function I(){if(O.isOpen)return u(a.default,{mapid:O.pickerMapid,mode:O.pickerMode,onAction:P,type:"post"})}return f((function(){var t=function(t){var n=t.maps[e.attributes.mapid];n&&S({mapdata:n})};return p.store.subscribe(t),function(){return p.store.unsubscribe(t)}})),f((function(){e.attributes.mapid&&p.store.fetchMap({mapid:e.attributes.mapid,failure:function(){return S({mapdata:void 0})}})}),[e.attributes.mapid]),f((function(){var t;e.attributes.mapid&&C.current&&O.mapdata&&((t=new p.Map(O.mapdata,{alignment:e.attributes.align,center:e.attributes.center,height:e.attributes.height,mapOpts:{mapTypeControl:!1,streetViewControl:!1},poiList:e.attributes.poiList,sel:jQuery(C.current),width:e.attributes.width,zoom:e.attributes.zoom})).display(),S({map:t}))}),[O.mapdata]),f((function(){"wide"!=e.attributes.align&&"full"!=e.attributes.align||(e.setAttributes({width:"100%"}),O.map&&O.map.setSize({width:"100%"}))}),[e.attributes.align]),e.attributes.preview?u("img",{className:"mapp-gt-preview",src:mappl10n.options.baseurl+"/images/preview.png",width:"100%"}):e.attributes.mapid&&void 0!==O.mapdata?u(d,null,j(),function(){if(!O.map)return null;var t=e.attributes,n=t.align,a=t.center,r=t.height,l=t.poiList,s=t.width,c=t.zoom;return u(v,null,u("div",{className:"mapp-gt-inspector"},u(i,{title:__("Map settings")},u(o.MappSettings,{map:O.map,alignment:n,context:"map",onAction:P,center:a,height:r,poiList:l,width:s,zoom:c}))))}(),u("div",{className:"mapp-gt",ref:C}),I()):u(d,null,u(d,null,j(),u(l,{className:"mapp-gt-placeholder",icon:"location",label:__("MapPress Map"),instructions:__("Use the map library to create a new map or insert an existing map.")},u(n,{icon:"portfolio",isSecondary:!0,onClick:function(){return P("open")}},__("Map Library")))),I())}wp.blocks.registerBlockType("mappress/map",{title:__("MapPress Map"),icon:"location",description:__("Insert a map"),category:"mappress",attributes:{center:{type:"string"},height:{type:"string",default:""},initialOpenDirections:{type:"boolean"},mapid:{type:"string"},mapOpts:{type:"object"},poiList:{type:"boolean"},preview:{type:"boolean",default:!1},width:{type:"string",default:""},zoom:{type:"number"}},supports:{align:["full","wide","center","left","right"]},transforms:{from:[{type:"shortcode",tag:"mappress",attributes:{center:{type:"string",shortcode:function(e){return e.named.center}},height:{type:"string",shortcode:function(e){return e.named.height}},initialOpenDirections:{type:"boolean",shortcode:function(e){return"true"==e.named.initialOpenDirections||"true"==e.named.initialopendirections}},mapid:{type:"string",shortcode:function(e){return e.named.mapid}},poiList:{type:"boolean",shortcode:function(e){return"true"==e.named.poiList||"true"==e.named.poilist}},width:{type:"string",shortcode:function(e){return e.named.width}},zoom:{type:"number",shortcode:function(e){return parseInt(e.named.zoom)?parseInt(e.named.zoom):null}}}},{type:"block",blocks:["core/shortcode"],isMatch:function(e){var t=e.text,n=wp.shortcode.regexp("mappress");return n.lastIndex=0,n.test(t)},transform:function(e){var t=e.text;return wp.blocks.rawHandler({HTML:"<p>"+t+"</p>",mode:"BLOCKS"})}}]},edit:function(e){return u(y,e)},save:function(e){return e},example:{attributes:{preview:!0}}})},186:function(e,t,n){"use strict";n.r(t);n(429);wp.element.createElement;var o=wp.element,a=(o.Fragment,o.useEffect,o.useLayoutEffect,o.useRef,o.useState,wp.components);a.BaseControl,a.Button,a.CheckboxControl,a.Panel,a.PanelBody,a.PanelRow,a.Spinner,a.TextControl;n(308);window.mapp,wp.element.createElement;var i=wp.element,r=(i.Fragment,i.useEffect,i.useLayoutEffect,i.useRef,i.useState,wp.components);r.BaseControl,r.Button,r.ButtonGroup,r.Card,r.CardBody,r.CardFooter,r.CardHeader,r.CheckboxControl,r.ExternalLink,r.HorizontalRule,r.Panel,r.PanelBody,r.PanelRow,r.Placeholder,r.RadioControl,r.SelectControl,r.TabPanel,r.TextControl,r.TextareaControl,r.ToggleControl,r.Toolbar,wp.data.useSelect},498:function(e,t,n){"use strict";n.r(t);var o=n(557);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}window.mapp;var c=wp.element.createElement,p=wp.element,u=p.Fragment,m=(p.useEffect,p.useLayoutEffect,p.useRef,p.useState),d=wp.components,f=(d.Button,d.Dashicon),__=(d.Modal,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function h(){var e=l(m({isOpen:!1,mapid:null}),2),t=e[0],n=e[1];function a(e){n((function(t){return i(i({},t),e)}))}function r(e,t){switch(e){case"pick-close":a({isOpen:!1,mapid:null});break;case"pick-insert":a({isOpen:!1});var n='[mappress mapid="'+t+'"]';"undefined"==typeof wpActiveEditor?__("Please select the post content to insert the map into."):send_to_editor(n);break;case"open":a({isOpen:!0,mapid:s()})}}function s(){var e=tinyMCE?tinyMCE.get("content"):null,t=e&&e.selection?e.selection.getSel():null;if(!t||void 0===t.anchorOffset||!t.anchorNode||!t.anchorNode.data)return null;for(var n=null,o=t.anchorNode.data,a=-1,i=t.anchorOffset-1;i>=0;i--){var r=o[i];if("["==r){a=i;break}if("]"==r||"<"==r||">"==r)break}return a>=0&&(n=wp.shortcode.next("mappress",o,a))?n.shortcode.attrs.named.mapid:null}return c(u,null,c("button",{className:"button",onClick:function(e){e.preventDefault(),r("open")}},c(f,{className:"wp-media-buttons-icon",icon:"location"}),__("MapPress")),t.isOpen&&c(o.default,{context:"mce",mapid:t.mapid,onAction:r}))}Array.from(document.getElementsByClassName("mapp-mce")).forEach((function(e,t){return wp.element.render(c(h),e)}))},218:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o=n(824),a=n(143);function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var m=wp.element.createElement,d=wp.element,f=d.Fragment,h=d.useEffect,g=(d.useLayoutEffect,d.useCallback,d.useRef),y=d.useState,b=wp.data.useSelect,v=wp.components,w=v.Button,O=v.Dashicon,k=v.ExternalLink,__=(v.Modal,v.Panel,v.PanelBody,v.PanelRow,v.Popover,v.RadioControl,v.Spinner,v.TabPanel,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function C(e){var t=c(y(l({},mappress_options_state)),2),n=t[0],r=t[1];function s(e){r((function(t){return l(l({},t),e)}))}h((function(){S.current&&new mapp.Map(n.helpers.demo_map,{sel:jQuery(S.current)}).display()}),[]);var p,u,d,v,C,S=g(null);function P(e){return _.map(e,(function(e,t){return{value:t,label:e}}))}function j(e,t){switch(e){case"license-check":mapp.lib.ajax({type:"POST",data:{action:"mapp_license_check",nonce:mappl10n.options.nonce,license:n.license},callback:function(e){e&&"OK"==e.status&&window.location.reload()}});break;case"reset":mapp.lib.ajax({type:"POST",data:{action:"mapp_options_reset",nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status&&window.location.reload()}});break;case"save":mapp.lib.ajax({type:"POST",data:{action:"mapp_options_save",nonce:mappl10n.options.nonce,settings:n},callback:function(e){e&&"OK"==e.status&&window.location.reload()}})}}return m("div",{className:"mapp-options"},m("form",{onSubmit:function(e){e.preventDefault(),j("save")}},m(o.$0,{title:__("Sample Map"),className:"mapp-demo-section"},m("div",{className:"mapp-options-demo",ref:S})),m(o.$0,{title:__("Basic Settings")},m(o.Tr,{title:__("Mapping API"),options:[{label:"Leaflet",value:"leaflet"},{label:"Google",value:"google"}],onChange:function(e){return s({engine:e,geocoder:"google"==e?"google":""})},checked:n.engine,help:{href:"#toc-picking-a-mapping-api",text:__("Leaflet is free and requires no API key.  Google requires an API key and has strict usage limits.")}}),"leaflet"==n.engine&&m(o.II,{title:__("Mapbox access token"),value:n.mapbox,onChange:function(e){s({mapbox:e}),"mapbox"!=n.geocoder||e||s({geocoder:""})},size:50,placeholder:__("Enter token to use Mapbox features"),help:{href:"https://www.mapbox.com/help/define-access-token/"}}),"google"==n.engine&&m(o.II,{title:__("Google API key"),name:"apiKey",value:n.apiKey,onChange:function(e){return s({apiKey:e})},size:50,help:{href:"https://mappresspro.com/mappress-faq/#toc-google-maps-api-keys"}}),"leaflet"==n.engine&&(C=[{value:"",label:__("Algolia")},{value:"nominatim",label:"Nominatim"},{value:"mapbox",label:"MapBox",disabled:!n.mapbox}],m(o.Tr,{title:__("Geocoder"),options:C,checked:n.geocoder,onChange:function(e){return s({geocoder:e})},help:{href:"#toc-picking-a-geocoder"}}))),mappl10n.options.pro&&(!n.helpers.is_multisite||n.helpers.is_super_admin||n.helpers.is_main_site)&&m(o.$0,{title:__("License")},m(o.Wx,{title:__("MapPress license key")},m(o.II,{value:n.license,onChange:function(e){return s({license:e})},size:37,placeholder:__("Enter license to enable automatic updates")}),(v=m("a",{className:"mapp-license-status",href:"https://mappresspro.com/account",target:"_blank"},__("Get license")),n.license&&n.helpers.license_status?"active"==n.helpers.license_status?m("span",{className:"mapp-license-status"},m(O,{icon:"yes"}),__("Active")):m(f,null,m(w,{className:"mapp-options-check-license",isSecondary:!0,onClick:function(){return j("license-check")}},__("Check now")),m("div",null,m(O,{icon:"no"}),n.helpers.license_message)):v)),m(o.XZ,{title:__("Beta versions"),label:__("Enable updates for beta versions"),checked:n.betas,onChange:function(e){return s({betas:e})}})),m(o.$0,{title:__("Map Settings")},m(o.xI,{title:__("Post types"),values:n.postTypes,options:P(n.helpers.post_types),onChange:function(e){return s({postTypes:e})}}),m(o.Tr,{title:__("Automatic display"),options:[{value:"",label:__("None")},{value:"top",label:__("Top of post")},{value:"bottom",label:__("Bottom of post")}],checked:n.autodisplay,onChange:function(e){return s({autodisplay:e})}}),m(o.Tr,{title:__("Map alignment"),options:[{value:"",label:__("Default")},{value:"center",label:__("Center")},{value:"left",label:__("Left")},{value:"right",label:__("Right")}],checked:n.alignment,onChange:function(e){return s({alignment:e})}}),m(o.Tr,{title:__("Directions"),checked:n.directions,options:[{value:"google",label:"Google"},{value:"inline",label:__("Inline")}],onChange:function(e){return s({directions:e})}}),m(o.XZ,{title:__("POI list"),checked:n.poiList,label:__("Show a list of POIs with each map"),onChange:function(e){return s({poiList:e})}}),mappl10n.options.pro&&m(o.Tr,{title:__("POI list layout"),checked:n.directions,options:[{value:"left",label:"Left of map"},{value:"inline",label:__("Below map")}],onChange:function(e){return s({directions:e})}}),m(o.II,{title:__("Mini width"),value:n.mini,onChange:function(e){return s({mini:e})},size:3,label:__("Width (px) to hide the POI list")}),m(o.XZ,{title:__("Sort"),checked:n.sort,label:__("Sort POI list by title"),onChange:function(e){return s({sort:e})}})),m(o.$0,{title:__("POI Settings")},m(o.Ph,{title:__("Default zoom"),label:__("Default zoom when displaying a single POI"),value:n.poiZoom,options:_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],(function(e){return{value:e,label:e}})),onChange:function(e){return s({zoom:e})}}),m(o.XZ,{title:__("Hover"),checked:n.tooltips,label:__("Open POIs on hover"),onChange:function(e){return s({tooltips:e})}}),m(o.XZ,{title:__("Open first POI"),checked:n.initialOpenInfo,onChange:function(e){return s({initialOpenInfo:e})},label:__("Open first POI")}),m(o.XZ,{title:__("Clustering"),checked:n.clustering,label:__("Enable marker clustering"),onChange:function(e){return s({clustering:e})}})),mappl10n.options.pro&&m(o.$0,{title:__("Mashups")},m(o.XZ,{title:__("Search"),checked:n.search,label:__("Enable search"),onChange:function(e){return s({search:e})}}),m(o.Ph,{title:__("Filter"),value:n.filter,options:P(n.helpers.taxonomies),onChange:function(e){return s({filter:e})},placeholder:""}),m(o.Tr,{title:__("Marker click"),checked:n.mashupClick,options:[{value:"poi",label:__("Open popup")},{value:"post",label:__("Open post")},{value:"postnew",label:__("Post in new tab")},{value:"postmodal",label:__("Post in modal")}],onChange:function(e){return s({mashupClick:e})}}),m(o.Tr,{title:__("Popup content"),checked:n.mashupBody,options:[{value:"poi",label:__("POI title + POI body")},{value:"post",label:__("Post title + post excerpt")}],onChange:function(e){return updatestate({mashupBody:mashupBody,val:e})}}),m(o.XZ,{title:__("KMLs"),checked:n.mashupKml,label:__("Include KML POIs in mashups"),onChange:function(e){return s({mashupKml:e})}})),mappl10n.options.pro&&m(o.$0,{title:__("Icons")},m(o.Wx,{title:__("Default icon")},m(a.G,{iconid:n.defaultIcon,onChange:function(e){mappl10n.options.defaultIcon=e,s({defaultIcon:e})}})),m(o.Wx,{title:__("Icon directory")},m("code",null,n.helpers.icon_directory)),m(o.Wx,{title:__("Highlight selected POI")},m(o.Tr,{checked:n.highlight,options:[{value:"",label:__("None")},{value:"circle",label:__("Circle")},{value:"scale",label:__("Scale")},{value:"icon",label:__("Icon")}],onChange:function(e){return s({highlight:e})}}),"icon"==n.highlight&&m(a.G,{defaultIcon:n.defaultIcon,iconid:n.highlightIcon,onChange:function(e){return s({highlightIcon:e})}})),(d=n.iconScale&&Array.isArray(n.iconScale)?i(n.iconScale):[0,0],m(o.Wx,{title:__("Icon scaling")},m(o.II,{value:d[0]?d[0]:"",onChange:function(e){e<=64&&(d[0]=e,s({iconScale:d}))},type:"number",min:0,max:64}),m("span",null," X "),m(o.II,{value:d[1]?d[1]:"",onChange:function(e){e<=64&&(d[1]=e,s({iconScale:d}))},type:"number",min:0,max:64}),m("span",null," (px) "))),function(){var e=P(n.helpers.taxonomies);e.unshift({value:"post_type",label:__("Post type")});var t=b((function(e){if("post_type"==n.autoicons.key)return P(n.helpers.post_types);var t=wp.data.select("core").getEntityRecords("taxonomy",n.autoicons.key,{per_page:-1,_fields:"id,name"});return t?t.map((function(e){return{value:e.id,label:e.name}})):null}),[n.autoicons.key]);return m(o.Wx,{title:__("Automatic icons")},m(o.Ph,{value:n.autoicons?n.autoicons.key:null,options:e,onChange:function(e){var t=n.autoicons?l({},n.autoicons):[];t.key=e,t.values=[],s({autoicons:t})},placeholder:""}),m(o.WM,{cols:[{id:"key",label:__("Key"),type:"select",options:t},{id:"value",label:__("Icon"),type:"icon"}],data:n.autoicons.values,onChange:function(e){var t=n.autoicons?l({},n.autoicons):[];t.values=e,s({autoicons:t})}}))}()),mappl10n.options.pro&&m(o.$0,{title:__("Styled Maps")},"leaflet"==n.engine&&m(o.Wx,{title:__("Styled maps")},m("div",null,__("Enter styles from Mapbox Studio"),m(k,{href:"https://www.mapbox.com/mapbox-studio/"})),m(o.WM,{cols:[{id:"key",label:__("Style name"),size:10},{id:"value",label:__("MapBox Share URL")}],data:n.mapboxStyles,onChange:function(e,t){return s({mapboxStyles:e,style:t})},selectionColumn:"key",selectionType:"checkbox",selected:n.style})),"google"==n.engine&&m(o.Wx,{title:__("Styled maps")},m("div",null,__("Enter styles from Snazzy Maps"),m(k,{href:"https://snazzymaps.com/explore"})),m(o.WM,{cols:[{id:"key",label:__("Style name"),size:10},{id:"value",label:__("JSON"),type:"json"}],data:n.styles,onChange:function(e,t){return s({styles:e,style:t})},selectionColumn:"key",selectionType:"checkbox",selected:n.style}))),mappl10n.options.pro&&m(o.$0,{title:__("Geocoding")},m(o.Wx,{title:__("Geocoding fields")},m(o.WM,{cols:[{id:"key",label:__("Map field"),type:"select",options:P(n.helpers.meta_fields)},{id:"value",label:__("Custom field"),type:"select",options:P(n.helpers.meta_keys)}],data:n.metaKeys,onChange:function(e){return s({metaKeys:e})}})),m(o.XZ,{title:__("Overwrite"),label:__("Overwrite maps when posts are saved"),checked:n.metaSyncSave,onChange:function(e){s({metaSyncSave:e})}}),(u=__("No errors found"),n.helpers.geocoding_errors&&n.helpers.geocoding_errors.length>0&&(u=_.map(n.helpers.geocoding_errors,(function(e){return m("div",{key:e.ID},m("a",{href:mappl10n.options.editurl+"?post="+e.ID+"&action=edit"},e.post_title),m("span",null," : "+e.error))}))),m(o.Wx,{title:__("Geocoding errors")},u)),"google"==n.engine&&m(o.II,{title:__("Google Server API key"),name:"apiKeyServer",value:n.apiKeyServer,onChange:function(e){return s({apiKeyServer:e})},size:50,help:{text:__("Key secured by IP address for geocoding custom fields (optional)"),href:"https://mappresspro.com/mappress-faq"}})),mappl10n.options.pro&&m(o.$0,{title:__("Templates")},m(o.Wx,{title:__("Custom templates")},m(o.Nb)),m(o.XZ,{title:__("Mashup thumbnails"),checked:n.thumbs,label:__("Show featured image thumbnails in mashup popups and lists"),onChange:function(e){return s({thumbs:e})}}),m(o.Wx,{title:__("Thumbnail size")},m(o.Ph,{onChange:function(e){return s({thumbSize:e})},options:P(n.helpers.thumbnail_sizes),value:n.thumbSize}),m("span",null," "+__("or")+" "),m(o.II,{value:n.thumbWidth,onChange:function(e){return s({thumbWidth:e})},type:"number",min:0,max:9999}),m("span",null," X "),m(o.II,{value:n.thumbHeight,onChange:function(e){return s({thumbHeight:e})},type:"number",min:0,max:9999}),m("span",null," (px) "))),m(o.$0,{title:__("Localization")},(p="leaflet"==n.engine?"https://en.wikipedia.org/wiki/ISO_639-1":"http://code.google.com/apis/maps/faq.html#languagesupport",m(o.Ph,{title:__("Search language"),value:n.language,options:P(n.helpers.languages),onChange:function(e){return s({language:e})},help:{text:__("Language for searches and Google map controls"),href:p}})),m(o.Ph,{title:__("Search country"),label:__("Country code for searches"),value:n.country,options:_.map(["","AF","AX","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","VG","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CK","CR","HR","CU","CW","CY","CZ","CD","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","CI","JM","JP","JE","JO","KZ","KE","KI","XK","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","AN","NC","NZ","NI","NE","NG","NU","NF","KP","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","CG","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","KR","SS","ES","LK","SD","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","VI","UG","UA","AE","GB","US","UM","UY","UZ","VU","VA","VE","VN","WF","EH","YE","ZM","ZW"],(function(e){return{value:e,label:e}})),onChange:function(e){return s({country:e})},help:{href:"https://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements"}}),m(o.II,{title:__("Directions server"),value:n.directionsServer,onChange:function(e){return s({directionsServer:directionsServer,val:e})},size:25})),m(o.$0,{title:__("Miscellaneous")},m(o.Wx,{title:__("Map sizes")},m(o.WM,{cols:[{id:"width",label:__("Width")+" (px, %, vw)",size:4},{id:"height",label:__("Height")+" (px, %, vh)"}],data:n.sizes,onChange:function(e,t){return s({sizes:e,size:t})},selectionColumn:"rowid",selected:n.size})),n.helpers.jetpack?null:m(o.XZ,{title:__("Scripts"),checked:n.footer,label:__("Output scripts in footer"),onChange:function(e){return s({footer:e})},help:{text:__("Disable footer scripts if maps are output using AJAX")}}),m(o.XZ,{title:"WPML",checked:n.wpml,label:__("Copy maps when overwriting a translation"),onChange:function(e){return s({wpml:e})},help:{href:"https://mappresspro.com/mappress-documentation#wpml"}}),"google"==n.engine&&m(o.XZ,{title:__("Compatiblity"),checked:n.deregister,label:__("Prevent other plugins/themes from loading the Google Maps API"),onChange:function(e){return s({deregister:e})}})),m("div",{className:"mapp-options-toolbar"},m(w,{className:"mapp-options-save",type:"submit",isPrimary:!0},__("Save")),m(w,{isSecondary:!0,onClick:function(){return j("reset")}},__("Reset Defaults")))))}document.getElementById("mapp-options-settings")&&wp.element.render(m(C),document.getElementById("mapp-options-settings"))},824:function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,{XZ:function(){return k},xI:function(){return C},II:function(){return P},Tr:function(){return I},Ph:function(){return M},$0:function(){return E},Wx:function(){return x},WM:function(){return N},Nb:function(){return D}});var u=wp.element.createElement,m=wp.element,d=m.Fragment,f=m.useEffect,h=(m.useLayoutEffect,m.useCallback),g=(m.useRef,m.useState),y=(wp.data.useSelect,wp.components),b=y.Button,v=(y.ColorPicker,y.Dashicon),w=(y.Dropdown,y.ExternalLink,y.Modal),O=(y.Panel,y.PanelBody,y.PanelRow,y.Popover,y.RadioControl,y.Spinner,y.TabPanel),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function k(e){var t=e.title,n=e.label,o=e.onChange,a=e.help,i=p(e,["title","label","onChange","help"]),r=u(d,null,u("label",null,u("input",s({type:"checkbox",onChange:function(e){o&&o(e.target.checked)}},i)),n&&u("span",{className:"mapp-option-label"},n)),a&&u(S,a));return t?u(x,{title:t},r):r}function C(e){var t=u(d,null,_.map(e.options,(function(t,n){var o=e.values?e.values.indexOf(t.value):-1;return u(k,{key:n,label:t.label,value:t.value,checked:o>=0,onChange:function(n){var i=a(e.values);n&&-1==o&&e.onChange(i.concat(t.value)),!n&&o>=0&&(i.splice(o,1),e.onChange(i))}})})),e.help&&u(S,e.help));return e.title?u(x,{title:e.title},t):t}function S(e){var t=null;return e.href&&(t="#"==e.href.substr(0,1)?"https://mappresspro.com/mappress-documentation/"+e.href:e.href),u(d,null,t&&u("a",{className:"mapp-help-link",href:t,target:"_blank"},u(v,{icon:"editor-help"})),e.text&&u("div",{className:"mapp-help-text"},e.text))}function P(e){var t=e.title,n=e.value,o=e.label,a=e.onChange,i=e.help,r=e.type,l=p(e,["title","value","label","onChange","help","type"]),c=u(d,null,u("input",s({value:null!==n?n:"",onChange:function(e){return a(e.target.value.trim())},type:r||"text"},l)),o&&u("span",{className:"mapp-option-label"},o),i&&u(S,i));return t?u(x,{title:t},c):c}var j=function(e){var t=e.onChange,n=e.label,o=p(e,["onChange","label"]);return u("label",null,u("input",s({type:"radio",onChange:function(e){return t(e.target.value)}},o)),n&&u("span",{className:"mapp-option-label"},n))};function I(e){var t=u(d,null,_.map(e.options,(function(t,n){return u(j,{key:n,value:t.value,checked:e.checked==t.value,onChange:function(t){return e.onChange(t)},disabled:t.disabled,label:t.label})})),e.help&&u(S,e.help));return e.title?u(x,{title:e.title},t):t}function M(e){var t=e.title,n=e.value,o=e.label,a=e.onChange,i=e.options,r=e.help,l=e.placeholder,c=p(e,["title","value","label","onChange","options","help","placeholder"]);void 0!==l&&i.unshift({value:"",label:l});var m=u(d,null,u("select",s({value:null!==n?n:"",onChange:function(e){return a(e.target.value)}},c),_.map(i,(function(e,t){return u("option",{key:t,value:e.value},e.label)}))),o&&u("span",{className:"mapp-option-label"},o),r&&u(S,r));return t?u(x,{title:t},m):m}function A(e){var t=e.title,n=e.onChange,o=e.label,a=e.help,i=p(e,["title","onChange","label","help"]),r=u(d,null,u("textarea",s({onChange:function(e){return n(e.target.value)}},i)),o&&u("span",{className:"mapp-option-label"},o),a&&u(S,a));return t?u(x,{title:t},r):r}function E(e){var t=e.className?" "+e.className:"";return u("div",{className:"mapp-option-section"+t},u("h2",null,e.title),e.children)}function x(e){return u("div",{className:"mapp-option"},u("div",{className:"mapp-option-title"},e.title),u("div",{className:"mapp-option-value"},e.children))}function N(e){var t,n,i=o(g({dragging:null,dragover:null}),2),r=i[0],l=i[1];function c(e){l((function(t){return s(s({},t),e)}))}function p(t,n){var o=a(e.data);switch(t){case"add":var i={};_.map(e.cols,(function(e){i[e.id]=""})),o.push(i),e.onChange(o,e.selected);break;case"change":o[n.i][n.id]=n.value,e.onChange(o,e.selected);break;case"delete":var l;o.splice(n,1),l=n==e.selected?null:n<e.selected?e.selected-1:e.selected,e.onChange(o,l);break;case"select":c({selected:n}),e.onChange(o,n);break;case"sort":var s=r.dragging,p=s<p?n-1:n;o.splice(p,0,o.splice(s,1)[0]),e.onChange(o,p),c({dragover:null})}}return f((function(){}),[]),u("div",{className:"mapp-grid"},e.data&&!!e.data.length&&u("div",{className:"mapp-grid-table"},(t=e.selectionColumn?u("div",{className:"mapp-grid-cell",key:"select"},__("Default")):null,n=u("div",{className:"mapp-grid-cell",key:"actions"},""),u("div",{className:"mapp-grid-header"},u("div",{className:"mapp-grid-row"},t,_.map(e.cols,(function(e){return u("div",{className:"mapp-grid-cell",key:e.id},e.label)})),n))),u("div",{className:"mapp-grid-body"},_.map(e.data,(function(t,n){return function(t,n){return u("div",{className:"mapp-grid-row"+(r.dragover==n?" mapp-dragover":""),draggable:!0,key:n,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){return c({dragging:n})},onDragEnter:function(e){return c({dragover:n})},onDragEnd:function(e){return c({dragging:null,dragover:null})},onDrop:function(e){return p("sort",n)}},function(t,n){if(!e.selectionColumn)return null;var o,a;switch("rowid"==e.selectionColumn?o=n:t[e.selectionColumn]?o=t[e.selectionColumn]:a=!0,e.selectionType){case"checkbox":return u("div",{className:"mapp-grid-cell"},u(k,{value:o,checked:e.selected==o,disabled:a,onChange:function(e){p("select",e?o:null)}}));case"radio":default:return u("div",{className:"mapp-grid-cell"},u(j,{checked:e.selected==o,onChange:function(){return p("select",o)}}))}}(t,n),_.map(e.cols,(function(t,o){return u("div",{className:"mapp-grid-cell",key:n+"-"+o},function(t,n){switch(n.type){case"icon":return u(MappIconPicker,{iconid:e.data[t][n.id],onChange:function(e){return p("change",{i:t,id:n.id,value:e})}});case"json":return u(A,{className:"mapp-option-expando",value:e.data[t][n.id],onChange:function(e){return p("change",{i:t,id:n.id,value:e})}});case"select":return u(M,{key:t+"-"+n.id,value:e.data[t][n.id],options:n.options,onChange:function(e){p("change",{i:t,id:n.id,value:e})}});case"input":default:return u(P,{key:t+"-"+n.id,size:e.data[t][n.size],value:e.data[t][n.id],onChange:function(e){return p("change",{i:t,id:n.id,value:e})}})}}(n,t))})),function(e){return u("div",{className:"mapp-grid-cell",key:"delete"},u(b,{icon:"trash",onClick:function(){return p("delete",e)}}))}(n))}(t,n)})))),u("div",{className:"mapp-grid-toolbar"},u(b,{isSecondary:!0,onClick:function(){return p("add")}},__("Add"))))}function D(e){var t=o(g({codeEditor:null,isOpen:!1,name:null,tab:"editor",template:null,tokens:null}),2),n=t[0],a=t[1];function i(e){a((function(t){return s(s({},t),e)}))}var r,l,c=h((function(e){if(null!=e){var t=wp.codeEditor.initialize(e);t.codemirror.setSize("auto","auto"),t.codemirror.setOption("readOnly","editor"!=n.tab),i({codeEditor:t})}}),[]);function p(e,t){switch(e){case"close":i({isOpen:!1});break;case"delete":confirm(mappl10n.delete_prompt)&&(mapp.lib.ajax({type:"POST",data:{action:"mapp_tpl_delete",name:n.template.name,nonce:mappl10n.options.nonce}}),i({isOpen:!1}));break;case"insert":var o=n.codeEditor.codemirror.getDoc(),a=o.getCursor();o.replaceRange("{{{poi."+t+"}}}",a);break;case"open":mapp.lib.ajax({type:"GET",data:{action:"mapp_tpl_get",name:t,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status&&i({isOpen:!0,name:t,tab:"editor",template:e.data.template,tokens:e.data.tokens})}});break;case"save":var r="editor"==n.tab?n.codeEditor.codemirror.getValue():n.template.content;mapp.lib.ajax({type:"POST",data:{action:"mapp_tpl_save",content:r,name:n.template.name,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status&&i({isOpen:!1,template:null,tokens:null})}});break;case"tab-select":if("editor"!=t){var l=s({},n.template);l.content=n.codeEditor.codemirror.getValue(),i({template:l})}i({tab:t})}}return u("div",{className:"mapp-templates"},(l=[{name:"map-popup",label:__("Map popup")},{name:"map-item",label:__("Map list item")},{name:"mashup-popup",label:__("Mashup popup")},{name:"mashup-item",label:__("Mashup list item")}],u("div",{className:"mapp-templates-list"},_.map(l,(function(e,t){return u("a",{href:"#",key:e.name,className:"mapp-templates-item",onClick:function(t){t.preventDefault(),p("open",e.name)}},e.label)})))),n.isOpen&&n.template?u(w,{title:(r=n.template.name+" ("+(n.template.exists?__("Custom"):__("New"))+")",u("div",{className:"mapp-templates-name"},r)),className:"mapp-templates-modal",onRequestClose:function(){return p("close")},shouldCloseOnClickOutside:!1},u(O,{className:"mapp-templates-tabs",onSelect:function(e){return p("tab-select",e)},tabs:[{name:"editor",title:__("Editor")},{name:"standard",title:__("Default")}]},(function(e){return t=u("div",{className:"mapp-templates-tokens"},_.map(n.tokens,(function(e,t){return u("code",{onClick:function(){return p("insert",e)},key:t,title:e},e)}))),o=u("div",{className:"mapp-templates-path"},n.template.path),u(d,null,"editor"==n.tab&&o,"editor"==n.tab&&t,u("div",{className:"editor"==n.tab?"mapp-templates-editor":"mapp-templates-standard"},u("textarea",{ref:c,defaultValue:"editor"==n.tab?n.template.content:n.template.standard})));var t,o})),u("div",{className:"mapp-templates-toolbar"},u(b,{isPrimary:!0,onClick:function(){return p("save")}},__("Save")),u(b,{isSecondary:!0,onClick:function(){return p("close")}},__("Cancel")),n.template.exists&&u("a",{onClick:function(e){e.preventDefault(),p("delete")}},__("Delete")))):null)}},557:function(e,t,n){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.r(t),n.d(t,{default:function(){return G}});var s=wp.element.createElement,c=wp.url.addQueryArgs,p=wp.element,u=p.useCallback,m=p.useEffect,d=p.useState,f=wp.components,h=(f.Button,f.Dropdown),g=f.Spinner,y=f.TextControl,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function b(e){var t=r(d({results:[],search:"",searchTerm:""}),2),n=t[0],o=t[1];function i(e){o((function(t){return a(a({},t),e)}))}m((function(){wp.apiFetch({path:c("/wp/v2/search",{search:n.search,per_page:20})}).then((function(e){i({results:e})}))}),[n.search]);var l=u(_.debounce((function(e){i({search:e})}),1e3),[]);function p(t,o){return s("div",{className:"mapp-attach-control"},s("div",{className:"mapp-attach-control-toolbar"},s(y,{autoComplete:"false",value:n.searchTerm,onChange:function(e){i({searchTerm:e}),l(e)},placeholder:__("Search")})),n.results?n.results.length?s("div",{className:"mapp-attach-items"},n.results.map((function(t){return s("div",{key:t.id,className:"mapp-attach-item",onClick:function(){e.onChange(t.id,t.title)}},s("div",{className:"mapp-attach-item-title"},t.title?t.title:__("Untitled")),s("div",{className:"mapp-attach-item-type"},t.type))}))):s("div",{},__("No posts found")):s(g,null))}return s("div",{onClick:function(e){return e.stopPropagation()}},s(h,{renderToggle:function(e){e.isOpen;var t=e.onToggle;return s("a",{href:"#",onClick:t},__("Attach"))},renderContent:function(e){e.isOpen,e.onToggle;return p()}}))}var v=n(999);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var P=window.mapp||{},j=wp.element.createElement,I=wp.data.select,M=wp.element,A=(M.Fragment,M.useEffect),E=(M.useLayoutEffect,M.useRef),x=M.useState,N=wp.components,D=(N.BaseControl,N.Button),T=N.Dashicon,B=N.Modal,L=(N.PanelBody,N.RadioControl),F=N.Spinner,R=N.TextControl,z=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function G(e){var t=C(x({isFetchingItems:!0,items:null,mode:e.mode?e.mode:"list",mapid:e.mapid?e.mapid:null,search:"",type:"all"}),2),n=t[0],o=t[1],a=E(null),i=E(null);function r(e){o((function(t){return O(O({},t),e)}))}function l(e){if("post"==n.type&&e.postid!=mappl10n.options.postid)return!1;var t=n.search.toLowerCase();return!t||(e.mapid.indexOf(t)>=0||(!!(e.post_title&&e.post_title.toLowerCase().indexOf(t)>=0)||!!(e.map_title&&e.map_title.toLowerCase().indexOf(t)>=0)))}function s(t,o){switch(t){case"attach":P.store.mutateMap({mapdata:o});break;case"add-new":r({mode:"edit",mapid:null});break;case"change-type":r({type:o});break;case"close":e.onAction("pick-close");break;case"duplicate":P.store.duplicateMap({mapid:o,success:function(e){alert(z("Map copied")),r({mapid:e.mapid}),jQuery(".mapp-pick-items").scrollTop(0)}});break;case"destroy":confirm(mappl10n.delete_map_prompt)&&(P.store.destroyMap({mapid:o}),o==n.mapid&&e.onAction("pick-destroy",o)),a.current.focus();break;case"edit":r({mode:"edit",mapid:o});break;case"edit-close":"edit"==e.mode?e.onAction("pick-close"):r({mode:"list"});break;case"edit-destroy":r({mode:"list",mapid:null}),e.onAction("pick-destroy",o);break;case"edit-save":"edit"==e.mode?e.onAction("pick-close",o):r({mode:"list",mapid:o});break;case"insert":e.onAction("pick-insert",o);break;case"shortcode":e.onAction("pick-shortcode",o);break;case"sort":P.store.setSort({sortBy:o,sortAsc:P.store.state.sortBy!=o||!P.store.state.sortAsc})}}function c(t){var o,a,r,l=t.mapid==n.mapid;a=t.post_title,o=t.map_title?t.map_title:z("Untitled"),("map"==e.context||"mashup"==e.context&&t.postid==mappl10n.options.postid)&&(a=I("core/editor").getEditedPostAttribute("title")),a=a||z("Untitled"),t.postid>0&&t.postid==mappl10n.options.postid&&(a=z("Current post")),r=t.postid>0?t.postid==mappl10n.options.postid?a:j("a",{href:mappl10n.options.editurl+"?post="+t.postid+"&action=edit",target:"_blank",title:z("Edit post")},a):z("Unattached");var c=[{action:"edit",label:z("Edit")},{action:"insert",label:z("Insert into post")},{action:"duplicate",label:z("Copy")},{action:"shortcode",label:z("Shortcode")},{action:"destroy",label:z("Delete")}];"library"==e.context?c.splice(1,1):c.splice(3,1),c=j("div",{className:"mapp-pick-actions"},c.map((function(e){return j("a",{href:"#",key:e.action,onClick:function(n){n.stopPropagation(),n.preventDefault(),s(e.action,t.mapid)}},e.label)})));var p=null;return p=t.postid>0?j("a",{href:"#",onClick:function(){return s("attach",{mapid:t.mapid,postid:0})}},z("Detach")):"library"==e.context?j(b,{onChange:function(e,n){return s("attach",{mapid:t.mapid,postid:e,post_title:n})}},z("Attach")):j("a",{href:"#",onClick:function(){return s("attach",{mapid:t.mapid,postid:mappl10n.options.postid,post_title:null})}},z("Attach")),j("div",{className:"mapp-pick-item"+(l?" mapp-selected":""),key:t.mapid+"|"+t.postid,ref:l?i:null},j("div",{className:"mapp-pick-col-map_title",onClick:function(e){return s("edit",t.mapid)}},j("div",null,o),j("div",null,c)),j("div",{className:"mapp-pick-col-mapid"},t.mapid),j("div",{className:"mapp-pick-col-post_title"},r,j("div",null,p)))}A((function(){var e=function(e){r({isFetchingItems:e.isFetchingItems,isSavingMap:e.isSavingMap,items:e.items})};return P.store.subscribe(e),function(){return P.store.unsubscribe(e)}})),A((function(){a.current&&a.current.focus(),P.store.fetchItems()}),[]),A((function(){i.current&&P.lib.scrollTo(jQuery(".mapp-pick-items"),jQuery(i.current))}),[n.type,n.items]);var p,u,m=j("div",{className:"mapp-list-panel"},j("div",{className:"mapp-gt-modal-header"},j("div",{className:"mapp-gt-modal-header-title"},j("h1",null,z("Select a map")),j(D,{isPrimary:!0,onClick:function(){return s("add-new")}},z("Add New"))),j(D,{onClick:function(){return s("close")},icon:"no-alt"})),(p="library"==e.context?null:j(L,{className:"mapp-pick-type",options:[{label:z("Attached to this post"),value:"post"},{label:z("All maps"),value:"all"}],onChange:function(e){return s("change-type",e)},selected:n.type}),u=n.isFetchingItems||n.isAttaching&&"library"!=e.context,j("div",{className:"mapp-pick-filter"},u&&j(F,null),j(R,{ref:a,className:"mapp-pick-search",tabIndex:1,label:z("Search"),placeholder:z("post title, map title, or map id"),onChange:function(e){return r({search:e})}}),p)),function(){var e,t=_.filter(n.items,l),o="";return o=n.isFetchingItems?null:t.length?_.map(t,c):j("div",{className:"mapp-pick-message"},z("No maps found")),j("div",{className:"mapp-pick-items"},(e={map_title:z("Map title"),mapid:z("Map ID"),post_title:z("Attached to")},j("div",{className:"mapp-pick-items-header"},_.map(e,(function(e,t){return j("div",{className:"mapp-pick-col-"+t,onClick:function(){return s("sort",t)},key:t},e,P.store.state.sortBy==t&&j(T,{icon:P.store.state.sortAsc?"arrow-up":"arrow-down"}))})))),o)}(),function(){if("library"!=e.context)return j("div",{className:"mapp-pick-toolbar"},j(D,{isSecondary:!0,onClick:function(){return s("close")}},z("Close")))}()),d=null;if("edit"==n.mode){var f=j("div",{className:"mapp-edit-panel"},j(v.default,{context:e.context,mapid:n.mapid,onAction:s}));d="library"==e.context?j(B,{className:"mapp-gt-modal",isDismissible:!1},f):f}var h="mapp-pick mapp-mode-"+n.mode+" mapp-context-"+e.context;return"library"==e.context?j("div",{className:h},m,d):j(B,{className:"mapp-gt-modal "+h,isDismissible:"list"==n.mode,onRequestClose:function(){return s("close")},shouldCloseOnEsc:"list"==n.mode,shouldCloseOnClickOutside:"list"==n.mode},m,d)}},429:function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,o=!1,_e=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,_e=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.r(t),n.d(t,{MappSettings:function(){return g}});window.mapp;var i=wp.element.createElement,r=wp.element,l=r.Fragment,s=(r.useEffect,r.useLayoutEffect,r.useRef,r.useState),c=wp.components,p=c.BaseControl,u=c.Button,m=c.ButtonGroup,d=(c.Dashicon,c.Dropdown,c.ExternalLink,c.Panel,c.PanelBody,c.PanelRow),f=(c.RadioControl,c.SelectControl),h=c.TextControl,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function g(e){var t,n=o(s({}),2);n[0],n[1];function a(e){if(!e||"string"!=typeof e)return e;var t={px:2048,vw:100,vh:100,"%":100},n=parseInt(e),o=2048,a="";for(var i in t)e.includes(i)&&(a=i,o=t[i]);return n>o?o+a:e}function r(t,n){var o=null;switch(t){case"mapTypeId":e.map.set({mapTypeId:n}),o={mapTypeId:n};break;case"poiList":e.map.set({poiList:n}),o={poiList:n};break;case"size":n.hasOwnProperty("height")&&(n.height=a(n.height)),n.hasOwnProperty("width")&&(n.width=a(n.width)),e.map.setSize(n),o=n;break;case"viewport-reset":e.map.center=e.map.zoom=null,e.map.recenter(),o={center:void 0,zoom:void 0};break;case"viewport-set":var i=e.map.getCenter().toJSON();e.map.center=i,e.map.zoom=e.map.getZoom(),o={center:i.lat+","+i.lng,zoom:e.map.getZoom()},"mce"==e.context||"library"==e.context?alert(__("Viewport set")):wp.data.dispatch("core/notices").createNotice("success",__("Viewport set"),{type:"snackbar",isDismissible:!0})}o&&e.onAction("change-settings",o)}return i("div",{className:"mapp-settings"},null,(t=e.map.title?e.map.title:__("Untitled"),i(d,null,"map"==e.context&&i(p,{className:"mapp-settings-title"},t),i(p,{className:"mapp-settings-id",label:__("Map ID")},e.map.mapid))),"mashup"==e.context&&function(){var t=[];if("leaflet"==mappl10n.options.engine)t=mappl10n.options.baseLayers.map((function(e){return{label:e.label,value:e.name}}));else{var n=mappl10n.options.styles?_.keys(mappl10n.options.styles):[];t=["roadmap","satellite","terrain","hybrid"].concat(n).map((function(e){return{label:e.charAt(0).toUpperCase()+e.slice(1),value:e}}))}return t.unshift({label:__("Default"),value:null}),i(f,{className:"mapp-settings-type",help:"",label:__("Map type"),value:e.map.mapTypeId,options:t,onChange:function(e){return r("mapTypeId",e)}})}(),function(){var t=mappl10n.options.sizes[mappl10n.options.size]?mappl10n.options.sizes[mappl10n.options.size]:mappl10n.options.sizes[0],n=mappl10n.options.sizes.map((function(e,t){return{label:e.width+" X "+e.height,height:e.height,width:e.width,value:t+1}}));n.unshift({height:"",label:__("Default"),value:0,width:""}),n.push({label:__("Custom"),value:"custom",disabled:!0});for(var o="custom",a=0;a<n.length-1;a++)n[a].width==e.width&&n[a].height==e.height&&(o=a);return i(l,null,i(f,{className:"mapp-settings-dims-select",help:"",label:__("Size"),value:o,options:n,onChange:function(e){return r("size",{width:n[e].width,height:n[e].height})}}),i(d,null,i(h,{className:"mapp-settings-dims-custom",help:__("px, %, vw"),label:__("Width"),onChange:function(e){return r("size",{width:e})},placeholder:t.width,value:e.width?e.width:""}),i(h,{className:"mapp-settings-dims-custom",help:__("px, %, vh"),label:__("Height"),onChange:function(e){return r("size",{height:e})},placeholder:t.height,value:e.height?e.height:""})))}(),(e.center&&(e.center.lat,e.center.lng,__("Zoom"),e.zoom),i(l,null,i(p,{className:"mapp-settings-viewport",label:__("Center/Zoom")},i(m,{label:__("Center/Zoom")},i(u,{onClick:function(){return r("viewport-reset")},isPressed:!e.center,isSmall:!0},__("Automatic")),i(u,{onClick:function(){return r("viewport-set")},isPressed:e.center,isSmall:!0},__("Set")))))))}},787:function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var i=window.mapp||{};i.Store=function(){this.subs=new Set,this.state={isFetchingMap:!1,isFetchingItems:!1,isSavingMap:!1,itemsFetched:!1,sortBy:"map_title",sortAsc:!0,maps:{},items:[]}},i.Store.prototype={createMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=void 0===t?function(){}:t;this.state.isFetchingMap=!1,this.publish(),n()},destroyMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapid,n=e.success,o=void 0===n?function(){}:n,a=e.failure,r=void 0===a?function(){}:a,l=this;i.lib.ajax({type:"POST",data:{action:"mapp_delete",mapid:t,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status?(delete l.state.maps[t],l.destroyItem(t),o(t)):r(),l.publish()}})},duplicateMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapid,n=e.success,o=void 0===n?function(){}:n,a=e.failure,r=void 0===a?function(){}:a,l=this;this.state.isSavingMap=!0,this.publish(),i.lib.ajax({type:"POST",data:{action:"mapp_duplicate",mapid:t,postid:mappl10n.options.postid,nonce:mappl10n.options.nonce},callback:function(e){if(e&&"OK"==e.status){var t=e.data,n=t.mapid;l.state.maps[n]=t,l.saveItem(t),o(t)}else r();l.state.isSavingMap=!1,l.publish()}})},fetchMap:function(e){var t=e.mapid,n=e.success,o=void 0===n?function(){}:n,a=e.failure,r=void 0===a?function(){}:a,l=this;if(void 0!==this.state.maps[t])return l.publish(),void o(this.state.maps[t]);this.state.isFetchingMap=!0,l.publish(),i.lib.ajax({type:"GET",data:{action:"mapp_get",mapid:t,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status?(l.state.maps[t]=e.data,o(e.data)):r(),l.state.isFetchingMap=!1,l.publish()}})},mutateMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapdata,n=e.success,o=void 0===n?function(){}:n,a=e.failure,r=void 0===a?function(){}:a,l=this;this.state.isSavingMap=!0,this.saveItem(t),this.publish(),i.lib.ajax({type:"POST",data:{action:"mapp_mutate",mapdata:t,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status?(l.state.maps[e.data.mapid]=e.data,o(t)):r(),l.state.isSavingMap=!1,l.publish()}})},saveMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapdata,n=e.success,o=void 0===n?function(){}:n,a=e.failure,r=void 0===a?function(){}:a,l=this;this.state.isSavingMap=!0,this.publish(),i.lib.ajax({type:"POST",data:{action:"mapp_save",mapdata:JSON.stringify(t),nonce:mappl10n.options.nonce},callback:function(e){if(e&&"OK"==e.status){var t=e.data,n=t.mapid;l.state.maps[n]=t,l.saveItem(t),o(t)}else r();l.state.isSavingMap=!1,l.publish()}})},destroyItem:function(e){var t=this.state.items?this.state.items:[],o=_.findIndex(t,{mapid:e});o>-1&&t.splice(o,1),this.state.items=n(t),this.publish()},fetchItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=void 0===t?function(){}:t,o=e.failure,a=void 0===o?function(){}:o,r=this;if(this.state.itemsFetched)return n(this.state.items),void r.publish();this.state.isFetchingItems=!0,r.publish(),i.lib.ajax({type:"GET",data:{action:"mapp_find",nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status?(r.state.items=e.data,r.sort(),n(r.state.items),r.state.itemsFetched=!0):a(),r.state.isFetchingItems=!1,r.sort(),r.publish()}})},saveItem:function(n){var o=this.state.items?this.state.items:[],a=_.findWhere(o,{mapid:n.mapid});a?(a.mapid=void 0!==n.mapid?n.mapid:a.mapid,a.map_title=void 0!==n.title?n.title:a.map_title,a.postid=void 0!==n.postid?n.postid:a.postid,a.post_title=void 0!==n.post_title?n.post_title:a.post_title,a=function(n){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?e(Object(a),!0).forEach((function(e){t(n,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}))}return n}({},a)):(a={mapid:n.mapid,map_title:n.title,postid:mappl10n.options.postid,post_title:null},o.unshift(a))},setSort:function(e){e.sortBy&&(this.state.sortBy=e.sortBy),void 0!==e.sortAsc&&(this.state.sortAsc=e.sortAsc),this.sort(),this.publish()},sort:function(e,t){var n,o=this,a=(n="untitled",wp.i18n.__(n,"mappress-google-maps-for-wordpress"));this.state.items.sort((function(e,t){return function(e,t,n,o){if(o=o?1:-1,"mapid"==n)return o*(Number(e.mapid)-Number(t.mapid));var i=e[n]?e[n]:a,r=t[n]?t[n]:a,l=o*i.localeCompare(r);return 0==l?Number(e.mapid)-Number(t.mapid):l}(e,t,o.state.sortBy,o.state.sortAsc)}))},subscribe:function(e){this.subs.add(e)},unsubscribe:function(e){this.subs.delete(e)},publish:function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(_e){throw _e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw r}}}}(n(this.subs));try{for(t.s();!(e=t.n()).done;){(0,e.value)(this.state)}}catch(e){t.e(e)}finally{t.f()}}},i.store=new i.Store},308:function(e,t,n){"use strict";e.exports=function(e,t){var o,a,i,r,l,s,c,p,u,m,d,f,h,g=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),y=g.length,b=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},v="undefined"!=typeof window?window:n.g;v.$locutus=v.$locutus||{};var w=v.$locutus;for(w.php=w.php||{},t||(t=v),o=0;o<y&&(u=b((p=g[o].split("="))[0]),m=p.length<2?"":b(p[1]),!(u.includes("__proto__")||u.includes("constructor")||u.includes("prototype")));o++){for(;" "===u.charAt(0);)u=u.slice(1);if(u.indexOf("\0")>-1&&(u=u.slice(0,u.indexOf("\0"))),u&&"["!==u.charAt(0)){for(f=[],d=0,a=0;a<u.length;a++)if("["!==u.charAt(a)||d){if("]"===u.charAt(a)&&d&&(f.length||f.push(u.slice(0,d-1)),f.push(u.substr(d,a-d)),d=0,"["!==u.charAt(a+1)))break}else d=a+1;for(f.length||(f=[u]),a=0;a<f[0].length&&(" "!==(c=f[0].charAt(a))&&"."!==c&&"["!==c||(f[0]=f[0].substr(0,a)+"_"+f[0].substr(a+1)),"["!==c);a++);for(s=t,a=0,h=f.length;a<h;a++){if(l=s,(""===(u=f[a].replace(/^['"]/,"").replace(/['"]$/,""))||" "===u)&&0!==a){for(r in i=-1,s)s.hasOwnProperty(r)&&+r>i&&r.match(/^\d+$/g)&&(i=+r);u=i+1}Object(s[u])!==s[u]&&(s[u]={}),s=s[u]}l[u]=m}}}}},t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(215),n(787),n(999),n(800),n(938),n(816),n(186),n(498),n(218),n(557),n(429)}();