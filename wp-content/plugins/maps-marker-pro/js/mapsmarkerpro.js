!function(){var i={1639:function(t,e,i){"use strict";t.exports=i(9281)},7114:function(t,e,i){"use strict";var n=i(5670),i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(i.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(i.input,{marginTop:"-1px"}),t.exports=i},3312:function(t,e,i){"use strict";var s="aaDataset",l="aaValue",u="aaDatum",h=i(5670),c=i(3855),d=i(6619),o=i(7114),i=i(6823);function n(t){var e,i;(t=t||{}).templates=t.templates||{},t.source||h.error("missing source"),t.name&&!/^[_a-zA-Z0-9-]+$/.test(t.name)&&h.error("invalid dataset name: "+t.name),this.query=null,this._isEmpty=!0,this.highlight=!!t.highlight,this.name=void 0===t.name||null===t.name?h.getUniqueId():t.name,this.source=t.source,this.displayFn=(e=(e=t.display||t.displayKey)||"value",h.isFunction(e)?e:function(t){return t[e]}),this.debounce=t.debounce,this.cache=!1!==t.cache,this.templates=(n=t.templates,i=this.displayFn,{empty:n.empty&&h.templatify(n.empty),header:n.header&&h.templatify(n.header),footer:n.footer&&h.templatify(n.footer),suggestion:n.suggestion||function(t){return"<p>"+i(t)+"</p>"}}),this.css=h.mixin({},o,t.appendTo?o.appendTo:{}),this.cssClasses=t.cssClasses=h.mixin({},o.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||h.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var n=h.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=t.$menu&&0<t.$menu.find(n+"-"+this.name).length?c.element(t.$menu.find(n+"-"+this.name)[0]):c.element(d.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=t.$menu,this.clearCachedSuggestions()}n.extractDatasetName=function(t){return c.element(t).data(s)},n.extractValue=function(t){return c.element(t).data(l)},n.extractDatum=function(t){t=c.element(t).data(u);return t="string"==typeof t?JSON.parse(t):t},h.mixin(n.prototype,i,{_render:function(e,o){if(this.$el){var i,r=this,t=[].slice.call(arguments,2);if(this.$el.empty(),i=o&&o.length,this._isEmpty=!i,!i&&this.templates.empty)this.$el.html(function(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),r.templates.empty.apply(this,t)}.apply(this,t)).prepend(r.templates.header?n.apply(this,t):null).append(r.templates.footer?a.apply(this,t):null);else if(i)this.$el.html(function(){var t,i=[].slice.call(arguments,0),n=this,e=d.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return t=c.element(e).css(this.css.suggestions),e=h.map(o,function(t){var e=d.suggestion.replace("%PREFIX%",n.cssClasses.prefix).replace("%SUGGESTION%",n.cssClasses.suggestion);return(e=c.element(e).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(r.templates.suggestion.apply(this,[t].concat(i)))).data(s,r.name),e.data(l,r.displayFn(t)||void 0),e.data(u,JSON.stringify(t)),e.children().each(function(){c.element(this).css(n.css.suggestionChild)}),e}),t.append.apply(t,e),t}.apply(this,t)).prepend(r.templates.header?n.apply(this,t):null).append(r.templates.footer?a.apply(this,t):null);else if(o&&!Array.isArray(o))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(i?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(i?"without":"with")+"-"+this.name),this.trigger("rendered",e)}function n(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return r.templates.header.apply(this,t)}function a(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return r.templates.footer.apply(this,t)}},getRoot:function(){return this.$el},update:function(i){function t(t){var e;this.canceled||i!==this.query||(e=[].slice.call(arguments,1),this.cacheSuggestions(i,t,e),this._render.apply(this,[i,t].concat(e)))}var e,n;this.query=i,this.canceled=!1,this.shouldFetchFromCache(i)?t.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs)):(n=function(){e.canceled||e.source(i,t.bind(e))},(e=this).debounce?(clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(function(){e.debounceTimeout=null,n()},this.debounce)):n())},cacheSuggestions:function(t,e,i){this.cachedQuery=t,this.cachedSuggestions=e,this.cachedRenderExtraArgs=i},shouldFetchFromCache:function(t){return this.cache&&this.cachedQuery===t&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.$el&&(this.cancel(),this.$el.empty(),this.trigger("rendered",""))},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),t.exports=n},5445:function(t,e,i){"use strict";var s=i(5670),l=i(3855),n=i(6823),o=i(3312),u=i(7114);function h(n){var t,e,i,o=this;(n=n||{}).menu||s.error("menu is required"),s.isArray(n.datasets)||s.isObject(n.datasets)||s.error("1 or more datasets required"),n.datasets||s.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=n.minLength||0,this.templates={},this.appendTo=n.appendTo||!1,this.css=s.mixin({},u,n.appendTo?u.appendTo:{}),this.cssClasses=n.cssClasses=s.mixin({},u.defaultClasses,n.cssClasses||{}),this.cssClasses.prefix=n.cssClasses.formattedPrefix||s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),t=s.bind(this._onSuggestionClick,this),e=s.bind(this._onSuggestionMouseEnter,this),i=s.bind(this._onSuggestionMouseLeave,this);var r=s.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=l.element(n.menu).on("mouseenter.aa",r,e).on("mouseleave.aa",r,i).on("click.aa",r,t),this.$container=n.appendTo?n.wrapper:this.$menu,n.templates&&n.templates.header&&(this.templates.header=s.templatify(n.templates.header),this.$menu.prepend(this.templates.header())),n.templates&&n.templates.empty&&(this.templates.empty=s.templatify(n.templates.empty),this.$empty=l.element('<div class="'+s.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=s.map(n.datasets,function(t){return e=o.$menu,i=t,t=n.cssClasses,new h.Dataset(s.mixin({$menu:e,cssClasses:t},i));var e,i}),s.each(this.datasets,function(t){var e=t.getRoot();e&&0===e.parent().length&&o.$menu.append(e),t.onSync("rendered",o._onRendered,o)}),n.templates&&n.templates.footer&&(this.templates.footer=s.templatify(n.templates.footer),this.$menu.append(this.templates.footer()));var a=this;l.element(window).resize(function(){a._redraw()})}s.mixin(h.prototype,n,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",l.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){var e,i=l.element(t.currentTarget);i.hasClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))||(this._removeCursor(),e=this,setTimeout(function(){e._setCursor(i,!1)},0))},_onSuggestionMouseLeave:function(t){if(t.relatedTarget&&0<l.element(t.relatedTarget).closest("."+s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(t,e){var i;this.isEmpty=s.every(this.datasets,function(t){return t.isEmpty()}),this.isEmpty?(e.length>=this.minLength&&this.trigger("empty"),this.$empty?e.length<this.minLength?this._hide():(i=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query}),this.$empty.html(i),this.$empty.show(),this._show()):!s.any(this.datasets,function(t){return t.templates&&t.templates.empty})||e.length<this.minLength?this._hide():this._show()):this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),e.length>=this.minLength?this._show():this._hide()),this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(t,e){t.first().addClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",e)},_removeCursor:function(){this._getCursor().removeClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(t){var e,i;this.isOpen&&(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(t=((t=e.index(i)+t)+1)%(e.length+1)-1)?(t<-1&&(t=e.length-1),this._setCursor(t=e.eq(t),!0),this._ensureVisible(t)):this.trigger("cursorRemoved"))},_ensureVisible:function(t){var e=t.position().top,i=e+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),n=this.$menu.scrollTop(),t=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10);e<0?this.$menu.scrollTop(n+e):t<i&&this.$menu.scrollTop(n+(i-t))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return e=t.length?{raw:o.extractDatum(t),value:o.extractValue(t),datasetName:o.extractDatasetName(t)}:e},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(e){s.each(this.datasets,function(t){t.update(e)})},empty:function(){s.each(this.datasets,function(t){t.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,s.each(this.datasets,function(t){t.destroy()})}}),h.Dataset=o,t.exports=h},7368:function(t,e,i){"use strict";var o=i(5670),n=i(3855);function r(t){t&&t.el||o.error("EventBus initialized without el"),this.$el=n.element(t.el)}o.mixin(r.prototype,{trigger:function(t,e,i,n){t=o.Event("autocomplete:"+t);return this.$el.trigger(t,[e,i,n]),t}}),t.exports=r},6823:function(t,e,i){"use strict";var r=i(624),s=/\s+/;function n(t,e,i,n){var o,r,a;if(!i)return this;for(e=e.split(s),i=n?(a=n,(r=i).bind?r.bind(a):function(){r.apply(a,[].slice.call(arguments,0))}):i,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function a(n,o,r){return function(){for(var t,e=0,i=n.length;!t&&e<i;e+=1)t=!1===n[e].apply(o,r);return!t}}t.exports={onSync:function(t,e,i){return n.call(this,"sync",t,e,i)},onAsync:function(t,e,i){return n.call(this,"async",t,e,i)},off:function(t){var e;if(!this._callbacks)return this;t=t.split(s);for(;e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,i,n,o;if(!this._callbacks)return this;t=t.split(s),i=[].slice.call(arguments,1);for(;(o=t.shift())&&(e=this._callbacks[o]);)n=a(e.sync,this,[o].concat(i)),o=a(e.async,this,[o].concat(i)),n()&&r(o);return this}}},6619:function(t){"use strict";t.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},1286:function(t,e,i){"use strict";var a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},s=i(5670),l=i(3855),i=i(6823);function n(t){var e,i,n,o,r=this;(t=t||{}).input||s.error("input is missing"),e=s.bind(this._onBlur,this),i=s.bind(this._onFocus,this),n=s.bind(this._onKeydown,this),o=s.bind(this._onInput,this),this.$hint=l.element(t.hint),this.$input=l.element(t.input).on("blur.aa",e).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=s.noop),s.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(t){a[t.which||t.keyCode]||s.defer(s.bind(r._onInput,r,t))}):this.$input.on("input.aa",o),this.query=this.$input.val(),this.$overflowHelper=(o=this.$input,l.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:o.css("font-family"),fontSize:o.css("font-size"),fontStyle:o.css("font-style"),fontVariant:o.css("font-variant"),fontWeight:o.css("font-weight"),wordSpacing:o.css("word-spacing"),letterSpacing:o.css("letter-spacing"),textIndent:o.css("text-indent"),textRendering:o.css("text-rendering"),textTransform:o.css("text-transform")}).insertAfter(o))}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},s.mixin(n.prototype,i,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,o;switch(t){case"tab":n=this.getHint(),o=this.getInputValue(),i=n&&n!==o&&!r(e);break;case"up":case"down":i=!r(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){e="tab"!==t||!r(e);return e},_checkInputValue:function(){var t,e,i=this.getInputValue();t=i,e=this.query,e=!(!(t=n.normalizeQuery(t)===n.normalizeQuery(e))||!this.query)&&this.query.length!==i.length,this.query=i,t?e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){void 0===t&&(t=this.query),this.$input.val(t),e?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(t){this.$input.attr("aria-activedescendant",t)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t=this.getInputValue(),e=this.getHint(),e=t!==e&&0===e.indexOf(t);""!==t&&e&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t=this.$input.val().length,e=this.$input[0].selectionStart;return s.isNumber(e)?e===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),t.exports=n},4520:function(t,e,i){"use strict";var r="aaAttrs",a=i(5670),s=i(3855),o=i(7368),n=i(1286),l=i(5445),u=i(6619),h=i(7114);function c(t){if((t=t||{}).input||a.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.autoselectOnBlur=!!t.autoselectOnBlur,this.openOnFocus=!!t.openOnFocus,this.minLength=a.isNumber(t.minLength)?t.minLength:1,this.autoWidth=void 0===t.autoWidth||!!t.autoWidth,this.clearOnSelected=!!t.clearOnSelected,this.tabAutocomplete=void 0===t.tabAutocomplete||!!t.tabAutocomplete,t.hint=!!t.hint,t.hint&&t.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=t.css=a.mixin({},h,t.appendTo?h.appendTo:{}),this.cssClasses=t.cssClasses=a.mixin({},h.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix=a.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=t.listboxId=[this.cssClasses.root,"listbox",a.getUniqueId()].join("-");var e=function(t){var e,i,n;e=s.element(t.input),i=s.element(u.wrapper.replace("%ROOT%",t.cssClasses.root)).css(t.css.wrapper),t.appendTo||"block"!==e.css("display")||"table"!==e.parent().css("display")||i.css("display","table-cell");var o=u.dropdown.replace("%PREFIX%",t.cssClasses.prefix).replace("%DROPDOWN_MENU%",t.cssClasses.dropdownMenu);n=s.element(o).css(t.css.dropdown).attr({role:"listbox",id:t.listboxId}),t.templates&&t.templates.dropdownMenu&&n.html(a.templatify(t.templates.dropdownMenu)());(o=e.clone().css(t.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(e))).val("").addClass(a.className(t.cssClasses.prefix,t.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),o.removeData&&o.removeData();e.data(r,{"aria-autocomplete":e.attr("aria-autocomplete"),"aria-expanded":e.attr("aria-expanded"),"aria-owns":e.attr("aria-owns"),autocomplete:e.attr("autocomplete"),dir:e.attr("dir"),role:e.attr("role"),spellcheck:e.attr("spellcheck"),style:e.attr("style"),type:e.attr("type")}),e.addClass(a.className(t.cssClasses.prefix,t.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":t.datasets&&t.datasets[0]&&t.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":t.ariaLabel,"aria-owns":t.listboxId}).css(t.hint?t.css.input:t.css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(t){}return(i=t.appendTo?i.appendTo(s.element(t.appendTo).eq(0)).eq(0):e.wrap(i).parent()).prepend(t.hint?o:null).append(n),{wrapper:i,input:e,hint:o,menu:n}}(t);this.$node=e.wrapper;var i=this.$input=e.input,n=e.menu,e=e.hint;t.dropdownMenuContainer&&s.element(t.dropdownMenuContainer).css("position","relative").append(n.css("top","0")),i.on("blur.aa",function(t){var e=document.activeElement;a.isMsie()&&(n[0]===e||n[0].contains(e))&&(t.preventDefault(),t.stopImmediatePropagation(),a.defer(function(){i.focus()}))}),n.on("mousedown.aa",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new o({el:i}),this.dropdown=new c.Dropdown({appendTo:t.appendTo,wrapper:this.$node,menu:n,datasets:t.datasets,templates:t.templates,cssClasses:t.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new c.Input({input:i,hint:e}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(t),this._setLanguageDirection()}a.mixin(c.prototype,{_bindKeyboardShortcuts:function(t){var n,o;t.keyboardShortcuts&&(n=this.$input,o=[],a.each(t.keyboardShortcuts,function(t){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),o.push(t)}),s.element(document).keydown(function(t){var e=t.target||t.srcElement,i=e.tagName;e.isContentEditable||"INPUT"===i||"SELECT"===i||"TEXTAREA"===i||(i=t.which||t.keyCode,-1!==o.indexOf(i)&&(n.focus(),t.stopPropagation(),t.preventDefault()))}))},_onSuggestionClicked:function(t,e){(e=this.dropdown.getDatumForSuggestion(e))&&this._select(e,{selectionMethod:"click"})},_onCursorMoved:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(n),i&&(e&&this.input.setInputValue(i.value,!0),this.eventBus.trigger("cursorchanged",i.raw,i.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var t=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",t.width+"px");var e=this.$node[0].getBoundingClientRect(),i=t.bottom-e.top;this.$node.css("top",i+"px");e=t.left-e.left;this.$node.css("left",e+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){var t;this.isActivated=!0,this.openOnFocus&&((t=this.input.getQuery()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open())},_onBlurred:function(){var t=this.dropdown.getDatumForCursor(),e=this.dropdown.getDatumForTopSuggestion(),i={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&t?this._select(t,i):this.autoselectOnBlur&&e?this._select(e,i):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),o={selectionMethod:"enterKey"};i?(this._select(i,o),e.preventDefault()):this.autoselect&&n&&(this._select(n,o),e.preventDefault())},_onTabKeyed:function(t,e){var i;this.tabAutocomplete?(i=this.dropdown.getDatumForCursor())?(this._select(i,{selectionMethod:"tabKey"}),e.preventDefault()):this._autocomplete(!0):this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,i=this.dropdown.getDatumForTopSuggestion();i&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),e=n.normalizeQuery(t),e=a.escapeRegExChars(e),(i=new RegExp("^(?:"+e+")(.+$)","i").exec(i.value))?this.input.setHint(t+i[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e=this.input.getHint(),i=this.input.getQuery(),t=t||this.input.isCursorAtEnd();e&&i!==e&&t&&((t=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(t.value),this.eventBus.trigger("autocompleted",t.raw,t.datasetName))},_select:function(t,e){void 0!==t.value&&this.input.setQuery(t.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(t.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",t.raw,t.datasetName,e).isDefaultPrevented()&&(this.dropdown.close(),a.defer(a.bind(this.dropdown.empty,this.dropdown)))},open:function(){var t;this.isActivated||((t=this.input.getInputValue()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()),this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=a.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){var t,e,i;this.input.destroy(),this.dropdown.destroy(),t=this.$node,e=this.cssClasses,i=t.find(a.className(e.prefix,e.input)),a.each(i.data(r),function(t,e){void 0===t?i.removeAttr(e):i.attr(e,t)}),i.detach().removeClass(a.className(e.prefix,e.input,!0)).insertAfter(t),i.removeData&&i.removeData(r),t.remove(),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),c.Dropdown=l,c.Input=n,c.sources=i(6331),t.exports=c},3855:function(t){"use strict";t.exports={element:null}},2926:function(t){"use strict";t.exports=function(t){t=t.match(/Algolia for JavaScript \((\d+\.)(\d+\.)(\d+)\)/)||t.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(t)return[t[1],t[2],t[3]]}},5670:function(t,e,i){"use strict";var n,o=i(3855);function a(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(t){if(void 0===t&&(t=navigator.userAgent),/(msie|trident)/i.test(t)){t=t.match(/(msie |rv:)(\d+(.\d+)?)/i);if(t)return t[2]}return!1},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(t){return"number"==typeof t},toStr:function(t){return null==t?"":t+""},cloneDeep:function(t){var i=this.mixin({},t),n=this;return this.each(i,function(t,e){t&&(n.isArray(t)?i[e]=[].concat(t):n.isObject(t)&&(i[e]=n.cloneDeep(t)))}),i},error:function(t){throw new Error(t)},every:function(i,n){var o=!0;return i?(this.each(i,function(t,e){o=o&&(n.call(null,t,e,i)&&o)}),!!o):o},any:function(i,n){var o=!1;return i&&this.each(i,function(t,e){if(n.call(null,t,e,i))return!(o=!0)}),o},getUniqueId:(n=0,function(){return n++}),templatify:function(t){if(this.isFunction(t))return t;var e=o.element(t);return"SCRIPT"===e.prop("tagName")?function(){return e.text()}:function(){return String(t)}},defer:function(t){setTimeout(t,0)},noop:function(){},formatPrefix:function(t,e){return e?"":t+"-"},className:function(t,e,i){return(i?"":".")+t+e},escapeHighlightedString:function(t,e,i){e=e||"<em>";var n=document.createElement("div");n.appendChild(document.createTextNode(e)),i=i||"</em>";var o=document.createElement("div");o.appendChild(document.createTextNode(i));var r=document.createElement("div");return r.appendChild(document.createTextNode(t)),r.innerHTML.replace(RegExp(a(n.innerHTML),"g"),e).replace(RegExp(a(o.innerHTML),"g"),i)}}},2683:function(t,e,i){"use strict";var s=i(5670),n=i(3489),o=i(2926);var l,u,r=(l=[],u=window.Promise.resolve(),function(r,a){return function(t,e){var i,n,o=r.as,t=l.push({indexName:r.indexName,query:t,params:a})-1;i=o,n=t,window.Promise.resolve().then(function(){return l.length&&(u=i.search(l),l=[]),u}).then(function(t){if(t)return t.results[n]}).then(function(t){t&&e(t.hits,t)}).catch(function(t){s.error(t.message)})}});t.exports=function(t,e){var i=o(t.as._ua);return i&&3<=i[0]&&20<i[1]&&(i="autocomplete.js "+n,-1===t.as._ua.indexOf(i)&&(t.as._ua+="; "+i)),r(t,e)}},6331:function(t,e,i){"use strict";t.exports={hits:i(2683),popularIn:i(2226)}},2226:function(t,e,i){"use strict";var h=i(5670),c=i(3489),d=i(2926);t.exports=function(e,i,n,s){var t=d(e.as._ua);if(t&&3<=t[0]&&20<t[1]&&((i=i||{}).additionalUA="autocomplete.js "+c),!n.source)return h.error("Missing 'source' key");var l=h.isFunction(n.source)?n.source:function(t){return t[n.source]};if(!n.index)return h.error("Missing 'index' key");var u=n.index;return s=s||{},function(t,a){e.search(t,i,function(t,o){if(t)h.error(t.message);else{if(0<o.hits.length){var r=o.hits[0],e=h.mixin({hitsPerPage:0},n);delete e.source,delete e.index;t=d(u.as._ua);return t&&3<=t[0]&&20<t[1]&&(i.additionalUA="autocomplete.js "+c),void u.search(l(r),e,function(t,e){if(t)h.error(t.message);else{var n=[];s.includeAll&&(t=s.allTitle||"All departments",n.push(h.mixin({facet:{value:t,count:e.nbHits}},h.cloneDeep(r)))),h.each(e.facets,function(t,i){h.each(t,function(t,e){n.push(h.mixin({facet:{facet:i,value:e,count:t}},h.cloneDeep(r)))})});for(var i=1;i<o.hits.length;++i)n.push(o.hits[i]);a(n,o)}})}a([])}})}}},9281:function(t,e,i){"use strict";var s=i(7939);i(3855).element=s;var n=i(5670);n.isArray=s.isArray,n.isFunction=s.isFunction,n.isObject=s.isPlainObject,n.bind=s.proxy,n.each=function(t,i){s.each(t,function(t,e){return i(e,t)})},n.map=s.map,n.mixin=s.extend,n.Event=s.Event;var l="aaAutocomplete",u=i(4520),h=i(7368);function o(t,o,r,a){r=n.isArray(r)?r:[].slice.call(arguments,2);var e=s(t).each(function(t,e){var i=s(e),n=new h({el:i}),e=a||new u({input:i,eventBus:n,dropdownMenuContainer:o.dropdownMenuContainer,hint:void 0===o.hint||!!o.hint,minLength:o.minLength,autoselect:o.autoselect,autoselectOnBlur:o.autoselectOnBlur,tabAutocomplete:o.tabAutocomplete,openOnFocus:o.openOnFocus,templates:o.templates,debug:o.debug,clearOnSelected:o.clearOnSelected,cssClasses:o.cssClasses,datasets:r,keyboardShortcuts:o.keyboardShortcuts,appendTo:o.appendTo,autoWidth:o.autoWidth,ariaLabel:o.ariaLabel||e.getAttribute("aria-label")});i.data(l,e)});return e.autocomplete={},n.each(["open","close","getVal","setVal","destroy","getWrapper"],function(o){e.autocomplete[o]=function(){var i,n=arguments;return e.each(function(t,e){e=s(e).data(l);i=e[o].apply(e,n)}),i}}),e}o.sources=u.sources,o.escapeHighlightedString=n.escapeHighlightedString;var r="autocomplete"in window,a=window.autocomplete;o.noConflict=function(){return r?window.autocomplete=a:delete window.autocomplete,o},t.exports=o},3489:function(t){t.exports="0.38.0"},7939:function(t){var e,K,i;e=window,t.exports=(K=e,function(h){function u(t){return"string"==typeof t}var c,e=1,d=Array.prototype.slice,p=h.isFunction,f={},r={},i="onfocusin"in K,n={focus:"focusin",blur:"focusout"},m={mouseenter:"mouseover",mouseleave:"mouseout"};function g(t){return t._zid||(t._zid=e++)}function a(t,e,i,n){var o,r;return(e=v(e)).ns&&(r=e.ns,o=new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")),(f[g(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||o.test(t.ns))&&(!i||g(t.fn)===g(i))&&(!n||t.sel==n)})}function v(t){t=(""+t).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function _(t,e){return t.del&&!i&&t.e in n||!!e}function y(t){return m[t]||i&&n[t]||t}function x(o,t,e,r,a,s,l){var i=g(o),u=f[i]||(f[i]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return h(document).ready(e);var i=v(t);i.fn=e,i.sel=a,i.e in m&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!h.contains(this,e))return i.fn.apply(this,arguments)});var n=(i.del=s)||e;i.proxy=function(t){if(!(t=k(t)).isImmediatePropagationStopped()){try{var e=Object.getOwnPropertyDescriptor(t,"data");e&&!e.writable||(t.data=r)}catch(t){}var i=n.apply(o,t._args==c?[t]:[t].concat(t._args));return!1===i&&(t.preventDefault(),t.stopPropagation()),i}},i.i=u.length,u.push(i),"addEventListener"in o&&o.addEventListener(y(i.e),i.proxy,_(i,l))})}function b(e,t,i,n,o){var r=g(e);(t||"").split(/\s/).forEach(function(t){a(e,t,i,n).forEach(function(t){delete f[r][t.i],"removeEventListener"in e&&e.removeEventListener(y(t.e),t.proxy,_(t,o))})})}r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",h.event={add:x,remove:b},h.proxy=function(t,e){var i=2 in arguments&&d.call(arguments,2);if(p(t)){function n(){return t.apply(e,i?i.concat(d.call(arguments)):arguments)}return n._zid=g(t),n}if(u(e))return i?(i.unshift(t[e],t),h.proxy.apply(null,i)):h.proxy(t[e],t);throw new TypeError("expected function")},h.fn.bind=function(t,e,i){return this.on(t,e,i)},h.fn.unbind=function(t,e){return this.off(t,e)},h.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var s=function(){return!0},w=function(){return!1},o=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function k(n,o){if(o||!n.isDefaultPrevented){o=o||n,h.each(t,function(t,e){var i=o[t];n[t]=function(){return this[e]=s,i&&i.apply(o,arguments)},n[e]=w});try{n.timeStamp||(n.timeStamp=Date.now())}catch(t){}(o.defaultPrevented!==c?o.defaultPrevented:"returnValue"in o?!1===o.returnValue:o.getPreventDefault&&o.getPreventDefault())&&(n.isDefaultPrevented=s)}return n}function L(t){var e,i={originalEvent:t};for(e in t)o.test(e)||t[e]===c||(i[e]=t[e]);return k(i,t)}h.fn.delegate=function(t,e,i){return this.on(e,t,i)},h.fn.undelegate=function(t,e,i){return this.off(e,t,i)},h.fn.live=function(t,e){return h(document.body).delegate(this.selector,t,e),this},h.fn.die=function(t,e){return h(document.body).undelegate(this.selector,t,e),this},h.fn.on=function(e,o,i,r,a){var s,l,n=this;return e&&!u(e)?(h.each(e,function(t,e){n.on(t,o,i,e,a)}),n):(u(o)||p(r)||!1===r||(r=i,i=o,o=c),r!==c&&!1!==i||(r=i,i=c),!1===r&&(r=w),n.each(function(t,n){a&&(s=function(t){return b(n,t.type,r),r.apply(this,arguments)}),x(n,e,r,i,o,(l=o?function(t){var e,i=h(t.target).closest(o,n).get(0);if(i&&i!==n)return e=h.extend(L(t),{currentTarget:i,liveFired:n}),(s||r).apply(i,[e].concat(d.call(arguments,1)))}:l)||s)}))},h.fn.off=function(t,i,e){var n=this;return t&&!u(t)?(h.each(t,function(t,e){n.off(t,i,e)}),n):(u(i)||p(e)||!1===e||(e=i,i=c),!1===e&&(e=w),n.each(function(){b(this,t,e,i)}))},h.fn.trigger=function(t,e){return(t=u(t)||h.isPlainObject(t)?h.Event(t):k(t))._args=e,this.each(function(){t.type in n&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):h(this).triggerHandler(t,e)})},h.fn.triggerHandler=function(i,n){var o,r;return this.each(function(t,e){(o=L(u(i)?h.Event(i):i))._args=n,o.target=e,h.each(a(e,i.type||i),function(t,e){if(r=e.proxy(o),o.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){h.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),h.Event=function(t,e){u(t)||(t=(e=t).type);var i=document.createEvent(r[t]||"Events"),n=!0;if(e)for(var o in e)"bubbles"==o?n=!!e[o]:i[o]=e[o];return i.initEvent(t,n,!0),k(i)}}(i=function(){var l,a,u,n,s,i,o=[],r=o.concat,h=o.filter,c=o.slice,d=K.document,p={},e={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},m=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_=/^(?:body|html)$/i,y=/([A-Z])/g,x=["val","css","html","text","data","width","height","offset"],t=d.createElement("table"),b=d.createElement("tr"),w={tr:d.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:b,th:b,"*":d.createElement("div")},k=/complete|loaded|interactive/,L=/^[\w-]*$/,C={},M=C.toString,T={},P=d.createElement("div"),S={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(t){return t instanceof Array};function D(t){return null==t?String(t):C[M.call(t)]||"object"}function E(t){return"function"==D(t)}function I(t){return null!=t&&t==t.window}function O(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function z(t){return"object"==D(t)}function B(t){return z(t)&&!I(t)&&Object.getPrototypeOf(t)==Object.prototype}function F(t){var e=!!t&&"length"in t&&t.length,i=u.type(t);return"function"!=i&&!I(t)&&("array"==i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function N(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function U(t,e){return"number"!=typeof e||f[R(t)]?e:e+"px"}function Z(t){return"children"in t?c.call(t.children):u.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function j(t,e){for(var i=t?t.length:0,n=0;n<i;n++)this[n]=t[n];this.length=i,this.selector=e||""}function H(t,e){return null==e?u(t):u(t).filter(e)}function W(t,e,i,n){return E(e)?e.call(t,i,n):e}function V(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function G(t,e){var i=t.className||"",n=i&&i.baseVal!==l;if(e===l)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function q(e){try{return e&&("true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?u.parseJSON(e):e))}catch(t){return e}}return T.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n=t.parentNode,i=!n;return i&&(n=P).appendChild(t),e=~T.qsa(n,e).indexOf(t),i&&P.removeChild(t),e},s=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},i=function(i){return h.call(i,function(t,e){return i.indexOf(t)==e})},T.fragment=function(t,e,i){var n,o,r;return(n=g.test(t)?u(d.createElement(RegExp.$1)):n)||(t.replace&&(t=t.replace(v,"<$1></$2>")),e===l&&(e=m.test(t)&&RegExp.$1),(r=w[e=!(e in w)?"*":e]).innerHTML=""+t,n=u.each(c.call(r.childNodes),function(){r.removeChild(this)})),B(i)&&(o=u(n),u.each(i,function(t,e){-1<x.indexOf(t)?o[t](e):o.attr(t,e)})),n},T.Z=function(t,e){return new j(t,e)},T.isZ=function(t){return t instanceof T.Z},T.init=function(t,e){var i,n;if(!t)return T.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&m.test(t))i=T.fragment(t,RegExp.$1,e),t=null;else{if(e!==l)return u(e).find(t);i=T.qsa(d,t)}else{if(E(t))return u(d).ready(t);if(T.isZ(t))return t;if(A(t))n=t,i=h.call(n,function(t){return null!=t});else if(z(t))i=[t],t=null;else if(m.test(t))i=T.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==l)return u(e).find(t);i=T.qsa(d,t)}}return T.Z(i,t)},(u=function(t,e){return T.init(t,e)}).extend=function(e){var i,t=c.call(arguments,1);return"boolean"==typeof e&&(i=e,e=t.shift()),t.forEach(function(t){!function t(e,i,n){for(a in i)n&&(B(i[a])||A(i[a]))?(B(i[a])&&!B(e[a])&&(e[a]={}),A(i[a])&&!A(e[a])&&(e[a]=[]),t(e[a],i[a],n)):i[a]!==l&&(e[a]=i[a])}(e,t,i)}),e},T.qsa=function(t,e){var i,n="#"==e[0],o=!n&&"."==e[0],r=n||o?e.slice(1):e,a=L.test(r);return t.getElementById&&a&&n?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:c.call(a&&!n&&t.getElementsByClassName?o?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},u.contains=d.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},u.type=D,u.isFunction=E,u.isWindow=I,u.isArray=A,u.isPlainObject=B,u.isEmptyObject=function(t){for(var e in t)return!1;return!0},u.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},u.inArray=function(t,e,i){return o.indexOf.call(e,t,i)},u.camelCase=s,u.trim=function(t){return null==t?"":String.prototype.trim.call(t)},u.uuid=0,u.support={},u.expr={},u.noop=function(){},u.map=function(t,e){var i,n,o,r,a=[];if(F(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o))&&a.push(i);return 0<(r=a).length?u.fn.concat.apply([],r):r},u.each=function(t,e){var i,n;if(F(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},u.grep=function(t,e){return h.call(t,e)},K.JSON&&(u.parseJSON=JSON.parse),u.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){C["[object "+e+"]"]=e.toLowerCase()}),u.fn={constructor:T.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){for(var t,e=[],i=0;i<arguments.length;i++)t=arguments[i],e[i]=T.isZ(t)?t.toArray():t;return r.apply(T.isZ(this)?this.toArray():this,e)},map:function(i){return u(u.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return u(c.apply(this,arguments))},ready:function(t){return k.test(d.readyState)&&d.body?t(u):d.addEventListener("DOMContentLoaded",function(){t(u)},!1),this},get:function(t){return t===l?c.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return o.every.call(this,function(t,e){return!1!==i.call(t,e,t)}),this},filter:function(e){return E(e)?this.not(this.not(e)):u(h.call(this,function(t){return T.matches(t,e)}))},add:function(t,e){return u(i(this.concat(u(t,e))))},is:function(t){return 0<this.length&&T.matches(this[0],t)},not:function(e){var i,n=[];return E(e)&&e.call!==l?this.each(function(t){e.call(this,t)||n.push(this)}):(i="string"==typeof e?this.filter(e):F(e)&&E(e.item)?c.call(e):u(e),this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})),u(n)},has:function(t){return this.filter(function(){return z(t)?u.contains(this,t):u(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!z(t)?t:u(t)},last:function(){var t=this[this.length-1];return t&&!z(t)?t:u(t)},find:function(t){var i=this,e=t?"object"==typeof t?u(t).filter(function(){var e=this;return o.some.call(i,function(t){return u.contains(t,e)})}):1==this.length?u(T.qsa(this[0],t)):this.map(function(){return T.qsa(this,t)}):u();return e},closest:function(i,n){var o=[],r="object"==typeof i&&u(i);return this.each(function(t,e){for(;e&&!(r?0<=r.indexOf(e):T.matches(e,i));)e=e!==n&&!O(e)&&e.parentNode;e&&o.indexOf(e)<0&&o.push(e)}),u(o)},parents:function(t){for(var e=[],i=this;0<i.length;)i=u.map(i,function(t){if((t=t.parentNode)&&!O(t)&&e.indexOf(t)<0)return e.push(t),t});return H(e,t)},parent:function(t){return H(i(this.pluck("parentNode")),t)},children:function(t){return H(this.map(function(){return Z(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||c.call(this.childNodes)})},siblings:function(t){return H(this.map(function(t,e){return h.call(Z(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return u.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,p[t]||(e=d.createElement(t),d.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),p[t]=i),p[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var i,n,o=E(e);return this[0]&&!o&&(i=u(e).get(0),n=i.parentNode||1<this.length),this.each(function(t){u(this).wrapAll(o?e.call(this,t):n?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(u(this[0]).before(t=u(t));(e=t.children()).length;)t=e.first();u(t).append(this)}return this},wrapInner:function(n){var o=E(n);return this.each(function(t){var e=u(this),i=e.contents(),t=o?n.call(this,t):n;i.length?i.wrapAll(t):e.append(t)})},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(u(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=u(this);(e===l?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return u(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return u(this.pluck("nextElementSibling")).filter(t||"*")},html:function(i){return 0 in arguments?this.each(function(t){var e=this.innerHTML;u(this).empty().append(W(this,i,t,e))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){t=W(this,e,t,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,i){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(z(e))for(a in e)V(this,a,e[a]);else V(this,e,W(this,i,t,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(e))?t:l},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){V(this,t)},this)})},prop:function(e,i){return e=S[e]||e,1 in arguments?this.each(function(t){this[e]=W(this,i,t,this[e])}):this[0]&&this[0][e]},removeProp:function(t){return t=S[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(i,e):this.attr(i);return null!==i?q(i):l},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=W(this,e,t,this.value)})):this[0]&&(this[0].multiple?u(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(n){if(n)return this.each(function(t){var e=u(this),i=W(this,n,t,e.offset()),t=e.offsetParent().offset(),t={top:i.top-t.top,left:i.left-t.left};"static"==e.css("position")&&(t.position="relative"),e.css(t)});if(!this.length)return null;if(d.documentElement!==this[0]&&!u.contains(d.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+K.pageXOffset,top:t.top+K.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t)return i?i.style[s(t)]||getComputedStyle(i,"").getPropertyValue(t):void 0;if(A(t)){if(!i)return;var n={},o=getComputedStyle(i,"");return u.each(t,function(t,e){n[e]=i.style[s(e)]||o.getPropertyValue(e)}),n}}var r="";if("string"==D(t))e||0===e?r=R(t)+":"+U(t,e):this.each(function(){this.style.removeProperty(R(t))});else for(a in t)t[a]||0===t[a]?r+=R(a)+":"+U(a,t[a])+";":this.each(function(){this.style.removeProperty(R(a))});return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(u(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&o.some.call(this,function(t){return this.test(G(t))},N(t))},addClass:function(i){return i?this.each(function(t){var e;"className"in this&&(n=[],e=G(this),W(this,i,t,e).split(/\s+/g).forEach(function(t){u(this).hasClass(t)||n.push(t)},this),n.length&&G(this,e+(e?" ":"")+n.join(" ")))}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===l)return G(this,"");n=G(this),W(this,e,t,n).split(/\s+/g).forEach(function(t){n=n.replace(N(t)," ")}),G(this,n.trim())}})},toggleClass:function(i,n){return i?this.each(function(t){var e=u(this);W(this,i,t,G(this)).split(/\s+/g).forEach(function(t){(n===l?!e.hasClass(t):n)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===l?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===l?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=_.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(u(t).css("margin-top"))||0,i.left-=parseFloat(u(t).css("margin-left"))||0,n.top+=parseFloat(u(e[0]).css("border-top-width"))||0,n.left+=parseFloat(u(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||d.body;t&&!_.test(t.nodeName)&&"static"==u(t).css("position");)t=t.offsetParent;return t})}},u.fn.detach=u.fn.remove,["width","height"].forEach(function(n){var o=n.replace(/./,function(t){return t[0].toUpperCase()});u.fn[n]=function(e){var t,i=this[0];return e===l?I(i)?i["inner"+o]:O(i)?i.documentElement["scroll"+o]:(t=this.offset())&&t[n]:this.each(function(t){(i=u(this)).css(n,W(this,e,t,i[n]()))})}}),["after","prepend","before","append"].forEach(function(e,a){var s=a%2;u.fn[e]=function(){var i,n,o=u.map(arguments,function(t){var e=[];return"array"==(i=D(t))?(t.forEach(function(t){return t.nodeType!==l?e.push(t):u.zepto.isZ(t)?e=e.concat(t.get()):void(e=e.concat(T.fragment(t)))}),e):"object"==i||null==t?t:T.fragment(t)}),r=1<this.length;return o.length<1?this:this.each(function(t,e){n=s?e:e.parentNode,e=0==a?e.nextSibling:1==a?e.firstChild:2==a?e:null;var i=u.contains(d.documentElement,n);o.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!n)return u(t).remove();n.insertBefore(t,e),i&&function t(e,i){i(e);for(var n=0,o=e.childNodes.length;n<o;n++)t(e.childNodes[n],i)}(t,function(t){var e;null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||(e=t.ownerDocument?t.ownerDocument.defaultView:K).eval.call(e,t.innerHTML)})})})},u.fn[s?e+"To":"insert"+(a?"Before":"After")]=function(t){return u(t)[e](this),this}}),T.Z.prototype=j.prototype=u.fn,T.uniq=i,T.deserializeValue=q,u.zepto=T,u}()),function(){var t,e=[];i.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(e.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){e=[]},6e4)),this.parentNode.removeChild(this))})}}(),function(a){var s={},o=a.fn.data,l=a.camelCase,u=a.expando="Zepto"+ +new Date,h=[];function r(t,e,i){var n,o,r=t[u]||(t[u]=++a.uuid),n=s[r]||(s[r]=(n=t,o={},a.each(n.attributes||h,function(t,e){0==e.name.indexOf("data-")&&(o[l(e.name.replace("data-",""))]=a.zepto.deserializeValue(e.value))}),o));return void 0!==e&&(n[l(e)]=i),n}a.fn.data=function(e,t){return void 0===t?a.isPlainObject(e)?this.each(function(t,i){a.each(e,function(t,e){r(i,t,e)})}):0 in this?function(t,e){var i=t[u],n=i&&s[i];if(void 0===e)return n||r(t);if(n){if(e in n)return n[e];i=l(e);if(i in n)return n[i]}return o.call(a(t),e)}(this[0],e):void 0:this.each(function(){r(this,e,t)})},a.data=function(t,e,i){return a(t).data(e,i)},a.hasData=function(t){t=t[u],t=t&&s[t];return!!t&&!a.isEmptyObject(t)},a.fn.removeData=function(i){return"string"==typeof i&&(i=i.split(/\s+/)),this.each(function(){var t=this[u],e=t&&s[t];e&&a.each(i||e,function(t){delete e[i?l(this):t]})})},["remove","empty"].forEach(function(e){var i=a.fn[e];a.fn[e]=function(){var t=this.find("*");return(t="remove"===e?t.add(this):t).removeData(),i.call(this)}})}(i),i)},1020:function(t,e,i){"use strict";i(7310);function n(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}n.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");t=this.xml.querySelector("metadata");null!==t&&(this.metadata=this.parseMetadataType(t));for(var n=[].slice.call(this.xml.querySelectorAll("wpt")),o=0;o<n.length;o++){var r=n[o],r=e.parseWptType(r,!0);e.waypoints.push(r)}for(var a=[].slice.call(this.xml.querySelectorAll("rte")),o=0;o<a.length;o++){var s=a[o],s=e.parseRteType(s);s.time=e.calcTime(s.points),s.distance=e.calcDistance(s.points),s.elevation=e.calcElevation(s.points),s.heartRate=e.calcHeartRate(s.points),e.routes.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("trk")),o=0;o<l.length;o++){var u=l[o],u=e.parseTrkType(u);u.time=e.calcTime(u.points),u.distance=e.calcDistance(u.points),u.elevation=e.calcElevation(u.points),u.heartRate=e.calcHeartRate(u.points),e.tracks.push(u)}},n.prototype.getFirstTagValue=function(t,e){e=t.querySelectorAll(e);return e.length?e[0].textContent:null},n.prototype.getFirstTagValueNs=function(t,e,i){i=t.getElementsByTagNameNS(e,i);return i.length?i[0].textContent:null},n.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return i=null===i?this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e):i},n.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var o=i[n],o=this.parseLinkType(o);e.push(o)}return e},n.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var o=i[n],o=this.parseWptType(o,!1);e.push(o)}return e},n.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var o=i[n],o=this.parseWptType(o,!1);e.push(o)}return e},n.prototype.parseTrksegs=function(t){for(var e=this,i=[],n=[].slice.call(t.querySelectorAll("trkseg")),o=0;o<n.length;o++){var r=n[o],r=e.parseTrksegType(r,!1);r.time=e.calcTime(r.points),r.distance=e.calcDistance(r.points),r.elevation=e.calcElevation(r.points),r.heartRate=e.calcHeartRate(r.points),i.push(r)}return i},n.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},n.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},n.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},n.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},n.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i)return{};for(var n={},o=0;o<e.length;o++){var r=e[o];n[r]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",r)}return n},n.prototype.parseTrackPointExtensionType=function(t){t=t.querySelector("TrackPointExtension");return null===t?{}:{atemp:parseFloat(this.getTpxValue(t,"atemp")),wtemp:parseFloat(this.getTpxValue(t,"wtemp")),depth:parseFloat(this.getTpxValue(t,"depth")),hr:parseInt(this.getTpxValue(t,"hr")),cad:parseInt(this.getTpxValue(t,"cad")),speed:parseFloat(this.getTpxValue(t,"speed")),course:parseFloat(this.getTpxValue(t,"course")),bearing:parseFloat(this.getTpxValue(t,"bearing"))}},n.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var o=t[n+1].time-t[n].time;isNaN(o)||(e+=o,o<this.settings.timeMovingThreshold&&(i+=o)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},n.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++)e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e;return{total:e}},n.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),i=Math.sin((e.lon-t.lon)*i/2),i=r*r+Math.cos(n)*Math.cos(o)*i*i;return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},n.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,o=null,r=0;r<t.length;r++){var a,s=t[r].ele;isNaN(s)?(t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)):(null!==o?(a=s-o,5<=Math.abs(a)&&(0<a?i+=a:a<0&&(n+=a),o=s,e.push(s))):(e.push(s),o=s),t[r].gain=Math.abs(i),t[r].loss=Math.abs(n))}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce(function(t,e){return t+e},0)/e.length}},n.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce(function(t,e){return t+e},0)/e.length}};var o=n,r=i(7757),s=i.n(r),f=i(5243),m=i.n(f),a=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,l=""===document.documentElement.style.pointerEvents,u={cors:a,pointerEvents:l},h={attributionWidthOffset:55},c=0;function d(t){var e,i,n,o="";for(e in t.f=t.f||"json",t)t.hasOwnProperty(e)&&(n=t[e],i=Object.prototype.toString.call(n),o.length&&(o+="&"),n="[object Array]"===i?"[object Object]"===Object.prototype.toString.call(n[0])?JSON.stringify(n):n.join(","):"[object Object]"===i?JSON.stringify(n):"[object Date]"===i?n.valueOf():n,o+=encodeURIComponent(e)+"="+encodeURIComponent(n));return o}function p(n,o){var r=new window.XMLHttpRequest;return r.onerror=function(t){r.onreadystatechange=f.Util.falseFn,n.call(o,{error:{code:500,message:"XMLHttpRequest error"}},null)},r.onreadystatechange=function(){var e,i;if(4===r.readyState){try{e=JSON.parse(r.responseText)}catch(t){e=null,i={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!i&&e.error&&(i=e.error,e=null),r.onerror=f.Util.falseFn,n.call(o,i,e)}},r.ontimeout=function(){this.onerror()},r}function g(t,e,i,n){i=p(i,n);return i.open("GET",t+"?"+d(e),!0),null!=n&&void 0!==n.options&&(i.timeout=n.options.timeout,n.options.withCredentials&&(i.withCredentials=!0)),i.send(null),i}function v(t,e,i,n){var o=d(e),r=p(i,n),a=(t+"?"+o).length;if(a<=2e3&&u.cors?r.open("GET",t+"?"+o):2e3<a&&u.cors&&(r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout,n.options.withCredentials&&(r.withCredentials=!0)),a<=2e3&&u.cors)r.send(null);else{if(!(2e3<a&&u.cors))return a<=2e3&&!u.cors?_(t,e,i,n):void y("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");r.send(o)}return r}function _(t,e,n,o){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+c;e.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(t){var e,i;!0!==window._EsriLeafletCallbacks[r]&&("[object Object]"!==(i=Object.prototype.toString.call(t))&&"[object Array]"!==i&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),n.call(o,e,t),window._EsriLeafletCallbacks[r]=!0)};var i=f.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=t+"?"+d(e),i.id=r,i.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[r]&&(n.call(o,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[r]=!0)},f.DomUtil.addClass(i,"esri-leaflet-jsonp"),c++,{id:r,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}r=u.cors?g:_;function y(){console&&console.warn&&console.warn.apply(console,arguments)}r.CORS=g,r.JSONP=_;function x(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(function(t,e,i,n){var o=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),r=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),t=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!=t){o=o/t,t=r/t;if(0<=o&&o<=1&&0<=t&&t<=1)return!0}return!1}(t[i],t[i+1],e[n],e[n+1]))return!0;return!1}function b(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function w(t){for(var e,i=0,n=0,o=t.length,r=t[n];n<o-1;n++)i+=((e=t[n+1])[0]-r[0])*(e[1]+r[1]),r=e;return 0<=i}function k(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function L(t){for(var e,i,n=[],o=[],r=0;r<t.length;r++){var a,s=b(t[r].slice(0));s.length<4||(w(s)?(a=[s.slice().reverse()],n.push(a)):o.push(s.slice().reverse()))}for(var l,u,h,c=[];o.length;){i=o.pop();for(var d=!1,p=n.length-1;0<=p;p--)if(e=n[p][0],h=void 0,h=x(l=e,u=i),u=function(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}(l,u[0]),!(h||!u)){n[p].push(i),d=!0;break}d||c.push(i)}for(;c.length;){i=c.pop();var f=!1;for(p=n.length-1;0<=p;p--)if(e=n[p][0],x(e,i)){n[p].push(i),f=!0;break}f||n.push([i.reverse()])}return 1===n.length?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}function C(t){var e=[],i=t.slice(0);if(4<=(t=b(i.shift().slice(0))).length){w(t)||t.reverse(),e.push(t);for(var n=0;n<i.length;n++){var o=b(i[n].slice(0));4<=o.length&&(w(o)&&o.reverse(),e.push(o))}}return e}var M={request:v,get:r,post:function(t,e,i,n){return(i=p(i,n)).open("POST",t),null!=n&&void 0!==n.options&&(i.timeout=n.options.timeout),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(d(e)),i}},T=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var o=0;o<e.features.length;o++)n.features.push(t(e.features[o],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=L(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?k(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var o=i[n];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},P=function t(e,i){i=i||"OBJECTID";var n,o={wkid:4326},r={};switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1],r.spatialReference=o;break;case"MultiPoint":r.points=e.coordinates.slice(0),r.spatialReference=o;break;case"LineString":r.paths=[e.coordinates.slice(0)],r.spatialReference=o;break;case"MultiLineString":r.paths=e.coordinates.slice(0),r.spatialReference=o;break;case"Polygon":r.rings=C(e.coordinates.slice(0)),r.spatialReference=o;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=C(t[i]),o=n.length-1;0<=o;o--){var r=n[o].slice(0);e.push(r)}return e}(e.coordinates.slice(0)),r.spatialReference=o;break;case"Feature":e.geometry&&(r.geometry=t(e.geometry,i)),r.attributes=e.properties?k(e.properties):{},e.id&&(r.attributes[i]=e.id);break;case"FeatureCollection":for(r=[],n=0;n<e.features.length;n++)r.push(t(e.features[n],i));break;case"GeometryCollection":for(r=[],n=0;n<e.geometries.length;n++)r.push(t(e.geometries[n],i))}return r},S='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function A(t,e){return P(t,e)}function D(t,e){return T(t,e)}function E(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=(0,f.latLng)(t.ymin,t.xmin),t=(0,f.latLng)(t.ymax,t.xmax);return(0,f.latLngBounds)(e,t)}function I(t){return{xmin:(t=(0,f.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var O=/^(OBJECTID|FID|OID|ID)$/i;function z(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(O)){e=t.fields[i].name;break}}return e}function B(t){for(var e in t.attributes)if(e.match(O))return e}function F(t,e){var i=t.features||t.results,n=i&&i.length,o=e||z(t),r={type:"FeatureCollection",features:[]};if(n)for(var a=i.length-1;0<=a;a--){var s=D(i[a],o||B(i[a]));r.features.push(s)}return r}function R(t){return"/"!==(t=f.Util.trim(t))[t.length-1]&&(t+="/"),t}function N(t){var e;return-1!==t.url.indexOf("?")&&(t.requestParams=t.requestParams||{},e=t.url.substring(t.url.indexOf("?")+1),t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),t.url=R(t.url.split("?")[0]),t}function U(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function Z(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function j(t){return t.getSize().x-h.attributionWidthOffset+"px"}function H(e){var t;e.attributionControl&&(e.attributionControl._esriAttributionLayerCount||(e.attributionControl._esriAttributionLayerCount=0),0===e.attributionControl._esriAttributionLayerCount&&(e.attributionControl._esriAttributionAddedOnce||((t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+j(e)+";}",document.getElementsByTagName("head")[0].appendChild(t),e.on("resize",function(t){e.attributionControl&&(e.attributionControl._container.style.maxWidth=j(t.target))}),e.attributionControl._esriAttributionAddedOnce=!0),e.attributionControl.setPrefix(S+' | Powered by <a href="https://www.esri.com">Esri</a>'),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution")),e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount+1)}function W(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix(S),f.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function V(t){var e={geometry:null,geometryType:null};return t instanceof f.LatLngBounds?(e.geometry=I(t),e.geometryType="esriGeometryEnvelope",e):((t=(t=t.getLatLng?t.getLatLng():t)instanceof f.LatLng?{type:"Point",coordinates:[t.lng,t.lat]}:t)instanceof f.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=A(t),e.geometryType=Z(t.type)),"Point"===(t="Feature"===(t=t.toGeoJSON?t.toGeoJSON():t).type?t.geometry:t).type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=A(t),e.geometryType=Z(t.type),e):void y("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function G(t,l){u.cors&&v(t,{},f.Util.bind(function(t,e){if(!t){l._esriAttributions=[];for(var i=0;i<e.contributors.length;i++)for(var n=e.contributors[i],o=0;o<n.coverageAreas.length;o++){var r=n.coverageAreas[o],a=(0,f.latLng)(r.bbox[0],r.bbox[1]),s=(0,f.latLng)(r.bbox[2],r.bbox[3]);l._esriAttributions.push({attribution:n.attribution,score:r.score,bounds:(0,f.latLngBounds)(a,s),minZoom:r.zoomMin,maxZoom:r.zoomMax})}l._esriAttributions.sort(function(t,e){return e.score-t.score}),q({target:l})}},this))}function q(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var o="",t=e.getBounds(),r=(0,f.latLngBounds)(t.getSouthWest().wrap(),t.getNorthEast().wrap()),a=e.getZoom(),s=0;s<i.length;s++){var l=i[s],u=l.attribution;!o.match(u)&&l.bounds.intersects(r)&&a>=l.minZoom&&a<=l.maxZoom&&(o+=", "+u)}o=o.substr(2),n.innerHTML=o,n.style.maxWidth=j(e),e.fire("attributionupdated",{attribution:o})}}}var K={warn:y,cleanUrl:R,getUrlParams:N,isArcgisOnline:U,geojsonTypeToArcGIS:Z,responseToFeatureCollection:F,geojsonToArcGIS:A,arcgisToGeoJSON:D,boundsToExtent:I,extentToBounds:E,calcAttributionWidth:j,setEsriAttribution:H,_setGeometry:V,_getAttributionData:G,_updateMapAttribution:q,_findIdAttributeFromFeature:B,_findIdAttributeFromResponse:z},$=f.Class.extend({options:{proxy:!1,useCors:a},generateSetter:function(e,t){return f.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,f.Util.setOptions(this,t.options)):(f.Util.setOptions(this,t),this.options.url=R(t.url)),this.params=f.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&f.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,o){e=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?M[t](e,i,n,o):M.get.JSONP(e,i,n,o)}});var J=$.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=(0,f.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(i,n){return this._cleanParams(),this.options.isModern||U(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e&&F(e),e)},this)},count:function(i,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.count,e)},t)},ids:function(i,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.objectIds,e)},t)},bounds:function(i,n){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&E(e.extent)?i.call(n,t,E(e.extent),e):(t={message:"Invalid Bounds"},i.call(n,t,null,e))},n)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){t=(0,f.point)(t);return this.params.pixelSize=[t.x,t.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&y("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;t=V(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});var Y=function(t){return new J(t)},X=$.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&F(e),e)},n)}});var Q=function(t){return new X(t)},tt=$.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var et=tt.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=I(t.getBounds()),t=t.getSize();return this.params.imageDisplay=[t.x,t.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=(0,f.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(o,r){return this.request(function(t,e){if(t)o.call(r,t,void 0,e);else{var i=F(e);e.results=e.results.reverse();for(var n=0;n<i.features.length;n++)i.features[n].layerId=e.results[n].layerId;o.call(r,void 0,i,e)}})},_setGeometryParams:function(t){t=V(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});var it=function(t){return new et(t)},nt=tt.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=(0,f.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),i&&i.features&&(o.catalogItems=F(i),n&&n.length===o.catalogItems.features.length))for(var r=n.length-1;0<=r;r--)o.catalogItems.features[r].properties.catalogItemVisibility=n[r];return o}});var ot=function(t){return new nt(t)},rt=f.Evented.extend({options:{proxy:!1,useCors:a,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,f.Util.setOptions(this,t),this.options.url=R(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,o){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var r=this._createServiceCallback(t,e,i,n,o);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&f.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?M[t](a,i,r,o):M.get.JSONP(a,i,r,o)}this._requestQueue.push([t,e,i,n,o])},_createServiceCallback:function(i,n,o,r,a){return f.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([i,n,o,r,a]),this.fire("authenticationrequired",{authenticate:f.Util.bind(this.authenticate,this)},!0),t.authenticate=f.Util.bind(this.authenticate,this)),r.call(a,t,e),t?this.fire("requesterror",{url:this.options.url+n,params:o,message:t.message,code:t.code,method:i},!0):this.fire("requestsuccess",{url:this.options.url+n,params:o,response:e,method:i},!0),this.fire("requestend",{url:this.options.url+n,params:o,method:i},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var at=rt.extend({identify:function(){return it(this)},find:function(){return Q(this)},query:function(){return Y(this)}});var st=function(t){return new at(t)},lt=rt.extend({query:function(){return Y(this)},identify:function(){return ot(this)}});var ut=function(t){return new lt(t)},ht=rt.extend({options:{idAttribute:"OBJECTID"},query:function(){return Y(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,n,o){for(var e=t.features||[t],i=e.length-1;0<=i;i--)delete e[i].id;return t=A(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var i=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;n&&n.call(o,t||e.addResults[0].error,i)},o)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,o){var e=t.features||[t];return t=A(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var i=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;n&&n.call(o,t||e.updateResults[0].error,i)},o)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,n,o){return this.post("deleteFeatures",{objectIds:t},function(t,e){var i=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;n&&n.call(o,t||e.deleteResults[0].error,i)},o)}});var ct=function(t){return new ht(t)},r="https:"!==window.location.protocol?"http:":"https:",dt=f.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:r+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:r+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:r+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:r+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:r+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:r+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!dt.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=dt.TILES[t]}e=f.Util.extend(i.options,e);f.Util.setOptions(this,e),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),f.TileLayer.prototype.initialize.call(this,i.urlTemplate,e)},onAdd:function(t){H(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&G((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",q),f.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){W(t),t.off("moveend",q),f.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){var t;this._map.getPane(this.options.pane)||((t=this._map.createPane(this.options.pane)).style.pointerEvents="none",t.style.zIndex=500)},getAttribution:function(){var t;return t=this.options.attribution?'<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>":t}});function pt(t,e){return new dt(t,e)}var ft=f.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=N(t=f.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?f.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=st(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),f.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return f.Util.template(this.tileUrl,f.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return f.DomEvent.on(i,"load",f.Util.bind(this._tileOnLoad,this,e,i)),f.DomEvent.on(i,"error",f.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",function(){i.src=this.getTileUrl(t)},this),i},onAdd:function(l){H(l),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){t=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&l.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,l.attributionControl.addAttribution(this.getAttribution())),l.options.crs!==f.CRS.EPSG3857||102100!==t&&3857!==t)l.options.crs&&l.options.crs.code&&-1<l.options.crs.code.indexOf(t)||y("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var i=e.tileInfo.lods,n=ft.MercatorZoomLevels,o=0;o<i.length;o++){var r,a=i[o];for(r in n){var s=n[r];if(this._withinPercentage(a.resolution,s,this.options.zoomOffsetAllowance)){this._lodMap[r]=a.level;break}}}this.fire("lodmap")}}},this),f.TileLayer.prototype.onAdd.call(this,l)},onRemove:function(t){W(t),f.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var mt=f.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,f.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===f.CRS.EPSG3857?f.ImageOverlay.prototype._reset.call(this):f.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),a=f.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:a,attribution:null,interactive:!1,alt:""},onAdd:function(i){H(i),this.options.zIndex&&(this.options.position=null),this._update=f.Util.throttle(this._update,this.options.updateInterval,this),i.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?i.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){W(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,f.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,i,e){var n,o;this._map&&(t=e?"data:"+e+";base64,"+t:t)&&(n=new mt(t,i,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(t){var e;n.off("error",o,this),this._map&&(e=t.target,t=this._currentImage,e._bounds.equals(i)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),t&&this._map&&this._map.removeLayer(t),t&&t._map&&t._map.removeLayer(t)):this._map.removeLayer(e)),this.fire("load",{bounds:i})},n.once("error",function(){this._map.removeLayer(n),this.fire("error"),n.off("load",o,this)},this),n.once("load",o,this))},_update:function(){var t,e;this._map&&(e=this._map.getZoom(),t=this._map.getBounds(),this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(e>this.options.maxZoom||e<this.options.minZoom?this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null):(e=this._buildExportParams(),f.Util.extend(e,this.options.requestParams),e?(this._requestExport(e,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null))))},_renderPopup:function(t,e,i,n){t=(0,f.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)&&((n=this._popupFunction(e,i,n))&&this._popup.setLatLng(t).setContent(n).openOn(this._map))},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.options.crs.project(t),e=this._map.options.crs.project(e),e=(0,f.bounds)(t,e);return[e.getBottomLeft().x,e.getBottomLeft().y,e.getTopRight().x,e.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.latLngToLayerPoint(t).y,i=this._map.latLngToLayerPoint(i).y;return(0<t||i<e.y)&&(e.y=i-t),e.x+","+e.y}});a.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=N(t),this.service=ut(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return f.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return f.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(n){var t=f.Util.bind(function(t,e,i){t||setTimeout(f.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.identify().at(n.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),0!==this.options.noData&&!this.options.noData||(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(t,i){"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,i))},this):(t.f="image",t=this.options.url+"exportImage"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,i))}});a.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=N(t),this.service=st(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(n){var t=f.Util.bind(function(t,e,i){t||setTimeout(f.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=(this.options.popup||this.identify()).on(this._map).at(n.latlng);if(e.params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(t,i){"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,i):this._renderImage(e.imageData,i,e.contentType))},this):(t.f="image",t=this.options.url+"export"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,i))}});var gt=f.Layer.extend({options:{cellSize:512,updateWhenIdle:f.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){f.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof f.Point?t:new f.Point(t,t)},_pruneCells:function(){if(this._map){var t,e,i;for(t in this._cells)(i=this._cells[t]).retain=i.current;for(t in this._cells)(i=this._cells[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),t=Math.floor(e/2),e=i-1,i=new f.Point(+o,+t);i.z=+e;i=this._cellCoordsToKey(i),i=this._cells[i];return i&&i.active?i.retain=!0:(i&&i.loaded&&(i.retain=!0),n<e&&this._retainParent(o,t,e,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new f.Point(o,r);a.z=i+1;a=this._cellCoordsToKey(a),a=this._cells[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(t,e,i,n){e=Math.round(e);n||(this._cellZoom=e,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==e&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(i,this._cellZoom),t=e.project(t,this._cellZoom).floor(),i=e.getSize().divideBy(2*i);return new f.Bounds(t.subtract(i),t.add(i))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n,e=this._getCelldPixelBounds(t),o=this._pxBoundsToCellRange(e),r=o.getCenter(),a=[],e=this.options.keepBuffer,s=new f.Bounds(o.getBottomLeft().subtract([e,-e]),o.getTopRight().add([e,-e]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(n in this._cells){var l=this._cells[n].coords;l.z===this._cellZoom&&s.contains(new f.Point(l.x,l.y))||(this._cells[n].current=!1)}if(1<Math.abs(i-this._cellZoom))this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var h=o.min.x;h<=o.max.x;h++){var c,d=new f.Point(h,u);d.z=this._cellZoom,this._isValidCell(d)&&((c=this._cells[this._cellCoordsToKey(d)])?c.current=!0:a.push(d))}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length)for(this._loading||(this._loading=!0),h=0;h<a.length;h++){var p=this._cellCoordsToKey(a[h]),p=this._keyToCellCoords(p);this._activeCells[p]?this._reuseCell(a[h]):this._createCell(a[h])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;t=this._cellCoordsToBounds(t);return(0,f.toLatLngBounds)(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),i=n.add(i);return[e.unproject(n,t.z),e.unproject(i,t.z)]},_cellCoordsToBounds:function(t){t=this._cellCoordsToNwSe(t),t=new f.LatLngBounds(t[0],t[1]);return t=!this.options.noWrap?this._map.wrapLatLngBounds(t):t},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),t=new f.Point(+e[0],+e[1]);return t.z=+e[2],t},_removeCell:function(t){var e,i,n=this._cells[t];n&&(i=this._keyToCellCoords(t),e=this._wrapCoords(i),i=this._cellCoordsToBounds(this._wrapCoords(i)),n.current=!1,delete this._cells[t],this._activeCells[t]=n,this.cellLeave(i,e,t),this.fire("cellleave",{key:t,coords:e,bounds:i}))},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),t=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(t,i,e),this.fire("cellenter",{key:e,coords:i,bounds:t})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},f.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){t=this._cellCoordsToKey(t);(i=this._cells[t])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new f.Point(this._wrapX?f.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?f.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new f.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function vt(t){this.values=[].concat(t||[])}vt.prototype.query=function(t){t=this.getIndex(t);return this.values[t]},vt.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,o=this.values.length-1;n<=o;)if(e=(n+o)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=1+e;else{if(!(+i.value>+t))return e;o=e-1}return Math.abs(~o)},vt.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},vt.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},vt.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},vt.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var _t=vt,yt=gt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(gt.prototype.initialize.call(this,t),t=N(t),t=f.Util.setOptions(this,t),this.service=ct(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&y("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new _t,this._endTimeIndex=new _t):this.options.timeField&&(this._timeIndex=new _t),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(n){return H(n),this.service.metadata(function(t,e){var i;t||(i=e.supportedQueryFormats,!(t=(t=!1)===this.service.options.isModern||this.options.fetchAllFeatures?!0:t)&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&n.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,n.attributionControl.addAttribution(this.getAttribution())))},this),n.on("zoomend",this._handleZoomChange,this),gt.prototype.onAdd.call(this,n)},onRemove:function(t){return W(t),t.off("zoomend",this._handleZoomChange,this),gt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(n,o,r,a){this._activeRequests++,a=a||0;var s=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:n},!0),this._buildQuery(n,a).run(function(t,e,i){i&&i.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===s&&(!t&&e&&e.features.length&&f.Util.requestAnimFrame(f.Util.bind(function(){this._addFeatures(e.features,o),this._postProcessFeatures(n)},this)),t||!e||e.features.length||this._postProcessFeatures(n),t&&this._postProcessFeatures(n),r&&r.call(this,t,e),i&&(i.exceededTransferLimit||i.properties&&i.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(n,o,r,a+e.features.length))},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var i;e&&(i=this._cacheKey(e),this._cache[i]=this._cache[i]||[]);for(var n=t.length-1;0<=n;n--){var o=t[n].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),void 0!==i&&-1===this._cache[i].indexOf(o)&&this._cache[i].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){t=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return(t=this.options.fetchAllFeatures&&!isNaN(parseInt(e))?t.offset(e):t).params.resultType="tile",this.options.requestParams&&f.Util.extend(t.params,this.options.requestParams),this.options.simplifyFactor&&t.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&t.between(this.options.from,this.options.to),t},setWhere:function(n,o,r){this.options.where=n&&n.length?n:"1=1";for(var t,a=[],s=[],l=0,u=null,e=f.Util.bind(function(t,e){if(t&&(u=t),e)for(var i=e.features.length-1;0<=i;i--)s.push(e.features[i].id);--l<=0&&this._visibleZoom()&&n===this.options.where&&(this._currentSnapshot=s,f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(a),this.addLayers(s),o&&o.call(r,u)},this)))},this),i=this._currentSnapshot.length-1;0<=i;i--)a.push(this._currentSnapshot[i]);for(t in this._cache={},this._cells){l++;var h=this._keyToCellCoords(t),c=this._cellCoordsToBounds(h);this._requestFeatures(c,h,e)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,i,n,o){var r=this.options.from,a=this.options.to,s=0,l=null,t=f.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(r,a,e,i),s--,n&&s<=0&&n.call(o,l)},this);if(this.options.from=e,this.options.to=i,this._filterExistingFeatures(r,a,e,i),"server"===this.options.timeFilterMode)for(var u in this._cells){s++;var h=this._keyToCellCoords(u),c=this._cellCoordsToBounds(h);this._requestFeatures(c,h,t)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var o=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,r=this._getFeaturesInTimeRange(i,n);if(r.indexOf)for(var a=0;a<r.length;a++){var s=o.indexOf(r[a]);0<=s&&o.splice(s,1)}f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(o),this.addLayers(r)},this))},_getFeaturesInTimeRange:function(t,e){var i=[];if(this.options.timeField.start&&this.options.timeField.end)var n=this._startTimeIndex.between(t,e),o=this._endTimeIndex.between(t,e),r=n.concat(o);else{if(!this._timeIndex)return y("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];r=this._timeIndex.between(t,e)}for(var a=r.length-1;0<=a;a--)i.push(r[a].id);return i},_buildTimeIndexes:function(t){var e;if(this.options.timeField.start&&this.options.timeField.end){for(var i=[],n=[],o=t.length-1;0<=o;o--)e=t[o],i.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),n.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(n)}else{var r=[];for(o=t.length-1;0<=o;o--)e=t[o],r.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return e<=n&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){n=+t.properties[this.options.timeField.start],t=+t.properties[this.options.timeField.end];return e<=n&&n<=i||e<=t&&t<=i||n<=e&&i<=t}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,e=this._cacheKey(e);this._cache[e]&&this.addLayers(this._cache[e])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(i){this._metadata?i(void 0,this._metadata):this.metadata(f.Util.bind(function(t,e){this._metadata=e,i(t,this._metadata)},this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(e,r,a){this._getMetadata(f.Util.bind(function(t,n){var o;t?r&&r.call(this,t,null):(o=e.features||[e],this.service.addFeatures(e,f.Util.bind(function(t,e){if(!t){for(var i=o.length-1;0<=i;i--)o[i].properties[n.objectIdField]=(1<o.length?e[i]:e).objectId,o[i].id=(1<o.length?e[i]:e).objectId;this._addFeatures(o)}r&&r.call(a,t,e)},this)))},this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,o){var r=t.features||[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var i=r.length-1;0<=i;i--)this.removeLayers([r[i].id],!0);this._addFeatures(r)}n&&n.call(o,t,e)},this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,o,r){return this.service.deleteFeatures(t,function(t,e){var i=e.length?e:[e];if(!t&&0<i.length)for(var n=i.length-1;0<=n;n--)this.removeLayers([i[n].objectId],!0);o&&o.call(r,t,e)},this)}});yt.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),yt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return yt.prototype.onRemove.call(this,t)},createNewLayer:function(t){t=f.GeoJSON.geometryToLayer(t,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||f.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=f.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=t[e],n=this._layers[i.id];!this._visibleZoom()||!n||this._map.hasLayer(n)||this.options.timeField&&!this._featureWithinTimeRange(i)||(this._map.addLayer(n),this.fire("addfeature",{feature:n.feature},!0)),n&&0<this.options.simplifyFactor&&(n.setLatLngs||n.setLatLng)&&this._updateLayer(n,i),n||((n=this.createNewLayer(i))?(n.feature=i,n.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(n.feature,n),this._layers[n.feature.id]=n,this.setFeatureStyle(n.feature.id,this.options.style),this.fire("createfeature",{feature:n.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&this._map.addLayer(n)):y("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i],o=this._layers[n];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[n]}},cellEnter:function(t,i){this._visibleZoom()&&!this._zooming&&this._map&&f.Util.requestAnimFrame(f.Util.bind(function(){var t=this._cacheKey(i),e=this._cellCoordsToKey(i),t=this._cache[t];this._activeCells[e]&&t&&this.addLayers(t)},this))},cellLeave:function(t,s){this._zooming||f.Util.requestAnimFrame(f.Util.bind(function(){if(this._map){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),i=this._cache[t],n=this._map.getBounds();if(!this._activeCells[e]&&i){for(var o=!0,r=0;r<i.length;r++){var a=this._layers[i[r]];a&&a.getBounds&&n.intersects(a.getBounds())&&(o=!1)}o&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&o&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||f.Path.prototype.options;return e&&(f.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){t=this._layers[t];return"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i,n=this._map.getBounds();for(i in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[i].feature.id)&&("function"==typeof this._layers[i].getLatLng&&n.contains(this._layers[i].getLatLng())||"function"==typeof this._layers[i].getBounds&&n.intersects(this._layers[i].getBounds()))&&t.call(e,this._layers[i])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e,i=this._layers[t],t=i.feature;i&&i.setIcon&&this.options.pointToLayer&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,(0,f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options.icon,i.setIcon(e)),i&&i.setStyle&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,(0,f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options,this.setFeatureStyle(t.id,e)),i&&i.setStyle&&this.options.style&&this.resetStyle(t.id)}});i(5732),i(9627),i(7977);m().TileLayer.HERE=m().TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e,i,n=(t=m().setOptions(this,t)).scheme.split(".")[0];t.tileResolution=256,m().Browser.retina&&(t.tileResolution=512),i=t.apiKey?(e=".maps.ls.hereapi.com",o="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}","/maptile/2.1/copyright/{mapId}?apiKey={apiKey}"):(e=".maps.api.here.com",o="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}","/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}");var n="satellite"!=n&&"terrain"!=n&&"hybrid"!=n?"base":"aerial",o="https://{s}."+(n=-1!==t.scheme.indexOf(".traffic.")?"traffic":n)+e+o;this._attributionUrl=m().Util.template("https://1."+n+e+i,this.options),m().TileLayer.prototype.initialize.call(this,o,t),this._attributionText=""},onAdd:function(t){m().TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){m().TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=m().bind(function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))},this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var o=e[i].boxes[n];e[i].boxes[n]=m().latLngBounds([[o[0],o[1]],[o[2],o[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),o=0;o<t.length;o++){if(t[o].minLevel<i&&t[o].maxLevel>i&&!t[o].boxes){e.push(t[o]);break}for(var r=0;r<t[o].boxes.length;r++){var a=t[o].boxes[r];if(n.overlaps(a)){e.push(t[o]);break}}}for(var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'],o=0;o<e.length;o++){var l=e[o];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var u=" "+s.join(", ")+". ";u!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=u))}}}),m().tileLayer.here=function(t){return new(m().TileLayer.HERE)(t)},m().TileLayer.TomTom=m().TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=m().setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;m().TileLayer.prototype.initialize.call(this,e,t),this._copyright=m().DomUtil.create("div","tomtom-copyright"),this._copyrightClose=m().DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=m().DomUtil.create("div","tomtom-copyright-content",this._copyright),m().DomEvent.on(this._copyrightClose,"click",function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()},this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){m().TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){m().TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){var t;void 0!==this._map.attributionControl&&(this._map.attributionControl.addAttribution(this._attributionText),null!==(t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution"))&&m().DomEvent.on(t,"click",function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()},this))},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n=this._map.getBounds(),o=n.getNorthEast().wrap(),t=n.getSouthWest().wrap(),n=t.lng<o.lng?(e=t.lng,o.lng):(e=o.lng,t.lng),t=t.lat<o.lat?(i=t.lat,o.lat):(i=o.lat,t.lat),t="https://api.tomtom.com/map/1/copyrights/"+e+"/"+i+"/"+n+"/"+t+".json?key="+this.options.apiKey,r=new XMLHttpRequest;r.onreadystatechange=m().bind(function(){if(r.readyState===XMLHttpRequest.DONE&&200===r.status){for(var t=JSON.parse(r.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var o=0;o<n.copyrights.length;o++)e+="<p>"+n.copyrights[o]+"</p>"}this._copyrightContent.innerHTML=e}},this),r.open("GET",t,!0),r.send()},_hideCopyright:function(){this._copyright.remove()}}),m().tileLayer.tomTom=function(t,e){return new(m().TileLayer.TomTom)(t,e)};i(810),i(5830),i(8292),i(7244),i(687);function xt(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function bt(t,n,o,r){return t.sort(function(t,e){var i,e="desc"===o?(i=e[n],t[n]):(i=t[n],e[n]);return r?i-e:i.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})}),t}function wt(t,e){var i=Math.floor(t),n=i%1e3,o=(i=Math.floor(i/1e3))%60,r=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,i=i=Math.floor(i/24);return e?(n="",o+='"'):(n+='"',o+="."),6e4<t?r+="'":r="",36e5<t?a+=":":a="",864e5<t?i+=".":i="",i+a+r+o+n}function kt(t,e){e=Math.pow(10,e);return Math.round(t*e)/e}m().Control.ResetView=m().Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=m().DomUtil.create("div","leaflet-control-reset-view leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",function(){e.style.display="block"})),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"leaflet-control-reset-view-button leaflet-bar-part",e,this._resetView),e},_createButton:function(t,e,i,n,o){n=m().DomUtil.create("a",i,n);n.innerHTML=t,n.href="#",n.title=e,m().DomEvent.disableClickPropagation(n),m().DomEvent.on(n,"click",m().DomEvent.stop),m().DomEvent.on(n,"click",o,this),m().DomEvent.on(n,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",function(){this._container.style.display="none"},this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),m().control.resetView=function(t){return new(m().Control.ResetView)(t)},m().Control.Filters=m().Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){m().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",o=this._container=m().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),m().DomEvent.disableClickPropagation(o),m().DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),m().Browser.android||m().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=m().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Filters",m().Browser.touch?(m().DomEvent.on(r,"click",m().DomEvent.stop),m().DomEvent.on(r,"click",this.expand,this)):m().DomEvent.on(r,"focus",this.expand,this);var a,s=this._form=m().DomUtil.create("form",n+"-list",o);this.options.buttons&&(a=m().DomUtil.create("div","mmp-control-filters-buttons",s),(r=m().DomUtil.create("a",null,a)).innerHTML=this.options.allText,r.href="#",r.title=this.options.allText,m().DomEvent.disableClickPropagation(r),m().DomEvent.on(r,"click",m().DomEvent.stop),m().DomEvent.on(r,"click",function(){this._batchSelect(!0)},this),(a=m().DomUtil.create("a",null,a)).innerHTML=this.options.noneText,a.href="#",a.title=this.options.noneText,m().DomEvent.disableClickPropagation(a),m().DomEvent.on(a,"click",m().DomEvent.stop),m().DomEvent.on(a,"click",function(){this._batchSelect(!1)},this));var l=[];Object.keys(e.settings.filtersDetails).forEach(function(t){void 0!==e.groups[t]&&l.push({index:e.settings.filtersDetails[t].index,id:t,icon:e.settings.filtersDetails[t].icon,name:e.settings.filtersDetails[t].name,count:Object.keys(e.groups[t].markers).length})}),l="id"==e.settings.filtersOrderBy?bt(l,"id",e.settings.filtersSortOrder,!0):"name"==e.settings.filtersOrderBy?bt(l,"name",e.settings.filtersSortOrder,!1):"count"==e.settings.filtersOrderBy?bt(l,"count",e.settings.filtersSortOrder,!0):bt(l,"index",e.settings.filtersSortOrder,!0);for(var u=0;u<l.length;u++){var h=m().DomUtil.create("label",null,s),c=m().DomUtil.create("input",n+"-selector",h);c.type="checkbox",c.value=l[u].id,void 0!==e.groups[l[u].id]&&e.groups[l[u].id].active&&(c.checked=!0);var d=m().DomUtil.create("span",null,h),h="";e.settings.filtersIcon&&(h+='<img class="mmp-filter-icon" src="'+(l[u].icon?mmpVars.iconsUrl+l[u].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />'),e.settings.filtersName&&(h+=l[u].name),e.settings.filtersCount&&(h+=" ["+l[u].count+"]"),d.innerHTML=h;var p=this;m().DomEvent.on(c,"click",function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),p._update(),t.fire("filterclick")},c)}return i||this.expand(),o},expand:function(){m().DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(m().DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):m().DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return m().DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;0<=n;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);this._update(),this._map.fire("filterclick")},_update:function(){var t,e=this.options.mmp;"map"===e.type&&e.settings.list?e.getList():(t=e.getActiveMarkers(),e.drawMarkers(t)),e.drawGeoJson()}}),m().control.filters=function(t){return new(m().Control.Filters)(t)},m().Control.Gpx=m().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){m().Util.setOptions(this,t)},onAdd:function(e){this._map=e;var i=this.options.mmp,t=this.options.collapsed,n="mmp-control-tracks",o=this._container=m().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),m().DomEvent.disableClickPropagation(o),m().DomEvent.disableScrollPropagation(o),t&&(this._map.on("click",this.collapse,this),m().Browser.android||m().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=m().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Tracks",m().Browser.touch?(m().DomEvent.on(r,"click",m().DomEvent.stop),m().DomEvent.on(r,"click",this.expand,this)):m().DomEvent.on(r,"focus",this.expand,this);for(var a=this._form=m().DomUtil.create("form",n+"-list",o),s=0;s<i.gpx.tracks.length;s++){var l=m().DomUtil.create("label",null,a),u=m().DomUtil.create("input",n+"-selector",l);u.type="radio",u.name="mmp-gpx-tracks",0==(u.value=s)&&(u.checked=!0),m().DomUtil.create("span",null,l).innerHTML=i.gpx.tracks[s].name||"Unnamed Track",m().DomEvent.on(u,"click",function(){var t=parseInt(this.value);e._activeTrack=t,e.fitBounds(i.gpxTracks[t].getBounds(),{padding:[10,10]}),i.updateElevationChart(!0)},u)}return t||this.expand(),o},expand:function(){m().DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(m().DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):m().DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return m().DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),m().control.gpx=function(t){return new(m().Control.Gpx)(t)};i(5356);var a=i(1639),Lt=i.n(a);var Ct=function(t,e,i,n,o,r,a){var c=this;this.querySelector=t,this.error=e,this.selected=i,this.provider=n,this.options=o,this.typinginterval=r,this.minChars=a,this.input,this.providers={algolia:{getUrl:function(t){var e=c.options.algolia,t="https://places-dsn.algolia.net/1/places/query?query="+t+"&hitsPerPage=10";return e.appId&&(t+="&x-algolia-application-id="+e.appId),e.apiKey&&(t+="&x-algolia-api-key="+e.apiKey),t+="&language="+e.language,e.countries&&(t+="&countries="+e.countries),t+="&aroundLatLngViaIP="+(e.aroundLatLngViaIP?"true":"false"),e.aroundLatLng&&(t+="&aroundLatLng="+e.aroundLatLng),t},beforeSend:function(t){var e=c.options.algolia;e.appId&&e.apiKey&&(t.setRequestHeader("X-Algolia-Application-Id",e.appId),t.setRequestHeader("X-Algolia-API-Key",e.apiKey))},formatResults:function(t,e){var l=[];return t.hits.length&&jQuery.each(t.hits,function(t,e){var i=c.options.algolia.language,n=e.administrative,o=e.city,r=e.country,a="";void 0!==e._highlightResult.locale_names[i]&&e._highlightResult.locale_names[i].length?a=e._highlightResult.locale_names[i][0].value:void 0!==e._highlightResult.locale_names&&e._highlightResult.locale_names.length&&(a=e._highlightResult.locale_names[0].value),o=o?e._highlightResult.city[0].value:null,n=n&&void 0!==e._highlightResult.administrative?e._highlightResult.administrative[0].value:null,r=r?e._highlightResult.country.value:null;var s=e._tags,i=c.getUnifiedType(["country","city","address"],s),s=i.charAt(0).toUpperCase()+i.slice(1),r='<span class="ap-suggestion-icon ap-'+i+'" title="'+s+'"></span><span class="ap-name">'+a+'</span><span class="ap-address">'+((n?", "+n:"")+(o?", "+o:"")+(r?", "+r:""))+"</span>";l.push({value:jQuery(r).text().trim(),formatted:r,lat:e._geoloc.lat,lng:e._geoloc.lng})}),l},footer:c.options.algolia.footer},locationiq:{getUrl:function(t){var e=c.options.locationiq,t="https://api.locationiq.com/v1/autocomplete.php?q="+t+"&normalizecity=1&limit=10";return e.apiKey&&(t+="&key="+e.apiKey),e.bounds&&(t+="&viewbox="+[e.lon1,e.lat1,e.lon2,e.lat2].join(",")),t+="&accept-language="+e.language},formatResults:function(t,u){var h=[];return t.length&&jQuery.each(t,function(t,e){var i=e.address.country,n=e.address.city,o=e.address.housenumber,r=e.address.road,a=e.address.postcode,s=e.address.state,l=void 0!==e.address.name?e.address.name.replace(u,"<em>"+u+"</em>"):"",n=(n=(r?", "+r+(o?" "+o:""):"")+(a?" "+a:"")+(n?", "+n:"")+(s?", "+s:"")+(i?", "+i:"")).replace(u,"<em>"+u+"</em>"),s=e.type.toLowerCase(),i=c.getUnifiedType(["country","state","city","address"],s),s=i.charAt(0).toUpperCase()+i.slice(1),n='<span class="ap-suggestion-icon ap-'+i+'" title="'+s+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+n+"</span>";h.push({value:jQuery(n).text().trim(),formatted:n,lat:parseFloat(e.lat),lng:parseFloat(e.lon)})}),h},footer:c.options.locationiq.footer},mapquest:{getUrl:function(t){var e=c.options.mapquest,t="https://www.mapquestapi.com/geocoding/v1/address?location="+t+"&maxResults=10";return e.api_key&&(t+="&key="+e.api_key),e.boundingBox&&(t+="&boundingBox="+[e.lat1,e.lon1,e.lat2,e.lon2].join(",")),t},formatResults:function(t,r){var a=[];return t.results[0].locations.length&&jQuery.each(t.results[0].locations,function(t,e){var i="";i+=void 0!==e.street&&e.street?e.street+", ":"",i+=void 0!==e.adminArea5&&e.adminArea5?e.adminArea5+", ":"",i+=void 0!==e.adminArea4&&e.adminArea4?e.adminArea4+", ":"",i+=void 0!==e.adminArea3&&e.adminArea3?e.adminArea3+", ":"",i+=void 0!==e.adminArea2&&e.adminArea2?e.adminArea2+", ":"",i+=void 0!==e.adminArea1&&e.adminArea1?e.adminArea1:"";var n=e.geocodeQuality.toLowerCase(),o=c.getUnifiedType(["country","city","address"],n),n=o.charAt(0).toUpperCase()+o.slice(1),i='<span class="ap-suggestion-icon ap-'+o+'" title="'+n+'"></span><span class="ap-name">'+i.replace(r,"<em>"+r+"</em>")+"</span>";a.push({value:jQuery(i).text().trim(),formatted:i,lat:e.latLng.lat,lng:e.latLng.lng})}),a},footer:c.options.mapquest.footer},google:{getUrl:function(t){var e=c.options.google,t=mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&address="+t;return e.nonce&&(t+="&nonce="+e.nonce),t},formatResults:function(t,o){var r=[];return t.results.length&&jQuery.each(t.results,function(t,e){var i=e.types,n=c.getUnifiedType(["country","locality","street_address"],i),i=n.charAt(0).toUpperCase()+n.slice(1),i='<span class="ap-suggestion-icon ap-'+n+'" title="'+i+'"></span><span class="ap-name">'+e.address.replace(o,"<em>"+o+"</em>")+"</span>";r.push({value:jQuery(i).text().trim(),formatted:i,placeId:e.place_id})}),r},footer:c.options.google.footer},tomtom:{getUrl:function(t){var e=c.options.tomtom,t="https://api.tomtom.com/search/2/geocode/"+t+".JSON?limit=10";return e.apiKey&&(t+="&key="+e.apiKey),e.language&&(t+="&language="+e.language),e.countrySet&&(t+="&countrySet="+e.countrySet),e.lat&&(t+="&lat="+e.lat),e.lon&&(t+="&lon="+e.lon),e.radius&&(t+="&radius="+e.radius),t},formatResults:function(t,r){var a=[];return t.results.length&&jQuery.each(t.results,function(t,e){var i=e.address.freeformAddress;i+=i!==e.address.country?", "+e.address.country:"";var n=e.type,o=(n="Geography"===n?"Municipality"===e.entityType?"city":"Country"===e.entityType?"country":"address":"address").charAt(0).toUpperCase()+n.slice(1),i='<span class="ap-suggestion-icon ap-'+n+'" title="'+o+'"></span><span class="ap-name">'+i.replace(r,"<em>"+r+"</em>")+"</span>";a.push({value:jQuery(i).text().trim(),formatted:i,lat:e.position.lat,lng:e.position.lon})}),a},footer:c.options.tomtom.footer}},this.init=function(){c.input=Lt()(c.querySelector,{minLength:c.minChars,hint:!1,autoselect:!0,openOnFocus:!1,debug:!1},[{source:function(e,i){var n=c.providers[c.provider];jQuery.ajax({url:n.getUrl(e),type:"GET",beforeSend:function(t){jQuery(c.querySelector).removeClass("results-error"),jQuery(c.querySelector).addClass("results-loading"),"function"==typeof n.beforeSend&&n.beforeSend(t)}}).done(function(t){t=n.formatResults(t,e);i(t)}).fail(function(t){var e="Geocoding error";t.status&&t.statusText&&(e+=" "+t.status+" ("+t.statusText+")"),jQuery(c.querySelector).addClass("results-error"),c.error(e)}).always(function(){jQuery(c.querySelector).removeClass("results-loading")})},templates:{suggestion:function(t){return t.formatted},footer:c.providers[c.provider].footer,header:'<div id="geocoding-results-header-div">'+c.options.header+'</div><div id="geocoding-results-header-image-div"><img src="'+mmpVars.pluginUrl+'images/geocoding/icon-key-enter.png" /></div><div style="clear:both; border-bottom:1px solid #ccc;"></div>'},debounce:c.typinginterval}]).on("autocomplete:selected",function(t,e){e.placeId?jQuery.ajax({url:mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&place_id="+e.placeId+"&nonce="+c.options.google.nonce,type:"GET"}).done(function(t){"OK"===t.status&&c.selected(t.results.geometry.location.lat,t.results.geometry.location.lng)}):c.selected(e.lat,e.lng)})},this.reload=function(){c.input.autocomplete.destroy(),c.init()},this.getUnifiedType=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(-1!==e.indexOf(n))break}switch(n){case"address":case"street_address":return"address";case"city":case"locality":case"venue":return"city";case"state":case"country":return"country";default:return"address"}}};function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a=function(t){var f=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.markers,this.settings=t.overrides||{},this.language=t.language||null,this.highlight=t.highlight||null,this.fullscreen=t.fullscreen||!1,this.page=t.page||null,this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.listeners={},this.list={page:1,term:null,sort:null,order:null,lat:null,lng:null,radius:0,located:!1,geocoding:{},circle:{}},this.on=function(t,e){f.listeners[t]instanceof Array||(f.listeners[t]=[]),-1===f.listeners[t].indexOf(e)&&f.listeners[t].push(e)},this.off=function(t,e){f.listeners[t]instanceof Array&&(-1!==(e=f.listeners[t].indexOf(e))&&f.listeners[t].splice(e,1))},this.fire=function(t,e){if(f.listeners[t]instanceof Array)for(var i=0;i<f.listeners[t].length;i++)f.listeners[t][i].call(f,e)},this.checkInvalidateSize=function(){var t=xt(f.containers.main);!f.mapVisible&&t&&(f.map.invalidateSize(),void 0!==f.controls.minimap&&f.controls.minimap._miniMap.invalidateSize()),f.mapVisible=t},this.strToBounds=function(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])},this.boundsToStr=function(t){return[t.getSouth(),t.getWest(),t.getNorth(),t.getEast()].join(",")},this.checkJson=function(t){try{var e=JSON.parse(t);if(e&&"object"===Mt(e))return e}catch(t){}return!1},this.formatGpxValue=function(t,e,i){if(isNaN(t))return"N/A";var n,o,e="dist"===e?(n=1.609344,o=" km"," mi"):(n=.3048,o=" m"," ft"),r="imperial"===i||"imperial-metric"===i?(a=t*n,t):(a=t)/n,a=kt(a,2)+o;switch(r=kt(r,2)+e,i){case"imperial":return r;case"metric-imperial":return a+" ("+r+")";case"imperial-metric":return r+" ("+a+")";default:return a}},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=document.createElement("div");e.className="mmp-loading-spinner";var i=document.createElement("div");i.className="rect-wrap",e.appendChild(i);for(var n=1;n<=5;n++){var o=document.createElement("div");o.className="rect"+n,i.appendChild(o)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,e){void 0!==f.containers.mapModal&&f.containers.mapModal.remove(),f.containers.mapModal=m().DomUtil.create("div","mmp-map-modal"),f.containers.mapModal.addEventListener("click",function(t){t.target===this&&this.remove()});var i=m().DomUtil.create("div","mmp-map-modal-content",f.containers.mapModal),n=m().DomUtil.create("span","mmp-map-modal-close",i);n.innerHTML="&times;",n.addEventListener("click",function(t){t.target===this&&f.containers.mapModal.remove()});n=m().DomUtil.create("div","mmp-map-modal-header",i);m().DomUtil.create("p","mmp-map-modal-title",n).innerHTML=t;i=m().DomUtil.create("div","mmp-map-modal-body",i);"string"==typeof e?m().DomUtil.create("p","mmp-map-modal-message",i).innerHTML=e:i.appendChild(e),f.containers.map.appendChild(f.containers.mapModal)},this.getDirectionsLink=function(t,e,i,n){var o=f.settings,r="";switch(t){case"googlemaps":r="https://www.google.com/maps?daddr="+(n||e+","+i),r+="&t="+o.directionsGoogleType,r+="&layer="+(o.directionsGoogleTraffic?"1":"0"),r+="&doflg="+o.directionsGoogleUnits,o.directionsGoogleAvoidHighways&&(r+="&dirflg=h"),o.directionsGoogleAvoidTolls&&(r+="&dirflg=t"),o.directionsGooglePublicTransport&&(r+="&dirflg=r"),o.directionsGoogleWalking&&(r+="&dirflg=w"),o.directionsGoogleLanguage&&(r+="&hl="+o.directionsGoogleLanguage),r+="&om="+(o.directionsGoogleOverview?"1":"0");break;case"ors":r="https://classic-maps.openrouteservice.org/directions?a=null,null,"+e+","+i,r+="&b="+("Bicycle"===o.directionsOrsType?"1a":"Pedestrian"===o.directionsOrsType?"2":"HeavyVehicle"===o.directionsOrsType?"4a":"0"),r+="&c="+("Shortest"===o.directionsOrsRoute?"1":"0");break;case"bingmaps":r="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+e+"_"+i+(n?"_"+n:"")}return r},this.getApiLink=function(t,e,i){i=i||{};var n=f.settings,o=mmpVars.apiUrl;switch(!n.language||"geojson"!==t&&"kml"!==t&&"georss"!==t||(i.lang=n.language),t){case"editMap":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e;break;case"editMarker":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e;break;case"fs":o+="fullscreen/"+e+"/";break;case"gpx":o=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+n.gpxUrl;break;case"geojson":o+="export/geojson/"+e+"/";break;case"kml":o+="export/kml/"+e+"/";break;case"georss":o+="export/georss/"+e+"/"}return Object.keys(i).length&&(o+="?",Object.keys(i).forEach(function(t){o+=t+"="+i[t]+"&"}),o=o.slice(0,-1)),o},this.addApiLink=function(t,e,i,n){n=m().DomUtil.create("a","mmp-api-icon "+i,n);n.href=t,n.rel="nofollow",n.target="_blank",n.title=e},this.addShareLink=function(t,e){e=m().DomUtil.create("i","mmp-api-icon mmp-api-icon-share",e);e.title=mmpL10n.api.share,e.addEventListener("click",function(){f.containers.main.scrollIntoView(),f.openShareModal(t)})},this.openShareModal=function(t){var e=f.settings,i=e.apiFullscreen&&"fs"===e.shareUrl?f.getApiLink("fs",f.id,{marker:t}):f.page+"?markerid="+t,t=m().DomUtil.create("div",null);e.shareFacebook&&t.appendChild(f.getShareLink("facebook",i,e.shareText)),e.shareTwitter&&t.appendChild(f.getShareLink("twitter",i,e.shareText)),e.shareLinkedIn&&t.appendChild(f.getShareLink("linkedin",i,e.shareText)),e.shareWhatsApp&&t.appendChild(f.getShareLink("whatsapp",i,e.shareText)),e.shareEmail&&t.appendChild(f.getShareLink("email",i,e.shareText));e=m().DomUtil.create("div","mmp-share-modal-url",t),e=m().DomUtil.create("input",null,e);e.setAttribute("type","text"),e.setAttribute("value",i),e.addEventListener("click",function(){this.select()}),f.showMapModal(mmpL10n.api.share,t)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=m().DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var o=m().DomUtil.create("div","mmp-share-button",n),r=m().DomUtil.create("div","mmp-share-button-icon",o),a=m().SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),r.appendChild(a);var s=m().SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),m().DomUtil.addClass(o,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),m().DomUtil.addClass(o,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),m().DomUtil.addClass(o,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":m().Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),m().DomUtil.addClass(o,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),m().DomUtil.addClass(o,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.getActiveMarkers=function(){var i=[];return Object.keys(f.groups).forEach(function(e){f.groups[e].active&&Object.keys(f.groups[e].markers).forEach(function(t){-1===i.indexOf(f.groups[e].markers[t])&&i.push(f.groups[e].markers[t])})}),i},this.checkPopupSize=function(t){var e=f.settings;f.containers.map.offsetWidth<e.popupMaxWidth?(t.options.minWidth=f.containers.map.offsetWidth-50,t.options.maxWidth=f.containers.map.offsetWidth-50):(t.options.minWidth=e.popupMinWidth,t.options.maxWidth=e.popupMaxWidth),f.containers.map.offsetHeight<e.popupMaxHeight?t.options.maxHeight=f.containers.map.offsetHeight-50:t.options.maxHeight=e.popupMaxHeight,t.update()},this.loadPopup=function(r,a){return new Promise(function(e,t){var i,n,o=r.getPopup();void 0!==o?a||!o.getContent()?(i=m().DomUtil.create("div","mmp-popup"),m().DomUtil.create("img","mmp-popup-loading",i).src=mmpVars.pluginUrl+"images/paging-ajax-loader.gif",o.setContent(i),n="",new Promise(function(t,e){r instanceof m().Marker?r.popup?(n=f.getMarkerPopup(r),t()):f.getPopups(r.id).then(function(){n=f.getMarkerPopup(r),t()}).catch(function(){e()}):r instanceof m().Path?(n=f.getGeoJsonPopup(r),t()):e()}).then(function(){var t=n.getElementsByTagName("img"),t=Array.prototype.slice.call(t);Promise.all(t.map(f.imgLoaded)).then(function(){o.setContent(n),e(o)})}).catch(function(){t()})):e(o):t()})},this.getMarkerPopup=function(t){var e,i,n=f.settings,o=m().DomUtil.create("div","mmp-popup");return o.id="mmp-popup-"+t.id,n.popupMarkername&&t.name&&((e=m().DomUtil.create("div","mmp-popup-name",o)).innerHTML=t.name,e.style.borderBottom="1px solid #f0f0e7"),t.popup&&(m().DomUtil.create("div","mmp-popup-text",o).innerHTML=t.popup),(t.address&&n.popupAddress||n.popupCoordinates||n.popupDirections||n.popupShare)&&((i=m().DomUtil.create("div","mmp-popup-location",o)).style.borderTop="1px solid #f0f0e7",n.popupShare&&f.addShareLink(t.id,i),t.address&&n.popupAddress&&(m().DomUtil.create("span","mmp-popup-location-address",i).innerHTML+=t.address),n.popupCoordinates&&(e=m().DomUtil.create("span","mmp-popup-location-coordinates",i),t.address&&n.popupAddress?e.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":e.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng),n.popupDirections&&(i=m().DomUtil.create("span","mmp-popup-location-directions",i),(t.address&&n.popupAddress||n.popupCoordinates)&&(i.innerHTML+=" "),(i=m().DomUtil.create("a",null,i)).href=f.getDirectionsLink(n.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,t.address),i.target="_blank",i.title=mmpL10n.api.dir,i.innerHTML="("+mmpL10n.popup.directions+")")),o},this.getGeoJsonPopup=function(t){var e=f.settings,i=m().DomUtil.create("div","mmp-popup");return e.popupMarkername&&t.options.name&&((e=m().DomUtil.create("div","mmp-popup-name",i)).innerHTML=t.options.name,e.style.borderBottom="1px solid #f0f0e7"),t.options.popup&&(m().DomUtil.create("div","mmp-popup-text",i).innerHTML=t.options.popup),i},this.imgLoaded=function(e){return new Promise(function(t){e.addEventListener("load",t),e.addEventListener("error",t),e.loading&&"lazy"===e.loading&&(e.loading="eager")})},this.updatePopups=function(){var i=f.settings;Object.keys(f.markers).forEach(function(t){var e=f.markers[t],t=e.getPopup();void 0!==t&&(t.setContent(""),t.options.minWidth=i.popupMinWidth,t.options.maxWidth=i.popupMaxWidth,t.options.maxHeight=i.popupMaxHeight,t.isOpen()&&f.updatePopup(e))})},this.updatePopup=function(t,e){var i=f.settings,n=t.getPopup();!n&&t.popup?t.bindPopup("",f.popup):n&&!t.popup&&(t.closePopup(),t.unbindPopup()),f.loadPopup(t,e).then(function(t){f.checkPopupSize(t),i.popupCenterOnMap&&f.centerPopup(t)}).catch(function(){})},this.centerPopup=function(t){var e;t.isOpen()&&(e=t.getLatLng(),e=f.map.project(e),t=t._container.clientHeight,e.y-=t/2,e=f.map.unproject(e),f.map.panTo(e,{animate:!0}))},this.highlightMarker=function(t,e,i){var n;t.link?f.openLink(t.link,t.blank):(e&&f.containers.main.scrollIntoView(),n=function(t,e){e?t.isPopupOpen()?f.updatePopup(t):t.openPopup():(t=t.getLatLng(),f.map.setView(t))},f.settings.clustering?f.markerGroup.zoomToShowLayer(t,function(){n(t,i)}):n(t,i))},this.openLink=function(t,e){e="1"===e?"_blank":"_self";window.open(t,e)},this.editMarker=function(t){void 0!==t.relatedTarget.id&&(t=f.getApiLink("editMarker",t.relatedTarget.id),f.openLink(t,"1"))},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.xhr=function(o){return new Promise(function(t,e){var i,n=new XMLHttpRequest;n.open(o.type,o.url,!0),n.onload=function(){200===n.status?t(n.responseText):e(n.status+" "+n.statusText)},n.onerror=function(){e("AJAX request failed")},o.data?(i=new FormData,Object.keys(o.data).forEach(function(t){i.append(t,o.data[t])}),n.send(i)):n.send(null)})},this.main=function(){(mapsMarkerPro[f.uid]=f).containers.main=document.getElementById("maps-marker-pro-"+f.uid),f.containers.main?f.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(f.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(f.containers.main):f.lazyLoadHandlerFallback():f.load():"function"==typeof MutationObserver?new MutationObserver(f.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):f.logError("Unable to find map container")},this.load=function(){var t,e;f.addLoading(f.containers.main),"function"==typeof URL&&(e=new URL(window.location.href),t=parseInt(e.searchParams.get("marker")),isNaN(t)||(f.urlHighlight=t),e=parseInt(e.searchParams.get("markerid")),isNaN(e)||(f.urlHighlight=e));for(var i=document.getElementsByClassName("mmp-highlight"),n=0;n<i.length;n++){var o=i[n].dataset;o.uid&&o.uid!==f.uid||o.map&&o.map!==f.id||i[n].addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,i=e.marker||null,t=!e.scroll||"false"!==e.scroll,e=!e.open||"false"!==e.open;i&&void 0!==f.markers[i]&&f.highlightMarker(f.markers[i],t,e)})}for(n=0;n<mapsMarkerPro.callbacks.length;n++){var r=mapsMarkerPro.callbacks[n];"function"==typeof r&&r(f)}f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_settings",type:f.type,id:f.id,lang:f.language}}).then(function(t){if(!(t=JSON.parse(t)).success)return f.containers.main.innerHTML=t.response,void m().DomUtil.addClass(f.containers.main,"mmp-map-error");var e=t.response;Object.keys(f.settings).forEach(function(t){e[t]=f.settings[t]}),(f.settings=e).callback&&"function"==typeof window[e.callback]&&window[e.callback](f),f.fire("settingsloaded",f.settings),f.init()}).catch(function(t){f.containers.main.innerHTML="Error: the map with ID "+f.id+" could not be loaded. Please contact the site owner.",m().DomUtil.addClass(f.containers.main,"mmp-map-error"),f.logError("Error loading settings ("+t+")")})},this.init=function(){f.containers.mapWrap=document.getElementById("mmp-map-wrap-"+f.uid),f.containers.mapWrap||(f.containers.mapWrap=m().DomUtil.create("div","mmp-map-wrap",f.containers.main),f.containers.mapWrap.id="mmp-map-wrap-"+f.uid),f.loadPanel(),f.loadMap(),f.loadChart(),f.loadList(),f.setLayout(),window.addEventListener("resize",f.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(f.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(f.containers.main):f.visibilityDetectionHandlerFallback(),f.loadBasemaps(),f.loadOverlays(),f.loadResources().then(function(){f.removeLoading(f.containers.main),f.loadControls(),f.urlHighlight&&void 0!==f.markers[f.urlHighlight]?f.highlightMarker(f.markers[f.urlHighlight],!0,!0):f.highlight&&void 0!==f.markers[f.highlight]&&f.highlightMarker(f.markers[f.highlight],!1,!0)}).catch(function(t){f.logError("Error loading map ("+t+")")})},this.setLayout=function(){var t=f.settings;f.fullscreen?m().DomUtil.addClass(f.containers.main,"mmp-fullscreen"):m().DomUtil.removeClass(f.containers.main,"mmp-fullscreen"),f.containers.main.style.width=t.width+t.widthUnit,f.containers.map.style.height=t.height+t.heightUnit,t.responsive&&"px"===t.widthUnit&&("100%"!==f.containers.main.style.width&&f.containers.main.parentNode.offsetWidth<t.width?f.containers.main.style.width="100%":"100%"===f.containers.main.style.width&&f.containers.main.parentNode.offsetWidth>t.width&&(f.containers.main.style.width=t.width+"px")),void 0!==f.containers.list&&(0<t.list?1===t.list||-1===f.containers.main.style.width.indexOf("px")&&f.containers.main.offsetWidth<t.listWidth+t.listBreakpoint?(m().DomUtil.removeClass(f.containers.main,"mmp-list-right"),m().DomUtil.removeClass(f.containers.main,"mmp-list-left"),m().DomUtil.addClass(f.containers.main,"mmp-list-below")):(m().DomUtil.removeClass(f.containers.main,"mmp-list-below"),2===t.list?(m().DomUtil.removeClass(f.containers.main,"mmp-list-left"),m().DomUtil.addClass(f.containers.main,"mmp-list-right")):3===t.list&&(m().DomUtil.removeClass(f.containers.main,"mmp-list-right"),m().DomUtil.addClass(f.containers.main,"mmp-list-left"))):(m().DomUtil.removeClass(f.containers.main,"mmp-list-below"),m().DomUtil.removeClass(f.containers.main,"mmp-list-right"),m().DomUtil.removeClass(f.containers.main,"mmp-list-left"))),f.map.invalidateSize()},this.setLayoutThrottled=m().Util.throttle(f.setLayout,200,this),this.loadPanel=function(){var t,e,i=f.settings;f.containers.panel=document.getElementById("mmp-panel-"+f.uid),i.panel?((t=m().DomUtil.create("div","mmp-panel")).id="mmp-panel-"+f.uid,t.style.backgroundColor=i.panelColor,m().DomUtil.create("div","mmp-panel-text",t).innerHTML=i.name,e=m().DomUtil.create("div","mmp-panel-api",t),"map"===f.type&&(i.panelEdit&&f.addApiLink(f.getApiLink("editMap",f.id),mmpL10n.api.editMap,"mmp-api-icon-edit",e),i.apiFullscreen&&i.panelFs&&f.addApiLink(f.getApiLink("fs",f.id),mmpL10n.api.fs,"mmp-api-icon-fullscreen",e),i.panelGpx&&i.gpxUrl&&f.addApiLink(f.getApiLink("gpx",f.id),mmpL10n.gpx.metaDownload,"mmp-api-icon-gpx",e),i.apiExport&&i.panelGeoJson&&f.addApiLink(f.getApiLink("geojson",f.id),mmpL10n.api.geoJson,"mmp-api-icon-geojson",e),i.apiExport&&i.panelKml&&f.addApiLink(f.getApiLink("kml",f.id),mmpL10n.api.kml,"mmp-api-icon-kml",e),i.apiExport&&i.panelGeoRss&&f.addApiLink(f.getApiLink("georss",f.id),mmpL10n.api.geoRss,"mmp-api-icon-georss",e)),f.containers.panel?f.containers.panel.parentNode.replaceChild(t,f.containers.panel):f.containers.mapWrap.insertBefore(t,f.containers.map),f.containers.panel=t,f.fire("panelloaded",f.map)):f.containers.panel&&(f.containers.panel.remove(),f.containers.panel=null)},this.loadMap=function(){var t=f.settings;"function"==typeof f.map.remove&&f.map.remove(),f.map={};var e=m().DomUtil.create("div","mmp-map");e.id="mmp-map-"+f.uid,e.style.height=t.height+t.heightUnit,f.containers.map=document.getElementById("mmp-map-"+f.uid),f.containers.map?f.containers.map.parentNode.replaceChild(e,f.containers.map):f.containers.mapWrap.insertBefore(e,f.containers.chartWrap),f.containers.map=e,f.map=m().map(f.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:f.strToBounds(t.maxBounds),maxBoundsViscosity:1,gestureHandling:!f.fullscreen&&t.gestureHandling,dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose,contextmenu:!0}),f.map._activeTrack=0,f.fire("maploaded",f.map)},this.loadChart=function(){var t,e=f.settings;"function"==typeof f.gpxChart.destroy&&f.gpxChart.destroy(),f.gpxChart={},f.containers.chartWrap=document.getElementById("mmp-chart-wrap-"+f.uid),e.gpxUrl&&e.gpxChart?((t=m().DomUtil.create("div","mmp-gpx-chart-wrap")).id="mmp-chart-wrap-"+f.uid,t.style.height=e.gpxChartHeight+"px",t.style.position="relative",t.style.minWidth=0,(e=m().DomUtil.create("canvas","mmp-gpx-chart",t)).id="mmp-gpx-chart-"+f.uid,f.containers.chartWrap?f.containers.chartWrap.parentNode.replaceChild(t,f.containers.chartWrap):f.containers.mapWrap.appendChild(t),f.containers.chartWrap=t,f.containers.chart=e,f.fire("chartloaded",f.gpxChart)):f.containers.chartWrap&&(f.containers.chartWrap.remove(),f.containers.chartWrap=null,f.containers.chart=null)},this.loadList=function(){var t=f.settings;if(f.containers.list=document.getElementById("mmp-list-"+f.uid),"map"===f.type&&t.list){var e=m().DomUtil.create("div","mmp-list");if(e.id="mmp-list-"+f.uid,e.style.flexBasis=t.listWidth+"px",t.listSearch){var i=m().DomUtil.create("div","mmp-list-header",e),n=m().DomUtil.create("div","mmp-list-header-left",i),o=m().DomUtil.create("div","mmp-list-search-wrap",n),n=m().DomUtil.create("input","mmp-list-search",o);n.id="list-search-"+f.uid,n.type="text",n.placeholder=mmpL10n.list.search;var r=m().DomUtil.create("div","mmp-list-search-clear",o);r.style.display="none",r.addEventListener("click",function(t){var e=document.getElementById("list-search-"+f.uid);e&&(e.value=""),this.style.display="none",f.getList({page:1,term:null})});var o=m().DomUtil.create("div","mmp-list-header-right",i),a=m().DomUtil.create("select","mmp-list-sort",o),s=[];t.listOrderById&&s.push("id"),t.listOrderByName&&s.push("name"),t.listOrderByAddress&&s.push("address"),t.listOrderByDistance&&s.push("distance"),t.listOrderByIcon&&s.push("icon"),t.listOrderByCreated&&s.push("created"),t.listOrderByUpdated&&s.push("updated");for(var l=0;l<s.length;l++){var u=m().DomUtil.create("option",null,a);u.value=s[l],s[l]===t.listOrderBy&&(u.defaultSelected=!0),u.innerHTML=mmpL10n.list[s[l]]}n.addEventListener("keyup",function(t){this.value?r.style.display="inline-block":r.style.display="none",13===t.which&&f.getList({page:1,term:this.value})}),a.addEventListener("change",function(){f.getList({page:1,sort:this.value})}),f.list.sort=t.listOrderBy,m().DomUtil.create("i","mmp-list-order mmp-"+t.listSortOrder,o).addEventListener("click",function(t){var e=m().DomUtil.hasClass(this,"mmp-desc")?"asc":"desc";m().DomUtil.removeClass(this,"mmp-asc"),m().DomUtil.removeClass(this,"mmp-desc"),m().DomUtil.addClass(this,"mmp-"+e),f.getList({page:1,order:e})}),f.list.order=t.listSortOrder}if(t.listLocation){i=m().DomUtil.create("div","mmp-list-header",e),n=m().DomUtil.create("div","mmp-list-header-left",i),o=m().DomUtil.create("div","mmp-list-search-wrap",n),n=m().DomUtil.create("input","mmp-list-location",o);n.id="list-address-"+f.uid,n.type="text",n.placeholder=mmpL10n.list.location,n.addEventListener("keyup",function(t){this.value?h.style.display="inline-block":h.style.display="none"});var h=m().DomUtil.create("div","mmp-list-location-clear",o);h.style.display="none",h.addEventListener("click",function(t){var e=document.getElementById("list-address-"+f.uid);e&&(m().DomUtil.removeClass(e,"results-loading"),m().DomUtil.removeClass(e,"results-error"),e.value=""),this.style.display="none",f.list.located||f.getList({page:1,lat:null,lng:null})});for(var i=m().DomUtil.create("div","mmp-list-header-right",i),c=m().DomUtil.create("select","mmp-list-radius",i),d=[0,5,10,15,20,25,50,100,200,500],l=0;l<d.length;l++){var p=m().DomUtil.create("option",null,c);p.value=d[l],d[l]<=0?p.innerHTML=mmpL10n.list.noLimit:"imperial"===t.listDistanceUnit?p.innerHTML=d[l]+" mi":"metric-imperial"===t.listDistanceUnit?p.innerHTML=d[l]+" km ("+(d[l]/1.609344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?p.innerHTML=d[l]+" mi ("+(1.609344*d[l]).toFixed(t.listDistancePrecision)+" km)":p.innerHTML=d[l]+" km"}c.addEventListener("change",function(){f.getList({page:1,radius:c.value})})}f.containers.listBody=m().DomUtil.create("div","mmp-list-body",e),f.containers.listFooter=m().DomUtil.create("div","mmp-list-footer",e),f.containers.list?f.containers.list.parentNode.replaceChild(e,f.containers.list):f.containers.main.appendChild(e),f.containers.list=e,f.list.geocoding=new Ct("#list-address-"+f.uid,function(t){f.showMapModal(mmpL10n.list.locationError,t)},function(t,e){void 0!==f.controls.locate&&f.controls.locate.stop(),f.getList({page:1,lat:t,lng:e})},f.settings.listGeocodingProvider,mmpGeocoding,400,3),f.list.geocoding.init()}else f.containers.list&&(f.containers.list.remove(),f.containers.list=null)},this.loadBasemaps=function(){var i=f.settings;Object.keys(f.basemaps).forEach(function(t){f.map.removeLayer(f.basemaps[t])}),f.basemaps={},f.minimaps={},Object.keys(i.basemaps).forEach(function(t){var e;void 0!==i.availableBasemaps[i.basemaps[t]]&&(1==(e=i.availableBasemaps[i.basemaps[t]]).type?(e.options.bounds&&"string"==typeof e.options.bounds&&(t=f.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[f.map.unproject(m().point(t[0][1],t[0][0]),e.options.maxNativeZoom),f.map.unproject(m().point(t[1][1],t[1][0]),e.options.maxNativeZoom)]:e.options.bounds=t),e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles&&i.errorTiles||e.options.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,e.wms?(f.basemaps[e.name]=m().tileLayer.wms(e.url,e.options),f.minimaps[e.name]=m().tileLayer.wms(e.url,e.options)):(f.basemaps[e.name]=m().tileLayer(e.url,e.options),f.minimaps[e.name]=m().tileLayer(e.url,e.options))):2==e.type&&i.googleApiKey?(e.options.styles=i.basemapGoogleStyles,e.options.edgeBufferTiles=0,f.basemaps[e.name]=new(m().gridLayer.googleMutant)(e.options),f.minimaps[e.name]=new(m().gridLayer.googleMutant)(e.options)):3==e.type&&i.bingApiKey?(e.options.bingMapsKey=i.bingApiKey,e.options.culture=i.basemapBingCulture,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=m().tileLayer.bing(e.options),f.minimaps[e.name]=m().tileLayer.bing(e.options)):4==e.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(e.options.apiKey=i.hereApiKey,e.options.appId=i.hereAppId,e.options.appCode=i.hereAppCode,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=m().tileLayer.here(e.options),f.minimaps[e.name]=m().tileLayer.here(e.options)):5==e.type&&i.tomApiKey?(e.options.apiKey=i.tomApiKey,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=m().tileLayer.tomTom(e.options),f.minimaps[e.name]=m().tileLayer.tomTom(e.options)):6==e.type&&(e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles&&i.errorTiles||e.options.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,e.labels?(f.basemaps[e.name]=m().layerGroup([pt(e.key,e.options),pt(e.labels,e.options)]),f.minimaps[e.name]=m().layerGroup([pt(e.key,e.options),pt(e.labels,e.options)])):(f.basemaps[e.name]=pt(e.key,e.options),f.minimaps[e.name]=pt(e.key,e.options))))});var t,e=Object.keys(f.basemaps);void 0!==i.availableBasemaps[i.basemapDefault]?(t=i.availableBasemaps[i.basemapDefault].name,void 0!==f.basemaps[t]?f.basemaps[t].addTo(f.map):e.length&&f.basemaps[e[0]].addTo(f.map)):e.length&&f.basemaps[e[0]].addTo(f.map),f.fire("basemapsloaded",f.basemaps)},this.loadOverlays=function(){var n=f.settings;Object.keys(f.overlays).forEach(function(t){f.map.removeLayer(f.overlays[t])}),f.overlays={},Object.keys(n.overlays).forEach(function(t){var e,i;void 0!==n.availableOverlays[n.overlays[t]]&&((e=n.availableOverlays[n.overlays[t]]).options.bounds&&"string"==typeof e.options.bounds&&(i=f.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[f.map.unproject(m().point(i[0][1],i[0][0]),e.options.maxNativeZoom),f.map.unproject(m().point(i[1][1],i[1][0]),e.options.maxNativeZoom)]:e.options.bounds=i),e.options.minZoom=n.minZoom,e.options.maxZoom=n.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles||e.options.errorTiles?n.errorTileUrl:null,e.options.edgeBufferTiles=n.basemapEdgeBufferTiles,e.wms?f.overlays[e.name]=m().tileLayer.wms(e.url,e.options):f.overlays[e.name]=m().tileLayer(e.url,e.options),-1!==n.overlaysActive.indexOf(n.overlays[t])&&f.overlays[e.name].addTo(f.map))}),f.fire("overlaysloaded",f.overlays)},this.loadResources=function(){var e=f.settings;return f.groups={},f.groups[f.id]={active:!0,markers:{}},Object.keys(e.filtersDetails).forEach(function(t){f.groups[t]={active:e.filtersDetails[t].active,markers:{}}}),Promise.all([f.getMarkers().then(function(t){return f.addMarkers(t),"map"===f.type&&e.list?f.getList():void f.drawMarkers()}).catch(function(){return Promise.reject()}),f.getGeoJson(),f.getGpx()])},this.drawMarkers=function(t){t=t||f.getActiveMarkers();var e=f.settings;if("function"==typeof f.markerGroup.remove&&f.markerGroup.remove(),f.markerGroup={},e.clustering?f.markerGroup=m().markerClusterGroup({showCoverageOnHover:e.showCoverageOnHover,disableClusteringAtZoom:e.disableClusteringAtZoom||null,maxClusterRadius:e.maxClusterRadius,singleMarkerMode:e.singleMarkerMode,spiderfyDistanceMultiplier:e.spiderfyDistanceMultiplier,chunkedLoading:!1}):f.markerGroup=m().featureGroup(),f.markerGroup.addTo(f.map),e.clustering)f.markerGroup.addLayers(t);else for(var i=0;i<t.length;i++)f.markerGroup.hasLayer(t[i])||f.markerGroup.addLayer(t[i])},this.getMarkers=function(){var e=[];return f.settings.filtersAllMarkers||(e.push(f.id),Object.keys(f.settings.filtersDetails).forEach(function(t){e.push(t)})),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_markers",type:f.type,id:e,custom:f.customMarkers,lang:f.language}}).then(function(t){return JSON.parse(t)}).catch(function(t){return f.logError("Error loading markers ("+t+")"),Promise.reject()})},this.addMarkers=function(t){var e=f.settings;"function"==typeof f.markerGroup.remove&&f.markerGroup.remove(),f.markers={},f.markerGroup={},f.tooltip={direction:e.tooltipDirection,permanent:e.tooltipPermanent,sticky:e.tooltipSticky,opacity:e.tooltipOpacity},f.popup={minWidth:e.popupMinWidth,maxWidth:e.popupMaxWidth,maxHeight:e.popupMaxHeight,autoPan:!e.popupCenterOnMap,closeButton:e.popupCloseButton,autoClose:e.popupAutoClose};for(var i=0;i<t.length;i++){var n=t[i];if(f.markers[n.id]=m().marker([n.lat,n.lng],{pmIgnore:!0,contextmenu:e.listEdit,contextmenuItems:[{text:mmpL10n.api.editMarker,icon:mmpVars.pluginUrl+"images/icons/map-edit.png",callback:f.editMarker}],icon:m().icon({iconUrl:n.icon?mmpVars.iconsUrl+n.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,shadowUrl:e.shadowUrl,shadowSize:e.shadowSize,shadowAnchor:e.shadowAnchor,className:"mmp-marker-icon mmp-marker-icon-"+n.id}),opacity:e.markerOpacity}),f.markers[n.id].id=n.id,f.markers[n.id].name=n.name,f.markers[n.id].address=n.address,f.markers[n.id].popup=n.popup,f.markers[n.id].link=n.link,f.markers[n.id].blank=n.blank,f.markers[n.id].icon=n.icon,f.markers[n.id].created=n.created,f.markers[n.id].updated=n.updated,f.markers[n.id].edit=n.edit,n.name&&(f.tooltips[n.id]=n.name,!e.tooltip||!e.tooltipPermanent&&m().Browser.mobile||f.markers[n.id].bindTooltip(f.tooltips[n.id],f.tooltip)),n.link?(f.markers[n.id].on("click",function(){f.openLink(this.link,this.blank)}),f.markers[n.id].on("keypress",function(t){13==t.which&&f.openLink(this.link,this.blank)})):(!1!==n.popup||n.address&&e.popupAddress||e.popupCoordinates||e.popupDirections)&&f.markers[n.id].bindPopup("",f.popup),f.markers[n.id].on("popupopen",f.openPopupHandler),e.popupOpenOnHover?f.markers[n.id].on("mouseover",f.openOnHoverHandler):f.markers[n.id].off("mouseover",f.openOnHoverHandler),"map"!==f.type||e.filtersAllMarkers)f.groups[f.id].markers[n.id]=f.markers[n.id];else for(var o=0;o<n.maps.length;o++)void 0!==f.groups[n.maps[o]]&&(f.groups[n.maps[o]].markers[n.id]=f.markers[n.id])}f.fire("markersloaded",f.markers)},this.getGeoJson=function(){var e=[f.id];return!f.settings.filtersAllMarkers&&f.settings.filtersGeoJson&&Object.keys(f.settings.filtersDetails).forEach(function(t){e.push(t)}),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_geojson",type:f.type,id:e,lang:f.language}}).then(function(t){t=JSON.parse(t);f.addGeoJson(t)}).catch(function(t){f.logError("Error loading GeoJSON ("+t+")")})},this.parseGeoJson=function(t){return m().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return m().circle(e,t.properties.radius)},style:function(e){if(!e.properties)return{};var i={};return Object.keys(e.properties).forEach(function(t){switch(t){case"weight":i[t]=parseInt(e.properties[t]);break;case"opacity":case"fillOpacity":i[t]=parseFloat(e.properties[t]);break;default:i[t]=e.properties[t]}}),i},onEachFeature:function(t,e){e.options.popup&&e.bindPopup("",f.popup),e.on("popupopen",f.openPopupHandler)}})},this.addGeoJson=function(e){"function"==typeof f.geoJsonGroup.remove&&f.geoJsonGroup.remove(),f.geoJson={},f.geoJsonGroup={},f.geoJson[f.id]=m().geoJSON(),e&&(Object.keys(e).forEach(function(t){void 0===e[t].features?f.geoJson[t]=m().geoJSON():f.geoJson[t]=f.parseGeoJson(e[t])}),f.drawGeoJson(),f.fire("geojsonloaded",f.geoJson))},this.drawGeoJson=function(){"function"==typeof f.geoJsonGroup.remove&&f.geoJsonGroup.remove(),f.geoJsonGroup=m().featureGroup(),f.geoJsonGroup.addTo(f.map),Object.keys(f.groups).forEach(function(t){f.groups[t].active&&void 0!==f.geoJson[t]&&f.geoJsonGroup.addLayer(f.geoJson[t])})},this.getPopups=function(t){return f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_marker_popups",id:t,lang:f.language}}).then(function(t){for(var t=JSON.parse(t),e=0;e<t.length;e++){var i=t[e];f.markers[i.id].popup=i.popup}}).catch(function(t){f.logError("Error retrieving popups ("+t+")")})},this.getList=function(t){t=t||{};var e=f.settings;if("map"===f.type&&e.list){for(var i=["page","term","sort","order","lat","lng","radius"],n=0;n<i.length;n++){var o=i[n];void 0!==t[o]&&(f.list[o]=t[o])}var r=[];return e.filtersAllMarkers||Object.keys(f.groups).forEach(function(t){f.groups[t].active&&r.push(t)}),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_marker_list",id:r,page:f.list.page,term:f.list.term||"",sort:f.list.sort,order:f.list.order,lat:f.list.lat||"",lng:f.list.lng||"",radius:"imperial"===e.listDistanceUnit||"imperial-metric"===e.listDistanceUnit?1609.344*f.list.radius:1e3*f.list.radius}}).then(function(t){for(var t=JSON.parse(t),e=[],i=0;i<t.length;i++)void 0!==f.markers[t[i]]&&e.push(f.markers[t[i]]);f.updateCircle(),f.showList(e),f.drawMarkers(e)}).catch(function(t){return f.logError("Error retrieving marker list ("+t+")"),Promise.reject()})}},this.showList=function(t){var e=f.settings,i=t.length>e.listLimit?e.listLimit:t.length,e=Math.ceil(t.length/e.listLimit);f.list.page=f.list.page>e?e:f.list.page,f.list.page<=0&&(f.list.page=1);for(var n=f.list.page===e?t.length:i*f.list.page,o=[],r=(f.list.page-1)*i;r<n;r++)null===t[r].popup&&o.push(t[r].id);o.length?f.getPopups(o).then(function(){f.renderList(t)}).catch(function(){}):f.renderList(t)},this.renderList=function(n){var t=f.settings;f.containers.listBody.innerHTML="";var e=n.length>t.listLimit?t.listLimit:n.length,i=Math.ceil(n.length/t.listLimit);f.list.page=f.list.page>i?i:f.list.page,f.list.page<=0&&(f.list.page=1);for(var o=f.list.page===i?n.length:e*f.list.page,r=(f.list.page-1)*e;r<o;r++){var a=m().DomUtil.create("div","mmp-list-row",f.containers.listBody);t.listIcon&&(l=m().DomUtil.create("div","mmp-list-row-icon",a),l=m().DomUtil.create("div","mmp-list-icon",l),l=m().DomUtil.create("img",null,l),n[r].icon?l.src=mmpVars.iconsUrl+n[r].icon:l.src=mmpVars.pluginUrl+"images/leaflet/marker.png");var s,l=m().DomUtil.create("div","mmp-list-row-info",a),a=m().DomUtil.create("div","mmp-list-row-header",l);t.listName&&((s=m().DomUtil.create("div","mmp-list-name",a)).innerHTML=n[r].name,"none"!==t.listAction&&(s.tabIndex=0,function(e){var i="popup"===t.listAction;m().DomEvent.on(s,"click",function(){f.highlightMarker(n[e],f.containers.main.getBoundingClientRect().top<0,i)}),m().DomEvent.on(s,"keypress",function(t){13===t.which&&f.highlightMarker(n[e],f.containers.main.getBoundingClientRect().top<0,i)})}(r)));var u,a=m().DomUtil.create("div","mmp-list-api",a);n[r].edit&&f.addApiLink(f.getApiLink("editMarker",n[r].id),mmpL10n.api.editMarker,"mmp-api-icon-edit",a),t.listDir&&(h=f.getDirectionsLink(t.directionsProvider,n[r].getLatLng().lat,n[r].getLatLng().lng,n[r].address),"googlemaps"===t.directionsProvider?u=t.directionsGoogleWalking?"walk":"car":"ors"===t.directionsProvider?u="Bicycle"===t.directionsOrsType?"bicycle":"Pedestrian"===t.directionsOrsType?"walk":"car":"bingmaps"===t.directionsProvider&&(u="car"),f.addApiLink(h,mmpL10n.api.dir,"mmp-api-icon-"+u,a)),t.apiFullscreen&&t.listFs&&f.addApiLink(f.getApiLink("fs",f.id,{marker:n[r].id}),mmpL10n.api.fs,"mmp-api-icon-fullscreen",a),t.listShare&&f.addShareLink(n[r].id,a);var h=m().DomUtil.create("div","mmp-list-row-body",l);t.listPopup&&n[r].popup&&(m().DomUtil.create("div","mmp-list-popup",h).innerHTML=n[r].popup);h=m().DomUtil.create("div","mmp-list-row-footer",l);t.listAddress&&n[r].address&&(m().DomUtil.create("div","mmp-list-address",h).innerHTML=n[r].address),t.listDistance&&null!==f.list.lat&&null!==f.list.lng&&(l=m().latLng(f.list.lat,f.list.lng),h=n[r].getLatLng(),h=m().latLng(l).distanceTo(h),a=m().DomUtil.create("div","mmp-list-distance",a),"imperial"===t.listDistanceUnit?a.innerHTML=(h/1609.344).toFixed(t.listDistancePrecision)+" mi":"metric-imperial"===t.listDistanceUnit?a.innerHTML=(h/1e3).toFixed(t.listDistancePrecision)+" km ("+(h/1609.344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?a.innerHTML=(h/1609.344).toFixed(t.listDistancePrecision)+" mi ("+(h/1e3).toFixed(t.listDistancePrecision)+" km)":a.innerHTML=(h/1e3).toFixed(t.listDistancePrecision)+" km")}f.containers.listFooter.innerHTML="";var c,d=m().DomUtil.create("div","mmp-list-count",f.containers.listFooter);0===n.length?d.innerHTML=mmpL10n.list.noResults:1===n.length?d.innerHTML=mmpL10n.list.oneResult:d.innerHTML=n.length+" "+mmpL10n.list.results,n.length>t.listLimit&&(e=m().DomUtil.create("div","mmp-list-nav",f.containers.listFooter),(d=m().DomUtil.create("button",null,e)).innerHTML="&laquo;",d.addEventListener("click",function(){f.list.page=1,f.showList(n)}),(d=m().DomUtil.create("button",null,e)).innerHTML="&lsaquo;",d.addEventListener("click",function(){f.list.page=1===f.list.page?1:f.list.page-1,f.showList(n)}),(d=m().DomUtil.create("button",null,e)).innerHTML="&rsaquo;",d.addEventListener("click",function(){f.list.page=f.list.page===i?i:f.list.page+1,f.showList(n)}),(e=m().DomUtil.create("button",null,e)).innerHTML="&raquo;",e.addEventListener("click",function(){f.list.page=i,f.showList(n)}),e=m().DomUtil.create("div","mmp-list-page",f.containers.listFooter),(c=m().DomUtil.create("input",null,e)).type="text",c.value=f.list.page,e.appendChild(document.createTextNode(" / "+i)),e.addEventListener("keyup",function(t){13==t.which&&(f.list.page=Math.abs(parseInt(c.value)),f.showList(n))}))},this.updateCircle=function(){var t,e,i=f.settings;"function"==typeof f.list.circle.remove&&(f.list.circle.remove(),f.list.circle={}),null!==f.list.lat&&null!==f.list.lng&&(t=m().latLng([f.list.lat,f.list.lng]),f.list.radius<=0?f.map.panTo(t):(e=f.list.radius,"imperial"===i.listDistanceUnit||"imperial-metric"===i.listDistanceUnit?e*=1609.344:e*=1e3,i.listGeocodingDrawCircle&&(f.list.circle=m().circle(t,{pmIgnore:!0,interactive:!1,radius:e,stroke:i.listGeocodingStroke,color:i.listGeocodingColor,weight:i.listGeocodingWeight,fill:i.listGeocodingFill,fillColor:i.listGeocodingFillColor,fillOpacity:i.listGeocodingFillOpacity}).addTo(f.map)),f.map.fitBounds(t.toBounds(2*e))))},this.loadControls=function(){var e,t=f.settings;void 0!==f.controls.locate&&f.controls.locate.stop(),Object.keys(f.controls).forEach(function(t){f.controls[t].remove()}),f.controls={},f.controls.attribution=m().control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),f.controls.attribution._esriAttributionAdded=!0,"hidden"!=t.zoomControlPosition&&(f.controls.zoom=m().control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut})),"hidden"!=t.fullscreenPosition&&(f.controls.fullscreen=m().control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}})),"hidden"!=t.resetPosition&&(f.controls.reset=m().control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset})),"hidden"!=t.locatePosition&&(f.controls.locate=m().control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:"icon-pin",iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t,e){var i=mmpL10n.control.locateErrorUnknown;1===t.code?i=mmpL10n.control.locateErrorDenied:2===t.code?i=mmpL10n.control.locateErrorUnavailable:3===t.code&&(i=mmpL10n.control.locateErrorTimeout),f.showMapModal(mmpL10n.control.locateError,i)},onLocationOutsideMapBounds:function(t){t.stop(),f.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}})),"hidden"!=t.scalePosition&&(f.controls.scale=m().control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial})),"hidden"!=t.layersPosition&&(Object.keys(f.basemaps).length||Object.keys(f.overlays).length)&&(f.controls.layers=m().control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"===t.layersCollapsed||"collapsed-mobile"===t.layersCollapsed&&m().Browser.mobile}),Object.keys(f.basemaps).forEach(function(t){f.controls.layers.addBaseLayer(f.basemaps[t],t)}),Object.keys(f.overlays).forEach(function(t){f.controls.layers.addOverlay(f.overlays[t],t)})),"hidden"!=t.filtersPosition&&"map"===f.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(f.controls.filters=m().control.filters({mmp:f,position:t.filtersPosition,collapsed:"collapsed"===t.filtersCollapsed||"collapsed-mobile"===t.filtersCollapsed&&m().Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone})),"hidden"!=t.gpxControlPosition&&void 0!==f.gpx.tracks&&1<f.gpx.tracks.length&&(f.controls.gpx=m().control.gpx({mmp:f,collapsed:"collapsed"===t.gpxControlCollapsed||"collapsed-mobile"===t.gpxControlCollapsed&&m().Browser.mobile,position:t.gpxControlPosition})),"hidden"!=t.minimapPosition&&Object.keys(f.minimaps).length&&(e=m().tileLayer(""),Object.keys(f.basemaps).forEach(function(t){f.map.hasLayer(f.basemaps[t])&&(e=f.minimaps[t])}),f.controls.minimap=new(m().Control.MiniMap)(e,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"===t.minimapMinimized||"collapsed-mobile"===t.minimapMinimized&&m().Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}})),Object.keys(f.controls).forEach(function(t){f.controls[t].addTo(f.map)}),Object.keys(f.basemaps).forEach(function(t){t=f.basemaps[t];f.map.hasLayer(t)&&(t instanceof m().TileLayer.HERE?t._findCopyrightBBox():t instanceof m().TileLayer.TomTom?t._addAttribution():t instanceof dt&&K._updateMapAttribution({target:f.map}))}),t.attributionCondensed&&(m().DomUtil.removeClass(f.controls.attribution.getContainer(),"leaflet-control-attribution"),m().DomUtil.addClass(f.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==f.controls.minimap?f.map.on("baselayerchange",f.updateMinimapHandler):f.map.off("baselayerchange",f.updateMinimapHandler),void 0!==f.controls.locate?(f.map.on("locationfound",f.updateLocationHandler),f.map.on("locatedeactivate",f.locateDeactivateHandler),!f.settings.locateAutostart||f.urlHighlight||f.highlight||f.controls.locate.start()):(f.map.off("locationfound",f.updateLocationHandler),f.map.off("locatedeactivate",f.locateDeactivateHandler)),f.fire("controlsloaded",f.controls)},this.getGpx=function(){var t=f.settings;return t.gpxUrl?f.xhr({type:"GET",url:t.gpxUrl}).then(function(t){if(f.gpx=new o,f.gpx.parse(t),!f.gpx.tracks.length){for(var e=0;e<f.gpx.routes.length;e++){var i=f.gpx.routes[e];i.segments=[{points:i.points,extensions:i.extensions,time:i.time,distance:i.distance,elevation:i.elevation}],f.gpx.tracks.push(i)}f.gpx.routes=[]}f.addGpx()}).catch(function(t){f.logError("Error loading GPX ("+t+")")}):Promise.resolve()},this.addGpx=function(){var t=f.settings;if(void 0!==f.gpxGroup&&"function"==typeof f.gpxGroup.remove&&f.gpxGroup.remove(),f.gpxGroup=m().featureGroup(),f.gpxTracks={},void 0!==f.gpx.tracks&&f.gpx.tracks.length){for(var e=[],i=0;i<f.gpx.tracks.length;i++)for(var n=f.gpx.tracks[i],o=0;o<n.segments.length;o++){var r=n.segments[o];e[i]=m().polyline([],{pmIgnore:!0,interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:n.extensions.color||r.extensions.color||t.gpxTrackColor,weight:parseInt(n.extensions.weight||r.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(n.extensions.opacity||r.extensions.opacity||t.gpxTrackOpacity)});for(var a=0;a<r.points.length;a++){var s=r.points[a].lat,l=r.points[a].lon;e[i].addLatLng([s,l])}e[i].addTo(f.gpxGroup)}f.gpxTracks=e}f.setTrackIcons(),f.setIntervalMarkers(),f.setTrackMeta(),f.setWaypoints(),f.gpxGroup.addTo(f.map),f.fire("gpxloaded",f.gpxTracks),f.loadChart(),f.addElevationChart()},this.getGpxName=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].name)&&f.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.start)&&new Date(f.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.end)&&new Date(f.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,e){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.total)&&wt(f.gpx.tracks[t].time.total,e)},this.getGpxTimeMoving=function(t,e){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.moving)&&wt(f.gpx.tracks[t].time.moving,e)},this.getGpxDistance=function(t,e){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,e,i){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.moving||!f.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi";case"metric-imperial":return wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km ("+wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi)";case"imperial-metric":return wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi ("+wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km)";default:return wt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].heartRate.avg)&&f.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,e){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].elevation.gain&&!f.gpx.tracks[t].elevation.loss)return!1;var i=f.gpx.tracks[t].elevation.gain-f.gpx.tracks[t].elevation.loss;switch(e){case"imperial":return"+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m (+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft (+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m)";default:return"+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m"}},this.setTrackStyle=function(){var e=f.settings;Object.keys(f.gpxTracks).forEach(function(t){f.gpxTracks[t].setStyle({color:e.gpxTrackColor,weight:e.gpxTrackWeight,opacity:e.gpxTrackOpacity})})},this.setTrackIcons=function(){var i=f.settings;void 0!==f.gpx.tracks&&Object.keys(f.gpx.tracks).forEach(function(t){var e;void 0!==f.gpx.tracks[t].startIcon&&f.gpx.tracks[t].startIcon&&f.gpx.tracks[t].startIcon.remove(),void 0!==f.gpx.tracks[t].endIcon&&f.gpx.tracks[t].endIcon&&f.gpx.tracks[t].endIcon.remove(),i.gpxShowStartIcon&&(f.gpx.tracks[t].startIcon=m().marker([f.gpx.tracks[t].points[0].lat,f.gpx.tracks[t].points[0].lon],{pmIgnore:!0,interactive:!1,icon:m().icon({iconUrl:i.gpxStartIcon?mmpVars.iconsUrl+i.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(f.gpxGroup)),i.gpxShowEndIcon&&(e=f.gpx.tracks[t].points.length-1,f.gpx.tracks[t].endIcon=m().marker([f.gpx.tracks[t].points[e].lat,f.gpx.tracks[t].points[e].lon],{pmIgnore:!0,interactive:!1,icon:m().icon({iconUrl:i.gpxEndIcon?mmpVars.iconsUrl+i.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(f.gpxGroup))})},this.setIntervalMarkers=function(){var t=f.settings;if(void 0!==f.gpx.tracks&&(Object.keys(f.gpx.tracks).forEach(function(t){if(void 0!==f.gpx.tracks[t].intervalMarkers&&f.gpx.tracks[t].intervalMarkers.length)for(var e=f.gpx.tracks[t].intervalMarkers,i=0;i<e.length;i++)e[i].remove()}),t.gpxIntervalMarkers))for(var e="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,i=f.gpx.tracks,n=0;n<i.length;n++){i[n].intervalMarkers=[];for(var o=1,r=i[n].points,a=0;a<r.length;a++){var s=r[a];s.dist>=o*e&&(s=m().marker([s.lat,s.lon],{pmIgnore:!0,interactive:!1,icon:m().divIcon({className:"mmp-interval-marker",html:"<span>"+o+"</span>"})}).addTo(f.map),i[n].intervalMarkers.push(s),o++)}}},this.setTrackMeta=function(){var o=f.settings;Object.keys(f.gpxTracks).forEach(function(t){if(!o.gpxMeta)return f.gpxTracks[t].closePopup(),void f.gpxTracks[t].unbindPopup();for(var e=m().DomUtil.create("div","mmp-gpx-meta"),i=[{show:o.gpxMetaName,title:mmpL10n.gpx.metaName,value:f.getGpxName(t)},{show:o.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:f.getGpxStartTime(t)},{show:o.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:f.getGpxEndTime(t)},{show:o.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:f.getGpxTimeTotal(t)},{show:o.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:f.getGpxTimeMoving(t)},{show:o.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:f.getGpxDistance(t,o.gpxMetaUnits)},{show:o.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:f.getGpxPace(t,o.gpxMetaUnits)},{show:o.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:f.getGpxHeartRate(t)},{show:o.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:f.getGpxElevation(t,o.gpxMetaUnits)}],n=0;n<i.length;n++)!i[n].show||o.gpxMetaHideMissing&&!1===i[n].value||(!1===i[n].value&&(i[n].value="N/A"),e.innerHTML+="<strong>"+i[n].title+":</strong> "+i[n].value+"<br />");o.gpxMetaDownload&&(e.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+f.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),o.gpxMetaDesc&&f.gpx.tracks[t].desc&&(e.innerHTML&&(e.innerHTML+="<br />"),e.innerHTML+=f.gpx.tracks[t].desc),void 0!==f.gpxTracks[t].getPopup()&&f.gpxTracks[t].getPopup()?f.gpxTracks[t].setPopupContent(e):f.gpxTracks[t].bindPopup(e)})},this.setWaypoints=function(){for(var t=f.settings,e=0;e<f.gpxWaypoints.length;e++)f.gpxWaypoints[e].remove();if(f.gpxWaypoints=[],t.gpxWaypoints&&void 0!==f.gpx.waypoints)for(e=0;e<f.gpx.waypoints.length;e++){var i,n=m().circleMarker([f.gpx.waypoints[e].lat,f.gpx.waypoints[e].lon],{interactive:!0,radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity}).addTo(f.gpxGroup);f.gpx.waypoints[e].name&&n.bindTooltip(f.gpx.waypoints[e].name),f.gpx.waypoints[e].desc&&((i=m().DomUtil.create("div","mmp-gpx-waypoint")).innerHTML=f.gpx.waypoints[e].desc,n.bindPopup(i)),f.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=f.settings,e=0;e<f.gpxWaypoints.length;e++)f.gpxWaypoints[e].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var e,i="imperial"===f.settings.gpxChartUnits||"imperial-metric"===f.settings.gpxChartUnits?(e=1609.433,.3048):(e=1e3,1),n=isNaN(parseFloat(f.settings.gpxChartYOffset))?0:parseFloat(f.settings.gpxChartYOffset);return f.gpx.tracks[f.map._activeTrack].points.map(function(t){return{x:t.dist/e,y:t.ele/i+n}})},this.updateElevationChart=function(t){var e=f.settings;f.gpxChart instanceof s()&&(t&&(t=f.generateChartData(),f.gpxChart.data.datasets[0].data=t,f.gpxChart.options.scales.xAxes[0].ticks.max=t[t.length-1].x),f.gpxChart.data.datasets[0].borderWidth=e.gpxChartLineWidth,f.gpxChart.data.datasets[0].borderColor=e.gpxChartLineColor,f.gpxChart.data.datasets[0].fill=e.gpxChartFill,f.gpxChart.data.datasets[0].backgroundColor=e.gpxChartFillColor,f.gpxChart.options.scales.yAxes[0].gridLines.color=e.gpxChartGridLinesColor,f.gpxChart.options.scales.yAxes[0].ticks.min=isNaN(parseInt(e.gpxChartYMin))?void 0:parseInt(e.gpxChartYMin),f.gpxChart.options.scales.yAxes[0].ticks.max=isNaN(parseInt(e.gpxChartYMax))?void 0:parseInt(e.gpxChartYMax),f.gpxChart.options.scales.yAxes[0].ticks.reverse=e.gpxChartReverseY,f.gpxChart.options.scales.yAxes[0].ticks.minor.fontColor=e.gpxChartTicksFontColor,f.gpxChart.options.scales.xAxes[0].gridLines.color=e.gpxChartGridLinesColor,f.gpxChart.options.scales.xAxes[0].ticks.reverse=e.gpxChartReverseX,f.gpxChart.options.scales.xAxes[0].ticks.minor.fontColor=e.gpxChartTicksFontColor,f.gpxChart.options.chartArea.backgroundColor=e.gpxChartBgColor,f.gpxChart.options.tooltips.backgroundColor=e.gpxChartTooltipBgColor,f.gpxChart.options.tooltips.bodyFontColor=e.gpxChartTooltipFontColor,f.gpxChart.options.indicator.lineWidth=e.gpxChartIndicatorLineWidth,f.gpxChart.options.indicator.lineColor=e.gpxChartIndicatorLineColor,f.gpxChart.update())},this.updateElevationChartThrottled=m().Util.throttle(f.updateElevationChart,100,this),this.addElevationChart=function(){var t,e,a=f.settings;f.settings.gpxChart&&void 0!==f.gpx.tracks&&f.gpx.tracks.length&&(void 0===f.containers.chartWrap&&f.loadChart(),t=f.generateChartData(),e=document.getElementById("mmp-gpx-chart-"+f.uid).getContext("2d"),s().platform.disableCSSInjection=!0,s().defaults.scatterIndicator=s().defaults.scatter,s().controllers.scatterIndicator=s().controllers.scatter.extend({draw:function(t){var e,i,n,o,r;s().controllers.scatter.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales["y-axis-1"]?(e=this.chart.ctx,i=f.map._activeTrack,n=(r=this.chart.tooltip._active[0])._index,o=r.tooltipPosition().x,t=this.chart.scales["y-axis-1"].top,r=this.chart.scales["y-axis-1"].bottom,this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(e.save(),e.beginPath(),e.moveTo(o,t),e.lineTo(o,r),e.lineWidth=this.chart.config.options.indicator.lineWidth,e.strokeStyle=this.chart.config.options.indicator.lineColor,e.stroke(),e.restore()),a.gpxChartLocator&&void 0!==f.chartLayers.locator&&(f.chartLayers.locator.setLatLng([f.gpx.tracks[i].points[n].lat,f.gpx.tracks[i].points[n].lon]),f.map.hasLayer(f.chartLayers.locator)||f.chartLayers.locator.addTo(f.map))):void 0!==f.chartLayers.locator&&f.map.hasLayer(f.chartLayers.locator)&&f.chartLayers.locator.remove()}}),f.gpxChart=new(s())(e,{plugins:[{beforeDraw:function(t){var e,i;t.config.options.chartArea&&t.config.options.chartArea.backgroundColor&&(e=t.chart.ctx,i=t.chartArea,e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore())}},{afterDraw:function(t){var e,i,n;t.data.datasets[0].data.filter(function(t){return!isNaN(t.y)}).length||(e=t.chart.ctx,i=t.chart.width,n=t.chart.height,t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore())}}],type:"scatterIndicator",data:{datasets:[{data:t,pointRadius:0,showLine:!0,spanGaps:!0,borderCapStyle:"round",borderWidth:a.gpxChartLineWidth,borderColor:a.gpxChartLineColor,fill:a.gpxChartFill,backgroundColor:a.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{yAxes:[{gridLines:{color:a.gpxChartGridLinesColor},ticks:{callback:function(t,e,i){return f.formatGpxValue(t,"ele",a.gpxChartUnits)},min:isNaN(parseInt(a.gpxChartYMin))?void 0:parseInt(a.gpxChartYMin),max:isNaN(parseInt(a.gpxChartYMax))?void 0:parseInt(a.gpxChartYMax),reverse:a.gpxChartReverseY,fontColor:a.gpxChartTicksFontColor}}],xAxes:[{afterBuildTicks:function(t,e){var i=t.ticks.length;2<i&&(t.ticks[i-2]=null)},gridLines:{color:a.gpxChartGridLinesColor},ticks:{callback:function(t,e,i){if(null!==t)return f.formatGpxValue(t,"dist",a.gpxChartUnits)},min:0,max:t[t.length-1].x,reverse:a.gpxChartReverseX,autoSkip:!1,fontColor:a.gpxChartTicksFontColor}}]},legend:{display:!1},chartArea:{backgroundColor:a.gpxChartBgColor},tooltips:{callbacks:{label:function(t,e){var i=t.datasetIndex,n=t.index,t=e.datasets[i].data[n].y,n=e.datasets[i].data[n].x;return[mmpL10n.gpx.metaElevation+": "+f.formatGpxValue(t,"ele",a.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+f.formatGpxValue(n,"dist",a.gpxChartUnits)]}},mode:"index",intersect:!1,displayColors:!1,backgroundColor:a.gpxChartTooltipBgColor,bodyFontColor:a.gpxChartTooltipFontColor},indicator:{lineWidth:a.gpxChartIndicatorLineWidth,lineColor:a.gpxChartIndicatorLineColor},hover:{animationDuration:250}}}),void 0!==f.chartLayers&&Object.keys(f.chartLayers).forEach(function(t){f.chartLayers[t].remove()}),f.chartLayers={},f.chartLayers.locator=m().circleMarker([0,0]),f.setChartStyle())},this.setChartStyle=function(){var t=f.settings;t.gpxChart&&void 0!==f.chartLayers&&(Object.keys(f.chartLayers).forEach(function(t){f.chartLayers[t].remove()}),f.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=f.markerGroup.getBounds();t.isValid()&&f.map.fitBounds(t)},this.fitGeoJson=function(t){t=f.geoJson[f.id].getLayer(t);void 0===t||(t=t.getBounds()).isValid()&&f.map.fitBounds(t)},this.deferredLoadHandler=function(t,i){t.forEach(function(t){if("childList"===t.type&&t.addedNodes.length)for(var e=0;e<t.addedNodes.length;e++)if(t.addedNodes[e].id==="maps-marker-pro-"+f.uid)return i.disconnect(),void f.main()})},this.lazyLoadHandler=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n.target===f.containers.main&&n.isIntersecting)return e.disconnect(),void f.load()}},this.lazyLoadHandlerFallback=function(){if(!(xt(f.containers.main)&&(t=f.containers.main,e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,t=window.innerWidth||document.documentElement.clientWidth,e.left<=t&&0<=e.right&&e.top<=i&&0<=e.bottom)))return setTimeout(f.lazyLoadHandlerFallback,250);var t,e,i;f.load()},this.visibilityDetectionHandler=function(t,e){for(var i=0;i<t.length;i++)t[i].target===f.containers.main&&f.checkInvalidateSize()},this.visibilityDetectionHandlerFallback=function(){f.checkInvalidateSize(),setTimeout(f.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var e=f.settings,i=t.target.getPopup();void 0!==i&&f.loadPopup(t.target).then(function(){f.checkPopupSize(i),e.popupCenterOnMap&&f.centerPopup(i),f.fire("popupopen",i)}).catch(function(){})},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){f.getList()},this.updateMinimapHandler=function(t){f.controls.minimap.changeLayer(f.minimaps[t.name])},this.updateLocationHandler=function(t){var e;f.list.located||(f.list.located=!0,(e=document.getElementById("list-address-"+f.uid))&&(e.value="",e.dispatchEvent(new Event("keyup"))),f.getList({lat:t.latitude,lng:t.longitude}))},this.locateDeactivateHandler=function(){f.list.located&&(f.list.located=!1,f.getList({lat:null,lng:null}))},this.main()};window.mapsMarkerPro={callbacks:[]},window.MapsMarkerPro=a},5568:function(t){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},7757:function(t,e,i){
/*!
 * Chart.js v2.9.4
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
t.exports=function(n){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return t&&t["default"]||t}n=n&&n.hasOwnProperty("default")?n["default"]:n;var h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},u=t(function(t){var s={};for(var e in h)if(h.hasOwnProperty(e))s[h[e]]=e;var l=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in l)if(l.hasOwnProperty(i)){if(!("channels"in l[i]))throw new Error("missing channels property: "+i);if(!("labels"in l[i]))throw new Error("missing channel labels property: "+i);if(l[i].labels.length!==l[i].channels)throw new Error("channel and label counts mismatch: "+i);var n=l[i].channels;var o=l[i].labels;delete l[i].channels;delete l[i].labels;Object.defineProperty(l[i],"channels",{value:n});Object.defineProperty(l[i],"labels",{value:o})}l.rgb.hsl=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o=Math.min(e,i,n);var r=Math.max(e,i,n);var a=r-o;var s;var l;var u;if(r===o)s=0;else if(e===r)s=(i-n)/a;else if(i===r)s=2+(n-e)/a;else if(n===r)s=4+(e-i)/a;s=Math.min(s*60,360);if(s<0)s+=360;u=(o+r)/2;if(r===o)l=0;else if(u<=.5)l=a/(r+o);else l=a/(2-r-o);return[s,l*100,u*100]};l.rgb.hsv=function(t){var e;var i;var n;var o;var r;var a=t[0]/255;var s=t[1]/255;var l=t[2]/255;var u=Math.max(a,s,l);var h=u-Math.min(a,s,l);var c=function(t){return(u-t)/6/h+1/2};if(h===0)o=r=0;else{r=h/u;e=c(a);i=c(s);n=c(l);if(a===u)o=n-i;else if(s===u)o=1/3+e-n;else if(l===u)o=2/3+i-e;if(o<0)o+=1;else if(o>1)o-=1}return[o*360,r*100,u*100]};l.rgb.hwb=function(t){var e=t[0];var i=t[1];var n=t[2];var o=l.rgb.hsl(t)[0];var r=1/255*Math.min(e,Math.min(i,n));n=1-1/255*Math.max(e,Math.max(i,n));return[o,r*100,n*100]};l.rgb.cmyk=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o;var r;var a;var s;s=Math.min(1-e,1-i,1-n);o=(1-e-s)/(1-s)||0;r=(1-i-s)/(1-s)||0;a=(1-n-s)/(1-s)||0;return[o*100,r*100,a*100,s*100]};function u(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}l.rgb.keyword=function(t){var e=s[t];if(e)return e;var i=Infinity;var n;for(var o in h)if(h.hasOwnProperty(o)){var r=h[o];var a=u(t,r);if(a<i){i=a;n=o}}return n};l.keyword.rgb=function(t){return h[t]};l.rgb.xyz=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=e*.4124+i*.3576+n*.1805;var r=e*.2126+i*.7152+n*.0722;var a=e*.0193+i*.1192+n*.9505;return[o*100,r*100,a*100]};l.rgb.lab=function(t){var e=l.rgb.xyz(t);var i=e[0];var n=e[1];var o=e[2];var r;var a;var s;i/=95.047;n/=100;o/=108.883;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;o=o>.008856?Math.pow(o,1/3):7.787*o+16/116;r=116*n-16;a=500*(i-n);s=200*(n-o);return[r,a,s]};l.hsl.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var o;var r;var a;var s;var l;if(i===0){l=n*255;return[l,l,l]}if(n<.5)r=n*(1+i);else r=n+i-n*i;o=2*n-r;s=[0,0,0];for(var u=0;u<3;u++){a=e+1/3*-(u-1);if(a<0)a++;if(a>1)a--;if(6*a<1)l=o+(r-o)*6*a;else if(2*a<1)l=r;else if(3*a<2)l=o+(r-o)*(2/3-a)*6;else l=o;s[u]=l*255}return s};l.hsl.hsv=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var o=i;var r=Math.max(n,.01);var a;var s;n*=2;i*=n<=1?n:2-n;o*=r<=1?r:2-r;s=(n+i)/2;a=n===0?2*o/(r+o):2*i/(n+i);return[e,a*100,s*100]};l.hsv.rgb=function(t){var e=t[0]/60;var i=t[1]/100;var n=t[2]/100;var o=Math.floor(e)%6;var r=e-Math.floor(e);var a=255*n*(1-i);var s=255*n*(1-i*r);var l=255*n*(1-i*(1-r));n*=255;switch(o){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}};l.hsv.hsl=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var o=Math.max(n,.01);var r;var a;var s;s=(2-i)*n;r=(2-i)*o;a=i*o;a/=r<=1?r:2-r;a=a||0;s/=2;return[e,a*100,s*100]};l.hwb.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var o=i+n;var r;var a;var s;var l;if(o>1){i/=o;n/=o}r=Math.floor(6*e);a=1-n;s=6*e-r;if((r&1)!==0)s=1-s;l=i+s*(a-i);var u;var h;var c;switch(r){default:case 6:case 0:u=a;h=l;c=i;break;case 1:u=l;h=a;c=i;break;case 2:u=i;h=a;c=l;break;case 3:u=i;h=l;c=a;break;case 4:u=l;h=i;c=a;break;case 5:u=a;h=i;c=l;break}return[u*255,h*255,c*255]};l.cmyk.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var o=t[3]/100;var r;var a;var s;r=1-Math.min(1,e*(1-o)+o);a=1-Math.min(1,i*(1-o)+o);s=1-Math.min(1,n*(1-o)+o);return[r*255,a*255,s*255]};l.xyz.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var o;var r;var a;o=e*3.2406+i*-1.5372+n*-.4986;r=e*-.9689+i*1.8758+n*.0415;a=e*.0557+i*-.204+n*1.057;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92;a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92;o=Math.min(Math.max(0,o),1);r=Math.min(Math.max(0,r),1);a=Math.min(Math.max(0,a),1);return[o*255,r*255,a*255]};l.xyz.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;e/=95.047;i/=100;n/=108.883;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;o=116*i-16;r=500*(e-i);a=200*(i-n);return[o,r,a]};l.lab.xyz=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;r=(e+16)/116;o=i/500+r;a=r-n/200;var s=Math.pow(r,3);var l=Math.pow(o,3);var u=Math.pow(a,3);r=s>.008856?s:(r-16/116)/7.787;o=l>.008856?l:(o-16/116)/7.787;a=u>.008856?u:(a-16/116)/7.787;o*=95.047;r*=100;a*=108.883;return[o,r,a]};l.lab.lch=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;o=Math.atan2(n,i);r=o*360/2/Math.PI;if(r<0)r+=360;a=Math.sqrt(i*i+n*n);return[e,a,r]};l.lch.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var o;var r;var a;a=n/360*2*Math.PI;o=i*Math.cos(a);r=i*Math.sin(a);return[e,o,r]};l.rgb.ansi16=function(t){var e=t[0];var i=t[1];var n=t[2];var o=1 in arguments?arguments[1]:l.rgb.hsv(t)[2];o=Math.round(o/50);if(o===0)return 30;var r=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));if(o===2)r+=60;return r};l.hsv.ansi16=function(t){return l.rgb.ansi16(l.hsv.rgb(t),t[2])};l.rgb.ansi256=function(t){var e=t[0];var i=t[1];var n=t[2];if(e===i&&i===n){if(e<8)return 16;if(e>248)return 231;return Math.round((e-8)/247*24)+232}var o=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5);return o};l.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7){if(t>50)e+=3.5;e=e/10.5*255;return[e,e,e]}var i=(~~(t>50)+1)*.5;var n=(e&1)*i*255;var o=(e>>1&1)*i*255;var r=(e>>2&1)*i*255;return[n,o,r]};l.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i;var n=Math.floor(t/36)/5*255;var o=Math.floor((i=t%36)/6)/5*255;var r=i%6/5*255;return[n,o,r]};l.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255);var i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};l.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];if(e[0].length===3)i=i.split("").map(function(t){return t+t}).join("");var n=parseInt(i,16);var o=n>>16&255;var r=n>>8&255;var a=n&255;return[o,r,a]};l.rgb.hcg=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var o=Math.max(Math.max(e,i),n);var r=Math.min(Math.min(e,i),n);var a=o-r;var s;var l;if(a<1)s=r/(1-a);else s=0;if(a<=0)l=0;else if(o===e)l=(i-n)/a%6;else if(o===i)l=2+(n-e)/a;else l=4+(e-i)/a+4;l/=6;l%=1;return[l*360,a*100,s*100]};l.hsl.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1;var o=0;if(i<.5)n=2*e*i;else n=2*e*(1-i);if(n<1)o=(i-.5*n)/(1-n);return[t[0],n*100,o*100]};l.hsv.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=e*i;var o=0;if(n<1)o=(i-n)/(1-n);return[t[0],n*100,o*100]};l.hcg.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;if(i===0)return[n*255,n*255,n*255];var o=[0,0,0];var r=e%1*6;var a=r%1;var s=1-a;var l=0;switch(Math.floor(r)){case 0:o[0]=1;o[1]=a;o[2]=0;break;case 1:o[0]=s;o[1]=1;o[2]=0;break;case 2:o[0]=0;o[1]=1;o[2]=a;break;case 3:o[0]=0;o[1]=s;o[2]=1;break;case 4:o[0]=a;o[1]=0;o[2]=1;break;default:o[0]=1;o[1]=0;o[2]=s}l=(1-i)*n;return[(i*o[0]+l)*255,(i*o[1]+l)*255,(i*o[2]+l)*255]};l.hcg.hsv=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);var o=0;if(n>0)o=e/n;return[t[0],o*100,n*100]};l.hcg.hsl=function(t){var e=t[1]/100;var i=t[2]/100;var n=i*(1-e)+.5*e;var o=0;if(n>0&&n<.5)o=e/(2*n);else if(n>=.5&&n<1)o=e/(2*(1-n));return[t[0],o*100,n*100]};l.hcg.hwb=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};l.hwb.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1-i;var o=n-e;var r=0;if(o<1)r=(n-o)/(1-o);return[t[0],o*100,r*100]};l.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};l.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};l.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};l.gray.hsl=l.gray.hsv=function(t){return[0,0,t[0]]};l.gray.hwb=function(t){return[0,100,t[0]]};l.gray.cmyk=function(t){return[0,0,0,t[0]]};l.gray.lab=function(t){return[t[0],0,0]};l.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255;var i=(e<<16)+(e<<8)+e;var n=i.toString(16).toUpperCase();return"000000".substring(n.length)+n};l.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}}),i=u.rgb,o=u.hsl,r=u.hsv,a=u.hwb,s=u.cmyk,l=u.xyz,c=u.lab,d=u.lch,p=u.hex,f=u.keyword,m=u.ansi16,g=u.ansi256,v=u.hcg,_=u.apple,y=u.gray;function x(){var t={};var e=Object.keys(u);for(var i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}function b(t){var e=x();var i=[t];e[t].distance=0;while(i.length){var n=i.pop();var o=Object.keys(u[n]);for(var r=o.length,a=0;a<r;a++){var s=o[a];var l=e[s];if(l.distance===-1){l.distance=e[n].distance+1;l.parent=n;i.unshift(s)}}}return e}function w(e,i){return function(t){return i(e(t))}}function k(t,e){var i=[e[t].parent,t];var n=u[e[t].parent][t];var o=e[t].parent;while(e[o].parent){i.unshift(e[o].parent);n=w(u[e[o].parent][o],n);o=e[o].parent}n.conversion=i;return n}var L=function(t){var e=b(t);var i={};var n=Object.keys(e);for(var o=n.length,r=0;r<o;r++){var a=n[r];var s=e[a];if(s.parent===null)continue;i[a]=k(a,e)}return i},C={},M;function T(e){var t=function(t){if(t===undefined||t===null)return t;if(arguments.length>1)t=Array.prototype.slice.call(arguments);return e(t)};if("conversion"in e)t.conversion=e.conversion;return t}function P(o){var t=function(t){if(t===undefined||t===null)return t;if(arguments.length>1)t=Array.prototype.slice.call(arguments);var e=o(t);if(typeof e==="object")for(var i=e.length,n=0;n<i;n++)e[n]=Math.round(e[n]);return e};if("conversion"in o)t.conversion=o.conversion;return t}Object.keys(u).forEach(function(i){C[i]={};Object.defineProperty(C[i],"channels",{value:u[i].channels});Object.defineProperty(C[i],"labels",{value:u[i].labels});var n=L(i);var t=Object.keys(n);t.forEach(function(t){var e=n[t];C[i][t]=P(e);C[i][t].raw=T(e)})});var S=C,A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},D={getRgba:E,getHsla:I,getRgb:z,getHsl:B,getHwb:O,getAlpha:F,hexString:R,rgbString:N,rgbaString:U,percentString:Z,percentaString:j,hslString:H,hslaString:W,hwbString:V,keyword:G};function E(t){if(!t)return;var e=/^#([a-fA-F0-9]{3,4})$/i,i=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/(\w+)/;var a=[0,0,0],s=1,l=t.match(e),u="";if(l){l=l[1];u=l[3];for(var h=0;h<a.length;h++)a[h]=parseInt(l[h]+l[h],16);if(u)s=Math.round(parseInt(u+u,16)/255*100)/100}else if(l=t.match(i)){u=l[2];l=l[1];for(var h=0;h<a.length;h++)a[h]=parseInt(l.slice(h*2,h*2+2),16);if(u)s=Math.round(parseInt(u,16)/255*100)/100}else if(l=t.match(n)){for(var h=0;h<a.length;h++)a[h]=parseInt(l[h+1]);s=parseFloat(l[4])}else if(l=t.match(o)){for(var h=0;h<a.length;h++)a[h]=Math.round(parseFloat(l[h+1])*2.55);s=parseFloat(l[4])}else if(l=t.match(r)){if(l[1]=="transparent")return[0,0,0,0];a=A[l[1]];if(!a)return}for(var h=0;h<a.length;h++)a[h]=q(a[h],0,255);if(!s&&s!=0)s=1;else s=q(s,0,1);a[3]=s;return a}function I(t){if(!t)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var o=q(parseInt(i[1]),0,360),r=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[o,r,a,s]}}function O(t){if(!t)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var o=q(parseInt(i[1]),0,360),r=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[o,r,a,s]}}function z(t){var e=E(t);return e&&e.slice(0,3)}function B(t){var e=I(t);return e&&e.slice(0,3)}function F(t){var e=E(t);if(e)return e[3];else if(e=I(t))return e[3];else if(e=O(t))return e[3]}function R(t,e){var e=e!==undefined&&t.length===3?e:t[3];return"#"+K(t[0])+K(t[1])+K(t[2])+(e>=0&&e<1?K(Math.round(e*255)):"")}function N(t,e){if(e<1||t[3]&&t[3]<1)return U(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function Z(t,e){if(e<1||t[3]&&t[3]<1)return j(t,e);var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),o=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+o+"%)"}function j(t,e){var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),o=Math.round(t[2]/255*100);return"rgba("+i+"%, "+n+"%, "+o+"%, "+(e||t[3]||1)+")"}function H(t,e){if(e<1||t[3]&&t[3]<1)return W(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function W(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function V(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(e!==undefined&&e!==1?", "+e:"")+")"}function G(t){return $[t.slice(0,3)]}function q(t,e,i){return Math.min(Math.max(e,t),i)}function K(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var $={},J;for(J in A)$[A[J]]=J;var Y=function(t){if(t instanceof Y)return t;if(!(this instanceof Y))return new Y(t);this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if(typeof t==="string"){e=D.getRgba(t);if(e)this.setValues("rgb",e);else if(e=D.getHsla(t))this.setValues("hsl",e);else if(e=D.getHwb(t))this.setValues("hwb",e)}else if(typeof t==="object"){e=t;if(e.r!==undefined||e.red!==undefined)this.setValues("rgb",e);else if(e.l!==undefined||e.lightness!==undefined)this.setValues("hsl",e);else if(e.v!==undefined||e.value!==undefined)this.setValues("hsv",e);else if(e.w!==undefined||e.whiteness!==undefined)this.setValues("hwb",e);else if(e.c!==undefined||e.cyan!==undefined)this.setValues("cmyk",e)}};if(Y.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;if(t.alpha!==1)return t.hwb.concat([t.alpha]);return t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){if(t===undefined)return this.values.alpha;this.setValues("alpha",t);return this},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){if(t){t%=360;t=t<0?360+t:t}return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return D.hexString(this.values.rgb)},rgbString:function(){return D.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return D.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return D.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return D.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return D.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return D.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return D.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){var t=this.values.rgb;var e=[];for(var i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity();var i=t.luminosity();if(e>i)return(e+.05)/(i+.05);return(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);if(e>=7.1)return"AAA";return e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){var t=[];for(var e=0;e<3;e++)t[e]=255-this.values.rgb[e];this.setValues("rgb",t);return this},lighten:function(t){var e=this.values.hsl;e[2]+=e[2]*t;this.setValues("hsl",e);return this},darken:function(t){var e=this.values.hsl;e[2]-=e[2]*t;this.setValues("hsl",e);return this},saturate:function(t){var e=this.values.hsl;e[1]+=e[1]*t;this.setValues("hsl",e);return this},desaturate:function(t){var e=this.values.hsl;e[1]-=e[1]*t;this.setValues("hsl",e);return this},whiten:function(t){var e=this.values.hwb;e[1]+=e[1]*t;this.setValues("hwb",e);return this},blacken:function(t){var e=this.values.hwb;e[2]+=e[2]*t;this.setValues("hwb",e);return this},greyscale:function(){var t=this.values.rgb;var e=t[0]*.3+t[1]*.59+t[2]*.11;this.setValues("rgb",[e,e,e]);return this},clearer:function(t){var e=this.values.alpha;this.setValues("alpha",e-e*t);return this},opaquer:function(t){var e=this.values.alpha;this.setValues("alpha",e+e*t);return this},rotate:function(t){var e=this.values.hsl;var i=(e[0]+t)%360;e[0]=i<0?360+i:i;this.setValues("hsl",e);return this},mix:function(t,e){var i=this;var n=t;var o=e===undefined?.5:e;var r=2*o-1;var a=i.alpha()-n.alpha();var s=((r*a===-1?r:(r+a)/(1+r*a))+1)/2;var l=1-s;return this.rgb(s*i.red()+l*n.red(),s*i.green()+l*n.green(),s*i.blue()+l*n.blue()).alpha(i.alpha()*o+n.alpha()*(1-o))},toJSON:function(){return this.rgb()},clone:function(){var t=new Y;var e=this.values;var i=t.values;var n,o;for(var r in e)if(e.hasOwnProperty(r)){n=e[r];o={}.toString.call(n);if(o==="[object Array]")i[r]=n.slice(0);else if(o==="[object Number]")i[r]=n;else console.error("unexpected color value:",n)}return t}},Y.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Y.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Y.prototype.getValues=function(t){var e=this.values;var i={};for(var n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];if(e.alpha!==1)i.a=e.alpha;return i},Y.prototype.setValues=function(t,e){var i=this.values;var n=this.spaces;var o=this.maxes;var r=1;var a;this.valid=true;if(t==="alpha")r=e;else if(e.length){i[t]=e.slice(0,t.length);r=e[t.length]}else if(e[t.charAt(0)]!==undefined){for(a=0;a<t.length;a++)i[t][a]=e[t.charAt(a)];r=e.a}else if(e[n[t][0]]!==undefined){var s=n[t];for(a=0;a<t.length;a++)i[t][a]=e[s[a]];r=e.alpha}i.alpha=Math.max(0,Math.min(1,r===undefined?i.alpha:r));if(t==="alpha")return false;var l;for(a=0;a<t.length;a++){l=Math.max(0,Math.min(o[t][a],i[t][a]));i[t][a]=Math.round(l)}for(var u in n)if(u!==t)i[u]=S[t][u](i[t]);return true},Y.prototype.setSpace=function(t,e){var i=e[0];if(i===undefined)return this.getValues(t);if(typeof i==="number")i=Array.prototype.slice.call(e);this.setValues(t,i);return this},Y.prototype.setChannel=function(t,e,i){var n=this.values[t];if(i===undefined)return n[e];else if(i===n[e])return this;n[e]=i;this.setValues(t,n);return this},typeof window!=="undefined")window.Color=Y;var X=Y;function Q(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}var tt={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return t===null||typeof t==="undefined"},isArray:function(t){if(Array.isArray&&Array.isArray(t))return true;var e=Object.prototype.toString.call(t);if(e.substr(0,7)==="[object"&&e.substr(-6)==="Array]")return true;return false},isObject:function(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"},isFinite:function(t){return(typeof t==="number"||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return typeof t==="undefined"?e:t},valueAtIndexOrDefault:function(t,e,i){return tt.valueOrDefault(tt.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&typeof t.call==="function")return t.apply(i,e)},each:function(t,e,i,n){var o,r,a;if(tt.isArray(t)){r=t.length;if(n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o)}else if(tt.isObject(t)){a=Object.keys(t);r=a.length;for(o=0;o<r;o++)e.call(i,t[a[o]],a[o])}},arrayEquals:function(t,e){var i,n,o,r;if(!t||!e||t.length!==e.length)return false;for(i=0,n=t.length;i<n;++i){o=t[i];r=e[i];if(o instanceof Array&&r instanceof Array){if(!tt.arrayEquals(o,r))return false}else if(o!==r)return false}return true},clone:function(t){if(tt.isArray(t))return t.map(tt.clone);if(tt.isObject(t)){var e=Object.create(t);var i=Object.keys(t);var n=i.length;var o=0;for(;o<n;++o)e[i[o]]=tt.clone(t[i[o]]);return e}return t},_merger:function(t,e,i,n){if(!Q(t))return;var o=e[t];var r=i[t];if(tt.isObject(o)&&tt.isObject(r))tt.merge(o,r,n);else e[t]=tt.clone(r)},_mergerIf:function(t,e,i){if(!Q(t))return;var n=e[t];var o=i[t];if(tt.isObject(n)&&tt.isObject(o))tt.mergeIf(n,o);else if(!e.hasOwnProperty(t))e[t]=tt.clone(o)},merge:function(t,e,i){var n=tt.isArray(e)?e:[e];var o=n.length;var r,a,s,l,u;if(!tt.isObject(t))return t;i=i||{};r=i.merger||tt._merger;for(a=0;a<o;++a){e=n[a];if(!tt.isObject(e))continue;s=Object.keys(e);for(u=0,l=s.length;u<l;++u)r(s[u],t,e,i)}return t},mergeIf:function(t,e){return tt.merge(t,e,{merger:tt._mergerIf})},extend:Object.assign||function(t){return tt.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this;var i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)};var n=function(){this.constructor=i};n.prototype=e.prototype;i.prototype=new n;i.extend=tt.inherits;if(t)tt.extend(i.prototype,t);i.__super__=e.prototype;return i},_deprecated:function(t,e,i,n){if(e!==undefined)console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}},et=tt;tt.callCallback=tt.callback,tt.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},tt.getValueOrDefault=tt.valueOrDefault,tt.getValueAtIndexOrDefault=tt.valueAtIndexOrDefault;var it={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1)return.5*t*t;return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t=t-1)*t*t+1},easeInOutCubic:function(t){if((t/=.5)<1)return.5*t*t*t;return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1)return.5*t*t*t*t;return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1},easeInOutQuint:function(t){if((t/=.5)<1)return.5*t*t*t*t*t;return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0)return 0;if(t===1)return 1;if((t/=.5)<1)return.5*Math.pow(2,10*(t-1));return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1)return-.5*(Math.sqrt(1-t*t)-1);return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!i)i=.3;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!i)i=.3;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},easeInOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if((t/=.5)===2)return 1;if(!i)i=.45;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);if(t<1)return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i));return n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1)return.5*(t*t*(((e*=1.525)+1)*t-e));return.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-it.easeOutBounce(1-t)},easeOutBounce:function(t){if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75)return 7.5625*(t-=1.5/2.75)*t+.75;if(t<2.5/2.75)return 7.5625*(t-=2.25/2.75)*t+.9375;return 7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){if(t<.5)return it.easeInBounce(t*2)*.5;return it.easeOutBounce(t*2-1)*.5+.5}},nt={effects:it};et.easingEffects=it;var ot=Math.PI,rt=ot/180,at=ot*2,st=ot/2,lt=ot/4,ut=ot*2/3,ht={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,o,r){if(r){var a=Math.min(r,o/2,n/2);var s=e+a;var l=i+a;var u=e+n-a;var h=i+o-a;t.moveTo(e,l);if(s<u&&l<h){t.arc(s,l,a,-ot,-st);t.arc(u,l,a,-st,0);t.arc(u,h,a,0,st);t.arc(s,h,a,st,ot)}else if(s<u){t.moveTo(s,i);t.arc(u,l,a,-st,st);t.arc(s,l,a,st,ot+st)}else if(l<h){t.arc(s,l,a,-ot,0);t.arc(s,h,a,0,ot)}else t.arc(s,l,a,-ot,ot);t.closePath();t.moveTo(e,i)}else t.rect(e,i,n,o)},drawPoint:function(t,e,i,n,o,r){var a,s,l,u,h;var c=(r||0)*rt;if(e&&typeof e==="object"){a=e.toString();if(a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]"){t.save();t.translate(n,o);t.rotate(c);t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height);t.restore();return}}if(isNaN(i)||i<=0)return;t.beginPath();switch(e){default:t.arc(n,o,i,0,at);t.closePath();break;case"triangle":t.moveTo(n+Math.sin(c)*i,o-Math.cos(c)*i);c+=ut;t.lineTo(n+Math.sin(c)*i,o-Math.cos(c)*i);c+=ut;t.lineTo(n+Math.sin(c)*i,o-Math.cos(c)*i);t.closePath();break;case"rectRounded":h=i*.516;u=i-h;s=Math.cos(c+lt)*u;l=Math.sin(c+lt)*u;t.arc(n-s,o-l,h,c-ot,c-st);t.arc(n+l,o-s,h,c-st,c);t.arc(n+s,o+l,h,c,c+st);t.arc(n-l,o+s,h,c+st,c+ot);t.closePath();break;case"rect":if(!r){u=Math.SQRT1_2*i;t.rect(n-u,o-u,2*u,2*u);break}c+=lt;case"rectRot":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+l,o-s);t.lineTo(n+s,o+l);t.lineTo(n-l,o+s);t.closePath();break;case"crossRot":c+=lt;case"cross":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);break;case"star":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);c+=lt;s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);t.moveTo(n+l,o-s);t.lineTo(n-l,o+s);break;case"line":s=Math.cos(c)*i;l=Math.sin(c)*i;t.moveTo(n-s,o-l);t.lineTo(n+s,o+l);break;case"dash":t.moveTo(n,o);t.lineTo(n+Math.cos(c)*i,o+Math.sin(c)*i);break}t.fill();t.stroke()},_isPointInArea:function(t,e){var i=1e-6;return t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i},clipArea:function(t,e){t.save();t.beginPath();t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top);t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var o=i.steppedLine;if(o){if(o==="middle"){var r=(e.x+i.x)/2;t.lineTo(r,n?i.y:e.y);t.lineTo(r,n?e.y:i.y)}else if(o==="after"&&!n||o!=="after"&&n)t.lineTo(e.x,i.y);else t.lineTo(i.x,e.y);t.lineTo(i.x,i.y);return}if(!i.tension){t.lineTo(i.x,i.y);return}t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y)}},ct=ht;et.clear=ht.clear,et.drawRoundedRectangle=function(t){t.beginPath();ht.roundedRect.apply(ht,arguments)};var dt={_set:function(t,e){return et.merge(this[t]||(this[t]={}),e)}};dt._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:true});var pt=dt,ft=et.valueOrDefault;function mt(t){if(!t||et.isNullOrUndef(t.size)||et.isNullOrUndef(t.family))return null;return(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var gt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||i[1]==="normal")return e*1.2;t=+i[2];switch(i[3]){case"px":return t;case"%":t/=100;break}return e*t},toPadding:function(t){var e,i,n,o;if(et.isObject(t)){e=+t.top||0;i=+t.right||0;n=+t.bottom||0;o=+t.left||0}else e=i=n=o=+t||0;return{top:e,right:i,bottom:n,left:o,height:e+n,width:o+i}},_parseFont:function(t){var e=pt.global;var i=ft(t.fontSize,e.defaultFontSize);var n={family:ft(t.fontFamily,e.defaultFontFamily),lineHeight:et.options.toLineHeight(ft(t.lineHeight,e.defaultLineHeight),i),size:i,style:ft(t.fontStyle,e.defaultFontStyle),weight:null,string:""};n.string=mt(n);return n},resolve:function(t,e,i,n){var o=true;var r,a,s;for(r=0,a=t.length;r<a;++r){s=t[r];if(s===undefined)continue;if(e!==undefined&&typeof s==="function"){s=s(e);o=false}if(i!==undefined&&et.isArray(s)){s=s[i];o=false}if(s!==undefined){if(n&&!o)n.cacheable=false;return s}}}},vt={_factorize:function(t){var e=[];var i=Math.sqrt(t);var n;for(n=1;n<i;n++)if(t%n===0){e.push(n);e.push(t/n)}if(i===(i|0))e.push(i);e.sort(function(t,e){return t-e}).pop();return e},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E;var i=Math.round(e);var n=t===Math.pow(10,i);return n?i:e}},_t=vt;et.log10=vt.log10;var yt=function(e,i){return{x:function(t){return e+e+i-t},setWidth:function(t){i=t},textAlign:function(t){if(t==="center")return t;return t==="right"?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},xt=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},bt,wt,kt,Lt,Ct=et,Mt,Tt=ct,Pt=gt,St=_t,At={getRtlAdapter:function(t,e,i){return t?yt(e,i):xt()},overrideTextDirection:function(t,e){var i,n;if(e==="ltr"||e==="rtl"){i=t.canvas.style;n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")];i.setProperty("direction",e,"important");t.prevTextDirection=n}},restoreTextDirection:function(t){var e=t.prevTextDirection;if(e!==undefined){delete t.prevTextDirection;t.canvas.style.setProperty("direction",e[0],e[1])}}};function Dt(t,e,i,n){var o=Object.keys(i);var r,a,s,l,u,h,c,d,p;for(r=0,a=o.length;r<a;++r){s=o[r];h=i[s];if(!e.hasOwnProperty(s))e[s]=h;l=e[s];if(l===h||s[0]==="_")continue;if(!t.hasOwnProperty(s))t[s]=l;u=t[s];c=typeof h;if(c===typeof u)if(c==="string"){d=X(u);if(d.valid){p=X(h);if(p.valid){e[s]=p.mix(d,n).rgbString();continue}}}else if(Ct.isFinite(u)&&Ct.isFinite(h)){e[s]=u+(h-u)*n;continue}e[s]=h}}Ct.easing=nt,Ct.canvas=Tt,Ct.options=Pt,Ct.math=St,Ct.rtl=At;var Et=function(t){Ct.extend(this,t);this.initialize.apply(this,arguments)};Ct.extend(Et.prototype,{_type:undefined,initialize:function(){this.hidden=false},pivot:function(){var t=this;if(!t._view)t._view=Ct.extend({},t._model);t._start={};return t},transition:function(t){var e=this;var i=e._model;var n=e._start;var o=e._view;if(!i||t===1){e._view=Ct.extend({},i);e._start=null;return e}if(!o)o=e._view={};if(!n)n=e._start={};Dt(n,o,i,t);return e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return Ct.isNumber(this._model.x)&&Ct.isNumber(this._model.y)}}),Et.extend=Ct.inherits;var It=Et,Ot=It.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),zt=Ot;Object.defineProperty(Ot.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Ot.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),pt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:Ct.noop,onComplete:Ct.noop}});var Bt={animations:[],request:null,addAnimation:function(t,e,i,n){var o=this.animations;var r,a;e.chart=t;e.startTime=Date.now();e.duration=i;if(!n)t.animating=true;for(r=0,a=o.length;r<a;++r)if(o[r].chart===t){o[r]=e;return}o.push(e);if(o.length===1)this.requestAnimationFrame()},cancelAnimation:function(e){var t=Ct.findIndex(this.animations,function(t){return t.chart===e});if(t!==-1){this.animations.splice(t,1);e.animating=false}},requestAnimationFrame:function(){var t=this;if(t.request===null)t.request=Ct.requestAnimFrame.call(window,function(){t.request=null;t.startDigest()})},startDigest:function(){var t=this;t.advance();if(t.animations.length>0)t.requestAnimationFrame()},advance:function(){var t=this.animations;var e,i,n,o;var r=0;while(r<t.length){e=t[r];i=e.chart;n=e.numSteps;o=Math.floor((Date.now()-e.startTime)/e.duration*n)+1;e.currentStep=Math.min(o,n);Ct.callback(e.render,[i,e],i);Ct.callback(e.onAnimationProgress,[e],i);if(e.currentStep>=n){Ct.callback(e.onAnimationComplete,[e],i);i.animating=false;t.splice(r,1)}else++r}}},Ft=Ct.options.resolve,Rt=["push","pop","shift","splice","unshift"];function Nt(o,t){if(o._chartjs){o._chartjs.listeners.push(t);return}Object.defineProperty(o,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[t]}});Rt.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1);var n=o[t];Object.defineProperty(o,t,{configurable:true,enumerable:false,value:function(){var e=Array.prototype.slice.call(arguments);var t=n.apply(this,e);Ct.each(o._chartjs.listeners,function(t){if(typeof t[i]==="function")t[i].apply(t,e)});return t}})})}function Ut(e,t){var i=e._chartjs;if(!i)return;var n=i.listeners;var o=n.indexOf(t);if(o!==-1)n.splice(o,1);if(n.length>0)return;Rt.forEach(function(t){delete e[t]});delete e._chartjs}var Zt=function(t,e){this.initialize(t,e)};Ct.extend(Zt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t;i.index=e;i.linkScales();i.addElements();i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this;var e=t.getMeta();var i=t.chart;var n=i.scales;var o=t.getDataset();var r=i.options.scales;if(e.xAxisID===null||!(e.xAxisID in n)||o.xAxisID)e.xAxisID=o.xAxisID||r.xAxes[0].id;if(e.yAxisID===null||!(e.yAxisID in n)||o.yAxisID)e.yAxisID=o.yAxisID||r.yAxes[0].id},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(true)},destroy:function(){if(this._data)Ut(this._data,this)},createMetaDataset:function(){var t=this;var e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this;var i=e.dataElementType;return i&&new i({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data||[];var n=e.data;var o,r;for(o=0,r=i.length;o<r;++o)n[o]=n[o]||t.createMetaData(o);e.dataset=e.dataset||t.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e);this.updateElement(e,t,true)},buildOrUpdateElements:function(){var t=this;var e=t.getDataset();var i=e.data||(e.data=[]);if(t._data!==i){if(t._data)Ut(t._data,t);if(i&&Object.isExtensible(i))Nt(i,t);t._data=i}t.resyncElements()},_configure:function(){var t=this;t._config=Ct.merge(Object.create(null),[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,i){if(t!=="_meta"&&t!=="data")Ct._merger(t,e,i)}})},_update:function(t){var e=this;e._configure();e._cachedDataOpts=null;e.update(t)},update:Ct.noop,transition:function(t){var e=this.getMeta();var i=e.data||[];var n=i.length;var o=0;for(;o<n;++o)i[o].transition(t);if(e.dataset)e.dataset.transition(t)},draw:function(){var t=this.getMeta();var e=t.data||[];var i=e.length;var n=0;if(t.dataset)t.dataset.draw();for(;n<i;++n)e[n].draw()},getStyle:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o;e._configure();if(n&&t===undefined)o=e._resolveDatasetElementOptions(n||{});else{t=t||0;o=e._resolveDataElementOptions(i.data[t]||{},t)}if(o.fill===false||o.fill===null)o.backgroundColor=o.borderColor;return o},_resolveDatasetElementOptions:function(t,e){var i=this;var n=i.chart;var o=i._config;var r=t.custom||{};var a=n.options.elements[i.datasetElementType.prototype._type]||{};var s=i._datasetElementOptions;var l={};var u,h,c,d;var p={chart:n,dataset:i.getDataset(),datasetIndex:i.index,hover:e};for(u=0,h=s.length;u<h;++u){c=s[u];d=e?"hover"+c.charAt(0).toUpperCase()+c.slice(1):c;l[c]=Ft([r[d],o[d],a[d]],p)}return l},_resolveDataElementOptions:function(t,e){var i=this;var n=t&&t.custom;var o=i._cachedDataOpts;if(o&&!n)return o;var r=i.chart;var a=i._config;var s=r.options.elements[i.dataElementType.prototype._type]||{};var l=i._dataElementOptions;var u={};var h={chart:r,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index};var c={cacheable:!n};var d,p,f,m;n=n||{};if(Ct.isArray(l))for(p=0,f=l.length;p<f;++p){m=l[p];u[m]=Ft([n[m],a[m],s[m]],h,e,c)}else{d=Object.keys(l);for(p=0,f=d.length;p<f;++p){m=d[p];u[m]=Ft([n[m],a[l[m]],a[m],s[m]],h,e,c)}}if(c.cacheable)i._cachedDataOpts=Object.freeze(u);return u},removeHoverStyle:function(t){Ct.merge(t._model,t.$previousStyle||{});delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex];var i=t._index;var n=t.custom||{};var o=t._model;var r=Ct.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth};o.backgroundColor=Ft([n.hoverBackgroundColor,e.hoverBackgroundColor,r(o.backgroundColor)],undefined,i);o.borderColor=Ft([n.hoverBorderColor,e.hoverBorderColor,r(o.borderColor)],undefined,i);o.borderWidth=Ft([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],undefined,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;if(t)this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t=this.getMeta().dataset;var e={};var i,n,o,r,a,s;if(!t)return;s=t._model;a=this._resolveDatasetElementOptions(t,true);r=Object.keys(a);for(i=0,n=r.length;i<n;++i){o=r[i];e[o]=s[o];s[o]=a[o]}t.$previousStyle=e},resyncElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data;var n=e.data.length;var o=i.length;if(o<n)e.data.splice(o,n-o);else if(o>n)t.insertElements(n,o-n)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e);this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Zt.extend=Ct.inherits;var jt=Zt,Ht=Math.PI*2;function Wt(t,e){var i=e.startAngle;var n=e.endAngle;var o=e.pixelMargin;var r=o/e.outerRadius;var a=e.x;var s=e.y;t.beginPath();t.arc(a,s,e.outerRadius,i-r,n+r);if(e.innerRadius>o){r=o/e.innerRadius;t.arc(a,s,e.innerRadius-o,n+r,i-r,true)}else t.arc(a,s,o,n+Math.PI/2,i-Math.PI/2);t.closePath();t.clip()}function Vt(t,e,i,n){var o=i.endAngle;var r;if(n){i.endAngle=i.startAngle+Ht;Wt(t,i);i.endAngle=o;if(i.endAngle===i.startAngle&&i.fullCircles){i.endAngle+=Ht;i.fullCircles--}}t.beginPath();t.arc(i.x,i.y,i.innerRadius,i.startAngle+Ht,i.startAngle,true);for(r=0;r<i.fullCircles;++r)t.stroke();t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+Ht);for(r=0;r<i.fullCircles;++r)t.stroke()}function Gt(t,e,i){var n=e.borderAlign==="inner";if(n){t.lineWidth=e.borderWidth*2;t.lineJoin="round"}else{t.lineWidth=e.borderWidth;t.lineJoin="bevel"}if(i.fullCircles)Vt(t,e,i,n);if(n)Wt(t,i);t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle);t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,true);t.closePath();t.stroke()}pt._set("global",{elements:{arc:{backgroundColor:pt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var qt=It.extend({_type:"arc",inLabelRange:function(t){var e=this._view;if(e)return Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2);return false},inRange:function(t,e){var i=this._view;if(i){var n=Ct.getAngleFromPoint(i,{x:t,y:e});var o=n.angle;var r=n.distance;var a=i.startAngle;var s=i.endAngle;while(s<a)s+=Ht;while(o>s)o-=Ht;while(o<a)o+=Ht;var l=o>=a&&o<=s;var u=r>=i.innerRadius&&r<=i.outerRadius;return l&&u}return false},getCenterPoint:function(){var t=this._view;var e=(t.startAngle+t.endAngle)/2;var i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view;var e=t.startAngle+(t.endAngle-t.startAngle)/2;var i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t=this._chart.ctx;var e=this._view;var i=e.borderAlign==="inner"?.33:0;var n={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-i,0),pixelMargin:i,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Ht)};var o;t.save();t.fillStyle=e.backgroundColor;t.strokeStyle=e.borderColor;if(n.fullCircles){n.endAngle=n.startAngle+Ht;t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();for(o=0;o<n.fullCircles;++o)t.fill();n.endAngle=n.startAngle+e.circumference%Ht}t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();t.fill();if(e.borderWidth)Gt(t,e,n);t.restore()}}),Kt=Ct.valueOrDefault,$t=pt.global.defaultColor;pt._set("global",{elements:{line:{tension:.4,backgroundColor:$t,borderWidth:3,borderColor:$t,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:true,fill:true}}});var Jt=It.extend({_type:"line",draw:function(){var t=this;var e=t._view;var i=t._chart.ctx;var n=e.spanGaps;var o=t._children.slice();var r=pt.global;var a=r.elements.line;var s=-1;var l=t._loop;var u,h,c;if(!o.length)return;if(t._loop){for(u=0;u<o.length;++u){h=Ct.previousItem(o,u);if(!o[u]._view.skip&&h._view.skip){o=o.slice(u).concat(o.slice(0,u));l=n;break}}if(l)o.push(o[0])}i.save();i.lineCap=e.borderCapStyle||a.borderCapStyle;if(i.setLineDash)i.setLineDash(e.borderDash||a.borderDash);i.lineDashOffset=Kt(e.borderDashOffset,a.borderDashOffset);i.lineJoin=e.borderJoinStyle||a.borderJoinStyle;i.lineWidth=Kt(e.borderWidth,a.borderWidth);i.strokeStyle=e.borderColor||r.defaultColor;i.beginPath();c=o[0]._view;if(!c.skip){i.moveTo(c.x,c.y);s=0}for(u=1;u<o.length;++u){c=o[u]._view;h=s===-1?Ct.previousItem(o,u):o[s];if(!c.skip){if(s!==u-1&&!n||s===-1)i.moveTo(c.x,c.y);else Ct.canvas.lineTo(i,h._view,c);s=u}}if(l)i.closePath();i.stroke();i.restore()}}),Yt=Ct.valueOrDefault,Xt=pt.global.defaultColor;function Qt(t){var e=this._view;return e?Math.abs(t-e.x)<e.radius+e.hitRadius:false}function te(t){var e=this._view;return e?Math.abs(t-e.y)<e.radius+e.hitRadius:false}pt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Xt,borderColor:Xt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ee=It.extend({_type:"point",inRange:function(t,e){var i=this._view;return i?Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2):false},inLabelRange:Qt,inXRange:Qt,inYRange:te,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view;var i=this._chart.ctx;var n=e.pointStyle;var o=e.rotation;var r=e.radius;var a=e.x;var s=e.y;var l=pt.global;var u=l.defaultColor;if(e.skip)return;if(t===undefined||Ct.canvas._isPointInArea(e,t)){i.strokeStyle=e.borderColor||u;i.lineWidth=Yt(e.borderWidth,l.elements.point.borderWidth);i.fillStyle=e.backgroundColor||u;Ct.canvas.drawPoint(i,n,r,a,s,o)}}}),ie=pt.global.defaultColor;function ne(t){return t&&t.width!==undefined}function oe(t){var e,i,n,o,r;if(ne(t)){r=t.width/2;e=t.x-r;i=t.x+r;n=Math.min(t.y,t.base);o=Math.max(t.y,t.base)}else{r=t.height/2;e=Math.min(t.x,t.base);i=Math.max(t.x,t.base);n=t.y-r;o=t.y+r}return{left:e,top:n,right:i,bottom:o}}function re(t,e,i){return t===e?i:t===i?e:t}function ae(t){var e=t.borderSkipped;var i={};if(!e)return i;if(t.horizontal){if(t.base>t.x)e=re(e,"left","right")}else if(t.base<t.y)e=re(e,"bottom","top");i[e]=true;return i}function se(t,e,i){var n=t.borderWidth;var o=ae(t);var r,a,s,l;if(Ct.isObject(n)){r=+n.top||0;a=+n.right||0;s=+n.bottom||0;l=+n.left||0}else r=a=s=l=+n||0;return{t:o.top||r<0?0:r>i?i:r,r:o.right||a<0?0:a>e?e:a,b:o.bottom||s<0?0:s>i?i:s,l:o.left||l<0?0:l>e?e:l}}function le(t){var e=oe(t);var i=e.right-e.left;var n=e.bottom-e.top;var o=se(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b}}}function ue(t,e,i){var n=e===null;var o=i===null;var r=!t||n&&o?false:oe(t);return r&&(n||e>=r.left&&e<=r.right)&&(o||i>=r.top&&i<=r.bottom)}pt._set("global",{elements:{rectangle:{backgroundColor:ie,borderColor:ie,borderSkipped:"bottom",borderWidth:0}}});var he=It.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx;var e=this._view;var i=le(e);var n=i.outer;var o=i.inner;t.fillStyle=e.backgroundColor;t.fillRect(n.x,n.y,n.w,n.h);if(n.w===o.w&&n.h===o.h)return;t.save();t.beginPath();t.rect(n.x,n.y,n.w,n.h);t.clip();t.fillStyle=e.borderColor;t.rect(o.x,o.y,o.w,o.h);t.fill("evenodd");t.restore()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return ue(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return ne(i)?ue(i,t,null):ue(i,null,e)},inXRange:function(t){return ue(this._view,t,null)},inYRange:function(t){return ue(this._view,null,t)},getCenterPoint:function(){var t=this._view;var e,i;if(ne(t)){e=t.x;i=(t.y+t.base)/2}else{e=(t.x+t.base)/2;i=t.y}return{x:e,y:i}},getArea:function(){var t=this._view;return ne(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),ce={},de,pe=Jt,fe=ee,me=he;ce.Arc=qt,ce.Line=pe,ce.Point=fe,ce.Rectangle=me;var ge=Ct._deprecated,ve=Ct.valueOrDefault;function _e(t,e){var i=t._length;var n,o,r,a;for(r=1,a=e.length;r<a;++r)i=Math.min(i,Math.abs(e[r]-e[r-1]));for(r=0,a=t.getTicks().length;r<a;++r){o=t.getPixelForTick(r);i=r>0?Math.min(i,Math.abs(o-n)):i;n=o}return i}function ye(t,e,i){var n=i.barThickness;var o=e.stackCount;var r=e.pixels[t];var a=Ct.isNullOrUndef(n)?_e(e.scale,e.pixels):-1;var s,l;if(Ct.isNullOrUndef(n)){s=a*i.categoryPercentage;l=i.barPercentage}else{s=n*o;l=1}return{chunk:s/o,ratio:l,start:r-s/2}}function xe(t,e,i){var n=e.pixels;var o=n[t];var r=t>0?n[t-1]:null;var a=t<n.length-1?n[t+1]:null;var s=i.categoryPercentage;var l,u;if(r===null)r=o-(a===null?e.end-e.start:a-o);if(a===null)a=o+o-r;l=o-(o-Math.min(r,a))/2*s;u=Math.abs(a-r)/2*s;return{chunk:u/e.stackCount,ratio:i.barPercentage,start:l}}pt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:"linear"}]}}),pt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var be=jt.extend({dataElementType:ce.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t=this;var e,i;jt.prototype.initialize.apply(t,arguments);e=t.getMeta();e.stack=t.getDataset().stack;e.bar=true;i=t._getIndexScale().options;ge("bar chart",i.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage");ge("bar chart",i.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness");ge("bar chart",i.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage");ge("bar chart",t._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength");ge("bar chart",i.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e=this;var i=e.getMeta().data;var n,o;e._ruler=e.getRuler();for(n=0,o=i.length;n<o;++n)e.updateElement(i[n],n,t)},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=n.getDataset();var a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID);t._yScale=n.getScaleForId(o.yAxisID);t._datasetIndex=n.index;t._index=e;t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[e]};if(Ct.isArray(r.data[e]))t._model.borderSkipped=null;n._updateElementGeometry(t,e,i,a);t.pivot()},_updateElementGeometry:function(t,e,i,n){var o=this;var r=t._model;var a=o._getValueScale();var s=a.getBasePixel();var l=a.isHorizontal();var u=o._ruler||o.getRuler();var h=o.calculateBarValuePixels(o.index,e,n);var c=o.calculateBarIndexPixels(o.index,e,u,n);r.horizontal=l;r.base=i?s:h.base;r.x=l?i?s:h.head:c.center;r.y=l?c.center:i?s:h.head;r.height=l?c.size:undefined;r.width=l?undefined:c.size},_getStacks:function(t){var e=this;var i=e._getIndexScale();var n=i._getMatchingVisibleMetas(e._type);var o=i.options.stacked;var r=n.length;var a=[];var s,l;for(s=0;s<r;++s){l=n[s];if(o===false||a.indexOf(l.stack)===-1||o===undefined&&l.stack===undefined)a.push(l.stack);if(l.index===t)break}return a},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t);var n=e!==undefined?i.indexOf(e):-1;return n===-1?i.length-1:n},getRuler:function(){var t=this;var e=t._getIndexScale();var i=[];var n,o;for(n=0,o=t.getMeta().data.length;n<o;++n)i.push(e.getPixelForValue(null,n,t.index));return{pixels:i,start:e._startPixel,end:e._endPixel,stackCount:t.getStackCount(),scale:e}},calculateBarValuePixels:function(t,e,i){var n=this;var o=n.chart;var r=n._getValueScale();var a=r.isHorizontal();var s=o.data.datasets;var l=r._getMatchingVisibleMetas(n._type);var u=r._parseValue(s[t].data[e]);var h=i.minBarLength;var c=r.options.stacked;var d=n.getMeta().stack;var p=u.start===undefined?0:u.max>=0&&u.min>=0?u.min:u.max;var f=u.start===undefined?u.end:u.max>=0&&u.min>=0?u.max-u.min:u.min-u.max;var m=l.length;var g,v,_,y,x,b,w;if(c||c===undefined&&d!==undefined)for(g=0;g<m;++g){v=l[g];if(v.index===t)break;if(v.stack===d){w=r._parseValue(s[v.index].data[e]);_=w.start===undefined?w.end:w.min>=0&&w.max>=0?w.max:w.min;if(u.min<0&&_<0||u.max>=0&&_>0)p+=_}}y=r.getPixelForValue(p);x=r.getPixelForValue(p+f);b=x-y;if(h!==undefined&&Math.abs(b)<h){b=h;if(f>=0&&!a||f<0&&a)x=y-h;else x=y+h}return{size:b,base:y,head:x,center:x+b/2}},calculateBarIndexPixels:function(t,e,i,n){var o=this;var r=n.barThickness==="flex"?xe(e,i,n):ye(e,i,n);var a=o.getStackIndex(t,o.getMeta().stack);var s=r.start+r.chunk*a+r.chunk/2;var l=Math.min(ve(n.maxBarThickness,Infinity),r.chunk*r.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var t=this;var e=t.chart;var i=t._getValueScale();var n=t.getMeta().data;var o=t.getDataset();var r=n.length;var a=0;Ct.canvas.clipArea(e.ctx,e.chartArea);for(;a<r;++a){var s=i._parseValue(o.data[a]);if(!isNaN(s.min)&&!isNaN(s.max))n[a].draw()}Ct.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this;var e=Ct.extend({},jt.prototype._resolveDataElementOptions.apply(t,arguments));var i=t._getIndexScale().options;var n=t._getValueScale().options;e.barPercentage=ve(i.barPercentage,e.barPercentage);e.barThickness=ve(i.barThickness,e.barThickness);e.categoryPercentage=ve(i.categoryPercentage,e.categoryPercentage);e.maxBarThickness=ve(i.maxBarThickness,e.maxBarThickness);e.minBarLength=ve(n.minBarLength,e.minBarLength);return e}}),we=Ct.valueOrDefault,ke=Ct.options.resolve;pt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";var n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Le=jt.extend({dataElementType:ce.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(i){var n=this;var t=n.getMeta();var e=t.data;Ct.each(e,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=t.custom||{};var a=n.getScaleForId(o.xAxisID);var s=n.getScaleForId(o.yAxisID);var l=n._resolveDataElementOptions(t,e);var u=n.getDataset().data[e];var h=n.index;var c=i?a.getPixelForDecimal(.5):a.getPixelForValue(typeof u==="object"?u:NaN,e,h);var d=i?s.getBasePixel():s.getPixelForValue(u,e,h);t._xScale=a;t._yScale=s;t._options=l;t._datasetIndex=h;t._index=e;t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:r.skip||isNaN(c)||isNaN(d),x:c,y:d};t.pivot()},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Ct.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=we(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=we(i.hoverBorderColor,n(i.borderColor));e.borderWidth=we(i.hoverBorderWidth,i.borderWidth);e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this;var n=i.chart;var o=i.getDataset();var r=t.custom||{};var a=o.data[e]||{};var s=jt.prototype._resolveDataElementOptions.apply(i,arguments);var l={chart:n,dataIndex:e,dataset:o,datasetIndex:i.index};if(i._cachedDataOpts===s)s=Ct.extend({},s);s.radius=ke([r.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e);return s}}),Ce=Ct.valueOrDefault,Me=Math.PI,Te=Me*2,Pe=Me/2;pt._set("doughnut",{animation:{animateRotate:true,animateScale:false},hover:{mode:"single"},legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var o=i.labels;var r,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length)for(r=0,a=n[0].data.length;r<a;++r){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[r];if(o[r])s.appendChild(document.createTextNode(o[r]))}return e.outerHTML},legend:{labels:{generateLabels:function(o){var r=o.data;if(r.labels.length&&r.datasets.length)return r.labels.map(function(t,e){var i=o.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(r.datasets[0].data[e])||i.data[e].hidden,index:e}});return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var o,r,a;for(o=0,r=(n.data.datasets||[]).length;o<r;++o){a=n.getDatasetMeta(o);if(a.data[i])a.data[i].hidden=!a.data[i].hidden}n.update()}},cutoutPercentage:50,rotation:-Pe,circumference:Te,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index];var n=": "+e.datasets[t.datasetIndex].data[t.index];if(Ct.isArray(i)){i=i.slice();i[0]+=n}else i+=n;return i}}}});var Se=jt.extend({dataElementType:ce.Arc,linkScales:Ct.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){var e=0;for(var i=0;i<t;++i)if(this.chart.isDatasetVisible(i))++e;return e},update:function(t){var e=this;var i=e.chart;var n=i.chartArea;var o=i.options;var r=1;var a=1;var s=0;var l=0;var u=e.getMeta();var h=u.data;var c=o.cutoutPercentage/100||0;var d=o.circumference;var p=e._getRingWeight(e.index);var f,m,g,v;if(d<Te){var _=o.rotation%Te;_+=_>=Me?-Te:_<-Me?Te:0;var y=_+d;var x=Math.cos(_);var b=Math.sin(_);var w=Math.cos(y);var k=Math.sin(y);var L=_<=0&&y>=0||y>=Te;var C=_<=Pe&&y>=Pe||y>=Te+Pe;var M=_===-Me||y>=Me;var T=_<=-Pe&&y>=-Pe||y>=Me+Pe;var P=M?-1:Math.min(x,x*c,w,w*c);var S=T?-1:Math.min(b,b*c,k,k*c);var A=L?1:Math.max(x,x*c,w,w*c);var D=C?1:Math.max(b,b*c,k,k*c);r=(A-P)/2;a=(D-S)/2;s=-(A+P)/2;l=-(D+S)/2}for(g=0,v=h.length;g<v;++g)h[g]._options=e._resolveDataElementOptions(h[g],g);i.borderWidth=e.getMaxBorderWidth();f=(n.right-n.left-i.borderWidth)/r;m=(n.bottom-n.top-i.borderWidth)/a;i.outerRadius=Math.max(Math.min(f,m)/2,0);i.innerRadius=Math.max(i.outerRadius*c,0);i.radiusLength=(i.outerRadius-i.innerRadius)/(e._getVisibleDatasetWeightTotal()||1);i.offsetX=s*i.outerRadius;i.offsetY=l*i.outerRadius;u.total=e.calculateTotal();e.outerRadius=i.outerRadius-i.radiusLength*e._getRingWeightOffset(e.index);e.innerRadius=Math.max(e.outerRadius-i.radiusLength*p,0);for(g=0,v=h.length;g<v;++g)e.updateElement(h[g],g,t)},updateElement:function(t,e,i){var n=this;var o=n.chart;var r=o.chartArea;var a=o.options;var s=a.animation;var l=(r.left+r.right)/2;var u=(r.top+r.bottom)/2;var h=a.rotation;var c=a.rotation;var d=n.getDataset();var p=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(d.data[e])*(a.circumference/Te);var f=i&&s.animateScale?0:n.innerRadius;var m=i&&s.animateScale?0:n.outerRadius;var g=t._options||{};Ct.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+o.offsetX,y:u+o.offsetY,startAngle:h,endAngle:c,circumference:p,outerRadius:m,innerRadius:f,label:Ct.valueAtIndexOrDefault(d.label,e,o.data.labels[e])}});var v=t._model;if(!i||!s.animateRotate){if(e===0)v.startAngle=a.rotation;else v.startAngle=n.getMeta().data[e-1]._model.endAngle;v.endAngle=v.startAngle+v.circumference}t.pivot()},calculateTotal:function(){var i=this.getDataset();var t=this.getMeta();var n=0;var o;Ct.each(t.data,function(t,e){o=i.data[e];if(!isNaN(o)&&!t.hidden)n+=Math.abs(o)});return n},calculateCircumference:function(t){var e=this.getMeta().total;if(e>0&&!isNaN(t))return Te*(Math.abs(t)/e);return 0},getMaxBorderWidth:function(t){var e=this;var i=0;var n=e.chart;var o,r,a,s,l,u,h,c;if(!t)for(o=0,r=n.data.datasets.length;o<r;++o)if(n.isDatasetVisible(o)){a=n.getDatasetMeta(o);t=a.data;if(o!==e.index)l=a.controller;break}if(!t)return 0;for(o=0,r=t.length;o<r;++o){s=t[o];if(l){l._configure();u=l._resolveDataElementOptions(s,o)}else u=s._options;if(u.borderAlign!=="inner"){h=u.borderWidth;c=u.hoverBorderWidth;i=h>i?h:i;i=c>i?c:i}}return i},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Ct.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=Ce(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ce(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ce(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){var e=0;for(var i=0;i<t;++i)if(this.chart.isDatasetVisible(i))e+=this._getRingWeight(i);return e},_getRingWeight:function(t){return Math.max(Ce(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});pt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),pt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Ae=be.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),De=Ct.valueOrDefault,Ee=Ct.options.resolve,Ie=Ct.canvas._isPointInArea;function Oe(t,e){var i=t&&t.options.ticks||{};var n=i.reverse;var o=i.min===undefined?e:0;var r=i.max===undefined?e:0;return{start:n?r:o,end:n?o:r}}function ze(t,e,i){var n=i/2;var o=Oe(t,n);var r=Oe(e,n);return{top:r.end,right:o.end,bottom:r.start,left:o.start}}function Be(t){var e,i,n,o;if(Ct.isObject(t)){e=t.top;i=t.right;n=t.bottom;o=t.left}else e=i=n=o=t;return{top:e,right:i,bottom:n,left:o}}pt._set("line",{showLines:true,spanGaps:false,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Fe=jt.extend({datasetElementType:ce.Line,dataElementType:ce.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o=i.data||[];var r=e.chart.options;var a=e._config;var s=e._showLine=De(a.showLine,r.showLines);var l,u;e._xScale=e.getScaleForId(i.xAxisID);e._yScale=e.getScaleForId(i.yAxisID);if(s){if(a.tension!==undefined&&a.lineTension===undefined)a.lineTension=a.tension;n._scale=e._yScale;n._datasetIndex=e.index;n._children=o;n._model=e._resolveDatasetElementOptions(n);n.pivot()}for(l=0,u=o.length;l<u;++l)e.updateElement(o[l],l,t);if(s&&n._model.tension!==0)e.updateBezierControlPoints();for(l=0,u=o.length;l<u;++l)o[l].pivot()},updateElement:function(t,e,i){var n=this;var o=n.getMeta();var r=t.custom||{};var a=n.getDataset();var s=n.index;var l=a.data[e];var u=n._xScale;var h=n._yScale;var c=o.dataset._model;var d,p;var f=n._resolveDataElementOptions(t,e);d=u.getPixelForValue(typeof l==="object"?l:NaN,e,s);p=i?h.getBasePixel():n.calculatePointY(l,e,s);t._xScale=u;t._yScale=h;t._options=f;t._datasetIndex=s;t._index=e;t._model={x:d,y:p,skip:r.skip||isNaN(d)||isNaN(p),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:De(r.tension,c?c.tension:0),steppedLine:c?c.steppedLine:false,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this;var i=e._config;var n=t.custom||{};var o=e.chart.options;var r=o.elements.line;var a=jt.prototype._resolveDatasetElementOptions.apply(e,arguments);a.spanGaps=De(i.spanGaps,o.spanGaps);a.tension=De(i.lineTension,r.tension);a.steppedLine=Ee([n.steppedLine,i.steppedLine,r.stepped]);a.clip=Be(De(i.clip,ze(e._xScale,e._yScale,a.borderWidth)));return a},calculatePointY:function(t,e,i){var n=this;var o=n.chart;var r=n._yScale;var a=0;var s=0;var l,u,h,c,d,p,f;if(r.options.stacked){d=+r.getRightValue(t);p=o._getSortedVisibleDatasetMetas();f=p.length;for(l=0;l<f;++l){h=p[l];if(h.index===i)break;u=o.data.datasets[h.index];if(h.type==="line"&&h.yAxisID===r.id){c=+r.getRightValue(u.data[e]);if(c<0)s+=c||0;else a+=c||0}}if(d<0)return r.getPixelForValue(s+d);return r.getPixelForValue(a+d)}return r.getPixelForValue(t)},updateBezierControlPoints:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.dataset._model;var o=e.chartArea;var r=i.data||[];var a,s,l,u;if(n.spanGaps)r=r.filter(function(t){return!t._model.skip});function h(t,e,i){return Math.max(Math.min(t,i),e)}if(n.cubicInterpolationMode==="monotone")Ct.splineCurveMonotone(r);else for(a=0,s=r.length;a<s;++a){l=r[a]._model;u=Ct.splineCurve(Ct.previousItem(r,a)._model,l,Ct.nextItem(r,a)._model,n.tension);l.controlPointPreviousX=u.previous.x;l.controlPointPreviousY=u.previous.y;l.controlPointNextX=u.next.x;l.controlPointNextY=u.next.y}if(e.options.elements.line.capBezierPoints)for(a=0,s=r.length;a<s;++a){l=r[a]._model;if(Ie(l,o)){if(a>0&&Ie(r[a-1]._model,o)){l.controlPointPreviousX=h(l.controlPointPreviousX,o.left,o.right);l.controlPointPreviousY=h(l.controlPointPreviousY,o.top,o.bottom)}if(a<r.length-1&&Ie(r[a+1]._model,o)){l.controlPointNextX=h(l.controlPointNextX,o.left,o.right);l.controlPointNextY=h(l.controlPointNextY,o.top,o.bottom)}}}},draw:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.data||[];var o=e.chartArea;var r=e.canvas;var a=0;var s=n.length;var l;if(t._showLine){l=i.dataset._model.clip;Ct.canvas.clipArea(e.ctx,{left:l.left===false?0:o.left-l.left,right:l.right===false?r.width:o.right+l.right,top:l.top===false?0:o.top-l.top,bottom:l.bottom===false?r.height:o.bottom+l.bottom});i.dataset.draw();Ct.canvas.unclipArea(e.ctx)}for(;a<s;++a)n[a].draw(o)},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Ct.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=De(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=De(i.hoverBorderColor,n(i.borderColor));e.borderWidth=De(i.hoverBorderWidth,i.borderWidth);e.radius=De(i.hoverRadius,i.radius)}}),Re=Ct.options.resolve;pt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-.5*Math.PI,legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var o=i.labels;var r,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length)for(r=0,a=n[0].data.length;r<a;++r){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[r];if(o[r])s.appendChild(document.createTextNode(o[r]))}return e.outerHTML},legend:{labels:{generateLabels:function(o){var r=o.data;if(r.labels.length&&r.datasets.length)return r.labels.map(function(t,e){var i=o.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(r.datasets[0].data[e])||i.data[e].hidden,index:e}});return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var o,r,a;for(o=0,r=(n.data.datasets||[]).length;o<r;++o){a=n.getDatasetMeta(o);a.data[i].hidden=!a.data[i].hidden}n.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Ne=jt.extend({dataElementType:ce.Arc,linkScales:Ct.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getDataset();var n=e.getMeta();var o=e.chart.options.startAngle||0;var r=e._starts=[];var a=e._angles=[];var s=n.data;var l,u,h;e._updateRadius();n.count=e.countVisibleElements();for(l=0,u=i.data.length;l<u;l++){r[l]=o;h=e._computeAngle(l);a[l]=h;o+=h}for(l=0,u=s.length;l<u;++l){s[l]._options=e._resolveDataElementOptions(s[l],l);e.updateElement(s[l],l,t)}},_updateRadius:function(){var t=this;var e=t.chart;var i=e.chartArea;var n=e.options;var o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(o/2,0);e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0);e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount();t.outerRadius=e.outerRadius-e.radiusLength*t.index;t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this;var o=n.chart;var r=n.getDataset();var a=o.options;var s=a.animation;var l=o.scale;var u=o.data.labels;var h=l.xCenter;var c=l.yCenter;var d=a.startAngle;var p=t.hidden?0:l.getDistanceFromCenterForValue(r.data[e]);var f=n._starts[e];var m=f+(t.hidden?0:n._angles[e]);var g=s.animateScale?0:l.getDistanceFromCenterForValue(r.data[e]);var v=t._options||{};Ct.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:h,y:c,innerRadius:0,outerRadius:i?g:p,startAngle:i&&s.animateRotate?d:f,endAngle:i&&s.animateRotate?d:m,label:Ct.valueAtIndexOrDefault(u,e,u[e])}});t.pivot()},countVisibleElements:function(){var i=this.getDataset();var t=this.getMeta();var n=0;Ct.each(t.data,function(t,e){if(!isNaN(i.data[e])&&!t.hidden)n++});return n},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Ct.getHoverColor;var o=Ct.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=o(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=o(i.hoverBorderColor,n(i.borderColor));e.borderWidth=o(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this;var i=this.getMeta().count;var n=e.getDataset();var o=e.getMeta();if(isNaN(n.data[t])||o.data[t].hidden)return 0;var r={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return Re([e.chart.options.elements.arc.angle,2*Math.PI/i],r,t)}});pt._set("pie",Ct.clone(pt.doughnut)),pt._set("pie",{cutoutPercentage:0});var Ue=Se,Ze=Ct.valueOrDefault;pt._set("radar",{spanGaps:false,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var je=jt.extend({datasetElementType:ce.Line,dataElementType:ce.Point,linkScales:Ct.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var o=i.data||[];var r=e.chart.scale;var a=e._config;var s,l;if(a.tension!==undefined&&a.lineTension===undefined)a.lineTension=a.tension;n._scale=r;n._datasetIndex=e.index;n._children=o;n._loop=true;n._model=e._resolveDatasetElementOptions(n);n.pivot();for(s=0,l=o.length;s<l;++s)e.updateElement(o[s],s,t);e.updateBezierControlPoints();for(s=0,l=o.length;s<l;++s)o[s].pivot()},updateElement:function(t,e,i){var n=this;var o=t.custom||{};var r=n.getDataset();var a=n.chart.scale;var s=a.getPointPositionForValue(e,r.data[e]);var l=n._resolveDataElementOptions(t,e);var u=n.getMeta().dataset._model;var h=i?a.xCenter:s.x;var c=i?a.yCenter:s.y;t._scale=a;t._options=l;t._datasetIndex=n.index;t._index=e;t._model={x:h,y:c,skip:o.skip||isNaN(h)||isNaN(c),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ze(o.tension,u?u.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this;var e=t._config;var i=t.chart.options;var n=jt.prototype._resolveDatasetElementOptions.apply(t,arguments);n.spanGaps=Ze(e.spanGaps,i.spanGaps);n.tension=Ze(e.lineTension,i.elements.line.tension);return n},updateBezierControlPoints:function(){var t=this;var e=t.getMeta();var i=t.chart.chartArea;var n=e.data||[];var o,r,a,s;if(e.dataset._model.spanGaps)n=n.filter(function(t){return!t._model.skip});function l(t,e,i){return Math.max(Math.min(t,i),e)}for(o=0,r=n.length;o<r;++o){a=n[o]._model;s=Ct.splineCurve(Ct.previousItem(n,o,true)._model,a,Ct.nextItem(n,o,true)._model,a.tension);a.controlPointPreviousX=l(s.previous.x,i.left,i.right);a.controlPointPreviousY=l(s.previous.y,i.top,i.bottom);a.controlPointNextX=l(s.next.x,i.left,i.right);a.controlPointNextY=l(s.next.y,i.top,i.bottom)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Ct.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=Ze(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ze(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ze(i.hoverBorderWidth,i.borderWidth);e.radius=Ze(i.hoverRadius,i.radius)}});pt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),pt._set("global",{datasets:{scatter:{showLine:false}}});var He,We={bar:be,bubble:Le,doughnut:Se,horizontalBar:Ae,line:Fe,polarArea:Ne,pie:Ue,radar:je,scatter:Fe};function Ve(t,e){if(t.native)return{x:t.x,y:t.y};return Ct.getRelativePosition(t,e)}function Ge(t,e){var i=t._getSortedVisibleDatasetMetas();var n,o,r,a,s,l;for(o=0,a=i.length;o<a;++o){n=i[o].data;for(r=0,s=n.length;r<s;++r){l=n[r];if(!l._view.skip)e(l)}}}function qe(t,e){var i=[];Ge(t,function(t){if(t.inRange(e.x,e.y))i.push(t)});return i}function Ke(t,n,o,r){var a=Number.POSITIVE_INFINITY;var s=[];Ge(t,function(t){if(o&&!t.inRange(n.x,n.y))return;var e=t.getCenterPoint();var i=r(n,e);if(i<a){s=[t];a=i}else if(i===a)s.push(t)});return s}function $e(t){var o=t.indexOf("x")!==-1;var r=t.indexOf("y")!==-1;return function(t,e){var i=o?Math.abs(t.x-e.x):0;var n=r?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}function Je(t,e,i){var n=Ve(e,t);i.axis=i.axis||"x";var o=$e(i.axis);var r=i.intersect?qe(t,n):Ke(t,n,false,o);var a=[];if(!r.length)return[];t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[r[0]._index];if(e&&!e._view.skip)a.push(e)});return a}var Ye={modes:{single:function(t,e){var i=Ve(e,t);var n=[];Ge(t,function(t){if(t.inRange(i.x,i.y)){n.push(t);return n}});return n.slice(0,1)},label:Je,index:Je,dataset:function(t,e,i){var n=Ve(e,t);i.axis=i.axis||"xy";var o=$e(i.axis);var r=i.intersect?qe(t,n):Ke(t,n,false,o);if(r.length>0)r=t.getDatasetMeta(r[0]._datasetIndex).data;return r},"x-axis":function(t,e){return Je(t,e,{intersect:false})},point:function(t,e){var i=Ve(e,t);return qe(t,i)},nearest:function(t,e,i){var n=Ve(e,t);i.axis=i.axis||"xy";var o=$e(i.axis);return Ke(t,n,i.intersect,o)},x:function(t,e,i){var n=Ve(e,t);var o=[];var r=false;Ge(t,function(t){if(t.inXRange(n.x))o.push(t);if(t.inRange(n.x,n.y))r=true});if(i.intersect&&!r)o=[];return o},y:function(t,e,i){var n=Ve(e,t);var o=[];var r=false;Ge(t,function(t){if(t.inYRange(n.y))o.push(t);if(t.inRange(n.x,n.y))r=true});if(i.intersect&&!r)o=[];return o}}},Xe=Ct.extend;function Qe(t,e){return Ct.where(t,function(t){return t.pos===e})}function ti(t,o){return t.sort(function(t,e){var i=o?e:t;var n=o?t:e;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function ei(t){var e=[];var i,n,o;for(i=0,n=(t||[]).length;i<n;++i){o=t[i];e.push({index:i,box:o,pos:o.position,horizontal:o.isHorizontal(),weight:o.weight})}return e}function ii(t,e){var i,n,o;for(i=0,n=t.length;i<n;++i){o=t[i];o.width=o.horizontal?o.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth;o.height=o.horizontal&&e.hBoxMaxHeight}}function ni(t){var e=ei(t);var i=ti(Qe(e,"left"),true);var n=ti(Qe(e,"right"));var o=ti(Qe(e,"top"),true);var r=ti(Qe(e,"bottom"));return{leftAndTop:i.concat(o),rightAndBottom:n.concat(r),chartArea:Qe(e,"chartArea"),vertical:i.concat(n),horizontal:o.concat(r)}}function oi(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function ri(t,e,i){var n=i.box;var o=t.maxPadding;var r,a;if(i.size)t[i.pos]-=i.size;i.size=i.horizontal?n.height:n.width;t[i.pos]+=i.size;if(n.getPadding){var s=n.getPadding();o.top=Math.max(o.top,s.top);o.left=Math.max(o.left,s.left);o.bottom=Math.max(o.bottom,s.bottom);o.right=Math.max(o.right,s.right)}r=e.outerWidth-oi(o,t,"left","right");a=e.outerHeight-oi(o,t,"top","bottom");if(r!==t.w||a!==t.h){t.w=r;t.h=a;var l=i.horizontal?[r,t.w]:[a,t.h];return l[0]!==l[1]&&(!isNaN(l[0])||!isNaN(l[1]))}}function ai(i){var n=i.maxPadding;function t(t){var e=Math.max(n[t]-i[t],0);i[t]+=e;return e}i.y+=t("top");i.x+=t("left");t("right");t("bottom")}function si(t,i){var n=i.maxPadding;function e(t){var e={left:0,top:0,right:0,bottom:0};t.forEach(function(t){e[t]=Math.max(i[t],n[t])});return e}return t?e(["left","right"]):e(["top","bottom"])}function li(t,e,i){var n=[];var o,r,a,s,l,u;for(o=0,r=t.length;o<r;++o){a=t[o];s=a.box;s.update(a.width||e.w,a.height||e.h,si(a.horizontal,e));if(ri(e,i,a)){u=true;if(n.length)l=true}if(!s.fullWidth)n.push(a)}return l?li(n,e,i)||u:u}function ui(t,e,i){var n=i.padding;var o=e.x;var r=e.y;var a,s,l,u;for(a=0,s=t.length;a<s;++a){l=t[a];u=l.box;if(l.horizontal){u.left=u.fullWidth?n.left:e.left;u.right=u.fullWidth?i.outerWidth-n.right:e.left+e.w;u.top=r;u.bottom=r+u.height;u.width=u.right-u.left;r=u.bottom}else{u.left=o;u.right=o+u.width;u.top=e.top;u.bottom=e.top+e.h;u.height=u.bottom-u.top;o=u.right}}e.x=o;e.y=r}pt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var hi={defaults:{},addBox:function(t,e){if(!t.boxes)t.boxes=[];e.fullWidth=e.fullWidth||false;e.position=e.position||"top";e.weight=e.weight||0;e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]};t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;if(i!==-1)t.boxes.splice(i,1)},configure:function(t,e,i){var n=["fullWidth","position","weight"];var o=n.length;var r=0;var a;for(;r<o;++r){a=n[r];if(i.hasOwnProperty(a))e[a]=i[a]}},update:function(i,t,e){if(!i)return;var n=i.options.layout||{};var o=Ct.options.toPadding(n.padding);var r=t-o.width;var a=e-o.height;var s=ni(i.boxes);var l=s.vertical;var u=s.horizontal;var h=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:r,vBoxMaxWidth:r/2/l.length,hBoxMaxHeight:a/2});var c=Xe({maxPadding:Xe({},o),w:r,h:a,x:o.left,y:o.top},o);ii(l.concat(u),h);li(l,c,h);if(li(u,c,h))li(l,c,h);ai(c);ui(s.leftAndTop,c,h);c.x+=c.w;c.y+=c.h;ui(s.rightAndBottom,c,h);i.chartArea={left:c.left,top:c.top,right:c.left+c.w,bottom:c.top+c.h};Ct.each(s.chartArea,function(t){var e=t.box;Xe(e,i.chartArea);e.update(c.w,c.h)})}},ci={acquireContext:function(t){if(t&&t.canvas)t=t.canvas;return t&&t.getContext("2d")||null}},di="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",pi,fi=e(Object.freeze({__proto__:null,default:di})),mi="$chartjs",gi="chartjs-",vi=gi+"size-monitor",_i=gi+"render-monitor",yi=gi+"render-animation",xi=["animationstart","webkitAnimationStart"],bi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function wi(t,e){var i=Ct.getStyle(t,e);var n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):undefined}function ki(t,e){var i=t.style;var n=t.getAttribute("height");var o=t.getAttribute("width");t[mi]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}};i.display=i.display||"block";if(o===null||o===""){var r=wi(t,"width");if(r!==undefined)t.width=r}if(n===null||n==="")if(t.style.height==="")t.height=t.width/(e.options.aspectRatio||2);else{var a=wi(t,"height");if(r!==undefined)t.height=a}return t}var Li,Ci=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("e",null,e)}catch(t){}return t}()?{passive:true}:false;function Mi(t,e,i){t.addEventListener(e,i,Ci)}function Ti(t,e,i){t.removeEventListener(e,i,Ci)}function Pi(t,e,i,n,o){return{type:t,chart:e,native:o||null,x:i!==undefined?i:null,y:n!==undefined?n:null}}function Si(t,e){var i=bi[t.type]||t.type;var n=Ct.getRelativePosition(t,e);return Pi(i,e,n.x,n.y,t)}function Ai(t,e){var i=false;var n=[];return function(){n=Array.prototype.slice.call(arguments);e=e||this;if(!i){i=true;Ct.requestAnimFrame.call(window,function(){i=false;t.apply(e,n)})}}}function Di(t){var e=document.createElement("div");e.className=t||"";return e}function Ei(t){var e=1e6;var i=Di(vi);var n=Di(vi+"-expand");var o=Di(vi+"-shrink");n.appendChild(Di());o.appendChild(Di());i.appendChild(n);i.appendChild(o);i._reset=function(){n.scrollLeft=e;n.scrollTop=e;o.scrollLeft=e;o.scrollTop=e};var r=function(){i._reset();t()};Mi(n,"scroll",r.bind(n,"expand"));Mi(o,"scroll",r.bind(o,"shrink"));return i}function Ii(e,i){var t=e[mi]||(e[mi]={});var n=t.renderProxy=function(t){if(t.animationName===yi)i()};Ct.each(xi,function(t){Mi(e,t,n)});t.reflow=!!e.offsetParent;e.classList.add(_i)}function Oi(e){var t=e[mi]||{};var i=t.renderProxy;if(i){Ct.each(xi,function(t){Ti(e,t,i)});delete t.renderProxy}e.classList.remove(_i)}function zi(i,n,o){var r=i[mi]||(i[mi]={});var e=r.resizer=Ei(Ai(function(){if(r.resizer){var t=o.options.maintainAspectRatio&&i.parentNode;var e=t?t.clientWidth:0;n(Pi("resize",o));if(t&&t.clientWidth<e&&o.canvas)n(Pi("resize",o))}}));Ii(i,function(){if(r.resizer){var t=i.parentNode;if(t&&t!==e.parentNode)t.insertBefore(e,t.firstChild);e._reset()}})}function Bi(t){var e=t[mi]||{};var i=e.resizer;delete e.resizer;Oi(t);if(i&&i.parentNode)i.parentNode.removeChild(i)}function Fi(t,e){var i=t[mi]||(t[mi]={});if(!i.containsStyles){i.containsStyles=true;e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css");n.appendChild(document.createTextNode(e));t.appendChild(n)}}var Ri={disableCSSInjection:false,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;var i=e.host?e:document.head;Fi(i,fi)}},acquireContext:function(t,e){if(typeof t==="string")t=document.getElementById(t);else if(t.length)t=t[0];if(t&&t.canvas)t=t.canvas;var i=t&&t.getContext&&t.getContext("2d");if(i&&i.canvas===t){this._ensureLoaded(t);ki(t,e);return i}return null},releaseContext:function(t){var i=t.canvas;if(!i[mi])return;var n=i[mi].initial;["height","width"].forEach(function(t){var e=n[t];if(Ct.isNullOrUndef(e))i.removeAttribute(t);else i.setAttribute(t,e)});Ct.each(n.style||{},function(t,e){i.style[e]=t});i.width=i.width;delete i[mi]},addEventListener:function(e,t,i){var n=e.canvas;if(t==="resize"){zi(n,i,e);return}var o=i[mi]||(i[mi]={});var r=o.proxies||(o.proxies={});var a=r[e.id+"_"+t]=function(t){i(Si(t,e))};Mi(n,t,a)},removeEventListener:function(t,e,i){var n=t.canvas;if(e==="resize"){Bi(n);return}var o=i[mi]||{};var r=o.proxies||{};var a=r[t.id+"_"+e];if(!a)return;Ti(n,e,a)}};Ct.addEvent=Mi,Ct.removeEvent=Ti;var Ni=Ri._enabled?Ri:ci,Ui=Ct.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ni);pt._set("global",{plugins:{}});var Zi={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){if(e.indexOf(t)===-1)e.push(t)});this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach(function(t){var e=i.indexOf(t);if(e!==-1)i.splice(e,1)});this._cacheId++},clear:function(){this._plugins=[];this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n=this.descriptors(t);var o=n.length;var r,a,s,l,u;for(r=0;r<o;++r){a=n[r];s=a.plugin;u=s[e];if(typeof u==="function"){l=[t].concat(i||[]);l.push(a.options);if(u.apply(s,l)===false)return false}}return true},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var o=[];var r=[];var i=t&&t.config||{};var a=i.options&&i.options.plugins||{};this._plugins.concat(i.plugins||[]).forEach(function(t){var e=o.indexOf(t);if(e!==-1)return;var i=t.id;var n=a[i];if(n===false)return;if(n===true)n=Ct.clone(pt.global.plugins[i]);o.push(t);r.push({plugin:t,options:n||{}})});e.descriptors=r;e.id=this._cacheId;return r},_invalidate:function(t){delete t.$plugins}},ji={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e;this.defaults[t]=Ct.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:undefined},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?Ct.merge(Object.create(null),[pt.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var i=this;if(i.defaults.hasOwnProperty(t))i.defaults[t]=Ct.extend(i.defaults[t],e)},addScalesToLayout:function(e){Ct.each(e.scales,function(t){t.fullWidth=t.options.fullWidth;t.position=t.options.position;t.weight=t.options.weight;hi.addBox(e,t)})}},Hi=Ct.valueOrDefault,Wi=Ct.rtl.getRtlAdapter;pt._set("global",{tooltips:{enabled:true,custom:null,mode:"nearest",position:"average",intersect:true,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:true,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:Ct.noop,title:function(t,e){var i="";var n=e.labels;var o=n?n.length:0;if(t.length>0){var r=t[0];if(r.label)i=r.label;else if(r.xLabel)i=r.xLabel;else if(o>0&&r.index<o)i=n[r.index]}return i},afterTitle:Ct.noop,beforeBody:Ct.noop,beforeLabel:Ct.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";if(i)i+=": ";if(!Ct.isNullOrUndef(t.value))i+=t.value;else i+=t.yLabel;return i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex);var n=i.data[t.index];var o=n._view;return{borderColor:o.borderColor,backgroundColor:o.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:Ct.noop,afterBody:Ct.noop,beforeFooter:Ct.noop,footer:Ct.noop,afterFooter:Ct.noop}}});var Vi={average:function(t){if(!t.length)return false;var e,i;var n=0;var o=0;var r=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x;o+=s.y;++r}}return{x:n/r,y:o/r}},nearest:function(t,e){var i=e.x;var n=e.y;var o=Number.POSITIVE_INFINITY;var r,a,s;for(r=0,a=t.length;r<a;++r){var l=t[r];if(l&&l.hasValue()){var u=l.getCenterPoint();var h=Ct.distanceBetweenPoints(e,u);if(h<o){o=h;s=l}}}if(s){var c=s.tooltipPosition();i=c.x;n=c.y}return{x:i,y:n}}};function Gi(t,e){if(e)if(Ct.isArray(e))Array.prototype.push.apply(t,e);else t.push(e);return t}function qi(t){if((typeof t==="string"||t instanceof String)&&t.indexOf("\n")>-1)return t.split("\n");return t}function Ki(t){var e=t._xScale;var i=t._yScale||t._scale;var n=t._index;var o=t._datasetIndex;var r=t._chart.getDatasetMeta(o).controller;var a=r._getIndexScale();var s=r._getValueScale();return{xLabel:e?e.getLabelForIndex(n,o):"",yLabel:i?i.getLabelForIndex(n,o):"",label:a?""+a.getLabelForIndex(n,o):"",value:s?""+s.getLabelForIndex(n,o):"",index:n,datasetIndex:o,x:t._model.x,y:t._model.y}}function $i(t){var e=pt.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Hi(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Hi(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Hi(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Hi(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Hi(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Hi(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Hi(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Hi(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Hi(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ji(t,e){var i=t._chart.ctx;var n=e.yPadding*2;var o=0;var r=e.body;var a=r.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length;var l=e.footer.length;var u=e.titleFontSize;var h=e.bodyFontSize;var c=e.footerFontSize;n+=s*u;n+=s?(s-1)*e.titleSpacing:0;n+=s?e.titleMarginBottom:0;n+=a*h;n+=a?(a-1)*e.bodySpacing:0;n+=l?e.footerMarginTop:0;n+=l*c;n+=l?(l-1)*e.footerSpacing:0;var d=0;var p=function(t){o=Math.max(o,i.measureText(t).width+d)};i.font=Ct.fontString(u,e._titleFontStyle,e._titleFontFamily);Ct.each(e.title,p);i.font=Ct.fontString(h,e._bodyFontStyle,e._bodyFontFamily);Ct.each(e.beforeBody.concat(e.afterBody),p);d=e.displayColors?h+2:0;Ct.each(r,function(t){Ct.each(t.before,p);Ct.each(t.lines,p);Ct.each(t.after,p)});d=0;i.font=Ct.fontString(c,e._footerFontStyle,e._footerFontFamily);Ct.each(e.footer,p);o+=2*e.xPadding;return{width:o,height:n}}function Yi(t,e){var i=t._model;var n=t._chart;var o=t._chart.chartArea;var r="center";var a="center";if(i.y<e.height)a="top";else if(i.y>n.height-e.height)a="bottom";var s,l;var u,h;var c;var d=(o.left+o.right)/2;var p=(o.top+o.bottom)/2;if(a==="center"){s=function(t){return t<=d};l=function(t){return t>d}}else{s=function(t){return t<=e.width/2};l=function(t){return t>=n.width-e.width/2}}u=function(t){return t+e.width+i.caretSize+i.caretPadding>n.width};h=function(t){return t-e.width-i.caretSize-i.caretPadding<0};c=function(t){return t<=p?"top":"bottom"};if(s(i.x)){r="left";if(u(i.x)){r="center";a=c(i.y)}}else if(l(i.x)){r="right";if(h(i.x)){r="center";a=c(i.y)}}var f=t._options;return{xAlign:f.xAlign?f.xAlign:r,yAlign:f.yAlign?f.yAlign:a}}function Xi(t,e,i,n){var o=t.x;var r=t.y;var a=t.caretSize;var s=t.caretPadding;var l=t.cornerRadius;var u=i.xAlign;var h=i.yAlign;var c=a+s;var d=l+s;if(u==="right")o-=e.width;else if(u==="center"){o-=e.width/2;if(o+e.width>n.width)o=n.width-e.width;if(o<0)o=0}if(h==="top")r+=c;else if(h==="bottom")r-=e.height+c;else r-=e.height/2;if(h==="center"){if(u==="left")o+=c;else if(u==="right")o-=c}else if(u==="left")o-=d;else if(u==="right")o+=d;return{x:o,y:r}}function Qi(t,e){return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-t.xPadding:t.x+t.xPadding}function tn(t){return Gi([],qi(t))}var en,nn,on=It.extend({initialize:function(){this._model=$i(this._options);this._lastActive=[]},getTitle:function(){var t=this;var e=t._options;var i=e.callbacks;var n=i.beforeTitle.apply(t,arguments);var o=i.title.apply(t,arguments);var r=i.afterTitle.apply(t,arguments);var a=[];a=Gi(a,qi(n));a=Gi(a,qi(o));a=Gi(a,qi(r));return a},getBeforeBody:function(){return tn(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var n=this;var o=n._options.callbacks;var r=[];Ct.each(t,function(t){var e={before:[],lines:[],after:[]};Gi(e.before,qi(o.beforeLabel.call(n,t,i)));Gi(e.lines,o.label.call(n,t,i));Gi(e.after,qi(o.afterLabel.call(n,t,i)));r.push(e)});return r},getAfterBody:function(){return tn(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this;var e=t._options.callbacks;var i=e.beforeFooter.apply(t,arguments);var n=e.footer.apply(t,arguments);var o=e.afterFooter.apply(t,arguments);var r=[];r=Gi(r,qi(i));r=Gi(r,qi(n));r=Gi(r,qi(o));return r},update:function(t){var e=this;var i=e._options;var n=e._model;var o=e._model=$i(i);var r=e._active;var a=e._data;var s={xAlign:n.xAlign,yAlign:n.yAlign};var l={x:n.x,y:n.y};var u={width:n.width,height:n.height};var h={x:n.caretX,y:n.caretY};var c,d;if(r.length){o.opacity=1;var p=[];var f=[];h=Vi[i.position].call(e,r,e._eventPosition);var m=[];for(c=0,d=r.length;c<d;++c)m.push(Ki(r[c]));if(i.filter)m=m.filter(function(t){return i.filter(t,a)});if(i.itemSort)m=m.sort(function(t,e){return i.itemSort(t,e,a)});Ct.each(m,function(t){p.push(i.callbacks.labelColor.call(e,t,e._chart));f.push(i.callbacks.labelTextColor.call(e,t,e._chart))});o.title=e.getTitle(m,a);o.beforeBody=e.getBeforeBody(m,a);o.body=e.getBody(m,a);o.afterBody=e.getAfterBody(m,a);o.footer=e.getFooter(m,a);o.x=h.x;o.y=h.y;o.caretPadding=i.caretPadding;o.labelColors=p;o.labelTextColors=f;o.dataPoints=m;u=Ji(this,o);s=Yi(this,u);l=Xi(o,u,s,e._chart)}else o.opacity=0;o.xAlign=s.xAlign;o.yAlign=s.yAlign;o.x=l.x;o.y=l.y;o.width=u.width;o.height=u.height;o.caretX=h.x;o.caretY=h.y;e._model=o;if(t&&i.custom)i.custom.call(e,o);return e},drawCaret:function(t,e){var i=this._chart.ctx;var n=this._view;var o=this.getCaretPosition(t,e,n);i.lineTo(o.x1,o.y1);i.lineTo(o.x2,o.y2);i.lineTo(o.x3,o.y3)},getCaretPosition:function(t,e,i){var n,o,r,a,s,l;var u=i.caretSize;var h=i.cornerRadius;var c=i.xAlign;var d=i.yAlign;var p=t.x;var f=t.y;var m=e.width;var g=e.height;if(d==="center"){s=f+g/2;if(c==="left"){n=p;o=n-u;r=n;a=s+u;l=s-u}else{n=p+m;o=n+u;r=n;a=s-u;l=s+u}}else{if(c==="left"){o=p+h+u;n=o-u;r=o+u}else if(c==="right"){o=p+m-h-u;n=o-u;r=o+u}else{o=i.caretX;n=o-u;r=o+u}if(d==="top"){a=f;s=a-u;l=a}else{a=f+g;s=a+u;l=a;var v=r;r=n;n=v}}return{x1:n,x2:o,x3:r,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;var o=n.length;var r,a,s;if(o){var l=Wi(e.rtl,e.x,e.width);t.x=Qi(e,e._titleAlign);i.textAlign=l.textAlign(e._titleAlign);i.textBaseline="middle";r=e.titleFontSize;a=e.titleSpacing;i.fillStyle=e.titleFontColor;i.font=Ct.fontString(r,e._titleFontStyle,e._titleFontFamily);for(s=0;s<o;++s){i.fillText(n[s],l.x(t.x),t.y+r/2);t.y+=r+a;if(s+1===o)t.y+=e.titleMarginBottom-a}}},drawBody:function(e,t,i){var n=t.bodyFontSize;var o=t.bodySpacing;var r=t._bodyAlign;var a=t.body;var s=t.displayColors;var l=0;var u=s?Qi(t,"left"):0;var h=Wi(t.rtl,t.x,t.width);var c=function(t){i.fillText(t,h.x(e.x+l),e.y+n/2);e.y+=n+o};var d,p,f,m,g,v,_,y;var x=h.textAlign(r);i.textAlign=r;i.textBaseline="middle";i.font=Ct.fontString(n,t._bodyFontStyle,t._bodyFontFamily);e.x=Qi(t,x);i.fillStyle=t.bodyFontColor;Ct.each(t.beforeBody,c);l=s&&x!=="right"?r==="center"?n/2+1:n+2:0;for(g=0,_=a.length;g<_;++g){d=a[g];p=t.labelTextColors[g];f=t.labelColors[g];i.fillStyle=p;Ct.each(d.before,c);m=d.lines;for(v=0,y=m.length;v<y;++v){if(s){var b=h.x(u);i.fillStyle=t.legendColorBackground;i.fillRect(h.leftForLtr(b,n),e.y,n,n);i.lineWidth=1;i.strokeStyle=f.borderColor;i.strokeRect(h.leftForLtr(b,n),e.y,n,n);i.fillStyle=f.backgroundColor;i.fillRect(h.leftForLtr(h.xPlus(b,1),n-2),e.y+1,n-2,n-2);i.fillStyle=p}c(m[v])}Ct.each(d.after,c)}l=0;Ct.each(t.afterBody,c);e.y-=o},drawFooter:function(t,e,i){var n=e.footer;var o=n.length;var r,a;if(o){var s=Wi(e.rtl,e.x,e.width);t.x=Qi(e,e._footerAlign);t.y+=e.footerMarginTop;i.textAlign=s.textAlign(e._footerAlign);i.textBaseline="middle";r=e.footerFontSize;i.fillStyle=e.footerFontColor;i.font=Ct.fontString(r,e._footerFontStyle,e._footerFontFamily);for(a=0;a<o;++a){i.fillText(n[a],s.x(t.x),t.y+r/2);t.y+=r+e.footerSpacing}}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor;i.strokeStyle=e.borderColor;i.lineWidth=e.borderWidth;var o=e.xAlign;var r=e.yAlign;var a=t.x;var s=t.y;var l=n.width;var u=n.height;var h=e.cornerRadius;i.beginPath();i.moveTo(a+h,s);if(r==="top")this.drawCaret(t,n);i.lineTo(a+l-h,s);i.quadraticCurveTo(a+l,s,a+l,s+h);if(r==="center"&&o==="right")this.drawCaret(t,n);i.lineTo(a+l,s+u-h);i.quadraticCurveTo(a+l,s+u,a+l-h,s+u);if(r==="bottom")this.drawCaret(t,n);i.lineTo(a+h,s+u);i.quadraticCurveTo(a,s+u,a,s+u-h);if(r==="center"&&o==="left")this.drawCaret(t,n);i.lineTo(a,s+h);i.quadraticCurveTo(a,s,a+h,s);i.closePath();i.fill();if(e.borderWidth>0)i.stroke()},draw:function(){var t=this._chart.ctx;var e=this._view;if(e.opacity===0)return;var i={width:e.width,height:e.height};var n={x:e.x,y:e.y};var o=Math.abs(e.opacity<.001)?0:e.opacity;var r=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;if(this._options.enabled&&r){t.save();t.globalAlpha=o;this.drawBackground(n,e,t,i);n.y+=e.yPadding;Ct.rtl.overrideTextDirection(t,e.textDirection);this.drawTitle(n,e,t);this.drawBody(n,e,t);this.drawFooter(n,e,t);Ct.rtl.restoreTextDirection(t,e.textDirection);t.restore()}},handleEvent:function(t){var e=this;var i=e._options;var n=false;e._lastActive=e._lastActive||[];if(t.type==="mouseout")e._active=[];else{e._active=e._chart.getElementsAtEventForMode(t,i.mode,i);if(i.reverse)e._active.reverse()}n=!Ct.arrayEquals(e._active,e._lastActive);if(n){e._lastActive=e._active;if(i.enabled||i.custom){e._eventPosition={x:t.x,y:t.y};e.update(true);e.pivot()}}return n}});on.positioners=Vi;var rn=Ct.valueOrDefault;function an(){return Ct.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,i,n){if(t==="xAxes"||t==="yAxes"){var o=i[t].length;var r,a,s;if(!e[t])e[t]=[];for(r=0;r<o;++r){s=i[t][r];a=rn(s.type,t==="xAxes"?"category":"linear");if(r>=e[t].length)e[t].push({});if(!e[t][r].type||s.type&&s.type!==e[t][r].type)Ct.merge(e[t][r],[ji.getScaleDefaults(a),s]);else Ct.merge(e[t][r],s)}}else Ct._merger(t,e,i,n)}})}function sn(){return Ct.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,i,n){var o=e[t]||Object.create(null);var r=i[t];if(t==="scales")e[t]=an(o,r);else if(t==="scale")e[t]=Ct.merge(o,[ji.getScaleDefaults(r.type),r]);else Ct._merger(t,e,i,n)}})}function ln(t){t=t||Object.create(null);var e=t.data=t.data||{};e.datasets=e.datasets||[];e.labels=e.labels||[];t.options=sn(pt.global,pt[t.type],t.options||{});return t}function un(e){var t=e.options;Ct.each(e.scales,function(t){hi.removeBox(e,t)});t=sn(pt.global,pt[e.config.type],t);e.options=e.config.options=t;e.ensureScalesHaveIDs();e.buildOrUpdateScales();e.tooltip._options=t.tooltips;e.tooltip.initialize()}function hn(t,e,i){var n;var o=function(t){return t.id===n};do{n=e+i++}while(Ct.findIndex(t,o)>=0);return n}function cn(t){return t==="top"||t==="bottom"}function dn(i,n){return function(t,e){return t[i]===e[i]?t[n]-e[n]:t[i]-e[i]}}pt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});var pn=function(t,e){this.construct(t,e);return this};Ct.extend(pn.prototype,{construct:function(t,e){var i=this;e=ln(e);var n=Ui.acquireContext(t,e);var o=n&&n.canvas;var r=o&&o.height;var a=o&&o.width;i.id=Ct.uid();i.ctx=n;i.canvas=o;i.config=e;i.width=a;i.height=r;i.aspectRatio=r?a/r:null;i.options=e.options;i._bufferedRender=false;i._layers=[];i.chart=i;i.controller=i;pn.instances[i.id]=i;Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}});if(!n||!o){console.error("Failed to create chart: can't acquire context from the given item");return}i.initialize();i.update()},initialize:function(){var t=this;Zi.notify(t,"beforeInit");Ct.retinaScale(t,t.options.devicePixelRatio);t.bindEvents();if(t.options.responsive)t.resize(true);t.initToolTip();Zi.notify(t,"afterInit");return t},clear:function(){Ct.canvas.clear(this);return this},stop:function(){Bt.cancelAnimation(this);return this},resize:function(t){var e=this;var i=e.options;var n=e.canvas;var o=i.maintainAspectRatio&&e.aspectRatio||null;var r=Math.max(0,Math.floor(Ct.getMaximumWidth(n)));var a=Math.max(0,Math.floor(o?r/o:Ct.getMaximumHeight(n)));if(e.width===r&&e.height===a)return;n.width=e.width=r;n.height=e.height=a;n.style.width=r+"px";n.style.height=a+"px";Ct.retinaScale(e,i.devicePixelRatio);if(!t){var s={width:r,height:a};Zi.notify(e,"resize",[s]);if(i.onResize)i.onResize(e,s);e.stop();e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options;var i=t.scales||{};var e=t.scale;Ct.each(i.xAxes,function(t,e){if(!t.id)t.id=hn(i.xAxes,"x-axis-",e)});Ct.each(i.yAxes,function(t,e){if(!t.id)t.id=hn(i.yAxes,"y-axis-",e)});if(e)e.id=e.id||"scale"},buildOrUpdateScales:function(){var a=this;var t=a.options;var s=a.scales||{};var e=[];var l=Object.keys(s).reduce(function(t,e){t[e]=false;return t},{});if(t.scales)e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}));if(t.scale)e.push({options:t.scale,dtype:"radialLinear",isDefault:true,dposition:"chartArea"});Ct.each(e,function(t){var e=t.options;var i=e.id;var n=rn(e.type,t.dtype);if(cn(e.position)!==cn(t.dposition))e.position=t.dposition;l[i]=true;var o=null;if(i in s&&s[i].type===n){o=s[i];o.options=e;o.ctx=a.ctx;o.chart=a}else{var r=ji.getScaleConstructor(n);if(!r)return;o=new r({id:i,type:n,options:e,ctx:a.ctx,chart:a});s[o.id]=o}o.mergeTicksOptions();if(t.isDefault)a.scale=o});Ct.each(l,function(t,e){if(!t)delete s[e]});a.scales=s;ji.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this;var e=[];var i=t.data.datasets;var n,o;for(n=0,o=i.length;n<o;n++){var r=i[n];var a=t.getDatasetMeta(n);var s=r.type||t.config.type;if(a.type&&a.type!==s){t.destroyDatasetMeta(n);a=t.getDatasetMeta(n)}a.type=s;a.order=r.order||0;a.index=n;if(a.controller){a.controller.updateIndex(n);a.controller.linkScales()}else{var l=We[a.type];if(l===undefined)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(t,n);e.push(a.controller)}}return e},resetElements:function(){var i=this;Ct.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.reset()},i)},reset:function(){this.resetElements();this.tooltip.initialize()},update:function(t){var e=this;var i,n;if(!t||typeof t!=="object")t={duration:t,lazy:arguments[1]};un(e);Zi._invalidate(e);if(Zi.notify(e,"beforeUpdate")===false)return;e.tooltip._data=e.data;var o=e.buildOrUpdateControllers();for(i=0,n=e.data.datasets.length;i<n;i++)e.getDatasetMeta(i).controller.buildOrUpdateElements();e.updateLayout();if(e.options.animation&&e.options.animation.duration)Ct.each(o,function(t){t.reset()});e.updateDatasets();e.tooltip.initialize();e.lastActive=[];Zi.notify(e,"afterUpdate");e._layers.sort(dn("z","_idx"));if(e._bufferedRender)e._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy};else e.render(t)},updateLayout:function(){var e=this;if(Zi.notify(e,"beforeLayout")===false)return;hi.update(this,this.width,this.height);e._layers=[];Ct.each(e.boxes,function(t){if(t._configure)t._configure();e._layers.push.apply(e._layers,t._layers())},e);e._layers.forEach(function(t,e){t._idx=e});Zi.notify(e,"afterScaleUpdate");Zi.notify(e,"afterLayout")},updateDatasets:function(){var t=this;if(Zi.notify(t,"beforeDatasetsUpdate")===false)return;for(var e=0,i=t.data.datasets.length;e<i;++e)t.updateDataset(e);Zi.notify(t,"afterDatasetsUpdate")},updateDataset:function(t){var e=this;var i=e.getDatasetMeta(t);var n={meta:i,index:t};if(Zi.notify(e,"beforeDatasetUpdate",[n])===false)return;i.controller._update();Zi.notify(e,"afterDatasetUpdate",[n])},render:function(t){var e=this;if(!t||typeof t!=="object")t={duration:t,lazy:arguments[1]};var i=e.options.animation;var n=rn(t.duration,i&&i.duration);var o=t.lazy;if(Zi.notify(e,"beforeRender")===false)return;var r=function(t){Zi.notify(e,"afterRender");Ct.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new zt({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=Ct.easing.effects[e.easing];var n=e.currentStep;var o=n/e.numSteps;t.draw(i(o),o,n)},onAnimationProgress:i.onProgress,onAnimationComplete:r});Bt.addAnimation(e,a,n,o)}else{e.draw();r(new zt({numSteps:0,chart:e}))}return e},draw:function(t){var e=this;var i,n;e.clear();if(Ct.isNullOrUndef(t))t=1;e.transition(t);if(e.width<=0||e.height<=0)return;if(Zi.notify(e,"beforeDraw",[t])===false)return;n=e._layers;for(i=0;i<n.length&&n[i].z<=0;++i)n[i].draw(e.chartArea);e.drawDatasets(t);for(;i<n.length;++i)n[i].draw(e.chartArea);e._drawTooltip(t);Zi.notify(e,"afterDraw",[t])},transition:function(t){var e=this;for(var i=0,n=(e.data.datasets||[]).length;i<n;++i)if(e.isDatasetVisible(i))e.getDatasetMeta(i).controller.transition(t);e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e=this;var i=e.data.datasets||[];var n=[];var o,r;for(o=0,r=i.length;o<r;++o)if(!t||e.isDatasetVisible(o))n.push(e.getDatasetMeta(o));n.sort(dn("order","index"));return n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(true)},drawDatasets:function(t){var e=this;var i,n;if(Zi.notify(e,"beforeDatasetsDraw",[t])===false)return;i=e._getSortedVisibleDatasetMetas();for(n=i.length-1;n>=0;--n)e.drawDataset(i[n],t);Zi.notify(e,"afterDatasetsDraw",[t])},drawDataset:function(t,e){var i=this;var n={meta:t,index:t.index,easingValue:e};if(Zi.notify(i,"beforeDatasetDraw",[n])===false)return;t.controller.draw(e);Zi.notify(i,"afterDatasetDraw",[n])},_drawTooltip:function(t){var e=this;var i=e.tooltip;var n={tooltip:i,easingValue:t};if(Zi.notify(e,"beforeTooltipDraw",[n])===false)return;i.draw();Zi.notify(e,"afterTooltipDraw",[n])},getElementAtEvent:function(t){return Ye.modes.single(this,t)},getElementsAtEvent:function(t){return Ye.modes.label(this,t,{intersect:true})},getElementsAtXAxis:function(t){return Ye.modes["x-axis"](this,t,{intersect:true})},getElementsAtEventForMode:function(t,e,i){var n=Ye.modes[e];if(typeof n==="function")return n(this,t,i);return[]},getDatasetAtEvent:function(t){return Ye.modes.dataset(this,t,{intersect:true})},getDatasetMeta:function(t){var e=this;var i=e.data.datasets[t];if(!i._meta)i._meta={};var n=i._meta[e.id];if(!n)n=i._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i.order||0,index:t};return n},getVisibleDatasetCount:function(){var t=0;for(var e=0,i=this.data.datasets.length;e<i;++e)if(this.isDatasetVisible(e))t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id;var i=this.data.datasets[t];var n=i._meta&&i._meta[e];if(n){n.controller.destroy();delete i._meta[e]}},destroy:function(){var t=this;var e=t.canvas;var i,n;t.stop();for(i=0,n=t.data.datasets.length;i<n;++i)t.destroyDatasetMeta(i);if(e){t.unbindEvents();Ct.canvas.clear(t);Ui.releaseContext(t.ctx);t.canvas=null;t.ctx=null}Zi.notify(t,"destroy");delete pn.instances[t.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new on({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;var i=e._listeners={};var n=function(){e.eventHandler.apply(e,arguments)};Ct.each(e.options.events,function(t){Ui.addEventListener(e,t,n);i[t]=n});if(e.options.responsive){n=function(){e.resize()};Ui.addEventListener(e,"resize",n);i.resize=n}},unbindEvents:function(){var i=this;var t=i._listeners;if(!t)return;delete i._listeners;Ct.each(t,function(t,e){Ui.removeEventListener(i,e,t)})},updateHoverStyle:function(t,e,i){var n=i?"set":"remove";var o,r,a;for(r=0,a=t.length;r<a;++r){o=t[r];if(o)this.getDatasetMeta(o._datasetIndex).controller[n+"HoverStyle"](o)}if(e==="dataset")this.getDatasetMeta(t[0]._datasetIndex).controller["_"+n+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this;var i=e.tooltip;if(Zi.notify(e,"beforeEvent",[t])===false)return;e._bufferedRender=true;e._bufferedRequest=null;var n=e.handleEvent(t);if(i)n=i._start?i.handleEvent(t):n|i.handleEvent(t);Zi.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;if(o)e.render(o);else if(n&&!e.animating){e.stop();e.render({duration:e.options.hover.animationDuration,lazy:true})}e._bufferedRender=false;e._bufferedRequest=null;return e},handleEvent:function(t){var e=this;var i=e.options||{};var n=i.hover;var o=false;e.lastActive=e.lastActive||[];if(t.type==="mouseout")e.active=[];else e.active=e.getElementsAtEventForMode(t,n.mode,n);Ct.callback(i.onHover||i.hover.onHover,[t.native,e.active],e);if(t.type==="mouseup"||t.type==="click")if(i.onClick)i.onClick.call(e,t.native,e.active);if(e.lastActive.length)e.updateHoverStyle(e.lastActive,n.mode,false);if(e.active.length&&n.mode)e.updateHoverStyle(e.active,n.mode,true);o=!Ct.arrayEquals(e.active,e.lastActive);e.lastActive=e.active;return o}}),pn.instances={};var fn=pn;(pn.Controller=pn).types={},Ct.configMerge=sn,Ct.scaleMerge=an;var mn=function(){Ct.where=function(t,e){if(Ct.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];Ct.each(t,function(t){if(e(t))i.push(t)});return i};Ct.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=i===undefined?t:i;for(var n=0,o=t.length;n<o;++n)if(e.call(i,t[n],n,t))return n;return-1};Ct.findNextWhere=function(t,e,i){if(Ct.isNullOrUndef(i))i=-1;for(var n=i+1;n<t.length;n++){var o=t[n];if(e(o))return o}};Ct.findPreviousWhere=function(t,e,i){if(Ct.isNullOrUndef(i))i=t.length;for(var n=i-1;n>=0;n--){var o=t[n];if(e(o))return o}};Ct.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};Ct.almostEquals=function(t,e,i){return Math.abs(t-e)<i};Ct.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t};Ct.max=function(t){return t.reduce(function(t,e){if(!isNaN(e))return Math.max(t,e);return t},Number.NEGATIVE_INFINITY)};Ct.min=function(t){return t.reduce(function(t,e){if(!isNaN(e))return Math.min(t,e);return t},Number.POSITIVE_INFINITY)};Ct.sign=Math.sign?function(t){return Math.sign(t)}:function(t){t=+t;if(t===0||isNaN(t))return t;return t>0?1:-1};Ct.toRadians=function(t){return t*(Math.PI/180)};Ct.toDegrees=function(t){return t*(180/Math.PI)};Ct._decimalPlaces=function(t){if(!Ct.isFinite(t))return;var e=1;var i=0;while(Math.round(t*e)/e!==t){e*=10;i++}return i};Ct.getAngleFromPoint=function(t,e){var i=e.x-t.x;var n=e.y-t.y;var o=Math.sqrt(i*i+n*n);var r=Math.atan2(n,i);if(r<-.5*Math.PI)r+=2*Math.PI;return{angle:r,distance:o}};Ct.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};Ct.aliasPixel=function(t){return t%2===0?0:.5};Ct._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio;var o=i/2;return Math.round((e-o)*n)/n+o};Ct.splineCurve=function(t,e,i,n){var o=t.skip?e:t;var r=e;var a=i.skip?e:i;var s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2));var l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));var u=s/(s+l);var h=l/(s+l);u=isNaN(u)?0:u;h=isNaN(h)?0:h;var c=n*u;var d=n*h;return{previous:{x:r.x-c*(a.x-o.x),y:r.y-c*(a.y-o.y)},next:{x:r.x+d*(a.x-o.x),y:r.y+d*(a.y-o.y)}}};Ct.EPSILON=Number.EPSILON||1e-14;Ct.splineCurveMonotone=function(t){var e=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}});var i=e.length;var n,o,r,a;for(n=0;n<i;++n){r=e[n];if(r.model.skip)continue;o=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(a&&!a.model.skip){var s=a.model.x-r.model.x;r.deltaK=s!==0?(a.model.y-r.model.y)/s:0}if(!o||o.model.skip)r.mK=r.deltaK;else if(!a||a.model.skip)r.mK=o.deltaK;else if(this.sign(o.deltaK)!==this.sign(r.deltaK))r.mK=0;else r.mK=(o.deltaK+r.deltaK)/2}var l,u,h,c;for(n=0;n<i-1;++n){r=e[n];a=e[n+1];if(r.model.skip||a.model.skip)continue;if(Ct.almostEquals(r.deltaK,0,this.EPSILON)){r.mK=a.mK=0;continue}l=r.mK/r.deltaK;u=a.mK/r.deltaK;c=Math.pow(l,2)+Math.pow(u,2);if(c<=9)continue;h=3/Math.sqrt(c);r.mK=l*h*r.deltaK;a.mK=u*h*r.deltaK}var d;for(n=0;n<i;++n){r=e[n];if(r.model.skip)continue;o=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(o&&!o.model.skip){d=(r.model.x-o.model.x)/3;r.model.controlPointPreviousX=r.model.x-d;r.model.controlPointPreviousY=r.model.y-d*r.mK}if(a&&!a.model.skip){d=(a.model.x-r.model.x)/3;r.model.controlPointNextX=r.model.x+d;r.model.controlPointNextY=r.model.y+d*r.mK}}};Ct.nextItem=function(t,e,i){if(i)return e>=t.length-1?t[0]:t[e+1];return e>=t.length-1?t[t.length-1]:t[e+1]};Ct.previousItem=function(t,e,i){if(i)return e<=0?t[t.length-1]:t[e-1];return e<=0?t[0]:t[e-1]};Ct.niceNum=function(t,e){var i=Math.floor(Ct.log10(t));var n=t/Math.pow(10,i);var o;if(e)if(n<1.5)o=1;else if(n<3)o=2;else if(n<7)o=5;else o=10;else if(n<=1)o=1;else if(n<=2)o=2;else if(n<=5)o=5;else o=10;return o*Math.pow(10,i)};Ct.requestAnimFrame=function(){if(typeof window==="undefined")return function(t){t()};return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}();Ct.getRelativePosition=function(t,e){var i,n;var o=t.originalEvent||t;var r=t.target||t.srcElement;var a=r.getBoundingClientRect();var s=o.touches;if(s&&s.length>0){i=s[0].clientX;n=s[0].clientY}else{i=o.clientX;n=o.clientY}var l=parseFloat(Ct.getStyle(r,"padding-left"));var u=parseFloat(Ct.getStyle(r,"padding-top"));var h=parseFloat(Ct.getStyle(r,"padding-right"));var c=parseFloat(Ct.getStyle(r,"padding-bottom"));var d=a.right-a.left-l-h;var p=a.bottom-a.top-u-c;i=Math.round((i-a.left-l)/d*r.width/e.currentDevicePixelRatio);n=Math.round((n-a.top-u)/p*r.height/e.currentDevicePixelRatio);return{x:i,y:n}};function h(t,e,i){var n;if(typeof t==="string"){n=parseInt(t,10);if(t.indexOf("%")!==-1)n=n/100*e.parentNode[i]}else n=t;return n}function c(t){return t!==undefined&&t!==null&&t!=="none"}function e(t,e,i){var n=document.defaultView;var o=Ct._getParentNode(t);var r=n.getComputedStyle(t)[e];var a=n.getComputedStyle(o)[e];var s=c(r);var l=c(a);var u=Number.POSITIVE_INFINITY;if(s||l)return Math.min(s?h(r,t,i):u,l?h(a,o,i):u);return"none"}Ct.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")};Ct.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")};Ct._calculatePadding=function(t,e,i){e=Ct.getStyle(t,e);return e.indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)};Ct._getParentNode=function(t){var e=t.parentNode;if(e&&e.toString()==="[object ShadowRoot]")e=e.host;return e};Ct.getMaximumWidth=function(t){var e=Ct._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth;var n=Ct._calculatePadding(e,"padding-left",i);var o=Ct._calculatePadding(e,"padding-right",i);var r=i-n-o;var a=Ct.getConstraintWidth(t);return isNaN(a)?r:Math.min(r,a)};Ct.getMaximumHeight=function(t){var e=Ct._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight;var n=Ct._calculatePadding(e,"padding-top",i);var o=Ct._calculatePadding(e,"padding-bottom",i);var r=i-n-o;var a=Ct.getConstraintHeight(t);return isNaN(a)?r:Math.min(r,a)};Ct.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};Ct.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||typeof window!=="undefined"&&window.devicePixelRatio||1;if(i===1)return;var n=t.canvas;var o=t.height;var r=t.width;n.height=o*i;n.width=r*i;t.ctx.scale(i,i);if(!n.style.height&&!n.style.width){n.style.height=o+"px";n.style.width=r+"px"}};Ct.fontString=function(t,e,i){return e+" "+t+"px "+i};Ct.longestText=function(t,e,i,n){n=n||{};var o=n.data=n.data||{};var r=n.garbageCollect=n.garbageCollect||[];if(n.font!==e){o=n.data={};r=n.garbageCollect=[];n.font=e}t.font=e;var a=0;var s=i.length;var l,u,h,c,d;for(l=0;l<s;l++){c=i[l];if(c!==undefined&&c!==null&&Ct.isArray(c)!==true)a=Ct.measureText(t,o,r,a,c);else if(Ct.isArray(c))for(u=0,h=c.length;u<h;u++){d=c[u];if(d!==undefined&&d!==null&&!Ct.isArray(d))a=Ct.measureText(t,o,r,a,d)}}var p=r.length/2;if(p>i.length){for(l=0;l<p;l++)delete o[r[l]];r.splice(0,p)}return a};Ct.measureText=function(t,e,i,n,o){var r=e[o];if(!r){r=e[o]=t.measureText(o).width;i.push(o)}if(r>n)n=r;return n};Ct.numberOfLabelLines=function(t){var e=1;Ct.each(t,function(t){if(Ct.isArray(t))if(t.length>e)e=t.length});return e};Ct.color=!X?function(t){console.error("Color.js not found!");return t}:function(t){if(t instanceof CanvasGradient)t=pt.global.defaultColor;return X(t)};Ct.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:Ct.color(t).saturate(.5).darken(.1).rgbString()}};function gn(){throw new Error("This method is not implemented: either no adapter can "+"be found or an incomplete integration was provided.")}function vn(t){this.options=t||{}}Ct.extend(vn.prototype,{formats:gn,parse:gn,format:gn,add:gn,diff:gn,startOf:gn,endOf:gn,_create:function(t){return t}}),vn.override=function(t){Ct.extend(vn.prototype,t)};var _n,yn={_date:vn},xn={formatters:{values:function(t){return Ct.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];if(Math.abs(n)>1)if(t!==Math.floor(t))n=t-Math.floor(t);var o=Ct.log10(Math.abs(n));var r="";if(t!==0){var a=Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]));if(a<1e-4){var s=Ct.log10(Math.abs(t));var l=Math.floor(s)-Math.floor(o);l=Math.max(Math.min(l,20),0);r=t.toExponential(l)}else{var u=-1*Math.floor(o);u=Math.max(Math.min(u,20),0);r=t.toFixed(u)}}else r="0";return r},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(Ct.log10(t)));if(t===0)return"0";else if(n===1||n===2||n===5||e===0||e===i.length-1)return t.toExponential();return""}}},bn=Ct.isArray,wn=Ct.isNullOrUndef,kn=Ct.valueOrDefault,Ln=Ct.valueAtIndexOrDefault;function Cn(t,e){var i=[];var n=t.length/e;var o=0;var r=t.length;for(;o<r;o+=n)i.push(t[Math.floor(o)]);return i}function Mn(t,e,i){var n=t.getTicks().length;var o=Math.min(e,n-1);var r=t.getPixelForTick(o);var a=t._startPixel;var s=t._endPixel;var l=1e-6;var u;if(i){if(n===1)u=Math.max(r-a,s-r);else if(e===0)u=(t.getPixelForTick(1)-r)/2;else u=(r-t.getPixelForTick(o-1))/2;r+=o<e?u:-u;if(r<a-l||r>s+l)return}return r}function Tn(t,o){Ct.each(t,function(t){var e=t.gc;var i=e.length/2;var n;if(i>o){for(n=0;n<i;++n)delete t.data[e[n]];e.splice(0,i)}})}function Pn(t,e,i,n){var o=i.length;var r=[];var a=[];var s=[];var l=0;var u=0;var h,c,d,p,f,m,g,v,_,y,x,b,w;for(h=0;h<o;++h){p=i[h].label;f=i[h].major?e.major:e.minor;t.font=m=f.string;g=n[m]=n[m]||{data:{},gc:[]};v=f.lineHeight;_=y=0;if(!wn(p)&&!bn(p)){_=Ct.measureText(t,g.data,g.gc,_,p);y=v}else if(bn(p))for(c=0,d=p.length;c<d;++c){x=p[c];if(!wn(x)&&!bn(x)){_=Ct.measureText(t,g.data,g.gc,_,x);y+=v}}r.push(_);a.push(y);s.push(v/2);l=Math.max(_,l);u=Math.max(y,u)}Tn(n,o);b=r.indexOf(l);w=a.indexOf(u);function k(t){return{width:r[t]||0,height:a[t]||0,offset:s[t]||0}}return{first:k(0),last:k(o-1),widest:k(b),highest:k(w)}}function Sn(t){return t.drawTicks?t.tickMarkLength:0}function An(t){var e,i;if(!t.display)return 0;e=Ct.options._parseFont(t);i=Ct.options.toPadding(t.padding);return e.lineHeight+i.height}function Dn(t,e){return Ct.extend(Ct.options._parseFont({fontFamily:kn(e.fontFamily,t.fontFamily),fontSize:kn(e.fontSize,t.fontSize),fontStyle:kn(e.fontStyle,t.fontStyle),lineHeight:kn(e.lineHeight,t.lineHeight)}),{color:Ct.options.resolve([e.fontColor,t.fontColor,pt.global.defaultFontColor])})}function En(t){var e=Dn(t,t.minor);var i=t.major.enabled?Dn(t,t.major):e;return{minor:e,major:i}}function In(t){var e=[];var i,n,o;for(n=0,o=t.length;n<o;++n){i=t[n];if(typeof i._index!=="undefined")e.push(i)}return e}function On(t){var e=t.length;var i,n;if(e<2)return false;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return false;return n}function zn(t,e,i,n){var o=On(t);var r=(e.length-1)/n;var a,s,l,u;if(!o)return Math.max(r,1);a=Ct.math._factorize(o);for(l=0,u=a.length-1;l<u;l++){s=a[l];if(s>r)return s}return Math.max(r,1)}function Bn(t){var e=[];var i,n;for(i=0,n=t.length;i<n;i++)if(t[i].major)e.push(i);return e}function Fn(t,e,i){var n=0;var o=e[0];var r,a;i=Math.ceil(i);for(r=0;r<t.length;r++){a=t[r];if(r===o){a._index=r;n++;o=e[n*i]}else delete a.label}}function Rn(t,e,i,n){var o=kn(i,0);var r=Math.min(kn(n,t.length),t.length);var a=0;var s,l,u,h;e=Math.ceil(e);if(n){s=n-i;e=s/Math.floor(s/e)}h=o;while(h<0){a++;h=Math.round(o+a*e)}for(l=Math.max(o,0);l<r;l++){u=t[l];if(l===h){u._index=l;a++;h=Math.round(o+a*e)}else delete u.label}}pt._set("scale",{display:true,position:"left",offset:false,gridLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:false,borderDash:[],borderDashOffset:0},scaleLabel:{display:false,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:xn.formatters.values,minor:{},major:{}}});var Nn=It.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){Ct.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n=this;var o=n.options.ticks;var r=o.sampleSize;var a,s,l,u,h;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=Ct.extend({left:0,right:0,top:0,bottom:0},i);n._ticks=null;n.ticks=null;n._labelSizes=null;n._maxLabelLines=0;n.longestLabelWidth=0;n.longestTextCache=n.longestTextCache||{};n._gridLineItems=null;n._labelItems=null;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeDataLimits();n.determineDataLimits();n.afterDataLimits();n.beforeBuildTicks();u=n.buildTicks()||[];u=n.afterBuildTicks(u)||u;if((!u||!u.length)&&n.ticks){u=[];for(a=0,s=n.ticks.length;a<s;++a)u.push({value:n.ticks[a],major:false})}n._ticks=u;h=r<u.length;l=n._convertTicksToLabels(h?Cn(u,r):u);n._configure();n.beforeCalculateTickRotation();n.calculateTickRotation();n.afterCalculateTickRotation();n.beforeFit();n.fit();n.afterFit();n._ticksToDraw=o.display&&(o.autoSkip||o.source==="auto")?n._autoSkip(u):u;if(h)l=n._convertTicksToLabels(n._ticksToDraw);n.ticks=l;n.afterUpdate();return n.minSize},_configure:function(){var t=this;var e=t.options.ticks.reverse;var i,n;if(t.isHorizontal()){i=t.left;n=t.right}else{i=t.top;n=t.bottom;e=!e}t._startPixel=i;t._endPixel=n;t._reversePixels=e;t._length=n-i},afterUpdate:function(){Ct.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){Ct.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0},afterSetDimensions:function(){Ct.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){Ct.callback(this.options.beforeDataLimits,[this])},determineDataLimits:Ct.noop,afterDataLimits:function(){Ct.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){Ct.callback(this.options.beforeBuildTicks,[this])},buildTicks:Ct.noop,afterBuildTicks:function(t){var e=this;if(bn(t)&&t.length)return Ct.callback(e.options.afterBuildTicks,[e,t]);e.ticks=Ct.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks;return t},beforeTickToLabelConversion:function(){Ct.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this;var e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){Ct.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){Ct.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTicks().length;var o=i.minRotation||0;var r=i.maxRotation;var a=o;var s,l,u,h,c,d,p;if(!t._isVisible()||!i.display||o>=r||n<=1||!t.isHorizontal()){t.labelRotation=o;return}s=t._getLabelSizes();l=s.widest.width;u=s.highest.height-s.highest.offset;h=Math.min(t.maxWidth,t.chart.width-l);c=e.offset?t.maxWidth/n:h/(n-1);if(l+6>c){c=h/(n-(e.offset?.5:1));d=t.maxHeight-Sn(e.gridLines)-i.padding-An(e.scaleLabel);p=Math.sqrt(l*l+u*u);a=Ct.toDegrees(Math.min(Math.asin(Math.min((s.highest.height+6)/c,1)),Math.asin(Math.min(d/p,1))-Math.asin(u/p)));a=Math.max(o,Math.min(r,a))}t.labelRotation=a},afterCalculateTickRotation:function(){Ct.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){Ct.callback(this.options.beforeFit,[this])},fit:function(){var t=this;var e=t.minSize={width:0,height:0};var i=t.chart;var n=t.options;var o=n.ticks;var r=n.scaleLabel;var a=n.gridLines;var s=t._isVisible();var l=n.position==="bottom";var u=t.isHorizontal();if(u)e.width=t.maxWidth;else if(s)e.width=Sn(a)+An(r);if(!u)e.height=t.maxHeight;else if(s)e.height=Sn(a)+An(r);if(o.display&&s){var h=En(o);var c=t._getLabelSizes();var d=c.first;var p=c.last;var f=c.widest;var m=c.highest;var g=h.minor.lineHeight*.4;var v=o.padding;if(u){var _=t.labelRotation!==0;var y=Ct.toRadians(t.labelRotation);var x=Math.cos(y);var b=Math.sin(y);var w=b*f.width+x*(m.height-(_?m.offset:0))+(_?0:g);e.height=Math.min(t.maxHeight,e.height+w+v);var k=t.getPixelForTick(0)-t.left;var L=t.right-t.getPixelForTick(t.getTicks().length-1);var C,M;if(_){C=l?x*d.width+b*d.offset:b*(d.height-d.offset);M=l?b*(p.height-p.offset):x*p.width+b*p.offset}else{C=d.width/2;M=p.width/2}t.paddingLeft=Math.max((C-k)*t.width/(t.width-k),0)+3;t.paddingRight=Math.max((M-L)*t.width/(t.width-L),0)+3}else{var T=o.mirror?0:f.width+v+g;e.width=Math.min(t.maxWidth,e.width+T);t.paddingTop=d.height/2;t.paddingBottom=p.height/2}}t.handleMargins();if(u){t.width=t._length=i.width-t.margins.left-t.margins.right;t.height=e.height}else{t.width=e.width;t.height=t._length=i.height-t.margins.top-t.margins.bottom}},handleMargins:function(){var t=this;if(t.margins){t.margins.left=Math.max(t.paddingLeft,t.margins.left);t.margins.top=Math.max(t.paddingTop,t.margins.top);t.margins.right=Math.max(t.paddingRight,t.margins.right);t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom)}},afterFit:function(){Ct.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(wn(t))return NaN;if((typeof t==="number"||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(t.x!==undefined)return this.getRightValue(t.x)}else if(t.y!==undefined)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e=this;var i,n,o;e.ticks=t.map(function(t){return t.value});e.beforeTickToLabelConversion();i=e.convertTicksToLabels(t)||e.ticks;e.afterTickToLabelConversion();for(n=0,o=t.length;n<o;++n)t[n].label=i[n];return i},_getLabelSizes:function(){var t=this;var e=t._labelSizes;if(!e){t._labelSizes=e=Pn(t.ctx,En(t.options.ticks),t.getTicks(),t.longestTextCache);t.longestLabelWidth=e.widest.width}return e},_parseValue:function(t){var e,i,n,o;if(bn(t)){e=+this.getRightValue(t[0]);i=+this.getRightValue(t[1]);n=Math.min(e,i);o=Math.max(e,i)}else{t=+this.getRightValue(t);e=undefined;i=t;n=t;o=t}return{min:n,max:o,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);if(e.start!==undefined)return"["+e.start+", "+e.end+"]";return+this.getRightValue(t)},getLabelForIndex:Ct.noop,getPixelForValue:Ct.noop,getValueForPixel:Ct.noop,getPixelForTick:function(t){var e=this;var i=e.options.offset;var n=e._ticks.length;var o=1/Math.max(n-(i?0:1),1);return t<0||t>n-1?null:e.getPixelForDecimal(t*o+(i?o/2:0))},getPixelForDecimal:function(t){var e=this;if(e._reversePixels)t=1-t;return e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this;var e=t.min;var i=t.max;return t.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0},_autoSkip:function(t){var e=this;var i=e.options.ticks;var n=e._length;var o=i.maxTicksLimit||n/e._tickSize()+1;var r=i.major.enabled?Bn(t):[];var a=r.length;var s=r[0];var l=r[a-1];var u,h,c,d;if(a>o){Fn(t,r,a/o);return In(t)}c=zn(r,t,n,o);if(a>0){for(u=0,h=a-1;u<h;u++)Rn(t,c,r[u],r[u+1]);d=a>1?(l-s)/(a-1):null;Rn(t,c,Ct.isNullOrUndef(d)?0:s-d,s);Rn(t,c,l,Ct.isNullOrUndef(d)?t.length:l+d);return In(t)}Rn(t,c);return In(t)},_tickSize:function(){var t=this;var e=t.options.ticks;var i=Ct.toRadians(t.labelRotation);var n=Math.abs(Math.cos(i));var o=Math.abs(Math.sin(i));var r=t._getLabelSizes();var a=e.autoSkipPadding||0;var s=r?r.widest.width+a:0;var l=r?r.highest.height+a:0;return t.isHorizontal()?l*n>s*o?s/n:l/o:l*o<s*n?l/n:s/o},_isVisible:function(){var t=this;var e=t.chart;var i=t.options.display;var n,o,r;if(i!=="auto")return!!i;for(n=0,o=e.data.datasets.length;n<o;++n)if(e.isDatasetVisible(n)){r=e.getDatasetMeta(n);if(r.xAxisID===t.id||r.yAxisID===t.id)return true}return false},_computeGridLineItems:function(t){var e=this;var i=e.chart;var n=e.options;var o=n.gridLines;var r=n.position;var a=o.offsetGridLines;var s=e.isHorizontal();var l=e._ticksToDraw;var u=l.length+(a?1:0);var h=Sn(o);var c=[];var d=o.drawBorder?Ln(o.lineWidth,0,0):0;var p=d/2;var f=Ct._alignPixel;var m=function(t){return f(i,t,d)};var g,v,_,y,x;var b,w,k,L,C,M,T,P,S,A,D,E;if(r==="top"){g=m(e.bottom);w=e.bottom-h;L=g-p;M=m(t.top)+p;P=t.bottom}else if(r==="bottom"){g=m(e.top);M=t.top;P=m(t.bottom)-p;w=g+p;L=e.top+h}else if(r==="left"){g=m(e.right);b=e.right-h;k=g-p;C=m(t.left)+p;T=t.right}else{g=m(e.left);C=t.left;T=m(t.right)-p;b=g+p;k=e.left+h}for(v=0;v<u;++v){_=l[v]||{};if(wn(_.label)&&v<l.length)continue;if(v===e.zeroLineIndex&&n.offset===a){S=o.zeroLineWidth;A=o.zeroLineColor;D=o.zeroLineBorderDash||[];E=o.zeroLineBorderDashOffset||0}else{S=Ln(o.lineWidth,v,1);A=Ln(o.color,v,"rgba(0,0,0,0.1)");D=o.borderDash||[];E=o.borderDashOffset||0}y=Mn(e,_._index||v,a);if(y===undefined)continue;x=f(i,y,S);if(s)b=k=C=T=x;else w=L=M=P=x;c.push({tx1:b,ty1:w,tx2:k,ty2:L,x1:C,y1:M,x2:T,y2:P,width:S,color:A,borderDash:D,borderDashOffset:E})}c.ticksLength=u;c.borderValue=g;return c},_computeLabelItems:function(){var t=this;var e=t.options;var i=e.ticks;var n=e.position;var o=i.mirror;var r=t.isHorizontal();var a=t._ticksToDraw;var s=En(i);var l=i.padding;var u=Sn(e.gridLines);var h=-Ct.toRadians(t.labelRotation);var c=[];var d,p,f,m,g,v,_,y,x,b,w,k;if(n==="top"){v=t.bottom-u-l;_=!h?"center":"left"}else if(n==="bottom"){v=t.top+u+l;_=!h?"center":"right"}else if(n==="left"){g=t.right-(o?0:u)-l;_=o?"left":"right"}else{g=t.left+(o?0:u)+l;_=o?"right":"left"}for(d=0,p=a.length;d<p;++d){f=a[d];m=f.label;if(wn(m))continue;y=t.getPixelForTick(f._index||d)+i.labelOffset;x=f.major?s.major:s.minor;b=x.lineHeight;w=bn(m)?m.length:1;if(r){g=y;k=n==="top"?((!h?.5:1)-w)*b:(!h?.5:0)*b}else{v=y;k=(1-w)*b/2}c.push({x:g,y:v,rotation:h,label:m,font:x,textOffset:k,textAlign:_})}return c},_drawGrid:function(t){var e=this;var i=e.options.gridLines;if(!i.display)return;var n=e.ctx;var o=e.chart;var r=Ct._alignPixel;var a=i.drawBorder?Ln(i.lineWidth,0,0):0;var s=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));var l,u,h,c,d;for(h=0,c=s.length;h<c;++h){d=s[h];l=d.width;u=d.color;if(l&&u){n.save();n.lineWidth=l;n.strokeStyle=u;if(n.setLineDash){n.setLineDash(d.borderDash);n.lineDashOffset=d.borderDashOffset}n.beginPath();if(i.drawTicks){n.moveTo(d.tx1,d.ty1);n.lineTo(d.tx2,d.ty2)}if(i.drawOnChartArea){n.moveTo(d.x1,d.y1);n.lineTo(d.x2,d.y2)}n.stroke();n.restore()}}if(a){var p=a;var f=Ln(i.lineWidth,s.ticksLength-1,1);var m=s.borderValue;var g,v,_,y;if(e.isHorizontal()){g=r(o,e.left,p)-p/2;v=r(o,e.right,f)+f/2;_=y=m}else{_=r(o,e.top,p)-p/2;y=r(o,e.bottom,f)+f/2;g=v=m}n.lineWidth=a;n.strokeStyle=Ln(i.color,0);n.beginPath();n.moveTo(g,_);n.lineTo(v,y);n.stroke()}},_drawLabels:function(){var t=this;var e=t.options.ticks;if(!e.display)return;var i=t.ctx;var n=t._labelItems||(t._labelItems=t._computeLabelItems());var o,r,a,s,l,u,h,c;for(o=0,a=n.length;o<a;++o){l=n[o];u=l.font;i.save();i.translate(l.x,l.y);i.rotate(l.rotation);i.font=u.string;i.fillStyle=u.color;i.textBaseline="middle";i.textAlign=l.textAlign;h=l.label;c=l.textOffset;if(bn(h))for(r=0,s=h.length;r<s;++r){i.fillText(""+h[r],0,c);c+=u.lineHeight}else i.fillText(h,0,c);i.restore()}},_drawTitle:function(){var t=this;var e=t.ctx;var i=t.options;var n=i.scaleLabel;if(!n.display)return;var o=kn(n.fontColor,pt.global.defaultFontColor);var r=Ct.options._parseFont(n);var a=Ct.options.toPadding(n.padding);var s=r.lineHeight/2;var l=i.position;var u=0;var h,c;if(t.isHorizontal()){h=t.left+t.width/2;c=l==="bottom"?t.bottom-s-a.bottom:t.top+s+a.top}else{var d=l==="left";h=d?t.left+s+a.top:t.right-s-a.top;c=t.top+t.height/2;u=d?-.5*Math.PI:.5*Math.PI}e.save();e.translate(h,c);e.rotate(u);e.textAlign="center";e.textBaseline="middle";e.fillStyle=o;e.font=r.string;e.fillText(n.labelString,0,0);e.restore()},draw:function(t){var e=this;if(!e._isVisible())return;e._drawGrid(t);e._drawTitle();e._drawLabels()},_layers:function(){var t=this;var e=t.options;var i=e.ticks&&e.ticks.z||0;var n=e.gridLines&&e.gridLines.z||0;if(!t._isVisible()||i===n||t.draw!==t._draw)return[{z:i,draw:function(){t.draw.apply(t,arguments)}}];return[{z:n,draw:function(){t._drawGrid.apply(t,arguments);t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(e){var i=this;var n=i.isHorizontal();return i.chart._getSortedVisibleDatasetMetas().filter(function(t){return(!e||t.type===e)&&(n?t.xAxisID===i.id:t.yAxisID===i.id)})}});Nn.prototype._draw=Nn.prototype.draw;var Un=Nn,Zn=Ct.isNullOrUndef,jn={position:"bottom"},Hn=Un.extend({determineDataLimits:function(){var t=this;var e=t._getLabels();var i=t.options.ticks;var n=i.min;var o=i.max;var r=0;var a=e.length-1;var s;if(n!==undefined){s=e.indexOf(n);if(s>=0)r=s}if(o!==undefined){s=e.indexOf(o);if(s>=0)a=s}t.minIndex=r;t.maxIndex=a;t.min=e[r];t.max=e[a]},buildTicks:function(){var t=this;var e=t._getLabels();var i=t.minIndex;var n=t.maxIndex;t.ticks=i===0&&n===e.length-1?e:e.slice(i,n+1)},getLabelForIndex:function(t,e){var i=this;var n=i.chart;if(n.getDatasetMeta(e).controller._getValueScaleId()===i.id)return i.getRightValue(n.data.datasets[e].data[t]);return i._getLabels()[t]},_configure:function(){var t=this;var e=t.options.offset;var i=t.ticks;Un.prototype._configure.call(t);if(!t.isHorizontal())t._reversePixels=!t._reversePixels;if(!i)return;t._startValue=t.minIndex-(e?.5:0);t._valueRange=Math.max(i.length-(e?0:1),1)},getPixelForValue:function(t,e,i){var n=this;var o,r,a;if(!Zn(e)&&!Zn(i))t=n.chart.data.datasets[i].data[e];if(!Zn(t))o=n.isHorizontal()?t.x:t.y;if(o!==undefined||t!==undefined&&isNaN(e)){r=n._getLabels();t=Ct.valueOrDefault(o,t);a=r.indexOf(t);e=a!==-1?a:e;if(isNaN(e))e=t}return n.getPixelForDecimal((e-n._startValue)/n._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this;var i=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(i,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Wn;Hn._defaults=jn;var Vn=Ct.noop,Gn=Ct.isNullOrUndef;function qn(t,e){var i=[];var n=1e-14;var o=t.stepSize;var r=o||1;var a=t.maxTicks-1;var s=t.min;var l=t.max;var u=t.precision;var h=e.min;var c=e.max;var d=Ct.niceNum((c-h)/a/r)*r;var p,f,m,g;if(d<n&&Gn(s)&&Gn(l))return[h,c];g=Math.ceil(c/d)-Math.floor(h/d);if(g>a)d=Ct.niceNum(g*d/a/r)*r;if(o||Gn(u))p=Math.pow(10,Ct._decimalPlaces(d));else{p=Math.pow(10,u);d=Math.ceil(d*p)/p}f=Math.floor(h/d)*d;m=Math.ceil(c/d)*d;if(o){if(!Gn(s)&&Ct.almostWhole(s/d,d/1e3))f=s;if(!Gn(l)&&Ct.almostWhole(l/d,d/1e3))m=l}g=(m-f)/d;if(Ct.almostEquals(g,Math.round(g),d/1e3))g=Math.round(g);else g=Math.ceil(g);f=Math.round(f*p)/p;m=Math.round(m*p)/p;i.push(Gn(s)?f:s);for(var v=1;v<g;++v)i.push(Math.round((f+v*d)*p)/p);i.push(Gn(l)?m:l);return i}var Kn=Un.extend({getRightValue:function(t){if(typeof t==="string")return+t;return Un.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this;var e=t.options;var i=e.ticks;if(i.beginAtZero){var n=Ct.sign(t.min);var o=Ct.sign(t.max);if(n<0&&o<0)t.max=0;else if(n>0&&o>0)t.min=0}var r=i.min!==undefined||i.suggestedMin!==undefined;var a=i.max!==undefined||i.suggestedMax!==undefined;if(i.min!==undefined)t.min=i.min;else if(i.suggestedMin!==undefined)if(t.min===null)t.min=i.suggestedMin;else t.min=Math.min(t.min,i.suggestedMin);if(i.max!==undefined)t.max=i.max;else if(i.suggestedMax!==undefined)if(t.max===null)t.max=i.suggestedMax;else t.max=Math.max(t.max,i.suggestedMax);if(r!==a)if(t.min>=t.max)if(r)t.max=t.min+1;else t.min=t.max-1;if(t.min===t.max){t.max++;if(!i.beginAtZero)t.min--}},getTickLimit:function(){var t=this;var e=t.options.ticks;var i=e.stepSize;var n=e.maxTicksLimit;var o;if(i)o=Math.ceil(t.max/i)-Math.floor(t.min/i)+1;else{o=t._computeTickLimit();n=n||11}if(n)o=Math.min(n,o);return o},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Vn,buildTicks:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTickLimit();n=Math.max(2,n);var o={maxTicks:n,min:i.min,max:i.max,precision:i.precision,stepSize:Ct.valueOrDefault(i.fixedStepSize,i.stepSize)};var r=t.ticks=qn(o,t);t.handleDirectionalChanges();t.max=Ct.max(r);t.min=Ct.min(r);if(i.reverse){r.reverse();t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice();t.zeroLineIndex=t.ticks.indexOf(0);Un.prototype.convertTicksToLabels.call(t)},_configure:function(){var t=this;var e=t.getTicks();var i=t.min;var n=t.max;var o;Un.prototype._configure.call(t);if(t.options.offset&&e.length){o=(n-i)/Math.max(e.length-1,1)/2;i-=o;n+=o}t._startValue=i;t._endValue=n;t._valueRange=n-i}}),$n={position:"left",ticks:{callback:xn.formatters.linear}},Jn=0,Yn=1;function Xn(t,e,i){var n=[i.type,e===undefined&&i.stack===undefined?i.index:"",i.stack].join(".");if(t[n]===undefined)t[n]={pos:[],neg:[]};return t[n]}function Qn(t,e,i,n){var o=t.options;var r=o.stacked;var a=Xn(e,r,i);var s=a.pos;var l=a.neg;var u=n.length;var h,c;for(h=0;h<u;++h){c=t._parseValue(n[h]);if(isNaN(c.min)||isNaN(c.max)||i.data[h].hidden)continue;s[h]=s[h]||0;l[h]=l[h]||0;if(o.relativePoints)s[h]=100;else if(c.min<0||c.max<0)l[h]+=c.min;else s[h]+=c.max}}function to(t,e,i){var n=i.length;var o,r;for(o=0;o<n;++o){r=t._parseValue(i[o]);if(isNaN(r.min)||isNaN(r.max)||e.data[o].hidden)continue;t.min=Math.min(t.min,r.min);t.max=Math.max(t.max,r.max)}}var eo=Kn.extend({determineDataLimits:function(){var e=this;var t=e.options;var i=e.chart;var n=i.data.datasets;var o=e._getMatchingVisibleMetas();var r=t.stacked;var a={};var s=o.length;var l,u,h,c;e.min=Number.POSITIVE_INFINITY;e.max=Number.NEGATIVE_INFINITY;if(r===undefined)for(l=0;!r&&l<s;++l){u=o[l];r=u.stack!==undefined}for(l=0;l<s;++l){u=o[l];h=n[u.index].data;if(r)Qn(e,a,u,h);else to(e,u,h)}Ct.each(a,function(t){c=t.pos.concat(t.neg);e.min=Math.min(e.min,Ct.min(c));e.max=Math.max(e.max,Ct.max(c))});e.min=Ct.isFinite(e.min)&&!isNaN(e.min)?e.min:Jn;e.max=Ct.isFinite(e.max)&&!isNaN(e.max)?e.max:Yn;e.handleTickRangeOptions()},_computeTickLimit:function(){var t=this;var e;if(t.isHorizontal())return Math.ceil(t.width/40);e=Ct.options._parseFont(t.options.ticks);return Math.ceil(t.height/e.lineHeight)},handleDirectionalChanges:function(){if(!this.isHorizontal())this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;if(t<0||t>e.length-1)return null;return this.getPixelForValue(e[t])}}),io;eo._defaults=$n;var no=Ct.valueOrDefault,oo=Ct.math.log10;function ro(t,e){var i=[];var n=no(t.min,Math.pow(10,Math.floor(oo(e.min))));var o=Math.floor(oo(e.max));var r=Math.ceil(e.max/Math.pow(10,o));var a,s;if(n===0){a=Math.floor(oo(e.minNotZero));s=Math.floor(e.minNotZero/Math.pow(10,a));i.push(n);n=s*Math.pow(10,a)}else{a=Math.floor(oo(n));s=Math.floor(n/Math.pow(10,a))}var l=a<0?Math.pow(10,Math.abs(a)):1;do{i.push(n);++s;if(s===10){s=1;++a;l=a>=0?1:l}n=Math.round(s*Math.pow(10,a)*l)/l}while(a<o||a===o&&s<r);var u=no(t.max,n);i.push(u);return i}var ao={position:"left",ticks:{callback:xn.formatters.logarithmic}};function so(t,e){return Ct.isFinite(t)&&t>=0?t:e}var lo=Un.extend({determineDataLimits:function(){var n=this;var t=n.options;var e=n.chart;var i=e.data.datasets;var o=n.isHorizontal();function r(t){return o?t.xAxisID===n.id:t.yAxisID===n.id}var a,s,l,u,h,c;n.min=Number.POSITIVE_INFINITY;n.max=Number.NEGATIVE_INFINITY;n.minNotZero=Number.POSITIVE_INFINITY;var d=t.stacked;if(d===undefined)for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&r(s)&&s.stack!==undefined){d=true;break}}if(t.stacked||d){var p={};for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);var f=[s.type,t.stacked===undefined&&s.stack===undefined?a:"",s.stack].join(".");if(e.isDatasetVisible(a)&&r(s)){if(p[f]===undefined)p[f]=[];u=i[a].data;for(h=0,c=u.length;h<c;h++){var m=p[f];l=n._parseValue(u[h]);if(isNaN(l.min)||isNaN(l.max)||s.data[h].hidden||l.min<0||l.max<0)continue;m[h]=m[h]||0;m[h]+=l.max}}}Ct.each(p,function(t){if(t.length>0){var e=Ct.min(t);var i=Ct.max(t);n.min=Math.min(n.min,e);n.max=Math.max(n.max,i)}})}else for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&r(s)){u=i[a].data;for(h=0,c=u.length;h<c;h++){l=n._parseValue(u[h]);if(isNaN(l.min)||isNaN(l.max)||s.data[h].hidden||l.min<0||l.max<0)continue;n.min=Math.min(l.min,n.min);n.max=Math.max(l.max,n.max);if(l.min!==0)n.minNotZero=Math.min(l.min,n.minNotZero)}}}n.min=Ct.isFinite(n.min)?n.min:null;n.max=Ct.isFinite(n.max)?n.max:null;n.minNotZero=Ct.isFinite(n.minNotZero)?n.minNotZero:null;this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this;var e=t.options.ticks;var i=1;var n=10;t.min=so(e.min,t.min);t.max=so(e.max,t.max);if(t.min===t.max)if(t.min!==0&&t.min!==null){t.min=Math.pow(10,Math.floor(oo(t.min))-1);t.max=Math.pow(10,Math.floor(oo(t.max))+1)}else{t.min=i;t.max=n}if(t.min===null)t.min=Math.pow(10,Math.floor(oo(t.max))-1);if(t.max===null)t.max=t.min!==0?Math.pow(10,Math.floor(oo(t.min))+1):n;if(t.minNotZero===null)if(t.min>0)t.minNotZero=t.min;else if(t.max<1)t.minNotZero=Math.pow(10,Math.floor(oo(t.max)));else t.minNotZero=i},buildTicks:function(){var t=this;var e=t.options.ticks;var i=!t.isHorizontal();var n={min:so(e.min),max:so(e.max)};var o=t.ticks=ro(n,t);t.max=Ct.max(o);t.min=Ct.min(o);if(e.reverse){i=!i;t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}if(i)o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();Un.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;if(t<0||t>e.length-1)return null;return this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(oo(t));var i=Math.floor(t/Math.pow(10,e));return i*Math.pow(10,e)},_configure:function(){var t=this;var e=t.min;var i=0;Un.prototype._configure.call(t);if(e===0){e=t._getFirstTickValue(t.minNotZero);i=no(t.options.ticks.fontSize,pt.global.defaultFontSize)/t._length}t._startValue=oo(e);t._valueOffset=i;t._valueRange=(oo(t.max)-oo(e))/(1-i)},getPixelForValue:function(t){var e=this;var i=0;t=+e.getRightValue(t);if(t>e.min&&t>0)i=(oo(t)-e._startValue)/e._valueRange+e._valueOffset;return e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this;var i=e.getDecimalForPixel(t);return i===0&&e.min===0?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}}),uo;lo._defaults=ao;var ho=Ct.valueOrDefault,co=Ct.valueAtIndexOrDefault,po=Ct.options.resolve,fo={display:true,animate:true,position:"chartArea",angleLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:xn.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(t){return t}}};function mo(t){var e=t.ticks;if(e.display&&t.display)return ho(e.fontSize,pt.global.defaultFontSize)+e.backdropPaddingY*2;return 0}function go(t,e,i){if(Ct.isArray(i))return{w:Ct.longestText(t,t.font,i),h:i.length*e};return{w:t.measureText(i).width,h:e}}function vo(t,e,i,n,o){if(t===n||t===o)return{start:e-i/2,end:e+i/2};else if(t<n||t>o)return{start:e-i,end:e};return{start:e,end:e+i}}function _o(t){var e=Ct.options._parseFont(t.options.pointLabels);var i={l:0,r:t.width,t:0,b:t.height-t.paddingTop};var n={};var o,r,a;t.ctx.font=e.string;t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(o=0;o<s;o++){a=t.getPointPosition(o,t.drawingArea+5);r=go(t.ctx,e.lineHeight,t.pointLabels[o]);t._pointLabelSizes[o]=r;var l=t.getIndexAngle(o);var u=Ct.toDegrees(l)%360;var h=vo(u,a.x,r.w,0,180);var c=vo(u,a.y,r.h,90,270);if(h.start<i.l){i.l=h.start;n.l=l}if(h.end>i.r){i.r=h.end;n.r=l}if(c.start<i.t){i.t=c.start;n.t=l}if(c.end>i.b){i.b=c.end;n.b=l}}t.setReductions(t.drawingArea,i,n)}function yo(t){if(t===0||t===180)return"center";else if(t<180)return"left";return"right"}function xo(t,e,i,n){var o=i.y+n/2;var r,a;if(Ct.isArray(e))for(r=0,a=e.length;r<a;++r){t.fillText(e[r],i.x,o);o+=n}else t.fillText(e,i.x,o)}function bo(t,e,i){if(t===90||t===270)i.y-=e.h/2;else if(t>270||t<90)i.y-=e.h}function wo(t){var e=t.ctx;var i=t.options;var n=i.pointLabels;var o=mo(i);var r=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max);var a=Ct.options._parseFont(n);e.save();e.font=a.string;e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=s===0?o/2:0;var u=t.getPointPosition(s,r+l+5);var h=co(n.fontColor,s,pt.global.defaultFontColor);e.fillStyle=h;var c=t.getIndexAngle(s);var d=Ct.toDegrees(c);e.textAlign=yo(d);bo(d,t._pointLabelSizes[s],u);xo(e,t.pointLabels[s],u,a.lineHeight)}e.restore()}function ko(t,e,i,n){var o=t.ctx;var r=e.circular;var a=t.chart.data.labels.length;var s=co(e.color,n-1);var l=co(e.lineWidth,n-1);var u;if(!r&&!a||!s||!l)return;o.save();o.strokeStyle=s;o.lineWidth=l;if(o.setLineDash){o.setLineDash(e.borderDash||[]);o.lineDashOffset=e.borderDashOffset||0}o.beginPath();if(r)o.arc(t.xCenter,t.yCenter,i,0,Math.PI*2);else{u=t.getPointPosition(0,i);o.moveTo(u.x,u.y);for(var h=1;h<a;h++){u=t.getPointPosition(h,i);o.lineTo(u.x,u.y)}}o.closePath();o.stroke();o.restore()}function Lo(t){return Ct.isNumber(t)?t:0}var Co=Kn.extend({setDimensions:function(){var t=this;t.width=t.maxWidth;t.height=t.maxHeight;t.paddingTop=mo(t.options)/2;t.xCenter=Math.floor(t.width/2);t.yCenter=Math.floor((t.height-t.paddingTop)/2);t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var o=this;var i=o.chart;var r=Number.POSITIVE_INFINITY;var a=Number.NEGATIVE_INFINITY;Ct.each(i.data.datasets,function(t,e){if(i.isDatasetVisible(e)){var n=i.getDatasetMeta(e);Ct.each(t.data,function(t,e){var i=+o.getRightValue(t);if(isNaN(i)||n.data[e].hidden)return;r=Math.min(i,r);a=Math.max(i,a)})}});o.min=r===Number.POSITIVE_INFINITY?0:r;o.max=a===Number.NEGATIVE_INFINITY?0:a;o.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/mo(this.options))},convertTicksToLabels:function(){var e=this;Kn.prototype.convertTicksToLabels.call(e);e.pointLabels=e.chart.data.labels.map(function(){var t=Ct.callback(e.options.pointLabels.callback,arguments,e);return t||t===0?t:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this;var e=t.options;if(e.display&&e.pointLabels.display)_o(t);else t.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this;var o=e.l/Math.sin(i.l);var r=Math.max(e.r-n.width,0)/Math.sin(i.r);var a=-e.t/Math.cos(i.t);var s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=Lo(o);r=Lo(r);a=Lo(a);s=Lo(s);n.drawingArea=Math.min(Math.floor(t-(o+r)/2),Math.floor(t-(a+s)/2));n.setCenterPoint(o,r,a,s)},setCenterPoint:function(t,e,i,n){var o=this;var r=o.width-e-o.drawingArea;var a=t+o.drawingArea;var s=i+o.drawingArea;var l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+r)/2+o.left);o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(t){var e=this.chart;var i=360/e.data.labels.length;var n=e.options||{};var o=n.startAngle||0;var r=(t*i+o)%360;return(r<0?r+360:r)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(Ct.isNullOrUndef(t))return NaN;var i=e.drawingArea/(e.max-e.min);if(e.options.ticks.reverse)return(e.max-t)*i;return(t-e.min)*i},getPointPosition:function(t,e){var i=this;var n=i.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this;var i=e.min;var n=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:i<0&&n<0?n:i>0&&n>0?i:0)},_drawGrid:function(){var i=this;var t=i.ctx;var e=i.options;var n=e.gridLines;var o=e.angleLines;var r=ho(o.lineWidth,n.lineWidth);var a=ho(o.color,n.color);var s,l,u;if(e.pointLabels.display)wo(i);if(n.display)Ct.each(i.ticks,function(t,e){if(e!==0){l=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);ko(i,n,l,e)}});if(o.display&&r&&a){t.save();t.lineWidth=r;t.strokeStyle=a;if(t.setLineDash){t.setLineDash(po([o.borderDash,n.borderDash,[]]));t.lineDashOffset=po([o.borderDashOffset,n.borderDashOffset,0])}for(s=i.chart.data.labels.length-1;s>=0;s--){l=i.getDistanceFromCenterForValue(e.ticks.reverse?i.min:i.max);u=i.getPointPosition(s,l);t.beginPath();t.moveTo(i.xCenter,i.yCenter);t.lineTo(u.x,u.y);t.stroke()}t.restore()}},_drawLabels:function(){var i=this;var n=i.ctx;var t=i.options;var o=t.ticks;if(!o.display)return;var e=i.getIndexAngle(0);var r=Ct.options._parseFont(o);var a=ho(o.fontColor,pt.global.defaultFontColor);var s,l;n.save();n.font=r.string;n.translate(i.xCenter,i.yCenter);n.rotate(e);n.textAlign="center";n.textBaseline="middle";Ct.each(i.ticks,function(t,e){if(e===0&&!o.reverse)return;s=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);if(o.showLabelBackdrop){l=n.measureText(t).width;n.fillStyle=o.backdropColor;n.fillRect(-l/2-o.backdropPaddingX,-s-r.size/2-o.backdropPaddingY,l+o.backdropPaddingX*2,r.size+o.backdropPaddingY*2)}n.fillStyle=a;n.fillText(t,0,-s)});n.restore()},_drawTitle:Ct.noop}),Mo;Co._defaults=fo;var To=Ct._deprecated,Po=Ct.options.resolve,So=Ct.valueOrDefault,Ao=Number.MIN_SAFE_INTEGER||-9007199254740991,Do=Number.MAX_SAFE_INTEGER||9007199254740991,Eo={millisecond:{common:true,size:1,steps:1e3},second:{common:true,size:1e3,steps:60},minute:{common:true,size:6e4,steps:60},hour:{common:true,size:36e5,steps:24},day:{common:true,size:864e5,steps:30},week:{common:false,size:6048e5,steps:4},month:{common:true,size:2628e6,steps:12},quarter:{common:false,size:7884e6,steps:4},year:{common:true,size:3154e7}},Io=Object.keys(Eo);function Oo(t,e){return t-e}function zo(t){var e={};var i=[];var n,o,r;for(n=0,o=t.length;n<o;++n){r=t[n];if(!e[r]){e[r]=true;i.push(r)}}return i}function Bo(t){return Ct.valueOrDefault(t.time.min,t.ticks.min)}function Fo(t){return Ct.valueOrDefault(t.time.max,t.ticks.max)}function Ro(t,e,i,n){if(n==="linear"||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var o=[];var r=[e];var a,s,l,u,h;for(a=0,s=t.length;a<s;++a){u=t[a];if(u>e&&u<i)r.push(u)}r.push(i);for(a=0,s=r.length;a<s;++a){h=r[a+1];l=r[a-1];u=r[a];if(l===undefined||h===undefined||Math.round((h+l)/2)!==u)o.push({time:u,pos:a/(s-1)})}return o}function No(t,e,i){var n=0;var o=t.length-1;var r,a,s;while(n>=0&&n<=o){r=n+o>>1;a=t[r-1]||null;s=t[r];if(!a)return{lo:null,hi:s};else if(s[e]<i)n=r+1;else if(a[e]>i)o=r-1;else return{lo:a,hi:s}}return{lo:s,hi:null}}function Uo(t,e,i,n){var o=No(t,e,i);var r=!o.lo?t[0]:!o.hi?t[t.length-2]:o.lo;var a=!o.lo?t[1]:!o.hi?t[t.length-1]:o.hi;var s=a[e]-r[e];var l=s?(i-r[e])/s:0;var u=(a[n]-r[n])*l;return r[n]+u}function Zo(t,e){var i=t._adapter;var n=t.options.time;var o=n.parser;var r=o||n.format;var a=e;if(typeof o==="function")a=o(a);if(!Ct.isFinite(a))a=typeof r==="string"?i.parse(a,r):i.parse(a);if(a!==null)return+a;if(!o&&typeof r==="function"){a=r(e);if(!Ct.isFinite(a))a=i.parse(a)}return a}function jo(t,e){if(Ct.isNullOrUndef(e))return null;var i=t.options.time;var n=Zo(t,t.getRightValue(e));if(n===null)return n;if(i.round)n=+t._adapter.startOf(n,i.round);return n}function Ho(t,e,i,n){var o=Io.length;var r,a,s;for(r=Io.indexOf(t);r<o-1;++r){a=Eo[Io[r]];s=a.steps?a.steps:Do;if(a.common&&Math.ceil((i-e)/(s*a.size))<=n)return Io[r]}return Io[o-1]}function Wo(t,e,i,n,o){var r,a;for(r=Io.length-1;r>=Io.indexOf(i);r--){a=Io[r];if(Eo[a].common&&t._adapter.diff(o,n,a)>=e-1)return a}return Io[i?Io.indexOf(i):0]}function Vo(t){for(var e=Io.indexOf(t)+1,i=Io.length;e<i;++e)if(Eo[Io[e]].common)return Io[e]}function Go(t,e,i,n){var o=t._adapter;var r=t.options;var a=r.time;var s=a.unit||Ho(a.minUnit,e,i,n);var l=Po([a.stepSize,a.unitStepSize,1]);var u=s==="week"?a.isoWeekday:false;var h=e;var c=[];var d;if(u)h=+o.startOf(h,"isoWeek",u);h=+o.startOf(h,u?"day":s);if(o.diff(i,e,s)>1e5*l)throw e+" and "+i+" are too far apart with stepSize of "+l+" "+s;for(d=h;d<i;d=+o.add(d,l,s))c.push(d);if(d===i||r.bounds==="ticks")c.push(d);return c}function qo(t,e,i,n,o){var r=0;var a=0;var s,l;if(o.offset&&e.length){s=Uo(t,"time",e[0],"pos");if(e.length===1)r=1-s;else r=(Uo(t,"time",e[1],"pos")-s)/2;l=Uo(t,"time",e[e.length-1],"pos");if(e.length===1)a=l;else a=(l-Uo(t,"time",e[e.length-2],"pos"))/2}return{start:r,end:a,factor:1/(r+1+a)}}function Ko(t,e,i,n){var o=t._adapter;var r=+o.startOf(e[0].value,n);var a=e[e.length-1].value;var s,l;for(s=r;s<=a;s=+o.add(s,1,n)){l=i[s];if(l>=0)e[l].major=true}return e}function $o(t,e,i){var n=[];var o={};var r=e.length;var a,s;for(a=0;a<r;++a){s=e[a];o[s]=a;n.push({value:s,major:false})}return r===0||!i?n:Ko(t,n,o,i)}var Jo={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:false,source:"auto",major:{enabled:false}}},Yo=Un.extend({initialize:function(){this.mergeTicksOptions();Un.prototype.initialize.call(this)},update:function(){var t=this;var e=t.options;var i=e.time||(e.time={});var n=t._adapter=new yn._date(e.adapters.date);To("time scale",i.format,"time.format","time.parser");To("time scale",i.min,"time.min","ticks.min");To("time scale",i.max,"time.max","ticks.max");Ct.mergeIf(i.displayFormats,n.formats());return Un.prototype.update.apply(t,arguments)},getRightValue:function(t){if(t&&t.t!==undefined)t=t.t;return Un.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t=this;var e=t.chart;var i=t._adapter;var n=t.options;var o=n.time.unit||"day";var r=Do;var a=Ao;var s=[];var l=[];var u=[];var h,c,d,p,f,m,g;var v=t._getLabels();for(h=0,d=v.length;h<d;++h)u.push(jo(t,v[h]));for(h=0,d=(e.data.datasets||[]).length;h<d;++h)if(e.isDatasetVisible(h)){f=e.data.datasets[h].data;if(Ct.isObject(f[0])){l[h]=[];for(c=0,p=f.length;c<p;++c){m=jo(t,f[c]);s.push(m);l[h][c]=m}}else{l[h]=u.slice(0);if(!g){s=s.concat(u);g=true}}}else l[h]=[];if(u.length){r=Math.min(r,u[0]);a=Math.max(a,u[u.length-1])}if(s.length){s=d>1?zo(s).sort(Oo):s.sort(Oo);r=Math.min(r,s[0]);a=Math.max(a,s[s.length-1])}r=jo(t,Bo(n))||r;a=jo(t,Fo(n))||a;r=r===Do?+i.startOf(Date.now(),o):r;a=a===Ao?+i.endOf(Date.now(),o)+1:a;t.min=Math.min(r,a);t.max=Math.max(r+1,a);t._table=[];t._timestamps={data:s,datasets:l,labels:u}},buildTicks:function(){var t=this;var e=t.min;var i=t.max;var n=t.options;var o=n.ticks;var r=n.time;var a=t._timestamps;var s=[];var l=t.getLabelCapacity(e);var u=o.source;var h=n.distribution;var c,d,p;if(u==="data"||u==="auto"&&h==="series")a=a.data;else if(u==="labels")a=a.labels;else a=Go(t,e,i,l);if(n.bounds==="ticks"&&a.length){e=a[0];i=a[a.length-1]}e=jo(t,Bo(n))||e;i=jo(t,Fo(n))||i;for(c=0,d=a.length;c<d;++c){p=a[c];if(p>=e&&p<=i)s.push(p)}t.min=e;t.max=i;t._unit=r.unit||(o.autoSkip?Ho(r.minUnit,t.min,t.max,l):Wo(t,s.length,r.minUnit,t.min,t.max));t._majorUnit=!o.major.enabled||t._unit==="year"?undefined:Vo(t._unit);t._table=Ro(t._timestamps.data,e,i,h);t._offsets=qo(t._table,s,e,i,n);if(o.reverse)s.reverse();return $o(t,s,t._majorUnit)},getLabelForIndex:function(t,e){var i=this;var n=i._adapter;var o=i.chart.data;var r=i.options.time;var a=o.labels&&t<o.labels.length?o.labels[t]:"";var s=o.datasets[e].data[t];if(Ct.isObject(s))a=i.getRightValue(s);if(r.tooltipFormat)return n.format(Zo(i,a),r.tooltipFormat);if(typeof a==="string")return a;return n.format(Zo(i,a),r.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var o=this;var r=o._adapter;var a=o.options;var s=a.time.displayFormats;var l=s[o._unit];var u=o._majorUnit;var h=s[u];var c=i[e];var d=a.ticks;var p=u&&h&&c&&c.major;var f=r.format(t,n?n:p?h:l);var m=p?d.major:d.minor;var g=Po([m.callback,m.userCallback,d.callback,d.userCallback]);return g?g(f,e,i):f},convertTicksToLabels:function(t){var e=[];var i,n;for(i=0,n=t.length;i<n;++i)e.push(this.tickFormatFunction(t[i].value,i,t));return e},getPixelForOffset:function(t){var e=this;var i=e._offsets;var n=Uo(e._table,"time",t,"pos");return e.getPixelForDecimal((i.start+n)*i.factor)},getPixelForValue:function(t,e,i){var n=this;var o=null;if(e!==undefined&&i!==undefined)o=n._timestamps.datasets[i][e];if(o===null)o=jo(n,t);if(o!==null)return n.getPixelForOffset(o)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this;var i=e._offsets;var n=e.getDecimalForPixel(t)/i.factor-i.end;var o=Uo(e._table,"pos",n,"time");return e._adapter._create(o)},_getLabelSize:function(t){var e=this;var i=e.options.ticks;var n=e.ctx.measureText(t).width;var o=Ct.toRadians(e.isHorizontal()?i.maxRotation:i.minRotation);var r=Math.cos(o);var a=Math.sin(o);var s=So(i.fontSize,pt.global.defaultFontSize);return{w:n*r+s*a,h:n*a+s*r}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this;var i=e.options.time;var n=i.displayFormats;var o=n[i.unit]||n.millisecond;var r=e.tickFormatFunction(t,0,$o(e,[t],e._majorUnit),o);var a=e._getLabelSize(r);var s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);if(e.options.offset)s--;return s>0?s:1}}),Xo;Yo._defaults=Jo;var Qo={category:Hn,linear:eo,logarithmic:lo,radialLinear:Co,time:Yo},tr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};yn._date.override(typeof n==="function"?{_id:"moment",formats:function(){return tr},parse:function(t,e){if(typeof t==="string"&&typeof e==="string")t=n(t,e);else if(!(t instanceof n))t=n(t);return t.isValid()?t.valueOf():null},format:function(t,e){return n(t).format(e)},add:function(t,e,i){return n(t).add(e,i).valueOf()},diff:function(t,e,i){return n(t).diff(n(e),i)},startOf:function(t,e,i){t=n(t);if(e==="isoWeek")return t.isoWeekday(i).valueOf();return t.startOf(e).valueOf()},endOf:function(t,e){return n(t).endOf(e).valueOf()},_create:function(t){return n(t)}}:{}),pt._set("global",{plugins:{filler:{propagate:true}}});var er={dataset:function(t){var e=t.fill;var i=t.chart;var n=i.getDatasetMeta(e);var o=n&&i.isDatasetVisible(e);var r=o&&n.dataset._children||[];var a=r.length||0;return!a?null:function(t,e){return e<a&&r[e]._view||null}},boundary:function(t){var i=t.boundary;var e=i?i.x:null;var n=i?i.y:null;if(Ct.isArray(i))return function(t,e){return i[e]};return function(t){return{x:e===null?t.x:e,y:n===null?t.y:n}}}};function ir(t,e,i){var n=t._model||{};var o=n.fill;var r;if(o===undefined)o=!!n.backgroundColor;if(o===false||o===null)return false;if(o===true)return"origin";r=parseFloat(o,10);if(isFinite(r)&&Math.floor(r)===r){if(o[0]==="-"||o[0]==="+")r=e+r;if(r===e||r<0||r>=i)return false;return r}switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return false}}function nr(t){var e=t.el._model||{};var i=t.el._scale||{};var n=t.fill;var o=null;var r;if(isFinite(n))return null;if(n==="start")o=e.scaleBottom===undefined?i.bottom:e.scaleBottom;else if(n==="end")o=e.scaleTop===undefined?i.top:e.scaleTop;else if(e.scaleZero!==undefined)o=e.scaleZero;else if(i.getBasePixel)o=i.getBasePixel();if(o!==undefined&&o!==null){if(o.x!==undefined&&o.y!==undefined)return o;if(Ct.isFinite(o)){r=i.isHorizontal();return{x:r?o:null,y:r?null:o}}}return null}function or(t){var e=t.el._scale;var i=e.options;var n=e.chart.data.labels.length;var o=t.fill;var r=[];var a,s,l,u,h;if(!n)return null;a=i.ticks.reverse?e.max:e.min;s=i.ticks.reverse?e.min:e.max;l=e.getPointPositionForValue(0,a);for(u=0;u<n;++u){h=o==="start"||o==="end"?e.getPointPositionForValue(u,o==="start"?a:s):e.getBasePosition(u);if(i.gridLines.circular){h.cx=l.x;h.cy=l.y;h.angle=e.getIndexAngle(u)-Math.PI/2}r.push(h)}return r}function rr(t){var e=t.el._scale||{};if(e.getPointPositionForValue)return or(t);return nr(t)}function ar(t,e,i){var n=t[e];var o=n.fill;var r=[e];var a;if(!i)return o;while(o!==false&&r.indexOf(o)===-1){if(!isFinite(o))return o;a=t[o];if(!a)return false;if(a.visible)return o;r.push(o);o=a.fill}return false}function sr(t){var e=t.fill;var i="dataset";if(e===false)return null;if(!isFinite(e))i="boundary";return er[i](t)}function lr(t){return t&&!t.skip}function ur(t,e,i,n,o){var r,a,s,l;if(!n||!o)return;t.moveTo(e[0].x,e[0].y);for(r=1;r<n;++r)Ct.canvas.lineTo(t,e[r-1],e[r]);if(i[0].angle!==undefined){a=i[0].cx;s=i[0].cy;l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2));for(r=o-1;r>0;--r)t.arc(a,s,l,i[r].angle,i[r-1].angle,true);return}t.lineTo(i[o-1].x,i[o-1].y);for(r=o-1;r>0;--r)Ct.canvas.lineTo(t,i[r],i[r-1],true)}function hr(t,e,i,n,o,r){var a=e.length;var s=n.spanGaps;var l=[];var u=[];var h=0;var c=0;var d,p,f,m,g,v,_,y;t.beginPath();for(d=0,p=a;d<p;++d){f=d%a;m=e[f]._view;g=i(m,f,n);v=lr(m);_=lr(g);if(r&&y===undefined&&v){y=d+1;p=a+y}if(v&&_){h=l.push(m);c=u.push(g)}else if(h&&c)if(!s){ur(t,l,u,h,c);h=c=0;l=[];u=[]}else{if(v)l.push(m);if(_)u.push(g)}}ur(t,l,u,h,c);t.closePath();t.fillStyle=o;t.fill()}var cr={id:"filler",afterDatasetsUpdate:function(t,e){var i=(t.data.datasets||[]).length;var n=e.propagate;var o=[];var r,a,s,l;for(a=0;a<i;++a){r=t.getDatasetMeta(a);s=r.dataset;l=null;if(s&&s._model&&s instanceof ce.Line)l={visible:t.isDatasetVisible(a),fill:ir(s,a,i),chart:t,el:s};r.$filler=l;o.push(l)}for(a=0;a<i;++a){l=o[a];if(!l)continue;l.fill=ar(o,a,n);l.boundary=rr(l);l.mapper=sr(l)}},beforeDatasetsDraw:function(t){var e=t._getSortedVisibleDatasetMetas();var i=t.ctx;var n,o,r,a,s,l,u;for(o=e.length-1;o>=0;--o){n=e[o].$filler;if(!n||!n.visible)continue;r=n.el;a=r._view;s=r._children||[];l=n.mapper;u=a.backgroundColor||pt.global.defaultColor;if(l&&u&&s.length){Ct.canvas.clipArea(i,t.chartArea);hr(i,s,l,a,u,r._loop);Ct.canvas.unclipArea(i)}}}},dr=Ct.rtl.getRtlAdapter,pr=Ct.noop,fr=Ct.valueOrDefault;function mr(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}pt._set("global",{legend:{display:true,position:"top",align:"center",fullWidth:true,reverse:false,weight:1e3,onClick:function(t,e){var i=e.datasetIndex;var n=this.chart;var o=n.getDatasetMeta(i);o.hidden=o.hidden===null?!n.data.datasets[i].hidden:null;n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(i){var n=i.data.datasets;var t=i.options.legend||{};var o=t.labels&&t.labels.usePointStyle;return i._getSortedDatasetMetas().map(function(t){var e=t.controller.getStyle(o?0:undefined);return{text:n[t.index].label,fillStyle:e.backgroundColor,hidden:!i.isDatasetVisible(t.index),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,rotation:e.rotation,datasetIndex:t.index}},this)}}},legendCallback:function(t){var e=document.createElement("ul");var i=t.data.datasets;var n,o,r,a;e.setAttribute("class",t.id+"-legend");for(n=0,o=i.length;n<o;n++){r=e.appendChild(document.createElement("li"));a=r.appendChild(document.createElement("span"));a.style.backgroundColor=i[n].backgroundColor;if(i[n].label)r.appendChild(document.createTextNode(i[n].label))}return e.outerHTML}});var gr=It.extend({initialize:function(t){var e=this;Ct.extend(e,t);e.legendHitBoxes=[];e._hoveredItem=null;e.doughnutMode=false},beforeUpdate:pr,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:pr,beforeSetDimensions:pr,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:pr,beforeBuildLabels:pr,buildLabels:function(){var e=this;var i=e.options.labels||{};var t=Ct.callback(i.generateLabels,[e.chart],e)||[];if(i.filter)t=t.filter(function(t){return i.filter(t,e.chart.data)});if(e.options.reverse)t.reverse();e.legendItems=t},afterBuildLabels:pr,beforeFit:pr,fit:function(){var t=this;var e=t.options;var o=e.labels;var i=e.display;var r=t.ctx;var n=Ct.options._parseFont(o);var a=n.size;var s=t.legendHitBoxes=[];var l=t.minSize;var u=t.isHorizontal();if(u){l.width=t.maxWidth;l.height=i?10:0}else{l.width=i?10:0;l.height=t.maxHeight}if(!i){t.width=l.width=t.height=l.height=0;return}r.font=n.string;if(u){var h=t.lineWidths=[0];var c=0;r.textAlign="left";r.textBaseline="middle";Ct.each(t.legendItems,function(t,e){var i=mr(o,a);var n=i+a/2+r.measureText(t.text).width;if(e===0||h[h.length-1]+n+2*o.padding>l.width){c+=a+o.padding;h[h.length-(e>0?0:1)]=0}s[e]={left:0,top:0,width:n,height:a};h[h.length-1]+=n+o.padding});l.height+=c}else{var d=o.padding;var p=t.columnWidths=[];var f=t.columnHeights=[];var m=o.padding;var g=0;var v=0;Ct.each(t.legendItems,function(t,e){var i=mr(o,a);var n=i+a/2+r.measureText(t.text).width;if(e>0&&v+a+2*d>l.height){m+=g+o.padding;p.push(g);f.push(v);g=0;v=0}g=Math.max(g,n);v+=a+d;s[e]={left:0,top:0,width:n,height:a}});m+=g;p.push(g);f.push(v);l.width+=m}t.width=l.width;t.height=l.height},afterFit:pr,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this;var i=s.options;var l=i.labels;var t=pt.global;var u=t.defaultColor;var h=t.elements.line;var c=s.height;var d=s.columnHeights;var p=s.width;var f=s.lineWidths;if(!i.display)return;var m=dr(i.rtl,s.left,s.minSize.width);var g=s.ctx;var e=fr(l.fontColor,t.defaultFontColor);var n=Ct.options._parseFont(l);var v=n.size;var _;g.textAlign=m.textAlign("left");g.textBaseline="middle";g.lineWidth=.5;g.strokeStyle=e;g.fillStyle=e;g.font=n.string;var y=mr(l,v);var x=s.legendHitBoxes;var b=function(t,e,i){if(isNaN(y)||y<=0)return;g.save();var n=fr(i.lineWidth,h.borderWidth);g.fillStyle=fr(i.fillStyle,u);g.lineCap=fr(i.lineCap,h.borderCapStyle);g.lineDashOffset=fr(i.lineDashOffset,h.borderDashOffset);g.lineJoin=fr(i.lineJoin,h.borderJoinStyle);g.lineWidth=n;g.strokeStyle=fr(i.strokeStyle,u);if(g.setLineDash)g.setLineDash(fr(i.lineDash,h.borderDash));if(l&&l.usePointStyle){var o=y*Math.SQRT2/2;var r=m.xPlus(t,y/2);var a=e+v/2;Ct.canvas.drawPoint(g,i.pointStyle,o,r,a,i.rotation)}else{g.fillRect(m.leftForLtr(t,y),e,y,v);if(n!==0)g.strokeRect(m.leftForLtr(t,y),e,y,v)}g.restore()};var w=function(t,e,i,n){var o=v/2;var r=m.xPlus(t,y+o);var a=e+o;g.fillText(i.text,r,a);if(i.hidden){g.beginPath();g.lineWidth=2;g.moveTo(r,a);g.lineTo(m.xPlus(r,n),a);g.stroke()}};var k=function(t,e){switch(i.align){case"start":return l.padding;case"end":return t-e;default:return(t-e+l.padding)/2}};var L=s.isHorizontal();if(L)_={x:s.left+k(p,f[0]),y:s.top+l.padding,line:0};else _={x:s.left+l.padding,y:s.top+k(c,d[0]),line:0};Ct.rtl.overrideTextDirection(s.ctx,i.textDirection);var C=v+l.padding;Ct.each(s.legendItems,function(t,e){var i=g.measureText(t.text).width;var n=y+v/2+i;var o=_.x;var r=_.y;m.setWidth(s.minSize.width);if(L){if(e>0&&o+n+l.padding>s.left+s.minSize.width){r=_.y+=C;_.line++;o=_.x=s.left+k(p,f[_.line])}}else if(e>0&&r+C>s.top+s.minSize.height){o=_.x=o+s.columnWidths[_.line]+l.padding;_.line++;r=_.y=s.top+k(c,d[_.line])}var a=m.x(o);b(a,r,t);x[e].left=m.leftForLtr(a,x[e].width);x[e].top=r;w(a,r,t,i);if(L)_.x+=n+l.padding;else _.y+=C});Ct.rtl.restoreTextDirection(s.ctx,i.textDirection)},_getLegendItemAt:function(t,e){var i=this;var n,o,r;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom){r=i.legendHitBoxes;for(n=0;n<r.length;++n){o=r[n];if(t>=o.left&&t<=o.left+o.width&&e>=o.top&&e<=o.top+o.height)return i.legendItems[n]}}return null},handleEvent:function(t){var e=this;var i=e.options;var n=t.type==="mouseup"?"click":t.type;var o;if(n==="mousemove"){if(!i.onHover&&!i.onLeave)return}else if(n==="click"){if(!i.onClick)return}else return;o=e._getLegendItemAt(t.x,t.y);if(n==="click"){if(o&&i.onClick)i.onClick.call(e,t.native,o)}else{if(i.onLeave&&o!==e._hoveredItem){if(e._hoveredItem)i.onLeave.call(e,t.native,e._hoveredItem);e._hoveredItem=o}if(i.onHover&&o)i.onHover.call(e,t.native,o)}}});function vr(t,e){var i=new gr({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e);hi.addBox(t,i);t.legend=i}var _r={id:"legend",_element:gr,beforeInit:function(t){var e=t.options.legend;if(e)vr(t,e)},beforeUpdate:function(t){var e=t.options.legend;var i=t.legend;if(e){Ct.mergeIf(e,pt.global.legend);if(i){hi.configure(t,i,e);i.options=e}else vr(t,e)}else if(i){hi.removeBox(t,i);delete t.legend}},afterEvent:function(t,e){var i=t.legend;if(i)i.handleEvent(e)}},yr=Ct.noop;pt._set("global",{title:{display:false,fontStyle:"bold",fullWidth:true,padding:10,position:"top",text:"",weight:2e3}});var xr=It.extend({initialize:function(t){var e=this;Ct.extend(e,t);e.legendHitBoxes=[]},beforeUpdate:yr,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:yr,beforeSetDimensions:yr,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:yr,beforeBuildLabels:yr,buildLabels:yr,afterBuildLabels:yr,beforeFit:yr,fit:function(){var t=this;var e=t.options;var i=t.minSize={};var n=t.isHorizontal();var o,r;if(!e.display){t.width=i.width=t.height=i.height=0;return}o=Ct.isArray(e.text)?e.text.length:1;r=o*Ct.options._parseFont(e).lineHeight+e.padding*2;t.width=i.width=n?t.maxWidth:r;t.height=i.height=n?r:t.maxHeight},afterFit:yr,isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},draw:function(){var t=this;var e=t.ctx;var i=t.options;if(!i.display)return;var n=Ct.options._parseFont(i);var o=n.lineHeight;var r=o/2+i.padding;var a=0;var s=t.top;var l=t.left;var u=t.bottom;var h=t.right;var c,d,p;e.fillStyle=Ct.valueOrDefault(i.fontColor,pt.global.defaultFontColor);e.font=n.string;if(t.isHorizontal()){d=l+(h-l)/2;p=s+r;c=h-l}else{d=i.position==="left"?l+r:h-r;p=s+(u-s)/2;c=u-s;a=Math.PI*(i.position==="left"?-.5:.5)}e.save();e.translate(d,p);e.rotate(a);e.textAlign="center";e.textBaseline="middle";var f=i.text;if(Ct.isArray(f)){var m=0;for(var g=0;g<f.length;++g){e.fillText(f[g],0,m,c);m+=o}}else e.fillText(f,0,0,c);e.restore()}});function br(t,e){var i=new xr({ctx:t.ctx,options:e,chart:t});hi.configure(t,i,e);hi.addBox(t,i);t.titleBlock=i}var wr,kr={},Lr,Cr=_r,Mr={id:"title",_element:xr,beforeInit:function(t){var e=t.options.title;if(e)br(t,e)},beforeUpdate:function(t){var e=t.options.title;var i=t.titleBlock;if(e){Ct.mergeIf(e,pt.global.title);if(i){hi.configure(t,i,e);i.options=e}else br(t,e)}else if(i){hi.removeBox(t,i);delete t.titleBlock}}},Tr;for(Tr in kr.filler=cr,kr.legend=Cr,kr.title=Mr,fn.helpers=Ct,mn(),fn._adapters=yn,fn.Animation=zt,fn.animationService=Bt,fn.controllers=We,fn.DatasetController=jt,fn.defaults=pt,fn.Element=It,fn.elements=ce,fn.Interaction=Ye,fn.layouts=hi,fn.platform=Ui,fn.plugins=Zi,fn.Scale=Un,fn.scaleService=ji,fn.Ticks=xn,fn.Tooltip=on,fn.helpers.each(Qo,function(t,e){fn.scaleService.registerScaleType(e,t,t._defaults)}),kr)if(kr.hasOwnProperty(Tr))fn.plugins.register(kr[Tr]);fn.platform.initialize();var Pr=fn;if(typeof window!=="undefined")window.Chart=fn;return(fn.Chart=fn).Legend=kr.legend._element,fn.Title=kr.title._element,fn.pluginService=fn.plugins,fn.PluginBase=fn.Element.extend({}),fn.canvasHelpers=fn.helpers.canvas,fn.layoutService=fn.layouts,fn.LinearScaleBase=Kn,fn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(i){fn[i]=function(t,e){return new fn(t,fn.helpers.merge(e||{},{type:i.charAt(0).toLowerCase()+i.slice(1)}))}}),Pr}(function(){try{return i(2470)}catch(t){}}())},7310:function(t,e,i){"use strict";t.exports=i(2702).polyfill()},2702:function(t,e,nt){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
t.exports=function(){"use strict";function n(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function l(t){return typeof t==="function"}var t=void 0;if(Array.isArray)t=Array.isArray;else t=function(t){return Object.prototype.toString.call(t)==="[object Array]"};var i=t,o=0,e=void 0,r=void 0,a=function t(e,i){x[o]=e;x[o+1]=i;o+=2;if(o===2)if(r)r(b);else k()};function s(t){r=t}function u(t){a=t}var h=typeof window!=="undefined"?window:undefined,c=h||{},d=c.MutationObserver||c.WebKitMutationObserver,p=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",f=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return process.nextTick(b)}}function g(){if(typeof e!=="undefined")return function(){e(b)};return y()}function v(){var t=0;var e=new d(b);var i=document.createTextNode("");e.observe(i,{characterData:true});return function(){i.data=t=++t%2}}function _(){var t=new MessageChannel;t.port1.onmessage=b;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(b,1)}}var x=new Array(1e3);function b(){for(var t=0;t<o;t+=2){var e=x[t];var i=x[t+1];e(i);x[t]=undefined;x[t+1]=undefined}o=0}function w(){try{var t=Function("return this")().require("vertx");e=t.runOnLoop||t.runOnContext;return g()}catch(t){return y()}}var k=void 0;if(p)k=m();else if(d)k=v();else if(f)k=_();else if(h===undefined&&"function"==="function")k=w();else k=y();function L(t,e){var i=this;var n=new this.constructor(T);if(n[M]===undefined)q(n);var o=i._state;if(o){var r=arguments[o-1];a(function(){return H(o,n,r,i._result)})}else Z(i,n,t,e);return n}function C(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e)return t;var i=new e(T);F(i,t);return i}var M=Math.random().toString(36).substring(2);function T(){}var P=void 0,S=1,A=2;function D(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function I(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function O(t,n,o){a(function(e){var i=false;var t=I(o,n,function(t){if(i)return;i=true;if(n!==t)F(e,t);else N(e,t)},function(t){if(i)return;i=true;U(e,t)},"Settle: "+(e._label||" unknown promise"));if(!i&&t){i=true;U(e,t)}},t)}function z(e,t){if(t._state===S)N(e,t._result);else if(t._state===A)U(e,t._result);else Z(t,undefined,function(t){return F(e,t)},function(t){return U(e,t)})}function B(t,e,i){if(e.constructor===t.constructor&&i===L&&e.constructor.resolve===C)z(t,e);else if(i===undefined)N(t,e);else if(l(i))O(t,e,i);else N(t,e)}function F(e,t){if(e===t)U(e,D());else if(n(t)){var i=void 0;try{i=t.then}catch(t){U(e,t);return}B(e,t,i)}else N(e,t)}function R(t){if(t._onerror)t._onerror(t._result);j(t)}function N(t,e){if(t._state!==P)return;t._result=e;t._state=S;if(t._subscribers.length!==0)a(j,t)}function U(t,e){if(t._state!==P)return;t._state=A;t._result=e;a(R,t)}function Z(t,e,i,n){var o=t._subscribers;var r=o.length;t._onerror=null;o[r]=e;o[r+S]=i;o[r+A]=n;if(r===0&&t._state)a(j,t)}function j(t){var e=t._subscribers;var i=t._state;if(e.length===0)return;var n=void 0,o=void 0,r=t._result;for(var a=0;a<e.length;a+=3){n=e[a];o=e[a+i];if(n)H(i,n,o,r);else o(r)}t._subscribers.length=0}function H(t,e,i,n){var o=l(i),r=void 0,a=void 0,s=true;if(o){try{r=i(n)}catch(t){s=false;a=t}if(e===r){U(e,E());return}}else r=n;if(e._state!==P);else if(o&&s)F(e,r);else if(s===false)U(e,a);else if(t===S)N(e,r);else if(t===A)U(e,r)}function W(i,t){try{t(function t(e){F(i,e)},function t(e){U(i,e)})}catch(t){U(i,t)}}var V=0;function G(){return V++}function q(t){t[M]=V++;t._state=undefined;t._result=undefined;t._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var $=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(T);if(!this.promise[M])q(this.promise);if(i(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0)N(this.promise,this._result);else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0)N(this.promise,this._result)}}else U(this.promise,K())}t.prototype._enumerate=function t(e){for(var i=0;this._state===P&&i<e.length;i++)this._eachEntry(e[i],i)};t.prototype._eachEntry=function t(e,i){var n=this._instanceConstructor;var o=n.resolve;if(o===C){var r=void 0;var a=void 0;var s=false;try{r=e.then}catch(t){s=true;a=t}if(r===L&&e._state!==P)this._settledAt(e._state,i,e._result);else if(typeof r!=="function"){this._remaining--;this._result[i]=e}else if(n===et){var l=new n(T);if(s)U(l,a);else B(l,e,r);this._willSettleAt(l,i)}else this._willSettleAt(new n(function(t){return t(e)}),i)}else this._willSettleAt(o(e),i)};t.prototype._settledAt=function t(e,i,n){var o=this.promise;if(o._state===P){this._remaining--;if(e===A)U(o,n);else this._result[i]=n}if(this._remaining===0)N(o,this._result)};t.prototype._willSettleAt=function t(e,i){var n=this;Z(e,undefined,function(t){return n._settledAt(S,i,t)},function(t){return n._settledAt(A,i,t)})};return t}();function J(t){return new $(this,t).promise}function Y(o){var r=this;if(i(o))return new r(function(t,e){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(t,e)});else return new r(function(t,e){return e(new TypeError("You must pass an array to race."))})}function X(t){var e=new this(T);return U(e,t),e}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function e(t){this[M]=G();this._result=this._state=undefined;this._subscribers=[];if(T!==t){typeof t!=="function"&&Q();this instanceof e?W(this,t):tt()}}e.prototype.catch=function t(e){return this.then(null,e)};e.prototype.finally=function t(e){var i=this;var n=i.constructor;if(l(e))return i.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})});return i.then(e,e)};return e}();function it(){var t=void 0;if(void 0!==nt.g)t=nt.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et}return et.prototype.then=L,et.all=function(t){return new $(this,t).promise},et.race=function(o){var r=this;return i(o)?new r(function(t,e){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(t,e)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},et.resolve=C,et.reject=function(t){var e=new this(T);return U(e,t),e},et._setScheduler=function(t){r=t},et._setAsap=function(t){a=t},et._asap=a,et.polyfill=function(){var t=void 0;if(void 0!==nt.g)t=nt.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et},et.Promise=et}()},4144:function(t,e){var i,n;i=[e,t],void 0===(n="function"==typeof(n=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function c(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function d(e){try{delete window[e]}catch(t){window[e]=undefined}}function p(t){var e=document.getElementById(t);if(e)document.getElementsByTagName("head")[0].removeChild(e)}function n(r){var a=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var s=r;var l=a.timeout||i.timeout;var u=a.jsonpCallback||i.jsonpCallback;var h=undefined;return new Promise(function(t,e){var i=a.jsonpCallbackFunction||c();var n=u+"_"+i;window[i]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)}});if(h)clearTimeout(h);p(n);d(i)};s+=s.indexOf("?")===-1?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+s+u+"="+i);if(a.charset)o.setAttribute("charset",a.charset);o.id=n;document.getElementsByTagName("head")[0].appendChild(o);h=setTimeout(function(){e(new Error("JSONP request to "+r+" timed out"));d(i);p(n);window[i]=function(){d(i)}},l);o.onerror=function(){e(new Error("JSONP request to "+r+" failed"));d(i);p(n);if(h)clearTimeout(h)}})}e.exports=n})?n.apply(e,i):n)||(t.exports=n)},624:function(t,e,i){"use strict";var n,o,r,a=[i(5525),i(4785),i(8291),i(2709),i(2506),i(9176)],s=-1,l=[],u=!1;function h(){n&&o&&(n=!1,o.length?l=o.concat(l):s=-1,l.length&&c())}function c(){if(!n){n=!(u=!1);for(var t=l.length,e=setTimeout(h);t;){for(o=l,l=[];o&&++s<t;)o[s].run();s=-1,t=l.length}o=null,n=!(s=-1),clearTimeout(e)}}for(var d=-1,p=a.length;++d<p;)if(a[d]&&a[d].test&&a[d].test()){r=a[d].install(c);break}function f(t,e){this.fun=t,this.array=e}f.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),u||n||(u=!0,r())}},2709:function(t,e,i){"use strict";e.test=function(){return!i.g.setImmediate&&void 0!==i.g.MessageChannel},e.install=function(t){var e=new i.g.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}},8291:function(t,e,n){"use strict";var o=n.g.MutationObserver||n.g.WebKitMutationObserver;e.test=function(){return o},e.install=function(t){var e=0,t=new o(t),i=n.g.document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}},4785:function(t,e,i){"use strict";e.test=function(){return"function"==typeof i.g.queueMicrotask},e.install=function(t){return function(){i.g.queueMicrotask(t)}}},2506:function(t,e,i){"use strict";e.test=function(){return"document"in i.g&&"onreadystatechange"in i.g.document.createElement("script")},e.install=function(e){return function(){var t=i.g.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},i.g.document.documentElement.appendChild(t),e}}},9176:function(t,e){"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},7977:function(t,e,i){var n=i(5243),o=i(4144),r=i(5568);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if((t="string"==typeof t?{bingMapsKey:t}:t)&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));t=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=o(t,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",o=i;0<o;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n}(t.x,t.y,t.z),t=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(t+="&st="+this.options.style),t},onAdd:function(e){e.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,e),this._attributions.forEach(function(t){e.attributionControl.addAttribution(t)})},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(t){e.attributionControl.removeAttribution(t)}),n.TileLayer.prototype.onRemove.call(this,e)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();t=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return o(t,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));t=t.resourceSets[0].resources[0];return this._url=t.imageUrl,this._imageryProviders=t.imageryProviders||[],this.options.subdomains=t.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t,n,e,o=this._map;o&&o.attributionControl&&(t=o.getZoom(),n=[(e=(e=o.getBounds().toBBoxString()).split(","))[1],e[0],e[3],e[2]],this._fetch.then(function(){var e=this._getAttributions(n,t),i=this._attributions;e.forEach(function(t){-1<i.indexOf(t)||o.attributionControl.addAttribution(t)}),i.filter(function(t){-1<e.indexOf(t)||o.attributionControl.removeAttribution(t)}),this._attributions=e}.bind(this)))},_getAttributions:function(n,o){return this._imageryProviders.reduce(function(t,e){for(var i=0;i<e.coverageAreas.length;i++)if(r(n,e.coverageAreas[i].bbox)&&o>=e.coverageAreas[i].zoomMin&&o<=e.coverageAreas[i].zoomMax)return t.push(e.attribution),t;return t},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},5356:function(t,e,i){var n;n=[i(5243)],void 0===(i="function"==typeof(i=function(h){h.Map.mergeOptions({contextmenuItems:[]}),h.Map.ContextMenu=h.Handler.extend({_touchstart:h.Browser.msPointer?"MSPointerDown":h.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){h.Handler.prototype.initialize.call(this,t);this._items=[];this._visible=false;var e=this._container=h.DomUtil.create("div",h.Map.ContextMenu.BASE_CLS,t._container);e.style.zIndex=1e4;e.style.position="absolute";if(t.options.contextmenuWidth)e.style.width=t.options.contextmenuWidth+"px";this._createItems();h.DomEvent.on(e,"click",h.DomEvent.stop).on(e,"mousedown",h.DomEvent.stop).on(e,"dblclick",h.DomEvent.stop).on(e,"contextmenu",h.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();h.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this);if(h.Browser.touch)h.DomEvent.on(document,this._touchstart,this._hide,this);this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();h.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this);if(h.Browser.touch)h.DomEvent.off(document,this._touchstart,this._hide,this);this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,e){if(t instanceof h.LatLng)t=this._map.latLngToContainerPoint(t);this._showAtPoint(t,e)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=e!==undefined?e:this._items.length;var i=this._createItem(this._container,t,e);this._items.push(i);this._sizeChanged=true;this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:e});return i.el},removeItem:function(t){var e=this._container;if(!isNaN(t))t=e.children[t];if(t){this._removeItem(h.Util.stamp(t));this._sizeChanged=true;this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t});return t}return null},removeAllItems:function(){var t=this._container.children,e;while(t.length){e=t[0];this._removeItem(h.Util.stamp(e))}return t},hideAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display="none"}},showAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display=""}},setDisabled:function(t,e){var i=this._container,n=h.Map.ContextMenu.BASE_CLS+"-item";if(!isNaN(t))t=i.children[t];if(t&&h.DomUtil.hasClass(t,n))if(e){h.DomUtil.addClass(t,n+"-disabled");this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})}else{h.DomUtil.removeClass(t,n+"-disabled");this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})}},isVisible:function(){return this._visible},_createItems:function(){var t=this._map.options.contextmenuItems,e,i,n;for(i=0,n=t.length;i<n;i++)this._items.push(this._createItem(this._container,t[i]))},_createItem:function(t,e,i){if(e.separator||e==="-")return this._createSeparator(t,i);var n=h.Map.ContextMenu.BASE_CLS+"-item",o=e.disabled?n+" "+n+"-disabled":n,r=this._insertElementAt("a",o,t,i),a=this._createEventHandler(r,e.callback,e.context,e.hideOnSelect),s=this._getIcon(e),l=this._getIconCls(e),u="";if(s)u='<img class="'+h.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>';else if(l)u='<span class="'+h.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>';r.innerHTML=u+e.text;r.href="#";h.DomEvent.on(r,"mouseover",this._onItemMouseOver,this).on(r,"mouseout",this._onItemMouseOut,this).on(r,"mousedown",h.DomEvent.stopPropagation).on(r,"click",a);if(h.Browser.touch)h.DomEvent.on(r,this._touchstart,h.DomEvent.stopPropagation);if(!h.Browser.pointer)h.DomEvent.on(r,"click",this._onItemMouseOut,this);return{id:h.Util.stamp(r),el:r,callback:a}},_removeItem:function(t){var e,i,n,o,r;for(n=0,o=this._items.length;n<o;n++){e=this._items[n];if(e.id===t){i=e.el;r=e.callback;if(r){h.DomEvent.off(i,"mouseover",this._onItemMouseOver,this).off(i,"mouseover",this._onItemMouseOut,this).off(i,"mousedown",h.DomEvent.stopPropagation).off(i,"click",r);if(h.Browser.touch)h.DomEvent.off(i,this._touchstart,h.DomEvent.stopPropagation);if(!h.Browser.pointer)h.DomEvent.on(i,"click",this._onItemMouseOut,this)}this._container.removeChild(i);this._items.splice(n,1);return e}}return null},_createSeparator:function(t,e){var i=this._insertElementAt("div",h.Map.ContextMenu.BASE_CLS+"-separator",t,e);return{id:h.Util.stamp(i),el:i}},_createEventHandler:function(e,i,n,o){var r=this,a=this._map,s=h.Map.ContextMenu.BASE_CLS+"-item-disabled",o=o!==undefined?o:true;return function(t){if(h.DomUtil.hasClass(e,s))return;if(o)r._hide();if(i)i.call(n||a,r._showLocation);r._map.fire("contextmenu.select",{contextmenu:r,el:e})}},_insertElementAt:function(t,e,i,n){var o,r=document.createElement(t);r.className=e;if(n!==undefined)o=i.children[n];if(o)i.insertBefore(r,o);else i.appendChild(r);return r},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(t,e){if(this._items.length){var i=this._map,n=i.containerPointToLayerPoint(t),o=i.layerPointToLatLng(n),r=h.extend(e||{},{contextmenu:this});this._showLocation={latlng:o,layerPoint:n,containerPoint:t};if(e&&e.relatedTarget)this._showLocation.relatedTarget=e.relatedTarget;this._setPosition(t);if(!this._visible){this._container.style.display="block";this._visible=true}this._map.fire("contextmenu.show",r)}},_hide:function(){if(this._visible){this._visible=false;this._container.style.display="none";this._map.fire("contextmenu.hide",{contextmenu:this})}},_getIcon:function(t){return h.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return h.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var e=this._map.getSize(),i=this._container,n=this._getElementSize(i),o;if(this._map.options.contextmenuAnchor){o=h.point(this._map.options.contextmenuAnchor);t=t.add(o)}i._leaflet_pos=t;if(t.x+n.x>e.x){i.style.left="auto";i.style.right=Math.min(Math.max(e.x-t.x,0),e.x-n.x-1)+"px"}else{i.style.left=Math.max(t.x,0)+"px";i.style.right="auto"}if(t.y+n.y>e.y){i.style.top="auto";i.style.bottom=Math.min(Math.max(e.y-t.y,0),e.y-n.y-1)+"px"}else{i.style.top=Math.max(t.y,0)+"px";i.style.bottom="auto"}},_getElementSize:function(t){var e=this._size,i=t.style.display;if(!e||this._sizeChanged){e={};t.style.left="-999999px";t.style.right="auto";t.style.display="block";e.x=t.offsetWidth;e.y=t.offsetHeight;t.style.left="auto";t.style.display=i;this._sizeChanged=false}return e},_onKeyDown:function(t){var e=t.keyCode;if(e===27)this._hide()},_onItemMouseOver:function(t){h.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){h.DomUtil.removeClass(t.target||t.srcElement,"over")}}),h.Map.addInitHook("addHandler","contextmenu",h.Map.ContextMenu),h.Mixin.ContextMenu={bindContextMenu:function(t){h.setOptions(this,t);this._initContextMenu();return this},unbindContextMenu:function(){this.off("contextmenu",this._showContextMenu,this);return this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){var e=[];for(var i=0;i<this.options.contextmenuItems.length;i++)if(this.options.contextmenuItems[i].index==t)e.push(i);var n=e.pop();while(n!==undefined){this.options.contextmenuItems.splice(n,1);n=e.pop()}},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index);this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[];this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var e,i,n,o,r;if(this._map.contextmenu){i=h.extend({relatedTarget:this},t);n=this._map.mouseEventToContainerPoint(t.originalEvent);if(!this.options.contextmenuInheritItems)this._map.contextmenu.hideAllItems();for(o=0,r=this.options.contextmenuItems.length;o<r;o++){e=this.options.contextmenuItems[o];this._items.push(this._map.contextmenu.insertItem(e,e.index))}this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(n,i)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._map.contextmenu.removeItem(this._items[t]);this._items.length=0;if(!this.options.contextmenuInheritItems)this._map.contextmenu.showAllItems()}};var t=[h.Marker,h.Path],e={contextmenu:false,contextmenuItems:[],contextmenuInheritItems:true},i,n,o;for(n=0,o=t.length;n<o;n++){i=t[n];if(!i.prototype.options)i.prototype.options=e;else i.mergeOptions(e);i.addInitHook(function(){if(this.options.contextmenu)this._initContextMenu()});i.include(h.Mixin.ContextMenu)}return h.Map.ContextMenu})?i.apply(e,n):i)||(t.exports=i)},810:function(t,e,i){var n,o,r;o=function(n){n.EdgeBuffer={previousMethods:{getTiledPixelBounds:n.GridLayer.prototype._getTiledPixelBounds}},n.GridLayer.include({_getTiledPixelBounds:function(t,e,i){e=n.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,t,e,i),i=1;return 0<(i=void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles?this.options.edgeBufferTiles:i)&&(i=n.GridLayer.prototype.getTileSize.call(this).multiplyBy(i),e=new n.Bounds(e.min.subtract(i),e.max.add(i))),e}})},r=window,n=[i(5243)],void 0===(i="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=i),void 0!==r&&r.L&&!r.L.EdgeBuffer&&o(r.L)},8292:function(){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){var t,e;this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t&&(e=L.bind(this._onFullscreenChange,this),this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)}))}),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},5830:function(t,e){!function(t){"use strict";var n={ar:{touch:"   ",scroll:" ctrl + scroll / ",scrollMac:"   +  / "},bg:{touch:"  ,    ",scroll:"  Ctrl ,  ,      ",scrollMac:"   ,  ,      "},bn:{touch:"     ",scroll:"   ctrl + scroll  ",scrollMac:"       "},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla  mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"Kposunut mapy pouijte dva prsty",scroll:"Velikost zobrazen mapy zmte podrenm klvesy Ctrl aposouvnm koleka myi",scrollMac:"Velikost zobrazen mapy zmnte podrenm klvesy  aposunutm koleka myi / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud p kortet",scrollMac:"Brug  + rullefunktionen til at zoome ind og ud p kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:""},el:{touch:"      ",scroll:"   Ctrl  ,     ",scrollMac:"    +     "},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantn pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantn pulsada la tecla  mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta  eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"        .",scroll:"    ctrl + scroll  ",scrollMac:"     +   ."},fi:{touch:"Siirr karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittmll.",scrollMac:"Zoomaa karttaa pitmll painike  painettuna ja vierittmll."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang  + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deuxdoigts pour dplacer la carte",scroll:"Vous pouvez zoomer sur la carte  l'aide de CTRL+Molette de dfilement",scrollMac:"Vous pouvez zoomer sur la carte  l'aide de +Molette de dfilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme  e desprzate para ampliar o mapa"},gu:{touch:"     ",scroll:"    ctrl +   ",scrollMac:"    +   "},hi:{touch:"              ",scroll:"      ctrl +    ",scrollMac:"       +    "},hr:{touch:"Pomiite kartu pomou dva prsta",scroll:"Upotrijebite Ctrl i kliza mia da biste zumirali kartu",scrollMac:"Upotrijebite gumb  dok se pomiete za zumiranje karte"},hu:{touch:"Kt ujjal mozgassa a trkpet",scroll:"A trkp a ctrl + grgets hasznlatval nagythat",scrollMac:"A trkp a  + grgets hasznlatval nagythat"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan  + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza  + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"     ",scroll:"        ctrl ",scrollMac:"         "},ja:{touch:" 2 ",scroll:"Ctrl ",scrollMac:" "},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use  + scroll to zoom the map"},ko:{touch:"    .",scroll:" / Ctrl   .",scrollMac:"   +  "},lt:{touch:"Perkelkite emlap dviem pirtais",scroll:"Slinkite nuspaud klavi Ctrl, kad pakeistumte emlapio mastel",scrollMac:"Paspauskite klavi  ir slinkite, kad priartintumte emlap"},lv:{touch:"Lai prvietotu karti, bdiet to ar diviem pirkstiem",scroll:"Kartes tlummaiai izmantojiet ctrl + ritinanu",scrollMac:"Lai veiktu kartes tlummaiu, izmantojiet  + ritinanu"},ml:{touch:"    ",scroll:" +     ",scrollMac:" +     "},mr:{touch:"    ",scroll:"   ctrl + scroll ",scrollMac:"    +  "},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik  + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for  flytte kartet",scroll:"Hold ctrl-tasten inne og rull for  zoome p kartet",scrollMac:"Hold inne -tasten og rull for  zoome p kartet"},pl:{touch:"Przesu map dwoma palcami",scroll:"Nacinij CTRL i przewi, by przybliy map",scrollMac:"Nacinij i przewi, by przybliy map"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use  e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use  e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize  + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosii dou degete pentru a deplasa harta",scroll:"Apsai tasta ctrl i derulai simultan pentru a mri harta",scrollMac:"Folosii  i derulai pentru a mri/micora harta"},ru:{touch:"  ,     ",scroll:"  ,  ,   Ctrl.",scrollMac:"  ,  + "},sk:{touch:"Mapu mete posun dvoma prstami",scroll:"Ak chcete pribli mapu, stlate klves ctrl aposvajte",scrollMac:"Ak chcete pribli mapu, stlate klves  aposvajte kolieskom myi"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid poveate tako, da drite tipko Ctrl in vrtite kolesce na miki",scrollMac:"Uporabite  + funkcijo pomika, da poveate ali pomanjate zemljevid"},sr:{touch:"    ",scroll:" ctrl       ",scrollMac:"        "},sv:{touch:"Anvnd tv fingrar fr att flytta kartan",scroll:"Anvnd ctrl + rulla fr att zooma kartan",scrollMac:"Anvnd  + rulla fr att zooma p kartan"},ta:{touch:"    ",scroll:" / , ctrl  , /  ",scrollMac:" / ,   , /  "},te:{touch:"     ",scroll:"   ctrl   ,  ",scrollMac:"    +  "},th:{touch:" 2 ",scroll:" Ctrl  ",scrollMac:"  "},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang  + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek iin iki parmanz kullann",scroll:"Haritay yaknlatrmak iin ctrl + kaydrma kombinasyonunu kullann",scrollMac:"Haritay yaknlatrmak iin  tuuna basp ekran kaydrn"},uk:{touch:"   ",scroll:"   ,   ,   Ctrl",scrollMac:"   ,   + "},vi:{touch:"S dng hai ngn tay  di chuyn bn ",scroll:"S dng ctrl + cun  thu phng bn ",scrollMac:"S dng  + cun  thu phng bn "},"zh-CN":{touch:"",scroll:" Ctrl ",scrollMac:"  "},"zh-TW":{touch:"",scroll:" ctrl ",scrollMac:"  "}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var e=!1,i=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?e=!0:"moveend"==t.type&&(e=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t=this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac?this._map.options.gestureHandlingOptions.text:(i=this._getUserLanguage(),(t=n[i=i||"en"]?n[i]:t)||-1===i.indexOf("-")||(i=i.split("-")[0],t=n[i]),t||n[i="en"]),e=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(e=!0);var i=t.scroll;e&&(i=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",i)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){e||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",i),t.GestureHandling=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7244:function(t,e,i){var n,o,r;o=function(a){var t=a.Control.extend({includes:a.Evented?a.Evented.prototype:a.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(t,e){a.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=a.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",a.DomEvent.disableClickPropagation(this._container),a.DomEvent.on(this._container,"mousewheel",a.DomEvent.stopPropagation);t={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs},t=a.Util.extend(this.options.mapOptions,t);return this._miniMap=new a.Map(this._container,t),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(a.Util.bind(function(){this._aimingRect=a.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=a.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){a.Control.prototype.addTo.call(this,t);t=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(t,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,e,i,n,o,r){n=a.DomUtil.create("a",i,n);n.innerHTML=t,n.href="#",n.title=e;e=a.DomEvent.stopPropagation;return a.DomEvent.on(n,"click",e).on(n,"mousedown",e).on(n,"dblclick",e).on(n,"click",a.DomEvent.preventDefault).on(n,"click",o,r),n},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){var e;this._miniMapMoving?this._miniMapMoving=!1:(e=this.options.centerFixed||this._mainMap.getCenter(),this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){var e,i;this.options.centerFixed||(i=this._aimingRect.getBounds(),e=this._miniMap.latLngToContainerPoint(i.getSouthWest()),i=this._miniMap.latLngToContainerPoint(i.getNorthEast()),this._lastAimingRectPosition={sw:e,ne:i})},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new a.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),t=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=t,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return!this._userToggledDisplay&&this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){a.Util.requestAnimFrame(function(){a.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),a.Browser.any3d||a.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){a.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var t={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",t),this.fire("toggle",t)}});return a.Map.mergeOptions({miniMapControl:!1}),a.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new t).addTo(this))}),t},r=window,n=[i(5243)],void 0===(i="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=i),void 0!==r&&r.L&&(r.L.Control.MiniMap=o(L),r.L.control.minimap=function(t,e){return new r.L.Control.MiniMap(t,e)})},9627:function(){!function(){"use strict";function e(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}var a=Symbol("newer"),s=Symbol("older");function l(t,e){this.key=t,this.value=e,this[a]=void 0,this[s]=void 0}function t(t){this.entry=t}function i(t){this.entry=t}function n(t){this.entry=t}e.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[a]&&(t===this.oldest&&(this.oldest=t[a]),t[a][s]=t[s]),t[s]&&(t[s][a]=t[a]),t[a]=void 0,t[s]=this.newest,this.newest&&(this.newest[a]=t),this.newest=t)},e.prototype.assign=function(t){var e,i=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var n=t[Symbol.iterator](),o=n.next();!o.done;o=n.next()){var r=new l(o.value[0],o.value[1]);if(this._keymap.set(r.key,r),e?(e[a]=r)[s]=e:this.oldest=r,e=r,0==i--)throw new Error("overflow")}this.newest=e,this.size=this._keymap.size},e.prototype.get=function(t){t=this._keymap.get(t);if(t)return this._markEntryAsUsed(t),t.value},e.prototype.set=function(t,e){var i=this._keymap.get(t);return i?(i.value=e,this._markEntryAsUsed(i)):(this._keymap.set(t,i=new l(t,e)),this.newest?(this.newest[a]=i)[s]=this.newest:this.oldest=i,this.newest=i,++this.size,this.size>this.limit&&this.shift()),this},e.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[a]?(this.oldest=this.oldest[a],this.oldest[s]=void 0):(this.oldest=void 0,this.newest=void 0),t[a]=t[s]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},e.prototype.find=function(t){t=this._keymap.get(t);return t?t.value:void 0},e.prototype.has=function(t){return this._keymap.has(t)},e.prototype.delete=function(t){t=this._keymap.get(t);if(t)return this._keymap.delete(t.key),t[a]&&t[s]?(t[s][a]=t[a],t[a][s]=t[s]):t[a]?(t[a][s]=void 0,this.oldest=t[a]):t[s]?(t[s][a]=void 0,this.newest=t[s]):this.oldest=this.newest=void 0,this.size--,t.value},e.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},e.prototype.keys=function(){return new i(this.oldest)},e.prototype.values=function(){return new n(this.oldest)},e.prototype.entries=function(){return this},e.prototype[Symbol.iterator]=function(){return new t(this.oldest)},e.prototype.forEach=function(t,e){"object"!=typeof e&&(e=this);for(var i=this.oldest;i;)t.call(e,i.value,i.key,this),i=i[a]},e.prototype.toJSON=function(){for(var t=new Array(this.size),e=0,i=this.oldest;i;)t[e++]={key:i.key,value:i.value},i=i[a];return t},e.prototype.toString=function(){for(var t="",e=this.oldest;e;)t+=String(e.key)+":"+e.value,(e=e[a])&&(t+=" < ");return t},t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},i.prototype[Symbol.iterator]=function(){return this},i.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:t.key}):{done:!0,value:void 0}},n.prototype[Symbol.iterator]=function(){return this},n.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:t.value}):{done:!0,value:void 0}};var o,r=function(){return o=o||new Promise(function(t,e){var i=0,n=null,n=setInterval(function(){return 20<=i?(clearInterval(n),e(new Error("window.google not found after 10 seconds"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),t(window.google)):void++i},500)})};L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:21,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._isMounted=!0,this.once("spawned",function(){if(this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}),this._tileCallbacks={},this._lru=new e(100),this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(e){var i=this;L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._logoContainer&&e._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&e._controlCorners.bottomright.appendChild(this._attributionContainer),r().then(function(){var t;i._isMounted&&(i._ready=!0,i._initMutant(),(e=i._map)&&(t=i.options.updateWhenIdle?"moveend":"move",e.on(t,i._update,i),i.once("remove",function(){this._map.off(t,this._update,this)}),google.maps.event.addListenerOnce(i._mutant,"idle",function(){i._map&&(i._checkZoomLevels(),i._mutantIsReady=!0)}),i._update()))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),google.maps.event.clearListeners(t,"idle"),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle"),t.off("move moveend",this._update,this),this._isMounted=!1},addGoogleLayer:function(e,i){var n=this;return this._subLayers||(this._subLayers={}),r().then(function(){var t=new google.maps[e](i);n._mutant&&t.setMap(n._mutant),n._subLayers[e]=t}),this},removeGoogleLayer:function(e){var i=this;return r().then(function(){var t=i._subLayers&&i._subLayers[e];t&&(t.setMap(null),delete i._subLayers[e])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex=800,this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;this.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){var t,i=this;this._mutant||(t=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"}),this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=i._mutantContainer.querySelectorAll("a"),e=0;e<t.length;++e)t[e].style.pointerEvents="auto"}),this.fire("spawned",{mapObject:t}))},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var o,r=i.addedNodes[n];r instanceof HTMLImageElement?this._onMutatedImage(r):r instanceof HTMLElement&&(Array.prototype.forEach.call(r.querySelectorAll("img"),this._boundOnMutatedImage),"white"===r.style.backgroundColor&&L.DomUtil.remove(r),0===r.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(r),Array.prototype.forEach.call(r.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove),(0<r.querySelectorAll(".gmnoprint").length||0<r.querySelectorAll('a[title="Click to see this area on Google Maps"]').length)&&(o=this._attributionContainer=L.DomUtil.create("div","leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(o),o.style.height="14px",o.style.background="none",this._map._controlCorners.bottomright.appendChild(o),o.appendChild(r)),1e6==r.style.zIndex&&(this._map._controlCorners.bottomleft.appendChild(r),this._logoContainer=r))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(e){var t,i=e.src.match(this._roadRegexp),n=0;i?(t={z:i[1],x:i[2],y:i[3]},1<this._imagesPerTile&&(n=e.style.zIndex=1)):((i=e.src.match(this._satRegexp))&&(t={x:i[1],y:i[2],z:i[3]}),n=0),t?(t=this._tileCoordsToKey(t),e.style.position="absolute",e.style.visibility="hidden",n=t+"/"+n,this._lru.set(n,e),n in this._tileCallbacks&&this._tileCallbacks[n]&&(this._tileCallbacks[n].forEach(function(t){return t(e)}),delete this._tileCallbacks[n])):e.src.match(this._staticRegExp)&&(e.style.visibility="hidden")},createTile:function(t,i){var e=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.style.textAlign="left",n.dataset.pending=this._imagesPerTile,i=i.bind(this,null,n);for(var o=0;o<this._imagesPerTile;++o){var r=e+"/"+o,a=this._lru.get(r);a?(n.appendChild(this._clone(a)),--n.dataset.pending):(this._tileCallbacks[r]=this._tileCallbacks[r]||[],this._tileCallbacks[r].push(function(e){return function(t){e.appendChild(this._clone(t)),--e.dataset.pending,parseInt(e.dataset.pending)||i()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(i),n},_clone:function(t){t=t.cloneNode(!0);return t.style.visibility="visible",t},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(){var t,e,i;this._mutant&&(i=this._map.getCenter(),t=new google.maps.LatLng(i.lat,i.lng),e=Math.round(this._map.getZoom()),i=this._mutant.getZoom(),this._mutant.setCenter(t),e!==i&&(this._mutant.setZoom(e),this._mutantIsReady&&this._checkZoomLevels())),L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this.options.zoomSnap<1?1.8:1,t=this._map.getSize().multiplyBy(t);this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){var t;this._mutant&&(t=this._map.getCenter(),t=new google.maps.LatLng(t.lat,t.lng),this._mutant.setCenter(t),this._mutant.setZoom(Math.round(this._map.getZoom())))}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}}()},687:function(t,e,i){var n,o,r;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/
o=function(s){function i(e,i,t){(t=t.split(" ")).forEach(function(t){s.DomUtil[e].call(this,i,t)})}function e(t,e){i("addClass",t,e)}function n(t,e){i("removeClass",t,e)}var t=s.Marker.extend({initialize:function(t,e){s.Util.setOptions(this,e),this._latlng=t,this.createIcon()},createIcon:function(){var t=this.options,e="";void 0!==t.color&&(e+="stroke:"+t.color+";"),void 0!==t.weight&&(e+="stroke-width:"+t.weight+";"),void 0!==t.fillColor&&(e+="fill:"+t.fillColor+";"),void 0!==t.fillOpacity&&(e+="fill-opacity:"+t.fillOpacity+";"),void 0!==t.opacity&&(e+="opacity:"+t.opacity+";");e=this._getIconSVG(t,e);this._locationIcon=s.divIcon({className:e.className,html:e.svg,iconSize:[e.w,e.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var i=t.radius,n=i+t.weight,t=2*n;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+t+'" version="1.1" viewBox="-'+n+" -"+n+" "+t+" "+t+'"><circle r="'+i+'" style="'+e+'" /></svg>',w:t,h:t}},setStyle:function(t){s.Util.setOptions(this,t),this.createIcon()}}),o=t.extend({initialize:function(t,e,i){s.Util.setOptions(this,i),this._latlng=t,this._heading=e,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var i=t.radius,n=t.width+t.weight,i=2*(i+t.depth+t.weight),t="M0,0 l"+t.width/2+","+t.depth+" l-"+n+",0 z";return{className:"leaflet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+i+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+i+'" style="'+("transform: rotate("+this._heading+"deg)")+'"><path d="'+t+'" style="'+e+'" /></svg>',w:n,h:i}}}),o=s.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:t,compassClass:o,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(t,e){t=s.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",t);return t.title=e.strings.title,t.role="button",t.href="#",{link:t,icon:s.DomUtil.create(e.iconElementTag,e.icon,t)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(t){for(var e in t)"object"==typeof this.options[e]?s.extend(this.options[e],t[e]):this.options[e]=t[e];this.options.followMarkerStyle=s.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=s.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=s.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(t){var e=s.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=e,this._map=t,this._layer=this.options.layer||new s.LayerGroup,this._layer.addTo(t),this._event=void 0,this._compassHeading=null,this._prevBounds=null;t=this.options.createButtonCallback(e,this.options);return this._link=t.link,this._icon=t.icon,s.DomEvent.on(this._link,"click",function(t){s.DomEvent.stopPropagation(t),s.DomEvent.preventDefault(t),this._onClick()},this).on(this._link,"dblclick",s.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),e},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){var e=this.options.clickBehavior,i=e.outOfView;switch(i=e[i=this._map.getBounds().contains(this._event.latlng)?t?e.inView:e.inViewNotFollowing:i]?e[i]:i){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){var t,e,i;this._active||(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),!this.options.showCompass||((t="ondeviceorientationabsolute"in window)||"ondeviceorientation"in window)&&(e=this,i=function(){s.DomEvent.on(window,t?"deviceorientationabsolute":"deviceorientation",e._onDeviceOrientation,e)},DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&i()}):i()))},_deactivate:function(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?s.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&s.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){var t;this._drawMarker(),this._isOutsideMapBounds()?(this._event=void 0,this.options.onLocationOutsideMapBounds(this)):this._justClicked&&!1!==this.options.initialZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel):this.options.keepCurrentZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]):(t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds,this._ignoreEvent=!0,t.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),s.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this))},_drawCompass:function(){var t,e;this._event&&(t=this._event.latlng,this.options.showCompass&&t&&null!==this._compassHeading&&(e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle,this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)),!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null))},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var t,e,i,n=this._event.accuracy,o=this._event.latlng;this.options.drawCircle&&(t=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle,this._circle?this._circle.setLatLng(o).setRadius(n).setStyle(t):this._circle=s.circle(o,n,t).addTo(this._layer)),i=this.options.metric?(e=n.toFixed(0),this.options.strings.metersUnit):(e=(3.2808399*n).toFixed(0),this.options.strings.feetUnit),this.options.drawMarker&&(n=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle,this._marker?(this._marker.setLatLng(o),this._marker.setStyle&&this._marker.setStyle(n)):this._marker=new this.options.markerClass(o,n).addTo(this._layer)),this._drawCompass();var r=this.options.strings.popup;function a(){return"string"==typeof r?s.Util.template(r,{distance:e,unit:i}):"function"==typeof r?r({distance:e,unit:i}):r}this.options.showPopup&&r&&this._marker&&this._marker.bindPopup(a())._popup.setLatLng(o),this.options.showPopup&&r&&this._compass&&this._compass.bindPopup(a())._popup.setLatLng(o)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(t){!isNaN(parseFloat(t))&&isFinite(t)?(t=Math.round(t),this._compassHeading=t,s.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(n(this._container,"active following"),e(this._container,"requesting"),n(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),e(this._container,"active"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),e(this._container,"active following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses:function(){s.DomUtil.removeClass(this._container,"requesting"),s.DomUtil.removeClass(this._container,"active"),s.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return s.control.locate=function(t){return new s.Control.Locate(t)},o},r=window,n=[i(5243)],void 0===(i="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=i),void 0!==r&&r.L&&(r.L.Control.Locate=o(L))},5732:function(t,e){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):(t.getLatLng?this._map?t.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow())):(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t})):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t})),this)},addLayers:function(i,n){if(!L.Util.isArray(i))return this.addLayer(i);var o,r=this._featureGroup,a=this._nonPointGroup,s=this.options.chunkedLoading,l=this.options.chunkInterval,u=this.options.chunkProgress,h=i.length,c=0,d=!0;if(this._map){var p=(new Date).getTime(),f=L.bind(function(){var t=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();c<h;c++){if(s&&c%200==0){var e=(new Date).getTime()-t;if(l<e)break}(o=i[c])instanceof L.LayerGroup?(d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(o,i),h=i.length):o.getLatLng?this.hasLayer(o)||(this._addLayer(o,this._maxZoom),n||this.fire("layeradd",{layer:o}),o.__parent&&2===o.__parent.getChildCount()&&(e=(e=o.__parent.getAllChildMarkers())[0]===o?e[1]:e[0],r.removeLayer(e))):(a.addLayer(o),n||this.fire("layeradd",{layer:o}))}u&&u(c,h,(new Date).getTime()-p),c===h?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(f,this.options.chunkDelay)},this);f()}else for(var t=this._needsClustering;c<h;c++)(o=i[c])instanceof L.LayerGroup?(d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(o,i),h=i.length):o.getLatLng?this.hasLayer(o)||t.push(o):a.addLayer(o);return this},removeLayers:function(t){var e,i=t.length,n=this._featureGroup,o=this._nonPointGroup,r=!0;if(!this._map){for(l=0;l<i;l++)(e=t[l])instanceof L.LayerGroup?(r&&(t=t.slice(),r=!1),this._extractNonGroupLayers(e,t),i=t.length):(this._arraySplice(this._needsClustering,e),o.removeLayer(e),this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}));return this}if(this._unspiderfy){this._unspiderfy();for(var a=t.slice(),s=i,l=0;l<s;l++)(e=a[l])instanceof L.LayerGroup?(this._extractNonGroupLayers(e,a),s=a.length):this._unspiderfyLayer(e)}for(l=0;l<i;l++)(e=t[l])instanceof L.LayerGroup?(r&&(t=t.slice(),r=!1),this._extractNonGroupLayers(e,t),i=t.length):e.__parent?(this._removeLayer(e,!0,!0),this.fire("layerremove",{layer:e}),n.hasLayer(e)&&(n.removeLayer(e),e.clusterShow&&e.clusterShow())):(o.removeLayer(e),this.fire("layerremove",{layer:e}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;0<=e;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,o,r=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),n=r.length-1;0<=n;n--){for(i=!0,o=a.length-1;0<=o;o--)if(a[o].layer===r[n]){i=!1;break}i&&t.call(e,r[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var i=null;return e=parseInt(e,10),this.eachLayer(function(t){L.stamp(t)===e&&(i=t)}),i},hasLayer:function(t){if(!t)return!1;for(var e=this._needsClustering,i=e.length-1;0<=i;i--)if(e[i]===t)return!0;for(i=(e=this._needsRemoving).length-1;0<=i;i--)if(e[i].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;"function"!=typeof e&&(e=function(){});var n=function(){!i.hasLayer(t)&&!i.hasLayer(t.__parent)||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)(n=this._needsRemoving[e]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;0<=i;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());o<=e&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){var e;this._ignoreMove||t.target.__dragStart||(e=t.target._popup&&t.target._popup.isOpen(),this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup())},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,u=t.__parent,h=u._markers;for(this._arraySplice(h,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<s));)e&&u._childCount<=1?(l=u._markers[0]===t?u._markers[1]:u._markers[0],n[u._zoom].removeObject(u,a.project(u._cLatLng,u._zoom)),o[u._zoom].addObject(l,a.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(r.removeLayer(u),i||r.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),t=" marker-cluster-";return t+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+t,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,i=e;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),2<t.layer.getChildCount()&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){var t;this._inZoomAnimation||(t=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t)},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n="function"!=typeof i?function(){return i}:i;null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var o=t;e<=o;o--)this._gridClusters[o]=new L.DistanceGrid(n(o)),this._gridUnclustered[o]=new L.DistanceGrid(n(o));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n=this._gridClusters,o=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);r<=e;e--){i=this._map.project(t.getLatLng(),e);var a=n[e].getNearObject(i);if(a)return a._addChild(t),void(t.__parent=a);if(a=o[e].getNearObject(i)){var s=a.__parent;s&&this._removeLayer(a,!1);var l=new this._markerCluster(this,e,a,t);n[e].addObject(l,this._map.project(l._cLatLng,e)),a.__parent=l;for(var u=t.__parent=l,h=e-1;h>s._zoom;h--)u=new this._markerCluster(this,h,u),n[h].addObject(u,this._map.project(a.getLatLng(),h));return s._addChild(u),void this._removeFromGridUnclustered(a,e)}o[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){e===t?this._featureGroup.addLayer(t):2===e._childCount?(e._addToMap(),t=e.getAllChildMarkers(),this._featureGroup.removeLayer(t[0]),this._featureGroup.removeLayer(t[1])):e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),o=0;for(e=e||[];o<n.length;o++)(i=n[o])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(o,r){var a,s=this._getExpandedVisibleBounds(),l=this._featureGroup,t=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(s,o,t,function(t){var e,i=t._latlng,n=t._markers;for(s.contains(i)||(i=null),t._isSingleParent()&&o+1===r?(l.removeLayer(t),t._recursivelyAddChildrenToMap(null,r,s)):(t.clusterHide(),t._recursivelyAddChildrenToMap(i,r,s)),a=n.length-1;0<=a;a--)e=n[a],s.contains(e._latlng)||l.removeLayer(e)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,r),l.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(s,o,r,function(t){t._recursivelyRestoreChildPositions(r)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,o,t,function(t){l.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(2<e._childCount?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,i,n){var o=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(o,r,i+1,n);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(o,n),this._enqueue(function(){var t;1===e._childCount?(t=e._markers[0],this._ignoreMove=!0,t.setLatLng(t.getLatLng()),this._ignoreMove=!1,t.clusterShow&&t.clusterShow()):e._recursively(o,n,r,function(t){t._recursivelyRemoveChildrenFromMap(o,r,i+1)}),a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(t);for(var n=this._markers.length-1;0<=n;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),o=this._zoom+1,i=i.getZoom();0<e.length&&o<n;){o++;for(var r=[],a=0;a<e.length;a++)r=r.concat(e[a]._childClusters);e=r}o<n?this._group._map.setView(this._latlng,o):n<=i?this._group._map.setView(this._latlng,i+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n=this._markers,o=this._childClusters,r=0,a=0,s=this._childCount;if(0!==s){for(this._resetBounds(),t=0;t<n.length;t++)e=n[t]._latlng,this._bounds.extend(e),r+=e.lat,a+=e.lng;for(t=0;t<o.length;t++)(i=o[t])._boundsNeedUpdate&&i._recalculateBounds(),this._bounds.extend(i._bounds),e=i._wLatLng,i=i._childCount,r+=e.lat*i,a+=e.lng*i;this._latlng=this._wLatLng=new L.LatLng(r/s,a/s),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,o,e){this._recursively(t,this._group._map.getMinZoom(),e-1,function(t){for(var e,i=t._markers,n=i.length-1;0<=n;n--)(e=i[n])._icon&&(e._setPos(o),e.clusterHide())},function(t){for(var e,i=t._childClusters,n=i.length-1;0<=n;n--)(e=i[n])._icon&&(e._setPos(o),e.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,i,n,o){this._recursively(e,o,i,function(t){t._recursivelyAnimateChildrenIn(e,t._group._map.latLngToLayerPoint(t.getLatLng()).round(),n),t._isSingleParent()&&n-1===o?(t.clusterShow(),t._recursivelyRemoveChildrenFromMap(e,i,n)):t.clusterHide(),t._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(n,o,r){this._recursively(r,this._group._map.getMinZoom()-1,o,function(t){if(o!==t._zoom)for(var e=t._markers.length-1;0<=e;e--){var i=t._markers[e];r.contains(i._latlng)&&(n&&(i._backupLatlng=i.getLatLng(),i.setLatLng(n),i.clusterHide&&i.clusterHide()),t._group._featureGroup.addLayer(i))}},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;0<=e;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n]._restorePosition();else for(var o=this._childClusters.length-1;0<=o;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var o,r;this._recursively(t,e-1,i-1,function(t){for(r=t._markers.length-1;0<=r;r--)o=t._markers[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())},function(t){for(r=t._childClusters.length-1;0<=r;r--)o=t._childClusters[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())})},_recursively:function(t,e,i,n,o){var r,a,s=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),o&&l===i&&o(this)),l<e||l<i)for(r=s.length-1;0<=r;r--)(a=s[r])._boundsNeedUpdate&&a._recalculateBounds(),t.intersects(a._bounds)&&a._recursively(t,e,i,n,o)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,n=o[n]=o[n]||{},n=n[i]=n[i]||[],i=L.Util.stamp(t);this._objectPoint[i]=e,n.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,o=this._getCoord(e.x),r=this._getCoord(e.y),e=this._grid,a=e[r]=e[r]||{},s=a[o]=a[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=s.length;i<n;i++)if(s[i]===t)return s.splice(i,1),1===n&&delete a[o],!0},eachObject:function(t,e){var i,n,o,r,a,s,l=this._grid;for(i in l)for(n in a=l[i])for(o=0,r=(s=a[n]).length;o<r;o++)t.call(e,s[o])&&(o--,r--)},getNearObject:function(t){for(var e,i,n,o,r,a,s,l=this._getCoord(t.x),u=this._getCoord(t.y),h=this._objectPoint,c=this._sqCellSize,d=null,p=u-1;p<=u+1;p++)if(n=this._grid[p])for(e=l-1;e<=l+1;e++)if(o=n[e])for(i=0,r=o.length;i<r;i++)a=o[i],((s=this._sqDist(h[L.Util.stamp(a)],t))<c||s<=c&&null===d)&&(c=s,d=a);return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,t=e.y-t.y;return i*i+t*t}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){for(var i,n,o=0,r=null,a=[],s=e.length-1;0<=s;s--)i=e[s],0<(n=this.getDistant(i,t))&&(a.push(i),o<n&&(o=n,r=i));return{maxPoint:r,newPoints:a}},buildConvexHull:function(t,e){var i=[],e=this.findMostDistantPointFromBaseLine(t,e);return e.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],e.maxPoint],e.newPoints))).concat(this.buildConvexHull([e.maxPoint,t[1]],e.newPoints)):[t[0]]},getConvexHull:function(t){for(var e=!1,i=!1,n=!1,o=!1,r=null,a=null,s=null,l=null,u=null,h=null,c=t.length-1;0<=c;c--){var d=t[c];(!1===e||d.lat>e)&&(e=(r=d).lat),(!1===i||d.lat<i)&&(i=(a=d).lat),(!1===n||d.lng>n)&&(n=(s=d).lng),(!1===o||d.lng<o)&&(o=(l=d).lng)}return u=i!==e?(h=a,r):(h=l,s),[].concat(this.buildConvexHull([h,u],t),this.buildConvexHull([u,h],t))}},L.MarkerCluster.include({getConvexHull:function(){for(var t,e=this.getAllChildMarkers(),i=[],n=e.length-1;0<=n;n--)t=e[n].getLatLng(),i.push(t);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){var t,e;this._group._spiderfied===this||this._group._inZoomAnimation||(t=this.getAllChildMarkers(null,!0),e=this._group._map.latLngToLayerPoint(this._latlng),this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,e):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,e):(e.y+=10,this._generatePointsCircle(t.length,e)),this._animationSpiderfy(t,e))},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,a=[],o=Math.max(o,35);for(a.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*r,a[i]=new L.Point(e.x+o*Math.cos(n),e.y+o*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){for(var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,r=i*this._spiralLengthFactor*this._2PI,a=0,s=[],l=s.length=t;0<=l;l--)l<t&&(s[l]=new L.Point(e.x+n*Math.cos(a),e.y+n*Math.sin(a))._round()),n+=r/(a+=o/n+5e-4*l);return s},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,o=i._featureGroup,r=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=r.length-1;0<=e;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:r}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,o,r,a=this._group,s=a._map,l=a._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,i=0;i<t.length;i++)r=s.layerPointToLatLng(e[i]),n=t[i],o=new L.Polyline([this._latlng,r],u),s.addLayer(o),n._spiderLeg=o,n._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,o,r,a,s,l=this,u=this._group,h=u._map,c=u._featureGroup,d=this._latlng,p=h.latLngToLayerPoint(d),f=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),g=m.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=g,u._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],s=h.layerPointToLatLng(e[i]),o=new L.Polyline([d,s],m),h.addLayer(o),n._spiderLeg=o,f&&(a=(r=o._path).getTotalLength()+.1,r.style.strokeDasharray=a,r.style.strokeDashoffset=a),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),c.addLayer(n),n._setPos&&n._setPos(p);for(u._forceLayout(),u._animationStart(),i=t.length-1;0<=i;i--)s=h.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.clusterShow&&n.clusterShow(),f&&((r=(o=n._spiderLeg)._path).style.strokeDashoffset=0,o.setStyle({opacity:g}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,n,o,r,a=this,s=this._group,l=s._map,u=s._featureGroup,h=t?l._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):l.latLngToLayerPoint(this._latlng),c=this.getAllChildMarkers(null,!0),d=L.Path.SVG;for(s._ignoreMove=!0,s._animationStart(),this.setOpacity(1),i=c.length-1;0<=i;i--)(e=c[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,r=!0,e._setPos&&(e._setPos(h),r=!1),e.clusterHide&&(e.clusterHide(),r=!1),r&&u.removeLayer(e),d&&(r=(o=(n=e._spiderLeg)._path).getTotalLength()+.1,o.style.strokeDashoffset=r,n.setStyle({opacity:0})));s._ignoreMove=!1,setTimeout(function(){var t=0;for(i=c.length-1;0<=i;i--)(e=c[i])._spiderLeg&&t++;for(i=c.length-1;0<=i;i--)(e=c[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),1<t&&u.removeLayer(e),l.removeLayer(e._spiderLeg),delete e._spiderLeg);s._animationEnd(),s.fire("unspiderfied",{cluster:a,markers:c})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},5243:function(t,e){
/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e=Object.freeze;function l(t){for(var e,i,n=1,o=arguments.length;n<o;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function d(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function s(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function n(t,e,i){var n,o,r=function(){n=!1,o&&(a.apply(i,o),o=!1)},a=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)};return a}function o(t,e,i){var n=e[1],o=e[0],e=n-o;return t===n&&i?t:((t-o)%e+e)%e+o}function u(){return!1}function a(t,e){e=Math.pow(10,void 0===e?6:e);return Math.round(t*e)/e}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function p(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,i){var n,o=[];for(n in t)o.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,i){return t.replace(m,function(t,e){e=i[e];if(void 0===e)throw new Error("No value provided for variable "+t);return e="function"==typeof e?e(i):e})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var k=window.requestAnimationFrame||x("RequestAnimationFrame")||w,C=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,i){if(!i||k!==w)return k.call(window,d(t,e));t.call(e)}function T(t){t&&C.call(window,t)}var P=(Object.freeze||Object)({freeze:e,extend:l,create:r,bind:d,lastId:i,stamp:s,throttle:n,wrapNum:o,falseFn:u,formatNum:a,trim:h,splitWords:c,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:k,cancelFn:C,requestAnimFrame:M,cancelAnimFrame:T});function S(){}S.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i,n=e.__super__=this.prototype,o=r(n);for(i in(o.constructor=e).prototype=o,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(e[i]=this[i]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),l.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=l(r(o.options),t.options)),l(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},S.include=function(t){return l(this.prototype,t),this},S.mergeOptions=function(t){return l(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},(Ei={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n);for(var t={fn:e,ctx:i=i===this?void 0:i},o=n,r=0,a=o.length;r<a;r++)if(o[r].fn===e&&o[r].ctx===i)return;o.push(t)},_off:function(t,e,i){var n,o,r;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,r=n.length;o<r;o++){var a=n[o];if(a.ctx===i&&a.fn===e)return a.fn=u,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,r=n.length;o<r;o++)n[o].fn=u;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var s=o[r];s.fn.call(s.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=d(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}}).addEventListener=Ei.on,Ei.removeEventListener=Ei.clearAllEventListeners=Ei.off,Ei.addOneTimeEventListener=Ei.once,Ei.fireEvent=Ei.fire,Ei.hasEventListeners=Ei.listens;var A=S.extend(Ei);function D(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var E=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function I(t,e,i){return t instanceof D?t:v(t)?new D(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,e,i)}function O(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function z(t,e){return!t||t instanceof O?t:new O(t,e)}function B(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function F(t,e){return t instanceof B?t:new B(t,e)}function R(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function N(t,e,i){return t instanceof R?t:v(t)&&"object"!=typeof t[0]?3===t.length?new R(t[0],t[1],t[2]):2===t.length?new R(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new R(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new R(t,e,i)}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(I(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(I(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=E(this.x),this.y=E(this.y),this},distanceTo:function(t){var e=(t=I(t)).x-this.x,t=t.y-this.y;return Math.sqrt(e*e+t*t)},equals:function(t){return(t=I(t)).x===this.x&&t.y===this.y},contains:function(t){return t=I(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},O.prototype={extend:function(t){return t=I(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new D(this.min.x,this.max.y)},getTopRight:function(){return new D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t=("number"==typeof t[0]||t instanceof D?I:z)(t))instanceof O?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,t=o.x>=e.x&&n.x<=i.x,i=o.y>=e.y&&n.y<=i.y;return t&&i},overlaps:function(t){t=z(t);var e=this.min,i=this.max,n=t.min,o=t.max,t=o.x>e.x&&n.x<i.x,i=o.y>e.y&&n.y<i.y;return t&&i},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof R)i=e=t;else{if(!(t instanceof B))return t?this.extend(N(t)||F(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new R(e.lat,e.lng),this._northEast=new R(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,t=Math.abs(e.lng-i.lng)*t;return new B(new R(e.lat-n,e.lng-t),new R(i.lat+n,i.lng+t))},getCenter:function(){return new R((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new R(this.getNorth(),this.getWest())},getSouthEast:function(){return new R(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof R||"lat"in t?N:F)(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof B?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=F(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),t=o.lat>=e.lat&&n.lat<=i.lat,i=o.lng>=e.lng&&n.lng<=i.lng;return t&&i},overlaps:function(t){t=F(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),t=o.lat>e.lat&&n.lat<i.lat,i=o.lng>e.lng&&n.lng<i.lng;return t&&i},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var U={latLngToPoint:function(t,e){t=this.projection.project(t),e=this.scale(e);return this.transformation._transform(t,e)},pointToLatLng:function(t,e){e=this.scale(e),e=this.transformation.untransform(t,e);return this.projection.unproject(e)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,t=this.scale(t);return new O(this.transformation.transform(e.min,t),this.transformation.transform(e.max,t))},infinite:!(R.prototype={equals:function(t,e){return!!t&&(t=N(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,N(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,t=e/Math.cos(Math.PI/180*this.lat);return F([this.lat-e,this.lng-t],[this.lat+e,this.lng+t])},clone:function(){return new R(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new R(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,e=e.lng-i.lng;if(0==n&&0==e)return t;i=t.getSouthWest(),t=t.getNorthEast();return new B(new R(i.lat-n,i.lng-e),new R(t.lat-n,t.lng-e))}},Z=l({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),i=Math.sin((e.lng-t.lng)*i/2),i=r*r+Math.cos(n)*Math.cos(o)*i*i,i=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return this.R*i}}),j={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,i=Math.max(Math.min(i,t.lat),-i),i=Math.sin(i*e);return new D(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new R((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new O([-t,-t],[t,t])}()};function H(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function W(t,e,i,n){return new H(t,e,i,n)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new D((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V=l({},Z,{code:"EPSG:3857",projection:j,transformation:function(){var t=.5/(Math.PI*j.R);return W(t,.5,-t,.5)}()}),G=l({},V,{code:"EPSG:900913"});function q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){for(var i,n,o,r,a="",s=0,l=t.length;s<l;s++){for(i=0,n=(o=t[s]).length;i<n;i++)a+=(i?"L":"M")+(r=o[i]).x+" "+r.y;a+=e?kt?"z":"x":""}return a||"M0 0"}var $=document.documentElement.style,J=(Mt="ActiveXObject"in window)&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),X=Ct("webkit"),Q=Ct("android"),tt=Ct("android 2")||Ct("android 3"),et=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=Q&&Ct("Google")&&et<537&&!("AudioNode"in window),nt=!!window.opera,ot=Ct("chrome"),rt=Ct("gecko")&&!X&&!nt&&!Mt,at=!ot&&Ct("safari"),st=Ct("phantom"),lt="OTransition"in $,ut=0===navigator.platform.indexOf("Win"),ht=Mt&&"transition"in $,ct="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tt,dt="MozPerspective"in $,pt=!window.L_DISABLE_3D&&(ht||ct||dt)&&!lt&&!st,ft="undefined"!=typeof orientation||Ct("mobile"),mt=ft&&X,gt=ft&&ct,et=!window.PointerEvent&&window.MSPointerEvent,vt=!(X||!window.PointerEvent&&!et),_t=!window.L_NO_TOUCH&&(vt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),yt=ft&&nt,$=ft&&rt,xt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),bt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(t){}return t},wt=!!document.createElement("canvas").getContext,kt=!(!document.createElementNS||!q("svg").createSVGRect),Lt=!kt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';t=t.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}();function Ct(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Mt=(Object.freeze||Object)({ie:Mt,ielt9:J,edge:Y,webkit:X,android:Q,android23:tt,androidStock:it,opera:nt,chrome:ot,gecko:rt,safari:at,phantom:st,opera12:lt,win:ut,ie3d:ht,webkit3d:ct,gecko3d:dt,any3d:pt,mobile:ft,mobileWebkit:mt,mobileWebkit3d:gt,msPointer:et,pointer:vt,touch:_t,mobileOpera:yt,mobileGecko:$,retina:xt,passiveEvents:bt,canvas:wt,svg:kt,vml:Lt}),Tt=et?"MSPointerDown":"pointerdown",Pt=et?"MSPointerMove":"pointermove",St=et?"MSPointerUp":"pointerup",At=et?"MSPointerCancel":"pointercancel",Dt=["INPUT","SELECT","OPTION"],Et={},It=!1,Ot=0;function zt(t,e,i,n){function o(t){Nt(t,r)}var r,a,s,l,u,h;function c(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Nt(t,a)}return"touchstart"===e?(s=t,l=i,u=n,h=d(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Dt.indexOf(t.target.tagName)<0))return;De(t)}Nt(t,l)}),s["_leaflet_touchstart"+u]=h,s.addEventListener(Tt,h,!1),It||(document.documentElement.addEventListener(Tt,Bt,!0),document.documentElement.addEventListener(Pt,Ft,!0),document.documentElement.addEventListener(St,Rt,!0),document.documentElement.addEventListener(At,Rt,!0),It=!0)):"touchmove"===e?(a=i,(h=t)["_leaflet_touchmove"+n]=c,h.addEventListener(Pt,c,!1)):"touchend"===e&&(r=i,(t=t)["_leaflet_touchend"+n]=o,t.addEventListener(St,o,!1),t.addEventListener(At,o,!1)),this}function Bt(t){Et[t.pointerId]=t,Ot++}function Ft(t){Et[t.pointerId]&&(Et[t.pointerId]=t)}function Rt(t){delete Et[t.pointerId],Ot--}function Nt(t,e){for(var i in t.touches=[],Et)t.touches.push(Et[i]);t.changedTouches=[t],e(t)}var Ut=et?"MSPointerDown":vt?"pointerdown":"touchstart",Zt=et?"MSPointerUp":vt?"pointerup":"touchend",jt="_leaflet_";function Ht(t,o,e){var r,a,s=!1;function i(t){var e,i;if(vt){if(!Y||"mouse"===t.pointerType)return;i=Ot}else i=t.touches.length;1<i||(i=(e=Date.now())-(r||e),a=t.touches?t.touches[0]:t,s=0<i&&i<=250,r=e)}function n(t){if(s&&!a.cancelBubble){if(vt){if(!Y||"mouse"===t.pointerType)return;var e,i,n={};for(i in a)e=a[i],n[i]=e&&e.bind?e.bind(a):e;a=n}a.type="dblclick",a.button=0,o(a),r=null}}return t[jt+Ut+e]=i,t[jt+Zt+e]=n,t[jt+"dblclick"+e]=o,t.addEventListener(Ut,i,!!bt&&{passive:!1}),t.addEventListener(Zt,n,!!bt&&{passive:!1}),t.addEventListener("dblclick",o,!1),this}function Wt(t,e){var i=t[jt+Ut+e],n=t[jt+Zt+e],e=t[jt+"dblclick"+e];return t.removeEventListener(Ut,i,!!bt&&{passive:!1}),t.removeEventListener(Zt,n,!!bt&&{passive:!1}),Y||t.removeEventListener("dblclick",e,!1),this}var Vt,Gt,qt,Kt,$t,Jt,Yt=pe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xt=pe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===Xt||"OTransition"===Xt?Xt+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];return"auto"===(i=(!i||"auto"===i)&&document.defaultView?(t=document.defaultView.getComputedStyle(t,null))?t[e]:null:i)?null:i}function ie(t,e,i){t=document.createElement(t);return t.className=e||"",i&&i.appendChild(t),t}function ne(t){var e=t.parentNode;e&&e.removeChild(t)}function oe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function re(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function se(t,e){if(void 0!==t.classList)return t.classList.contains(e);t=ce(t);return 0<t.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t)}function le(t,e){var i;if(void 0!==t.classList)for(var n=c(e),o=0,r=n.length;o<r;o++)t.classList.add(n[o]);else se(t,e)||he(t,((i=ce(t))?i+" ":"")+e)}function ue(t,e){void 0!==t.classList?t.classList.remove(e):he(t,h((" "+ce(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return void 0===(t=t.correspondingElement?t.correspondingElement:t).className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function pe(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function fe(t,e,i){e=e||new D(0,0);t.style[Yt]=(ht?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(i?" scale("+i+")":"")}function me(t,e){t._leaflet_pos=e,pt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ge(t){return t._leaflet_pos||new D(0,0)}function ve(){ke(window,"dragstart",De)}function _e(){Ce(window,"dragstart",De)}function ye(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),$t=(Kt=t).style.outline,t.style.outline="none",ke(window,"keydown",xe))}function xe(){Kt&&(Kt.style.outline=$t,$t=Kt=void 0,Ce(window,"keydown",xe))}function be(t){for(;t=t.parentNode,!(t.offsetWidth&&t.offsetHeight||t===document.body););return t}function we(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function ke(t,e,i,n){if("object"==typeof e)for(var o in e)Me(t,o,e[o],i);else for(var r=0,a=(e=c(e)).length;r<a;r++)Me(t,e[r],i,n);return this}Gt="onselectstart"in document?(Vt=function(){ke(window,"selectstart",De)},function(){Ce(window,"selectstart",De)}):(Jt=pe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Vt=function(){var t;Jt&&(t=document.documentElement.style,qt=t[Jt],t[Jt]="none")},function(){Jt&&(document.documentElement.style[Jt]=qt,qt=void 0)}),X=(Object.freeze||Object)({TRANSFORM:Yt,TRANSITION:Xt,TRANSITION_END:Qt,get:te,getStyle:ee,create:ie,remove:ne,empty:oe,toFront:re,toBack:ae,hasClass:se,addClass:le,removeClass:ue,setClass:he,getClass:ce,setOpacity:de,testProp:pe,setTransform:fe,setPosition:me,getPosition:ge,disableTextSelection:Vt,enableTextSelection:Gt,disableImageDrag:ve,enableImageDrag:_e,preventOutline:ye,restoreOutline:xe,getSizedParentNode:be,getScale:we});var Le="_leaflet_events";function Ce(t,e,i,n){if("object"==typeof e)for(var o in e)Te(t,o,e[o],i);else if(e)for(var r=0,a=(e=c(e)).length;r<a;r++)Te(t,e[r],i,n);else{for(var s in t[Le])Te(t,s,t[Le][s]);delete t[Le]}return this}function Me(e,t,i,n){var o=t+s(i)+(n?"_"+s(n):"");if(e[Le]&&e[Le][o])return this;var r=function(t){return i.call(n||e,t||window.event)},a=r;vt&&0===t.indexOf("touch")?zt(e,t,r,o):!_t||"dblclick"!==t||vt&&ot?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",r,!!bt&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(r=function(t){t=t||window.event,Ue(e,t)&&a(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",r,!1)):("click"===t&&Q&&(r=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=Be&&i-Be;if(n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated)return Ee(t);Be=i,e(t)}(t,a)}),e.addEventListener(t,r,!1)):"attachEvent"in e&&e.attachEvent("on"+t,r):Ht(e,r,o),e[Le]=e[Le]||{},e[Le][o]=r}function Te(t,e,i,n){var o,r=e+s(i)+(n?"_"+s(n):""),a=t[Le]&&t[Le][r];if(!a)return this;vt&&0===e.indexOf("touch")?(n=(o=t)["_leaflet_"+(i=e)+(n=r)],"touchstart"===i?o.removeEventListener(Tt,n,!1):"touchmove"===i?o.removeEventListener(Pt,n,!1):"touchend"===i&&(o.removeEventListener(St,n,!1),o.removeEventListener(At,n,!1))):!_t||"dblclick"!==e||vt&&ot?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!!bt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a):Wt(t,r),t[Le][r]=null}function Pe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ne(t),this}function Se(t){return Me(t,"mousewheel",Pe),this}function Ae(t){return ke(t,"mousedown touchstart dblclick",Pe),Me(t,"click",Re),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ee(t){return De(t),Pe(t),this}function Ie(t,e){if(!e)return new D(t.clientX,t.clientY);var i=we(e),n=i.boundingClientRect;return new D((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Oe=ut&&ot?2*window.devicePixelRatio:rt?window.devicePixelRatio:1;function ze(t){return Y?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Oe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Be,Fe={};function Re(t){Fe[t.type]=!0}function Ne(t){var e=Fe[t.type];return Fe[t.type]=!1,e}function Ue(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var nt=(Object.freeze||Object)({on:ke,off:Ce,stopPropagation:Pe,disableScrollPropagation:Se,disableClickPropagation:Ae,preventDefault:De,stop:Ee,getMousePosition:Ie,getWheelDelta:ze,fakeStop:Re,skipped:Ne,isExternalTarget:Ue,addListener:ke,removeListener:Ce}),Ze=A.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ge(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){t=this._startPos.add(this._offset.multiplyBy(t));e&&t._round(),me(this._el,t),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),je=A.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(N(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xt&&pt&&!yt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(N(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(pt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(pt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),n=(t instanceof D?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),n=this.containerPointToLatLng(o.add(n));return this.setView(n,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var i=I(e.paddingTopLeft||e.padding||[0,0]),n=I(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};n=n.subtract(i).divideBy(2),i=this.project(t.getSouthWest(),o),t=this.project(t.getNorthEast(),o);return{center:this.unproject(i.add(t).divideBy(2).add(n),o),zoom:o}},fitBounds:function(t,e){if(!(t=F(t)).isValid())throw new Error("Bounds are not valid.");t=this._getBoundsCenterZoom(t,e);return this.setView(t.center,t.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=I(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Ze,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(le(this._mapPane,"leaflet-pan-anim"),i=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var i},flyTo:function(n,o,t){if(!1===(t=t||{}).animate||!pt)return this.setView(n,o,t);this._stop();var r=this.project(this.getCenter()),a=this.project(n),e=this.getSize(),s=this._zoom;n=N(n),o=void 0===o?s:o;var l=Math.max(e.x,e.y),i=l*this.getZoomScale(s,o),u=a.distanceTo(r)||1,h=1.42,c=h*h;function d(t){t=(i*i-l*l+(t?-1:1)*c*c*u*u)/(2*(t?i:l)*c*u),t=Math.sqrt(t*t+1)-t;return t<1e-9?-18:Math.log(t)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function g(t){return l*(f(m)*(p(t=m+h*t)/f(t))-p(m))/c}var v=Date.now(),_=(d(1)-m)/h,y=t.duration?1e3*t.duration:1e3*_*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e=(Date.now()-v)/y,i=(i=e,(1-Math.pow(1-i,1.5))*_);e<=1?(this._flyToFrame=M(t,this),this._move(this.unproject(r.add(a.subtract(r).multiplyBy(g(i)/u)),s),this.getScaleZoom(l/(l*(f(m)/f(m+h*i))),s),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){t=this._getBoundsCenterZoom(t,e);return this.flyTo(t.center,t.zoom,e)},setMaxBounds:function(t){return(t=F(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),t=this._limitCenter(i,this._zoom,F(t));return i.equals(t)||this.panTo(t,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=I((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=I(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),r=this.project(o),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),o=z([s.min.add(i),s.max.subtract(n)]);return o.contains(a)||(this._enforcingBounds=!0,t=r.subtract(a),s=I(a.x+t.x,a.y+t.y),(a.x<o.min.x||a.x>o.max.x)&&(s.x=r.x-t.x,0<t.x?s.x+=l.x-i.x:s.x-=l.x-n.x),(a.y<o.min.y||a.y>o.max.y)&&(s.y=r.y-t.y,0<t.y?s.y+=l.y-i.y:s.y-=l.y-n.y),this.panTo(this.unproject(s),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),o=n.subtract(o);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,t=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+t+"."})},_handleGeolocationResponse:function(t){var e,i=new R(t.coords.latitude,t.coords.longitude),n=i.toBounds(2*t.coords.accuracy),o=this._locateOptions;o.setView&&(e=this.getBoundsZoom(n),this.setView(i,o.maxZoom?Math.min(e,o.maxZoom):e));var r,a={latlng:i,bounds:n,timestamp:t.timestamp};for(r in t.coords)"number"==typeof t.coords[r]&&(a[r]=t.coords[r]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;e=this[t]=new e(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ne(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){e=ie("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=F(t),i=I(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),t=this.getSize().subtract(i),i=z(this.project(s,n),this.project(a,n)).getSize(),s=pt?this.options.zoomSnap:1,a=t.x/i.x,i=t.y/i.y,i=e?Math.max(a,i):Math.min(a,i),n=this.getScaleZoom(i,n);return s&&(n=Math.round(n/(s/100))*(s/100),n=e?Math.ceil(n/s)*s:Math.floor(n/s)*s),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){e=this._getTopLeftPoint(t,e);return new O(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;e=i.zoom(t*i.scale(e));return isNaN(e)?1/0:e},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(N(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(I(t),e)},layerPointToLatLng:function(t){t=I(t).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(t){return this.project(N(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(N(t),N(e))},containerPointToLayerPoint:function(t){return I(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return I(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){t=this.containerPointToLayerPoint(I(t));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return Ie(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){t=this._container=te(t);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");ke(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&pt,le(t,"leaflet-container"+(_t?" leaflet-touch":"")+(xt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(at?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){me(this._mapPane,new D(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Ce:ke;e((this._targets[s(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),pt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((i=this._targets[s(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!Ue(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n=!(n.length||a||o)&&Ue(r,t)?[this]:n},_handleDOMEvent:function(t){var e;this._loaded&&!Ne(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ye(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type&&((o=l({},t)).type="preclick",this._fireDOMEvent(o,o.type,i)),!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var n=i[0];"contextmenu"===e&&n.listens(e,!0)&&De(t);var o,r={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(o=n.getLatLng&&(!n._radius||n._radius<=10),r.containerPoint=o?this.latLngToContainerPoint(n.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=o?n.getLatLng():this.layerPointToLatLng(r.layerPoint));for(var a=0;a<i.length;a++)if(i[a].fire(e,r,!0),r.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ge(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){i=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,i){i=this._getNewPixelOrigin(i,e);return z([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),o=new O(n.subtract(o),n.add(o)),i=this._getBoundsOffset(o,i,e);return i.round().equals([0,0])?t:this.unproject(n.add(i),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),i=new O(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,i){e=z(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),i=e.min.subtract(t.min),t=e.max.subtract(t.max);return new D(this._rebound(i.x,-t.x),this._rebound(i.y,-t.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=pt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){t=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(t))&&(this.panBy(t,e),!0)},_createAnimProxy:function(){var t=this._proxy=ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Yt,i=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),n=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(n))&&(M(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M(function(){this._moveEnd(!0)},this))}}),He=S.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),t=t._controlCorners[i];return le(e,"leaflet-control"),-1!==i.indexOf("bottom")?t.insertBefore(e,t.firstChild):t.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),st=function(t){return new He(t)};je.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",r=this._controlContainer=ie("div",o+"control-container",this._container);function t(t,e){var i=o+t+" "+o+e;n[t+e]=ie("div",i,r)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ne(this._controlCorners[t]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var We=He.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return He.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);t=this._getLayer(s(t));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ie("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ae(e),Se(e);var n=this._section=ie("section",t+"-list");i&&(this._map.on("click",this.collapse,this),Q||ke(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ie("a",t+"-toggle",e);o.href="#",o.title="Layers",_t?(ke(o,"click",Ee),ke(o,"click",this.expand,this)):ke(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ie("div",t+"-base",n),this._separator=ie("div",t+"-separator",n),this._overlaysList=ie("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(d(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oe(this._baseLayersList),oe(this._overlaysList),this._layerControlInputs=[];for(var t,e,i,n=0,o=0;o<this._layers.length;o++)i=this._layers[o],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,n+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<n,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),t=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;t&&this._map.fire(t,e)},_createRadioElement:function(t,e){t='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",e=document.createElement("div");return e.innerHTML=t,e.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+s(this),n),this._layerControlInputs.push(e),e.layerId=s(t.layer),ke(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;n=document.createElement("div");return i.appendChild(n),n.appendChild(e),n.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;0<=r;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;0<=o;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ve=He.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ie("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){n=ie("a",i,n);return n.innerHTML=t,n.href="#",n.title=e,n.setAttribute("role","button"),n.setAttribute("aria-label",e),Ae(n),ke(n,"click",Ee),ke(n,"click",o,this),ke(n,"click",this._refocusOnMap,this),n},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ue(this._zoomInButton,e),ue(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||le(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||le(this._zoomInButton,e)}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ve,this.addControl(this.zoomControl))});var Ge=He.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ie("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ie("div",e,i)),t.imperial&&(this._iScale=ie("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i=3.2808399*t;5280<i?(e=i/5280,t=this._getRoundNum(e),this._updateScale(this._iScale,t+" mi",t/e)):(e=this._getRoundNum(i),this._updateScale(this._iScale,e+" ft",e/i))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),t=t/e;return e*(t=10<=t?10:5<=t?5:3<=t?3:2<=t?2:1)}}),qe=He.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=ie("div","leaflet-control-attribution"),Ae(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t,e=[];for(t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&(new qe).addTo(this)}),He.Layers=We,He.Zoom=Ve,He.Scale=Ge,He.Attribution=qe,st.layers=function(t,e,i){return new We(t,e,i)},st.zoom=function(t){return new Ve(t)},st.scale=function(t){return new Ge(t)},st.attribution=function(t){return new qe(t)},(lt=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}})).addTo=function(t,e){return t.addHandler(e,this),this};var Ke,ct={Events:Ei},$e=_t?"touchstart mousedown":"mousedown",Je={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ye={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Xe=A.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(ke(this._dragStartTarget,$e,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xe._dragging===this&&this.finishDrag(),Ce(this._dragStartTarget,$e,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,i;!t._simulated&&this._enabled&&(this._moved=!1,se(this._element,"leaflet-zoom-anim")||Xe._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((Xe._dragging=this)._preventOutline&&ye(this._element),ve(),Vt(),this._moving||(this.fire("down"),e=t.touches?t.touches[0]:t,i=be(this._element),this._startPoint=new D(e.clientX,e.clientY),this._parentScale=we(i),ke(document,Ye[t.type],this._onMove,this),ke(document,Je[t.type],this._onUp,this))))},_onMove:function(t){var e;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((e=new D((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ge(this._element).subtract(e),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ye)Ce(document,Ye[t],this._onMove,this),Ce(document,Je[t],this._onUp,this);_e(),Gt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Xe._dragging=!1}});function Qe(t,e){if(!e||!t.length)return t.slice();e*=e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,o,r){var a,s,l,u=0;for(s=o+1;s<=r-1;s++)l=oi(e[s],e[o],e[r],!0),u<l&&(a=s,u=l);n<u&&(i[a]=1,t(e,i,n,o,a),t(e,i,n,a,r))}(t,n,e,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(t[o]);return r}(t=function(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;n<r;n++)(function(t,e){var i=e.x-t.x,t=e.y-t.y;return i*i+t*t})(t[n],t[o])>e&&(i.push(t[n]),o=n);o<r-1&&i.push(t[r-1]);return i}(t,e),e)}function ti(t,e,i){return Math.sqrt(oi(t,e,i,!0))}function ei(t,e,i,n,o){var r,a,s,l=n?Ke:ni(t,i),u=ni(e,i);for(Ke=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=ni(a=ii(t,e,r=l||u,i,o),i),r===l?(t=a,l=s):(e=a,u=s)}}function ii(t,e,i,n,o){var r,a,s=e.x-t.x,l=e.y-t.y,e=n.min,n=n.max;return 8&i?(r=t.x+s*(n.y-t.y)/l,a=n.y):4&i?(r=t.x+s*(e.y-t.y)/l,a=e.y):2&i?(r=n.x,a=t.y+l*(n.x-t.x)/s):1&i&&(r=e.x,a=t.y+l*(e.x-t.x)/s),new D(r,a,o)}function ni(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function oi(t,e,i,n){var o=e.x,r=e.y,a=i.x-o,s=i.y-r,e=a*a+s*s;return 0<e&&(1<(e=((t.x-o)*a+(t.y-r)*s)/e)?(o=i.x,r=i.y):0<e&&(o+=a*e,r+=s*e)),a=t.x-o,s=t.y-r,n?a*a+s*s:new D(o,r)}function ri(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function ai(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ri(t)}function si(t,e,i){for(var n,o,r,a,s,l,u,h=[1,4,2,8],c=0,d=t.length;c<d;c++)t[c]._code=ni(t[c],e);for(r=0;r<4;r++){for(l=h[r],n=[],c=0,o=(d=t.length)-1;c<d;o=c++)a=t[c],s=t[o],a._code&l?s._code&l||((u=ii(s,a,l,e,i))._code=ni(u,e),n.push(u)):(s._code&l&&((u=ii(s,a,l,e,i))._code=ni(u,e),n.push(u)),n.push(a));t=n}return t}dt=(Object.freeze||Object)({simplify:Qe,pointToSegmentDistance:ti,closestPointOnSegment:function(t,e,i){return oi(t,e,i)},clipSegment:ei,_getEdgeIntersection:ii,_getBitCode:ni,_sqClosestPointOnSegment:oi,isFlat:ri,_flat:ai});var mt=(Object.freeze||Object)({clipPolygon:si}),gt={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new R(t.y,t.x)},bounds:new O([-180,-90],[180,90])},li={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),o=r*Math.sin(n),r=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),r/2),n=-i*Math.log(Math.max(r,1e-10));return new D(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new R(s*i,t.x*i/n)}},$=(Object.freeze||Object)({LonLat:gt,Mercator:li,SphericalMercator:j}),et=l({},Z,{code:"EPSG:3395",projection:li,transformation:function(){var t=.5/(Math.PI*li.R);return W(t,.5,-t,.5)}()}),ui=l({},Z,{code:"EPSG:4326",projection:gt,transformation:W(1/180,1,-1/180,.5)}),ut=l({},U,{projection:gt,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,t=e.lat-t.lat;return Math.sqrt(i*i+t*t)},infinite:!0});U.Earth=Z,U.EPSG3395=et,U.EPSG3857=V,U.EPSG900913=G,U.EPSG4326=ui,U.Simple=ut;var hi=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,i=t.target;i.hasLayer(this)&&(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents&&(e=this.getEvents(),i.on(e,this),this.once("remove",function(){i.off(e,this)},this)),this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this}))}});je.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){t=s(t);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,n=this._getZoomSpan();for(t in this._zoomBoundLayers)var o=this._zoomBoundLayers[t].options,e=void 0===o.minZoom?e:Math.min(e,o.minZoom),i=void 0===o.maxZoom?i:Math.max(i,o.maxZoom);this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ci=hi.extend({initialize:function(t,e){var i,n;if(p(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){t=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:s}),di=ci.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ci.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?((t=t in this._layers?this._layers[t]:t).removeEventParent(this),ci.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t,e=new B;for(t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),pi=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}e=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(e,t),e},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"],o=I(n="number"==typeof n?[n,n]:n),n=I("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return xt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),fi=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return fi.imagePath||(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+pi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ie("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),mi=lt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xe(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=ge(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),o=z(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));o.contains(r)||(n=I((Math.max(o.max.x,r.x)-o.max.x)/(a.max.x-o.max.x)-(Math.min(o.min.x,r.x)-o.min.x)/(a.min.x-o.min.x),(Math.max(o.max.y,r.y)-o.max.y)/(a.max.y-o.max.y)-(Math.min(o.min.y,r.y)-o.min.y)/(a.min.y-o.min.y)).multiplyBy(n),i.panBy(n,{animate:!1}),this._draggable._newPos._add(n),this._draggable._startPos._add(n),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ge(e._icon),o=e._map.layerPointToLatLng(n);i&&me(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),gi=hi.extend({options:{icon:new fi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),le(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),i=!1;o!==this._shadow&&(this._removeShadow(),i=!0),o&&(le(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&i&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(t)},_initInteraction:function(){var t;this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mi&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mi(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),vi=hi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),_i=vi.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return vi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),i=[t+i,e+i];this._pxBounds=new O(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),yi=_i.extend({initialize:function(t,e,i){if(p(this,e="number"==typeof e?l({},i,{radius:e}):e),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:vi.prototype.setStyle,_project:function(){var t,e,i,n,o,r=this._latlng.lng,a=this._latlng.lat,s=this._map,l=s.options.crs;l.distance===Z.distance?(o=Math.PI/180,t=this._mRadius/Z.R/o,e=s.project([a+t,r]),n=s.project([a-t,r]),i=e.add(n).divideBy(2),n=s.unproject(i).lat,o=Math.acos((Math.cos(t*o)-Math.sin(a*o)*Math.sin(n*o))/(Math.cos(a*o)*Math.cos(n*o)))/o,!isNaN(o)&&0!==o||(o=t/Math.cos(Math.PI/180*a)),this._point=i.subtract(s.getPixelOrigin()),this._radius=isNaN(o)?0:i.x-s.project([n,r-o]).x,this._radiusY=i.y-e.y):(l=l.unproject(l.project(this._latlng).subtract([this._mRadius,0])),this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(l).x),this._updateBounds()}}),xi=vi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=oi,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,h=l.length;u<h;u++){var c=r(t,e=l[u-1],i=l[u],!0);c<n&&(n=c,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,a=this._rings[0],s=a.length;if(!s)return null;for(e=t=0;t<s-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(i=t=0;t<s-1;t++)if(n=a[t],o=a[t+1],e<(i+=r=n.distanceTo(o)))return r=(i-e)/r,this._map.layerPointToLatLng([o.x-r*(o.x-n.x),o.y-r*(o.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=N(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return ri(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=ri(t),n=0,o=t.length;n<o;n++)i?(e[n]=N(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),t=new D(t,t);this._pxBounds=new O([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof R,a=t.length;if(r){for(o=[],n=0;n<a;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,i,n,o,r=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(e=0,i=(o=this._rings[a]).length;e<i-1;e++)(n=ei(o[e],o[e+1],t,e,!0))&&(r[s]=r[s]||[],r[s].push(n[0]),n[1]===o[e+1]&&e!==i-2||(r[s].push(n[1]),s++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=Qe(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(a=(s=this._parts[i]).length)-1;n<a;o=n++)if((e||0!==n)&&ti(t,s[o],s[n])<=l)return!0;return!1}});xi._flat=ai;var bi=xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,a,s,l,u=this._rings[0],h=u.length;if(!h)return null;for(t=r=a=s=0,e=h-1;t<h;e=t++)i=u[t],n=u[e],o=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*o,s+=(i.y+n.y)*o,r+=3*o;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=xi.prototype._convertLatLngs.call(this,t),t=e.length;return 2<=t&&e[0]instanceof R&&e[0].equals(e[t-1])&&e.pop(),e},_setLatLngs:function(t){xi.prototype._setLatLngs.call(this,t),ri(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(ri(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,e=new D(e,e),t=new O(t.min.subtract(e),t.max.add(e));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,n=0,o=this._rings.length;n<o;n++)(i=si(this._rings[n],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,r,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(e=this._parts[o]).length)-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||xi.prototype._containsPoint.call(this,t,!0)}}),wi=di.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=v(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=ki(t,r);return a?(a.feature=Ai(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ki(t,e){var i,n,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,h=e&&e.coordsToLatLng||Ci;if(!s&&!a)return null;switch(a.type){case"Point":return Li(u,t,i=h(s),e);case"MultiPoint":for(o=0,r=s.length;o<r;o++)i=h(s[o]),l.push(Li(u,t,i,e));return new di(l);case"LineString":case"MultiLineString":return n=Mi(s,"LineString"===a.type?0:1,h),new xi(n,e);case"Polygon":case"MultiPolygon":return n=Mi(s,"Polygon"===a.type?1:2,h),new bi(n,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var c=ki({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new di(l);default:throw new Error("Invalid GeoJSON object.")}}function Li(t,e,i,n){return t?t(e,i):new gi(i,n&&n.markersInheritOptions&&n)}function Ci(t){return new R(t[1],t[0],t[2])}function Mi(t,e,i){for(var n,o=[],r=0,a=t.length;r<a;r++)n=e?Mi(t[r],e-1,i):(i||Ci)(t[r]),o.push(n);return o}function Ti(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Pi(t,e,i,n){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?Pi(t[r],e-1,i,n):Ti(t[r],n));return!e&&i&&o.push(o[0]),o}function Si(t,e){return t.feature?l({},t.feature,{geometry:e}):Ai(e)}function Ai(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Di(t,e){return new wi(t,e)}rt={toGeoJSON:function(t){return Si(this,{type:"Point",coordinates:Ti(this.getLatLng(),t)})}},gi.include(rt),yi.include(rt),_i.include(rt),xi.include({toGeoJSON:function(t){var e=!ri(this._latlngs);return Si(this,{type:(e?"Multi":"")+"LineString",coordinates:Pi(this._latlngs,e?1:0,!1,t)})}}),bi.include({toGeoJSON:function(t){var e=!ri(this._latlngs),i=e&&!ri(this._latlngs[0]),t=Pi(this._latlngs,i?2:e?1:0,!0,t);return Si(this,{type:(i?"Multi":"")+"Polygon",coordinates:t=!e?[t]:t})}}),ci.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)}),Si(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var i="GeometryCollection"===t,n=[];return this.eachLayer(function(t){t.toGeoJSON&&(t=t.toGeoJSON(e),i?n.push(t.geometry):"FeatureCollection"===(t=Ai(t)).type?n.push.apply(n,t.features):n.push(t))}),i?Si(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Ei=Di,Ii=hi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=F(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&re(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ie("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),t=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,t,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();me(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Oi=Ii.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ie("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=d(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=0<i.length?n:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var r=0;r<this._url.length;r++){var a=ie("source");a.src=this._url[r],e.appendChild(a)}}}}),zi=Ii.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=u,t.onmousemove=u}}),Bi=hi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(d(ne,void 0,this._container),200)):ne(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&re(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof hi||(i=e,e=t),e instanceof di)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,i;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),i=I(this.options.offset),e=this._getAnchor(),this._zoomAnimated?me(this._container,t.add(e)):i=i.add(t).add(e),e=this._containerBottom=-i.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+i.x,this._container.style.bottom=e+"px",this._container.style.left=i+"px")},_getAnchor:function(){return[0,0]}}),Fi=Bi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Bi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vi||this._source.on("preclick",Pe))},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vi||this._source.off("preclick",Pe))},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ie("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ie("div",t+"-content-wrapper",e);this._contentNode=ie("div",t+"-content",i),Ae(i),Se(this._contentNode),ke(i,"contextmenu",Pe),this._tipContainer=ie("div",t+"-tip-container",e),this._tip=ie("div",t+"-tip",this._tipContainer),this.options.closeButton&&((e=this._closeButton=ie("a",t+"-close-button",e)).href="#close",e.innerHTML="&#215;",ke(e,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth,i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,i="leaflet-popup-scrolled";o&&o<n?(e.height=o+"px",le(t,i)):ue(t,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),t=this._getAnchor();me(this._container,e.add(t))},_adjustPan:function(){var t,e,i,n,o,r,a,s,l;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,a=parseInt(ee(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+a,i=this._containerWidth,(s=new D(this._containerLeft,-e-this._containerBottom))._add(ge(this._container)),n=t.layerPointToContainerPoint(s),l=I(this.options.autoPanPadding),o=I(this.options.autoPanPaddingTopLeft||l),r=I(this.options.autoPanPaddingBottomRight||l),a=t.getSize(),l=s=0,n.x+i+r.x>a.x&&(s=n.x+i-a.x+r.x),n.x-s-o.x<0&&(s=n.x-o.x),n.y+e+r.y>a.y&&(l=n.y+e-a.y+r.y),n.y-l-o.y<0&&(l=n.y-o.y),(s||l)&&t.fire("autopanstart").panBy([s,l]))},_onCloseButtonClick:function(t){this._close(),Ee(t)},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(t,e,i){return t instanceof Fi||(t=new Fi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),hi.include({bindPopup:function(t,e){return t instanceof Fi?(p(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new Fi(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ee(t),e instanceof vi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ri=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Bi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return _t&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ie("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,s=i.offsetHeight,l=I(this.options.offset),e=this._getAnchor();t="top"===r?t.add(I(-a/2+l.x,-s+l.y+e.y,!0)):"bottom"===r?t.subtract(I(a/2-l.x,-l.y,!0)):"center"===r?t.subtract(I(a/2+l.x,s/2-e.y+l.y,!0)):"right"===r||"auto"===r&&o.x<n.x?(r="right",t.add(I(l.x+e.x,e.y-s/2+l.y,!0))):(r="left",t.subtract(I(a+e.x-l.x,s/2-e.y-l.y,!0))),ue(i,"leaflet-tooltip-right"),ue(i,"leaflet-tooltip-left"),ue(i,"leaflet-tooltip-top"),ue(i,"leaflet-tooltip-bottom"),le(i,"leaflet-tooltip-"+r),me(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(t)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});je.include({openTooltip:function(t,e,i){return t instanceof Ri||(t=new Ri(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),hi.include({bindTooltip:function(t,e){return t instanceof Ri?(p(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new Ri(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,i;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),_t&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(t=this._map.mouseEventToContainerPoint(t.originalEvent),t=this._map.containerPointToLayerPoint(t),e=this._map.layerPointToLatLng(t)),this._tooltip.setLatLng(e)}});var Ni=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),t=this.options;return t.html instanceof Element?(oe(e),e.appendChild(t.html)):e.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=I(t.bgPos),e.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});pi.Default=fi;var Ui=hi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ft,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ne(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){de(this._container,this.options.opacity);var t,e=+new Date,i=!1,n=!1;for(t in this._tiles){var o,r=this._tiles[t];r.current&&r.loaded&&(o=Math.min(1,(e-r.loaded)/200),de(r.el,o),o<1?i=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0))}n&&!this._noPrune&&this._pruneTiles(),i&&(T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ne(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),u(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(i=this._tiles[t]).retain=i.current;for(t in this._tiles)(i=this._tiles[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ne(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),t=Math.floor(e/2),e=i-1,i=new D(+o,+t);i.z=+e;i=this._tileCoordsToKey(i),i=this._tiles[i];return i&&i.active?i.retain=!0:(i&&i.loaded&&(i.retain=!0),n<e&&this._retainParent(o,t,e,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new D(o,r);a.z=i+1;a=this._tileCoordsToKey(a),a=this._tiles[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),i=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();pt?fe(t.el,i,n):me(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(i,this._tileZoom),t=e.project(t,this._tileZoom).floor(),i=e.getSize().divideBy(2*i);return new O(t.subtract(i),t.add(i))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n,e=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(e),r=o.getCenter(),a=[],e=this.options.keepBuffer,s=new O(o.getBottomLeft().subtract([e,-e]),o.getTopRight().add([e,-e]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var l=this._tiles[n].coords;l.z===this._tileZoom&&s.contains(new D(l.x,l.y))||(this._tiles[n].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var h=o.min.x;h<=o.max.x;h++){var c,d=new D(h,u);d.z=this._tileZoom,this._isValidTile(d)&&((c=this._tiles[this._tileCoordsToKey(d)])?c.current=!0:a.push(d))}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));for(var p=document.createDocumentFragment(),h=0;h<a.length;h++)this._addTile(a[h],p);this._level.el.appendChild(p)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;t=this._tileCoordsToBounds(t);return F(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),i=n.add(i);return[e.unproject(n,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){t=this._tileCoordsToNwSe(t),t=new B(t[0],t[1]);return t=!this.options.noWrap?this._map.wrapLatLngBounds(t):t},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),t=new D(+e[0],+e[1]);return t.z=+e[2],t},_removeTile:function(t){var e=this._tiles[t];e&&(ne(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,J&&this.options.opacity<1&&de(t,this.options.opacity),Q&&!tt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&M(d(this._tileReady,this,t,null,o)),me(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(de(i.el,0),T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(le(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new D(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Zi=Ui.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&xt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Q||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return ke(i,"load",d(this._tileOnLoad,this,e,i)),ke(i,"error",d(this._tileOnError,this,e,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:xt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(t=this._globalTileRange.max.y-t.y,this.options.tms&&(e.y=t),e["-y"]=t),g(this._url,l(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return(t=this.options.zoomReverse?e-t:t)+this.options.zoomOffset},_getSubdomain:function(t){t=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=y,ne(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return it||e.el.setAttribute("src",y),Ui.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return Ui.prototype._tileReady.call(this,t,e,i)}});function ji(t,e){return new Zi(t,e)}var Hi=Zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i,n=l({},this.defaultWmsParams);for(i in e)i in this.options||(n[i]=e[i]);var o=(e=p(this,e)).detectRetina&&xt?2:1,t=this.getTileSize();n.width=t.x*o,n.height=t.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,Zi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,i=z(i.project(e[0]),i.project(e[1])),e=i.min,i=i.max,i=(1.3<=this._wmsVersion&&this._crs===ui?[e.y,e.x,i.y,i.x]:[e.x,e.y,i.x,i.y]).join(","),t=Zi.prototype.getTileUrl.call(this,t);return t+f(this.wmsParams,t,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});Zi.WMS=Hi,ji.wms=function(t,e){return new Hi(t,e)};var Wi=hi.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=ge(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),r=this._map.project(t,e).subtract(r),r=o.multiplyBy(-i).add(n).add(o).subtract(r);pt?fe(this._container,r,i):me(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vi=Wi.extend({getEvents:function(){var t=Wi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ke(t,"mousemove",this._onMouseMove,this),ke(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ne(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,i,n;this._map._animatingZoom&&this._bounds||(Wi.prototype._update.call(this),t=this._bounds,e=this._container,i=t.getSize(),n=xt?2:1,me(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",xt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);t=(this._layers[s(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,e=e.prev;i?i.prev=e:this._drawLast=e,e?e.next=i:this._drawFirst=i,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,i=t.options.dashArray.split(/[, ]+/),n=[],o=0;o<i.length;o++){if(e=Number(i[o]),isNaN(e))return;n.push(e)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e,i=this._redrawBounds;this._ctx.save(),i&&(e=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,o=a[i].length;n<o;n++)r=a[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){var e,i,n,o;this._drawing&&!t._empty()&&(e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),1!=(o=(Math.max(Math.round(t._radiusY),1)||n)/n)&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!=o&&i.restore(),this._fillStroke(i,t))},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(Re(t),this._fireEvent([i],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ue(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(le(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e,i,n=t._order;n&&(e=n.next,i=n.prev,e&&((e.prev=i)?i.next=e:e&&(this._drawFirst=e),n.prev=this._drawLast,(this._drawLast.next=n).next=null,this._drawLast=n,this._requestRedraw(t)))},_bringToBack:function(t){var e,i,n=t._order;n&&(e=n.next,(i=n.prev)&&((i.next=e)?e.prev=i:i&&(this._drawLast=i),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)))}});function Gi(t){return wt?new Vi(t):null}var qi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),gt={_initContainer:function(){this._container=ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qi("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ne(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e=e||(t._stroke=qi("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i=i||(t._fill=qi("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){re(t._container)},_bringToBack:function(t){ae(t._container)}},Ki=Lt?qi:q,$i=Wi.extend({getEvents:function(){var t=Wi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Ki("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ki("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,i;this._map._animatingZoom&&this._bounds||(Wi.prototype._update.call(this),e=(t=this._bounds).getSize(),i=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),me(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=Ki("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ne(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,t=t.options;e&&(t.stroke?(e.setAttribute("stroke",t.color),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("stroke-width",t.weight),e.setAttribute("stroke-linecap",t.lineCap),e.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?e.setAttribute("stroke-dasharray",t.dashArray):e.removeAttribute("stroke-dasharray"),t.dashOffset?e.setAttribute("stroke-dashoffset",t.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),t.fill?(e.setAttribute("fill",t.fillColor||t.color),e.setAttribute("fill-opacity",t.fillOpacity),e.setAttribute("fill-rule",t.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){re(t._path)},_bringToBack:function(t){ae(t._path)}});function Ji(t){return kt||Lt?new $i(t):null}Lt&&$i.include(gt),je.include({getRenderer:function(t){t=(t=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Gi(t)||Ji(t)}});var Yi=bi.extend({initialize:function(t,e){bi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=F(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});$i.create=Ki,$i.pointsToPath=K,wi.geometryToLayer=ki,wi.coordsToLatLng=Ci,wi.coordsToLatLngs=Mi,wi.latLngToCoords=Ti,wi.latLngsToCoords=Pi,wi.getFeature=Si,wi.asFeature=Ai,je.mergeOptions({boxZoom:!0}),et=lt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Vt(),ve(),this._startPoint=this._map.mouseEventToContainerPoint(t),ke(document,{contextmenu:Ee,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ie("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),t=e.getSize();me(this._box,e.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},_finish:function(){this._moved&&(ne(this._box),ue(this._container,"leaflet-crosshair")),Gt(),_e(),Ce(document,{contextmenu:Ee,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0),t=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),je.addInitHook("addHandler","boxZoom",et),je.mergeOptions({doubleClickZoom:!0}),V=lt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,n=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),je.addInitHook("addHandler","doubleClickZoom",V),je.mergeOptions({dragging:!0,inertia:!tt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),G=lt.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new Xe(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=F(this._map.options.maxBounds),this._offsetLimit=z(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,i;this._map.options.inertia&&(e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(i),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,e=(n+e+i)%t-e-i,e=Math.abs(o+i)<Math.abs(e+i)?o:e;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=e},_onDragEnd:function(t){var e,i,n,o,r=this._map,a=r.options,s=!a.inertia||this._times.length<2;r.fire("dragend",t),s?r.fire("moveend"):(this._prunePositions(+new Date),i=this._lastPos.subtract(this._positions[0]),t=(this._lastTime-this._times[0])/1e3,e=a.easeLinearity,i=(s=i.multiplyBy(e/t)).distanceTo([0,0]),t=Math.min(a.inertiaMaxSpeed,i),i=s.multiplyBy(t/i),n=t/(a.inertiaDeceleration*e),(o=i.multiplyBy(-n/2).round()).x||o.y?(o=r._limitOffset(o,r.options.maxBounds),M(function(){r.panBy(o,{duration:n,easeLinearity:e,noMoveStart:!0,animate:!0})})):r.fire("moveend"))}}),je.addInitHook("addHandler","dragging",G),je.mergeOptions({keyboard:!0,keyboardPanDelta:80}),ut=lt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ke(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,i;this._focused||(t=document.body,i=document.documentElement,e=t.scrollTop||i.scrollTop,i=t.scrollLeft||i.scrollLeft,this._map._container.focus(),window.scrollTo(i,e))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},i=this.keyCodes,n=0,o=i.left.length;n<o;n++)e[i.left[n]]=[-1*t,0];for(n=0,o=i.right.length;n<o;n++)e[i.right[n]]=[t,0];for(n=0,o=i.down.length;n<o;n++)e[i.down[n]]=[0,t];for(n=0,o=i.up.length;n<o;n++)e[i.up[n]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},i=this.keyCodes,n=0,o=i.zoomIn.length;n<o;n++)e[i.zoomIn[n]]=t;for(n=0,o=i.zoomOut.length;n<o;n++)e[i.zoomOut[n]]=-t},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=I(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Ee(t)}}}),je.addInitHook("addHandler","keyboard",ut),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),rt=lt.extend({addHooks:function(){ke(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ze(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);i=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),i),Ee(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,n=i?Math.ceil(n/i)*i:n,n=t._limitZoom(e+(0<this._delta?n:-n))-e;this._delta=0,this._startTime=null,n&&("center"===t.options.scrollWheelZoom?t.setZoom(e+n):t.setZoomAround(this._lastMousePos,e+n))}}),je.addInitHook("addHandler","scrollWheelZoom",rt),je.mergeOptions({tap:!0,tapTolerance:15}),ft=lt.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],t=e.target;this._startPos=this._newPos=new D(e.clientX,e.clientY),t.tagName&&"a"===t.tagName.toLowerCase()&&le(t,"leaflet-active"),this._holdTimeout=setTimeout(d(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),ke(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e;clearTimeout(this._holdTimeout),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((t=(e=t.changedTouches[0]).target)&&t.tagName&&"a"===t.tagName.toLowerCase()&&ue(t,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){t=t.touches[0];this._newPos=new D(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}),_t&&!vt&&je.addInitHook("addHandler","tap",ft),je.mergeOptions({touchZoom:_t&&!tt,bounceAtZoomLimits:!0}),gt=lt.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,i,n=this._map;!t.touches||2!==t.touches.length||n._animatingZoom||this._zooming||(e=n.mouseEventToContainerPoint(t.touches[0]),i=n.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(e.add(i)._divideBy(2))),this._startDist=e.distanceTo(i),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend",this._onTouchEnd,this),De(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==o)return}else{n=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==o&&0===n.x&&0===n.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(n),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);e=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(e,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ce(document,"touchmove",this._onTouchMove),Ce(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),je.addInitHook("addHandler","touchZoom",gt),je.BoxZoom=et,je.DoubleClickZoom=V,je.Drag=G,je.Keyboard=ut,je.ScrollWheelZoom=rt,je.Tap=ft,je.TouchZoom=gt,Object.freeze=e,t.version="1.6.0",t.Control=He,t.control=st,t.Browser=Mt,t.Evented=A,t.Mixin=ct,t.Util=P,t.Class=S,t.Handler=lt,t.extend=l,t.bind=d,t.stamp=s,t.setOptions=p,t.DomEvent=nt,t.DomUtil=X,t.PosAnimation=Ze,t.Draggable=Xe,t.LineUtil=dt,t.PolyUtil=mt,t.Point=D,t.point=I,t.Bounds=O,t.bounds=z,t.Transformation=H,t.transformation=W,t.Projection=$,t.LatLng=R,t.latLng=N,t.LatLngBounds=B,t.latLngBounds=F,t.CRS=U,t.GeoJSON=wi,t.geoJSON=Di,t.geoJson=Ei,t.Layer=hi,t.LayerGroup=ci,t.layerGroup=function(t,e){return new ci(t,e)},t.FeatureGroup=di,t.featureGroup=function(t){return new di(t)},t.ImageOverlay=Ii,t.imageOverlay=function(t,e,i){return new Ii(t,e,i)},t.VideoOverlay=Oi,t.videoOverlay=function(t,e,i){return new Oi(t,e,i)},t.SVGOverlay=zi,t.svgOverlay=function(t,e,i){return new zi(t,e,i)},t.DivOverlay=Bi,t.Popup=Fi,t.popup=function(t,e){return new Fi(t,e)},t.Tooltip=Ri,t.tooltip=function(t,e){return new Ri(t,e)},t.Icon=pi,t.icon=function(t){return new pi(t)},t.DivIcon=Ni,t.divIcon=function(t){return new Ni(t)},t.Marker=gi,t.marker=function(t,e){return new gi(t,e)},t.TileLayer=Zi,t.tileLayer=ji,t.GridLayer=Ui,t.gridLayer=function(t){return new Ui(t)},t.SVG=$i,t.svg=Ji,t.Renderer=Wi,t.Canvas=Vi,t.canvas=Gi,t.Path=vi,t.CircleMarker=_i,t.circleMarker=function(t,e){return new _i(t,e)},t.Circle=yi,t.circle=function(t,e,i){return new yi(t,e,i)},t.Polyline=xi,t.polyline=function(t,e){return new xi(t,e)},t.Polygon=bi,t.polygon=function(t,e){return new bi(t,e)},t.Rectangle=Yi,t.rectangle=function(t,e){return new Yi(t,e)},t.Map=je,t.map=function(t,e){return new je(t,e)};var Xi=window.L;t.noConflict=function(){return window.L=Xi,this},window.L=t}(e)},7653:function(){},4528:function(){},6145:function(){},1170:function(){},3336:function(){},3981:function(){},2559:function(){},7615:function(){},2171:function(){},2189:function(){},5964:function(){},4301:function(){},7344:function(){},7252:function(){},2470:function(t){"use strict";if("undefined"==typeof moment){var e=new Error("Cannot find module 'moment'");throw e.code="MODULE_NOT_FOUND",e}t.exports=moment},5525:function(){}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t].call(e.exports,e,e.exports,o),e.exports}o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o(1020),o(7653),o(2171),o(7615),o(2559),o(4301),o(1170),o(6145),o(3336),o(3981),o(2189),o(5964),o(4528),o(7344),o(7252)}();