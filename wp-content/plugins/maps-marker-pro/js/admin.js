!function(){var i={4607:function(){function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,n;n={},r.m=i=[function(t,e,i){var n=i(133);t.exports=function(t,e,i){e=null==t?void 0:n(t,e);return void 0===e?i:e}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=i(6),u=i(9),a=n(i(143)),s=i(15),l=n(i(144));function h(t,e){var i=u.getCoords(t),n=u.getCoords(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],t=n[0][1],e=n[1][0],i=n[1][1],n=(i-t)*(a-r)-(e-l)*(s-o);if(0==n)return null;i=((e-l)*(o-t)-(i-t)*(r-l))/n,n=((a-r)*(o-t)-(s-o)*(r-l))/n;if(0<=i&&i<=1&&0<=n&&n<=1){r=r+i*(a-r),o=o+i*(s-o);return c.point([r,o])}return null}e.default=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=c.feature(t)),"LineString"===e.type&&(e=c.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=h(t,e);return i&&r.push(i),c.featureCollection(r)}var o=l.default();return o.load(a.default(e)),s.featureEach(a.default(t),function(i){s.featureEach(o.search(i),function(t){var e=h(i,t);e&&(t=u.getCoords(e).join(","),n[t]||(n[t]=!0,r.push(e)))})}),c.featureCollection(r)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,i){var n=i(29),i="object"==typeof self&&self&&self.Object===Object&&self,i=n||i||Function("return this")();t.exports=i},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var i=Array.isArray;t.exports=i},function(t,n,e){"use strict";function s(t,e,i){var n={type:"Feature"};return 0!==(i=void 0===i?{}:i).id&&!i.id||(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function r(t,e,i){return s({type:"Point",coordinates:t},e,i=void 0===i?{}:i)}function o(t,e,i){void 0===i&&(i={});for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,i)}function a(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,i)}function l(t,e){var i={type:"FeatureCollection"};return(e=void 0===e?{}:e).id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function c(t,e,i){return s({type:"MultiLineString",coordinates:t},e,i=void 0===i?{}:i)}function u(t,e,i){return s({type:"MultiPoint",coordinates:t},e,i=void 0===i?{}:i)}function h(t,e,i){return s({type:"MultiPolygon",coordinates:t},e,i=void 0===i?{}:i)}function p(t,e){void 0===e&&(e="kilometers");var i=n.factors[e];if(!i)throw new Error(e+" units is invalid");return t*i}function d(t,e){void 0===e&&(e="kilometers");var i=n.factors[e];if(!i)throw new Error(e+" units is invalid");return t/i}function i(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:n.earthRadius/1.0936},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1/1.0936},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=s,n.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return r(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},n.point=r,n.points=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return r(t,e)}),i)},n.polygon=o,n.polygons=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return o(t,e)}),i)},n.lineString=a,n.lineStrings=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return a(t,e)}),i)},n.featureCollection=l,n.multiLineString=c,n.multiPoint=u,n.multiPolygon=h,n.geometryCollection=function(t,e,i){return s({type:"GeometryCollection",geometries:t},e,i=void 0===i?{}:i)},n.round=function(t,e){if((e=void 0===e?0:e)&&!(0<=e))throw new Error("precision must be a positive number");e=Math.pow(10,e||0);return Math.round(t*e)/e},n.radiansToLength=p,n.lengthToRadians=d,n.lengthToDegrees=function(t,e){return i(d(t,e))},n.bearingToAzimuth=function(t){t%=360;return t<0&&(t+=360),t},n.radiansToDegrees=i,n.degreesToRadians=function(t){return t%360*Math.PI/180},n.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("length must be a positive number");return p(d(t,e),i)},n.convertArea=function(t,e,i){if(void 0===e&&(e="meters"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("area must be a positive number");e=n.areaFactors[e];if(!e)throw new Error("invalid original units");i=n.areaFactors[i];if(!i)throw new Error("invalid final units");return t/e*i},n.isNumber=f,n.isObject=function(t){return!!t&&t.constructor===Object},n.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!f(t))throw new Error("bbox must only contain numbers")})},n.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},n.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},n.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},n.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},n.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},n.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},n.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},n.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=i(6);e.default=function(t){var e,v={type:"FeatureCollection",features:[]};if("LineString"===(t="Feature"===t.type?t.geometry:t).type)e=[t.coordinates];else if("MultiLineString"===t.type)e=t.coordinates;else if("MultiPolygon"===t.type)e=[].concat.apply([],t.coordinates);else{if("Polygon"!==t.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=t.coordinates}return e.forEach(function(g){e.forEach(function(t){for(var e,i,n,r,o,a,s,l,c,u,h,p,d=0;d<g.length-1;d++)for(var f=d;f<t.length-1;f++){if(g===t){if(1===Math.abs(d-f))continue;if(0===d&&f===g.length-2&&g[d][0]===g[g.length-1][0]&&g[d][1]===g[g.length-1][1])continue}var m=(e=g[d][0],i=g[d][1],n=g[d+1][0],r=g[d+1][1],o=t[f][0],a=t[f][1],s=t[f+1][0],l=t[f+1][1],m=p=h=u=c=void 0,m={x:null,y:null,onLine1:!1,onLine2:!1},0==(c=(l-a)*(n-e)-(s-o)*(r-i))?null!==m.x&&null!==m.y&&m:(p=(n-e)*(u=i-a)-(r-i)*(h=e-o),u=((s-o)*u-(l-a)*h)/c,h=p/c,m.x=e+u*(n-e),m.y=i+u*(r-i),0<=u&&u<=1&&(m.onLine1=!0),0<=h&&h<=1&&(m.onLine2=!0),!(!m.onLine1||!m.onLine2)&&[m.x,m.y]));m&&v.features.push(_.point([m[0],m[1]]))}})}),v}},function(t,e,i){var n=i(18),r=i(81),o=i(82),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(a&&a in Object(t)?r:o)(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&2<=t.length&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(1<e.length&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var n=0,r=t.features;n<r.length;n++){var o=r[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":("Feature"===t.type&&null!==t.geometry?t.geometry:t).type}},function(t,e,i){var n=i(69),r=i(70),o=i(71),a=i(72),i=i(73);function s(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=o,s.prototype.has=a,s.prototype.set=i,t.exports=s},function(t,e,i){var n=i(12);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,i){i=i(16)(Object,"create");t.exports=i},function(t,e,i){var n=i(95);t.exports=function(t,e){t=t.__data__;return n(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=i(6);function k(t,e,i){if(null!==t)for(var n,r,o,a,s,l,c,u,h=0,p=t.type,d="FeatureCollection"===p,f="Feature"===p,m=d?t.features.length:1,g=0;g<m;g++){s=(u=!!(c=d?t.features[g].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var _=0,y=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type,x=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(l,h,g,_,y))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],h,g,_,y))return!1;h++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-x;r++){if(!1===e(l[n][r],h,g,_,y))return!1;h++}"MultiLineString"===b&&_++,"Polygon"===b&&y++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(r=y=0;r<l[n].length;r++){for(o=0;o<l[n][r].length-x;o++){if(!1===e(l[n][r][o],h,g,_,y))return!1;h++}y++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===k(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function n(t,e){for(var i,n,r,o,a,s,l,c,u,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,f=p?t.features.length:1,m=0;m<f;m++){for(a=p?t.features[m].geometry:d?t.geometry:t,l=p?t.features[m].properties:d?t.properties:{},c=p?t.features[m].bbox:d?t.bbox:void 0,u=p?t.features[m].id:d?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<o;n++)if(null!==(r=s?a.geometries[n]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<r.geometries.length;i++)if(!1===e(r.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}function s(t,c){n(t,function(t,e,i,n,r){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==c(f.feature(t,i,{bbox:n,id:r}),e,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var l={type:o,coordinates:t.coordinates[s]};if(!1===c(f.feature(l,i),e,s))return!1}})}function r(t,d){s(t,function(o,a,s){var l=0;if(o.geometry){var t=o.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var c,u=0,h=0,p=0;return!1!==k(o,function(t,e,i,n,r){if(void 0===c||u<a||h<n||p<r)return c=t,u=a,h=n,p=r,void(l=0);n=f.lineString([c,t],o.properties);if(!1===d(n,a,s,r,l))return!1;l++,c=t})&&void 0}}})}function l(t,a){if(!t)throw new Error("geojson is required");s(t,function(t,e,i){if(null!==t.geometry){var n=t.geometry.type,r=t.geometry.coordinates;switch(n){case"LineString":if(!1===a(t,e,i,0,0))return!1;break;case"Polygon":for(var o=0;o<r.length;o++)if(!1===a(f.lineString(r[o],t.properties),e,i,o))return!1}}})}e.coordEach=k,e.coordReduce=function(t,o,a,e){var s=a;return k(t,function(t,e,i,n,r){s=0===e&&void 0===a?t:o(s,t,e,i,n,r)},e),s},e.propEach=o,e.propReduce=function(t,i,n){var r=n;return o(t,function(t,e){r=0===e&&void 0===n?t:i(r,t,e)}),r},e.featureEach=a,e.featureReduce=function(t,i,n){var r=n;return a(t,function(t,e){r=0===e&&void 0===n?t:i(r,t,e)}),r},e.coordAll=function(t){var e=[];return k(t,function(t){e.push(t)}),e},e.geomEach=n,e.geomReduce=function(t,o,a){var s=a;return n(t,function(t,e,i,n,r){s=0===e&&void 0===a?t:o(s,t,e,i,n,r)}),s},e.flattenEach=s,e.flattenReduce=function(t,n,r){var o=r;return s(t,function(t,e,i){o=0===e&&0===i&&void 0===r?t:n(o,t,e,i)}),o},e.segmentEach=r,e.segmentReduce=function(t,o,a){var s=a,l=!1;return r(t,function(t,e,i,n,r){s=!1===l&&void 0===a?t:o(s,t,e,i,n,r),l=!0}),s},e.lineEach=l,e.lineReduce=function(t,r,o){var a=o;return l(t,function(t,e,i,n){a=0===e&&void 0===o?t:r(a,t,e,i,n)}),a},e.findSegment=function(t,e){if(e=e||{},!f.isObject(e))throw new Error("options is invalid");var i,n=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,i=t.features[n].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),f.lineString([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),f.lineString([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return r<0&&(r=l.length+r),a<0&&(a=l[r].length+a-1),f.lineString([l[r][a],l[r][a+1]],s,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),a<0&&(a=l[r][o].length-a-1),f.lineString([l[r][o][a],l[r][o][a+1]],s,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!f.isObject(e))throw new Error("options is invalid");var i,n=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),s=s||t.features[n].properties,i=t.features[n].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":return f.point(l,s,e);case"MultiPoint":return r<0&&(r=l.length+r),f.point(l[r],s,e);case"LineString":return a<0&&(a=l.length+a),f.point(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),f.point(l[o][a],s,e);case"MultiLineString":return r<0&&(r=l.length+r),a<0&&(a=l[r].length+a),f.point(l[r][a],s,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),a<0&&(a=l[r][o].length-a),f.point(l[r][o][a],s,e)}throw new Error("geojson is invalid")}},function(t,e,i){var n=i(79),r=i(86);t.exports=function(t,e){e=r(t,e);return n(e)?e:void 0}},function(t,e,i){var n=i(8),r=i(2);t.exports=function(t){if(!r(t))return!1;t=n(t);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(t,e,i){i=i(3).Symbol;t.exports=i},function(t,e,i){var n=i(32);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(110),r=i(4),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,n=n(function(){return arguments}())?n:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=n},function(t,e,i){var n=i(17),r=i(23);t.exports=function(t){return null!=t&&r(t.length)&&!n(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&-1<t&&t%1==0&&t<e}},function(t,e,i){var n=i(8),r=i(4);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}},function(t,e,i){var n=i(67),i=i(124)(function(t,e,i){n(t,e,i)});t.exports=i},function(t,e,i){(function(Y){t.exports=function(){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var l=function t(e,i){s(this,t),this.next=null,this.key=e,this.data=i,this.left=null,this.right=null};function e(t,e){return e<t?1:t<e?-1:0}function a(t,e,i){for(var n=new l(null,null),r=n,o=n;;){var a=i(t,e.key);if(a<0){if(null===e.left)break;if(i(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,e=(o=e).left}else{if(!(0<a))break;if(null===e.right)break;if(0<i(t,e.right.key)){a=e.right;if(e.right=a.left,a.left=e,null===(e=a).right)break}r.right=e,e=(r=e).right}}return r.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function c(t,e,i,n){e=new l(t,e);if(null===i)return e.left=e.right=null,e;n=n(t,(i=a(t,i,n)).key);return n<0?(e.left=i.left,(e.right=i).left=null):0<=n&&(e.right=i.right,(e.left=i).right=null),e}function u(t,e,i){var n=null,r=null;return e&&(0===(t=i((e=a(t,e,i)).key,t))?(n=e.left,r=e.right):t<0?(r=e.right,e.right=null,n=e):(n=e.left,e.left=null,r=e)),{left:n,right:r}}function h(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y}function P(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=(t.ll.x<e.ll.x?e:t).ll.x,n=(t.ur.x<e.ur.x?t:e).ur.x;return{ll:{x:i,y:(t.ll.y<e.ll.y?e:t).ll.y},ur:{x:n,y:(t.ur.y<e.ur.y?t:e).ur.y}}}var T=(t(i,[{key:"insert",value:function(t,e){return this._size++,this._root=c(t,e,this._root,this._comparator)}},{key:"add",value:function(t,e){var i=new l(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var n=this._comparator,e=a(t,this._root,n),t=n(t,e.key);return 0===t?this._root=e:(t<0?(i.left=e.left,(i.right=e).left=null):0<t&&(i.right=e.right,(i.left=e).right=null),this._size++,this._root=i),this._root}},{key:"remove",value:function(t){this._root=this._remove(t,this._root,this._comparator)}},{key:"_remove",value:function(t,e,i){var n;return null===e?null:0===i(t,(e=a(t,e,i)).key)?(null===e.left?n=e.right:(n=a(t,e.left,i)).right=e.right,this._size--,n):e}},{key:"pop",value:function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=a(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null}},{key:"findStatic",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null}},{key:"find",value:function(t){return this._root&&(this._root=a(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root}},{key:"contains",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1}},{key:"forEach",value:function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0;return this}},{key:"range",value:function(t,e,i,n){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(0<o((a=r.pop()).key,e))break;if(0<=o(a.key,t)&&i.call(n,a))return this;a=a.right}return this}},{key:"keys",value:function(){var e=[];return this.forEach(function(t){t=t.key;return e.push(t)}),e}},{key:"values",value:function(){var e=[];return this.forEach(function(t){t=t.data;return e.push(t)}),e}},{key:"min",value:function(){return this._root?this.minNode(this._root).key:null}},{key:"max",value:function(){return this._root?this.maxNode(this._root).key:null}},{key:"minNode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.left;)t=t.left;return t}},{key:"maxNode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.right;)t=t.right;return t}},{key:"at",value:function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null}},{key:"next",value:function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;e=r<0?(i=e).left:e.right}return i}},{key:"prev",value:function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;e=r<0?e.left:(i=e).right}return i}},{key:"clear",value:function(){return this._root=null,this._size=0,this}},{key:"toList",value:function(){return function(t){for(var e=t,i=[],n=!1,t=new l(null,null),r=t;!n;)e?(i.push(e),e=e.left):0<i.length?e=(e=r=r.next=i.pop()).right:n=!0;return r.next=null,t.next}(this._root)}},{key:"load",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=t.length,r=this._comparator;return i&&function t(e,i,n,r,o){if(!(r<=n)){for(var a=e[n+r>>1],s=n-1,l=r+1;;){for(;o(e[++s],a)<0;);for(;0<o(e[--l],a););if(l<=s)break;var c=e[s];e[s]=e[l],e[l]=c,c=i[s],i[s]=i[l],i[l]=c}t(e,i,n,l,o),t(e,i,l+1,r,o)}}(t,e,0,n-1,r),null===this._root?(this._root=function t(e,i,n,r){var o=r-n;if(0<o){var a=n+Math.floor(o/2),s=e[a],o=i[a],o=new l(s,o);return o.left=t(e,i,n,a),o.right=t(e,i,a+1,r),o}return null}(t,e,0,n),this._size=n):(r=function(t,e,i){for(var n=new l(null,null),r=n,o=t,a=e;null!==o&&null!==a;)i(o.key,a.key)<0?o=(r.next=o).next:a=(r.next=a).next,r=r.next;return null!==o?r.next=o:null!==a&&(r.next=a),n.next}(this.toList(),function(t,e){for(var i=new l(null,null),n=i,r=0;r<t.length;r++)n=n.next=new l(t[r],e[r]);return n.next=null,i.next}(t,e),r),n=this._size+n,this._root=function t(e,i,n){var r=n-i;if(0<r){var o=i+Math.floor(r/2),r=t(e,i,o),i=e.head;return i.left=r,e.head=e.head.next,i.right=t(e,o+1,n),i}return null}({head:r},0,n)),this}},{key:"isEmpty",value:function(){return null===this._root}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t){return String(t.key)},e=[];return function t(e,i,n,r,o){e&&(r("".concat(i).concat(n?"└── ":"├── ").concat(o(e),"\n")),n=i+(n?"    ":"│   "),e.left&&t(e.left,n,!1,r,o),e.right&&t(e.right,n,!0,r,o))}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")}},{key:"update",value:function(t,e,i){var n=this._comparator,r=u(t,this._root,n),o=r.left,r=r.right;n(t,e)<0?r=c(e,i,r,n):o=c(e,i,o,n),this._root=(o=o,null===(r=r)?o:(null===o||((r=a(o.key,r,n)).left=o),r))}},{key:"split",value:function(t){return u(t,this._root,this._comparator)}},{key:"size",get:function(){return this._size}},{key:"root",get:function(){return this._root}}]),i),r=Number.EPSILON;function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:e;s(this,i),this._root=null,this._size=0,this._comparator=t}function o(t,e){if(-r<t&&t<r&&-r<e&&e<r)return 0;var i=t-e;return i*i<_*t*e?0:t<e?-1:1}function p(t,e){return t.x*e.y-t.y*e.x}function d(t,e){return t.x*e.x+t.y*e.y}function f(t,e,i){return e={x:e.x-t.x,y:e.y-t.y},t={x:i.x-t.x,y:i.y-t.y},t=p(e,t),o(t,0)}function m(t){return Math.sqrt(d(t,t))}function g(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}}function v(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}}var _=(r=void 0===r?Math.pow(2,-52):r)*r,y=(t($,[{key:"reset",value:function(){this.xRounder=new b,this.yRounder=new b}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),$),b=(t(q,[{key:"round",value:function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===o(e.key,i.key))return this.tree.remove(t),i.key;i=this.tree.next(e);return null!==i&&0===o(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),q),E=new y,D=(t(V,null,[{key:"compare",value:function(t,e){var i=V.comparePoints(t.point,e.point);return 0!==i?i:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:k.compare(t.segment,e.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),t(V,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var r=e[i];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var r=this.point.events[n];void 0===r.consumedBy&&i.otherSE.point.events===r.otherSE.point.events&&i.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(i){function r(t){var e=t.otherSE;o.set(t,{sine:function(t,e,i){e={x:e.x-t.x,y:e.y-t.y},t={x:i.x-t.x,y:i.y-t.y};return p(t,e)/m(t)/m(e)}(n.point,i.point,e.point),cosine:function(t,e,i){e={x:e.x-t.x,y:e.y-t.y},t={x:i.x-t.x,y:i.y-t.y};return d(t,e)/m(t)/m(e)}(n.point,i.point,e.point)})}var n=this,o=new Map;return function(t,e){o.has(t)||r(t),o.has(e)||r(e);var i=o.get(t),n=i.sine,t=i.cosine,i=o.get(e),e=i.sine,i=i.cosine;return 0<=n&&0<=e?t<i?1:i<t?-1:0:n<0&&e<0?t<i?-1:i<t?1:0:e<n?-1:n<e?1:0}}}]),V),x=0,k=(t(W,null,[{key:"compare",value:function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(r<n)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(i<n){if(s<a&&s<l)return 1;if(a<s&&l<s)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(0<u)return-1;u=e.comparePoint(t.rightSE.point);return 0!==u?u:-1}if(n<i){if(a<s&&a<c)return-1;if(s<a&&c<a)return 1;u=e.comparePoint(t.leftSE.point);if(0!==u)return u;u=t.comparePoint(e.rightSE.point);return!(u<0)&&0<u?-1:1}if(a<s)return-1;if(s<a)return 1;if(r<o){var h=e.comparePoint(t.rightSE.point);if(0!==h)return h}if(o<r){h=t.comparePoint(e.rightSE.point);if(h<0)return 1;if(0<h)return-1}if(r!==o){a=l-a,i=r-i,s=c-s,n=o-n;if(i<a&&s<n)return 1;if(a<i&&n<s)return-1}return o<r?1:r<o||l<c?-1:c<l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),t(W,[{key:"replaceRightSE",value:function(t){this.rightSE=t,(this.rightSE.segment=this).rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:e<t?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;i=(t.y-e.y)/n.y,i=e.x+i*n.x;if(t.x===i)return 0;i=(t.x-e.x)/n.x,n=e.y+i*n.y;return t.y===n?0:t.y<n?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),i=t.bbox(),n=P(e,i);if(null===n)return null;var r=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=h(e,a)&&0===this.comparePoint(a),c=h(i,r)&&0===t.comparePoint(r),e=h(e,s)&&0===this.comparePoint(s),i=h(i,o)&&0===t.comparePoint(o);if(c&&l)return i&&!e?o:!i&&e?s:null;if(c)return e&&r.x===s.x&&r.y===s.y?null:r;if(l)return i&&o.x===a.x&&o.y===a.y?null:a;if(i&&e)return null;if(i)return o;if(e)return s;t=function(t,e,i,n){if(0===e.x)return v(i,n,t.x);if(0===n.x)return v(t,e,i.x);if(0===e.y)return g(i,n,t.y);if(0===n.y)return g(t,e,i.y);var r=p(e,n);if(0==r)return null;var o={x:i.x-t.x,y:i.y-t.y},a=p(o,e)/r,r=p(o,n)/r;return{x:(t.x+r*e.x+(i.x+a*n.x))/2,y:(t.y+r*e.y+(i.y+a*n.y))/2}}(r,this.vector(),a,t.vector());return null!==t&&h(n,t)?E.round(t.x,t.y):null}},{key:"split",value:function(t){var e=[],i=void 0!==t.events,n=new D(t,!0),r=new D(t,!1),t=this.rightSE;this.replaceRightSE(r),e.push(r),e.push(n);t=new W(n,t,this.rings.slice(),this.windings.slice());return 0<D.comparePoints(t.leftSE.point,t.rightSE.point)&&t.swapEvents(),0<D.comparePoints(this.leftSE.point,this.rightSE.point)&&this.swapEvents(),i&&(n.checkForConsuming(),r.checkForConsuming()),e}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var e=this,i=t;e.consumedBy;)e=e.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var n,t=W.compare(e,i);if(0!==t){0<t&&(n=e,e=i,i=n),e.prev===i&&(n=e,e=i,i=n);for(var r=0,o=i.rings.length;r<o;r++){var a=i.rings[r],s=i.windings[r],l=e.rings.indexOf(a);-1===l?(e.rings.push(a),e.windings.push(s)):e.windings[l]+=s}i.rings=null,i.windings=null,i.consumedBy=e,i.leftSE.consumedBy=e.leftSE,i.rightSE.consumedBy=e.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this.prev?(t=this.prev.consumedBy||this.prev,this._beforeState=t.afterState()):this._beforeState={rings:[],windings:[],multiPolys:[]}),this._beforeState;var t}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var a=this.rings[r],s=this.windings[r],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var c,u,h=[],p=[],d=0,f=e.length;d<f;d++)0!==i[d]&&(c=(u=e[d]).poly,-1===p.indexOf(c)&&(u.isExterior?h.push(c):(-1===p.indexOf(c)&&p.push(c),-1!==(u=h.indexOf(u.poly))&&h.splice(u,1))));for(var m=0,g=h.length;m<g;m++){var v=h[m].multiPoly;-1===n.indexOf(v)&&n.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(F.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!=n;break;case"intersection":var r,n=t.length<e.length?(r=t.length,e.length):(r=e.length,t.length);this._isInResult=n===F.numMultiPolys&&r<n;break;case"xor":var o=Math.abs(t.length-e.length);this._isInResult=o%2==1;break;case"difference":o=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=o(t)!==o(e);break;default:throw new Error("Unrecognized operation type found ".concat(F.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,e,i){var n,r,o,a=D.comparePoints(t,e);if(a<0)n=t,r=e,o=1;else{if(!(0<a))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));n=e,r=t,o=-1}return new W(new D(n,!0),new D(r,!1),[i],[o])}}]),W),w=(t(Z,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),Z),L=(t(G,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),G),A=(t(H,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}}]),H),O=(t(U,null,[{key:"factory",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(r.isInResult()&&!r.ringOut){for(var o,a=r.leftSE,s=r.rightSE,l=[a],c=a.point,u=[];o=a,a=s,l.push(a),a.point!==c;)for(;;){var h=a.getAvailableLinkedEvents();if(0===h.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){s=h[0].otherSE;break}for(var f=null,m=0,g=u.length;m<g;m++)if(u[m].point===a.point){f=m;break}if(null===f){u.push({index:l.length,point:a.point});var v=a.getLeftmostComparator(o),s=h.sort(v)[0].otherSE;break}v=u.splice(f)[0],v=l.splice(v.index);v.unshift(v[0].otherSE),e.push(new U(v.reverse()))}e.push(new U(l))}}return e}}]),t(U,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var r=this.events[i].point,o=this.events[i+1].point;0!==f(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var a=e[0],s=e[1];0===f(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,u=[],h=s;h!=c;h+=l)u.push([e[h].x,e[h].y]);return u}},{key:"isExteriorRing",value:function(){var t;return void 0===this._isExteriorRing&&(t=this.enclosingRing(),this._isExteriorRing=!t||!t.isExteriorRing()),this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];0<D.compare(t,n)&&(t=n)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();o=(r=o.prevInResult())?r.prevInResult():null}}}]),U),M=(t(j,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),j),I=(t(N,[{key:"getGeom",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r,o=t[i];o.poly||(o.isExteriorRing()?e.push(new M(o)):((r=o.enclosingRing()).poly||e.push(new M(r)),r.poly.addInterior(o)))}return e}}]),N),B=(t(S,[{key:"process",value:function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=n,o=n,a=void 0,s=void 0;void 0===a;)null===(r=this.tree.prev(r))?a=null:void 0===r.key.consumedBy&&(a=r.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){n=null;if(a){var l=a.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(n=l),!a.isAnEndpoint(l)))for(var c=this._splitSafely(a,l),u=0,h=c.length;u<h;u++)i.push(c[u])}l=null;if(s){var p=s.getIntersection(e);if(null!==p&&(e.isAnEndpoint(p)||(l=p),!s.isAnEndpoint(p)))for(var d=this._splitSafely(s,p),f=0,m=d.length;f<m;f++)i.push(d[f])}if(null!==n||null!==l){p=null,p=null!==n&&(null===l||D.comparePoints(n,l)<=0)?n:l;this.queue.remove(e.rightSE),i.push(e.rightSE);for(var g=e.split(p),v=0,_=g.length;v<_;v++)i.push(g[v])}0<i.length?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){t=a.getIntersection(s);if(null!==t){if(!a.isAnEndpoint(t))for(var y=this._splitSafely(a,t),b=0,x=y.length;b<x;b++)i.push(y[b]);if(!s.isAnEndpoint(t))for(var k=this._splitSafely(s,t),w=0,L=k.length;w<L;w++)i.push(k[w])}}this.tree.remove(e)}return i}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);e=t.split(e);return e.push(i),void 0===t.consumedBy&&this.tree.insert(t),e}}]),S),R=void 0!==Y&&Y.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,z=void 0!==Y&&Y.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,F=(t(C,[{key:"run",value:function(t,e,i){F.type=t,E.reset();for(var n=[new A(e,!0)],r=0,o=i.length;r<o;r++)n.push(new A(i[r],!1));if(F.numMultiPolys=n.length,"difference"===F.type)for(var a=n[0],s=1;s<n.length;)null!==P(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===F.type)for(var l=0,c=n.length;l<c;l++)for(var u=n[l],h=l+1,p=n.length;h<p;h++)if(null===P(u.bbox,n[h].bbox))return[];for(var d=new T(D.compare),f=0,m=n.length;f<m;f++)for(var g=n[f].getSweepEvents(),v=0,_=g.length;v<_;v++)if(d.insert(g[v]),d.size>R)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var y=new B(d),b=d.size,x=d.pop();x;){var k=x.key;if(d.size===b){var w=k.segment;throw new Error("Unable to pop() ".concat(k.isLeft?"left":"right"," SweepEvent ")+"[".concat(k.point.x,", ").concat(k.point.y,"] from segment #").concat(w.id," ")+"[".concat(w.leftSE.point.x,", ").concat(w.leftSE.point.y,"] -> ")+"[".concat(w.rightSE.point.x,", ").concat(w.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>R)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(y.segments.length>z)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var L=y.process(k),M=0,C=L.length;M<C;M++){var S=L[M];void 0===S.consumedBy&&d.insert(S)}b=d.size,x=d.pop()}E.reset();e=O.factory(y.segments);return new I(e).getGeom()}}]),new C);function C(){s(this,C)}function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:k.compare;s(this,S),this.queue=t,this.tree=new T(e),this.segments=[]}function N(t){s(this,N),this.rings=t,this.polys=this._composePolys(t)}function j(t){s(this,j),((this.exteriorRing=t).poly=this).interiorRings=[]}function U(t){s(this,U);for(var e=0,i=(this.events=t).length;e<i;e++)t[e].segment.ringOut=this;this.poly=null}function H(t,e){if(s(this,H),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,n=t.length;i<n;i++){var r=new L(t[i],this);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}function G(t,e){if(s(this,G),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new w(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,n=t.length;i<n;i++){var r=new w(t[i],this,!1);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}function Z(t,e,i){if(s(this,Z),!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=i,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");i=E.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var n=i,r=1,o=t.length;r<o;r++){if("number"!=typeof t[r][0]||"number"!=typeof t[r][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=E.round(t[r][0],t[r][1]);a.x===n.x&&a.y===n.y||(this.segments.push(k.fromRing(n,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),n=a)}i.x===n.x&&i.y===n.y||this.segments.push(k.fromRing(n,i,this))}function W(t,e,i,n){s(this,W),this.id=++x,(this.leftSE=t).segment=this,t.otherSE=e,(this.rightSE=e).segment=this,e.otherSE=t,this.rings=i,this.windings=n}function V(t,e){s(this,V),void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}function q(){s(this,q),this.tree=new T,this.round(0)}function $(){s(this,$),this.reset()}return{union:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return F.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return F.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return F.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return F.run("difference",t,i)}}}()}).call(this,i(149))},function(t,e,i){i=i(16)(i(3),"Map");t.exports=i},function(e,t,i){(function(t){t="object"==typeof t&&t&&t.Object===Object&&t;e.exports=t}).call(this,i(80))},function(t,e,i){var n=i(87),r=i(94),o=i(96),a=i(97),i=i(98);function s(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=o,s.prototype.has=a,s.prototype.set=i,t.exports=s},function(t,e,i){var n=i(19),r=i(12);t.exports=function(t,e,i){(void 0===i||r(t[e],i))&&(void 0!==i||e in t)||n(t,e,i)}},function(t,e,i){var n=i(16),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,i){i=i(109)(Object.getPrototypeOf,Object);t.exports=i},function(t,e){var i=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,o,a){(function(t){var e=a(3),i=a(112),n=o&&!o.nodeType&&o,r=n&&"object"==typeof t&&t&&!t.nodeType&&t,e=r&&r.exports===n?e.Buffer:void 0,i=(e?e.isBuffer:void 0)||i;t.exports=i}).call(this,a(20)(t))},function(t,e,i){var n=i(114),r=i(115),i=i(116),i=i&&i.isTypedArray,n=i?r(i):n;t.exports=n},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,i){var n=i(120),r=i(122),o=i(22);t.exports=function(t){return o(t)?n(t,!0):r(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,i){var n=i(5),r=i(134),o=i(135),a=i(138);t.exports=function(t,e){return n(t)?t:r(t,e)?[t]:o(a(t))}},function(t,e,i){var n=i(25);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(15);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t){t.exports=JSON.parse('{"a":"2.9.0"}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex löschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer löschen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verknüpfen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l\'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Adaugă un punct","firstVertex":"Apasă aici pentru a adăuga primul Vertex","continueLine":"Apasă aici pentru a continua desenul","finishLine":"Apasă pe orice obiect pentru a finisa desenul","finishPoly":"Apasă pe primul obiect pentru a finisa","finishRect":"Apasă pentru a finisa","startCircle":"Apasă pentru a desena un cerc","finishCircle":"Apasă pentru a finisa un cerc","placeCircleMarker":"Adaugă un punct"},"actions":{"finish":"Termină","cancel":"Anulează","removeLastVertex":"Șterge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaugă o bulină","drawPolyButton":"Desenează un poligon","drawLineButton":"Desenează o linie","drawCircleButton":"Desenează un cerc","drawRectButton":"Desenează un dreptunghi","editButton":"Editează straturile","dragButton":"Mută straturile","cutButton":"Taie straturile","deleteButton":"Șterge straturile","drawCircleMarkerButton":"Desenează marcatorul cercului","snappingButton":"Fixați marcatorul glisat pe alte straturi și vârfuri","pinningButton":"Fixați vârfurile partajate împreună"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Нажмите, чтобы нанести маркер","firstVertex":"Нажмите, чтобы нанести первый объект","continueLine":"Нажмите, чтобы продолжить рисование","finishLine":"Нажмите любой существующий маркер для завершения","finishPoly":"Выберите первую точку, чтобы закончить","finishRect":"Нажмите, чтобы закончить","startCircle":"Нажмите, чтобы добавить центр круга","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Нажмите, чтобы нанести круговой маркер"},"actions":{"finish":"Завершить","cancel":"Отменить","removeLastVertex":"Отменить последнее действие"},"buttonTitles":{"drawMarkerButton":"Добавить маркер","drawPolyButton":"Рисовать полигон","drawLineButton":"Рисовать кривую","drawCircleButton":"Рисовать круг","drawRectButton":"Рисовать прямоугольник","editButton":"Редактировать слой","dragButton":"Перенести слой","cutButton":"Вырезать слой","deleteButton":"Удалить слой","drawCircleMarkerButton":"Добавить круговой маркер","snappingButton":"Привязать перетаскиваемый маркер к другим слоям и вершинам","pinningButton":"Связать общие точки вместе"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vértice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del circulo","finishCircle":"Presiona para finalizar el circulo","placeCircleMarker":"Presiona para colocar un marcador de circulo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ultimo vértice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polígono","drawLineButton":"Dibujar Línea","drawCircleButton":"Dibujar Circulo","drawRectButton":"Dibujar Rectángulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Remover Capas","drawCircleMarkerButton":"Dibujar Marcador de Circulo","snappingButton":"El marcador de Snap arrastrado a otras capas y vértices","pinningButton":"Fijar juntos los vértices compartidos"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beëindigen","finishPoly":"Klik op het eerst punt om te beëindigen","finishRect":"Klik om te beëindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beëindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer à dessiner","finishLine":"Cliquez sur n\'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"Éditer des calques","dragButton":"Déplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d\'autres couches et sommets","pinningButton":"Épingler ensemble les sommets partagés"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"单击放置标记","firstVertex":"单击放置首个顶点","continueLine":"单击继续绘制","finishLine":"单击任何存在的标记以完成","finishPoly":"单击第一个标记以完成","finishRect":"单击完成","startCircle":"单击放置圆心","finishCircle":"单击完成圆形","placeCircleMarker":"点击放置圆形标记"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最后的顶点"},"buttonTitles":{"drawMarkerButton":"绘制标记","drawPolyButton":"绘制多边形","drawLineButton":"绘制线段","drawCircleButton":"绘制圆形","drawRectButton":"绘制长方形","editButton":"编辑图层","dragButton":"拖拽图层","cutButton":"剪切图层","deleteButton":"删除图层","drawCircleMarkerButton":"画圆圈标记","snappingButton":"将拖动的标记捕捉到其他图层和顶点","pinningButton":"将共享顶点固定在一起"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"單擊放置標記","firstVertex":"單擊放置第一個頂點","continueLine":"單擊繼續繪製","finishLine":"單擊任何存在的標記以完成","finishPoly":"單擊第一個標記以完成","finishRect":"單擊完成","startCircle":"單擊放置圓心","finishCircle":"單擊完成圓形","placeCircleMarker":"點擊放置圓形標記"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最後一個頂點"},"buttonTitles":{"drawMarkerButton":"放置標記","drawPolyButton":"繪製多邊形","drawLineButton":"繪製線段","drawCircleButton":"繪製圓形","drawRectButton":"繪製方形","editButton":"編輯圖形","dragButton":"移動圖形","cutButton":"裁切圖形","deleteButton":"刪除圖形","drawCircleMarkerButton":"畫圓圈標記","snappingButton":"將拖動的標記對齊到其他圖層和頂點","pinningButton":"將共享頂點固定在一起"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vértice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polígono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do círculo","finishCircle":"Clique para fechar o círculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover último vértice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polígono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um círculo","drawRectButton":"Desenhar um retângulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de círculos de desenho","snappingButton":"Marcador arrastado para outras camadas e vértices","pinningButton":"Vértices compartilhados de pinos juntos"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawić znacznik","firstVertex":"Kliknij, aby ustawić pierwszy punkt","continueLine":"Kliknij, aby kontynuować rysowanie","finishLine":"Kliknij dowolny punkt, aby zakończyć","finishPoly":"Kliknij pierwszy punkt, aby zakończyć","finishRect":"Kliknij, aby zakończyć","startCircle":"Kliknij, aby ustawić środek koła","finishCircle":"Kliknij, aby zakończyć rysowanie koła","placeCircleMarker":"Kliknij, aby ustawić okrągły znacznik"},"actions":{"finish":"Zakończ","cancel":"Anuluj","removeLastVertex":"Usuń ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokąt","drawLineButton":"Narysuj ścieżkę","drawCircleButton":"Narysuj koło","drawRectButton":"Narysuj prostokąt","editButton":"Edytuj","dragButton":"Przesuń","cutButton":"Wytnij","deleteButton":"Usuń","drawCircleMarkerButton":"Narysuj okrągły znacznik","snappingButton":"Snap przeciągnięty marker na inne warstwy i wierzchołki","pinningButton":"Sworzeń wspólne wierzchołki razem"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klicka för att placera markör","firstVertex":"Klicka för att placera första hörnet","continueLine":"Klicka för att fortsätta rita","finishLine":"Klicka på en existerande punkt för att slutföra","finishPoly":"Klicka på den första punkten för att slutföra","finishRect":"Klicka för att slutföra","startCircle":"Klicka för att placera cirkelns centrum","finishCircle":"Klicka för att slutföra cirkeln","placeCircleMarker":"Klicka för att placera cirkelmarkör"},"actions":{"finish":"Slutför","cancel":"Avbryt","removeLastVertex":"Ta bort sista hörnet"},"buttonTitles":{"drawMarkerButton":"Rita Markör","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkör","snappingButton":"Snäpp dra markören till andra lager och hörn","pinningButton":"Fäst delade hörn tillsammans"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Κάντε κλικ για να τοποθετήσετε Δείκτη","firstVertex":"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο","continueLine":"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε","finishLine":"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί","finishPoly":"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε","finishRect":"Κάντε κλικ για να τελειώσετε","startCircle":"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου","finishCircle":"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο","placeCircleMarker":"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},"actions":{"finish":"Τέλος","cancel":"Ακύρωση","removeLastVertex":"Κατάργηση τελευταίου σημείου"},"buttonTitles":{"drawMarkerButton":"Σχεδίαση Δείκτη","drawPolyButton":"Σχεδίαση Πολυγώνου","drawLineButton":"Σχεδίαση Γραμμής","drawCircleButton":"Σχεδίαση Κύκλου","drawRectButton":"Σχεδίαση Ορθογωνίου","editButton":"Επεξεργασία Επιπέδων","dragButton":"Μεταφορά Επιπέδων","cutButton":"Αποκοπή Επιπέδων","deleteButton":"Κατάργηση Επιπέδων","drawCircleMarkerButton":"Σχεδίαση Κυκλικού Δείκτη","snappingButton":"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές","pinningButton":"Περικοπή κοινών κορυφών μαζί"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jelölő elhelyezéséhez","firstVertex":"Kattintson az első pont elhelyezéséhez","continueLine":"Kattintson a következő pont elhelyezéséhez","finishLine":"A befejezéshez kattintson egy meglévő pontra","finishPoly":"A befejezéshez kattintson az első pontra","finishRect":"Kattintson a befejezéshez","startCircle":"Kattintson a kör középpontjának elhelyezéséhez","finishCircle":"Kattintson a kör befejezéséhez","placeCircleMarker":"Kattintson a körjelölő elhelyezéséhez"},"actions":{"finish":"Befejezés","cancel":"Mégse","removeLastVertex":"Utolsó pont eltávolítása"},"buttonTitles":{"drawMarkerButton":"Jelölő rajzolása","drawPolyButton":"Poligon rajzolása","drawLineButton":"Vonal rajzolása","drawCircleButton":"Kör rajzolása","drawRectButton":"Négyzet rajzolása","editButton":"Elemek szerkesztése","dragButton":"Elemek mozgatása","cutButton":"Elemek vágása","deleteButton":"Elemek törlése","drawCircleMarkerButton":"Kör jelölő rajzolása","snappingButton":"Kapcsolja a jelöltőt másik elemhez vagy ponthoz","pinningButton":"Közös pontok összekötése"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en markør","firstVertex":"Tryk for at placere det første punkt","continueLine":"Tryk for at fortsætte linjen","finishLine":"Tryk på et eksisterende punkt for at afslutte","finishPoly":"Tryk på det første punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmarkør"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer markør","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Træk","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmarkør","snappingButton":"Fastgør trukket markør til andre elementer","pinningButton":"Sammenlæg delte elementer"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klikk for å plassere punkt","firstVertex":"Klikk for å plassere første punkt","continueLine":"Klikk for å tegne videre","finishLine":"Klikk på et eksisterende punkt for å fullføre","finishPoly":"Klikk første punkt for å fullføre","finishRect":"Klikk for å fullføre","startCircle":"Klikk for å sette sirkel midtpunkt","finishCircle":"Klikk for å fullføre sirkel","placeCircleMarker":"Klikk for å plassere sirkel"},"actions":{"finish":"Fullfør","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"کلیک برای جانمایی نشان","firstVertex":"کلیک برای رسم اولین رأس","continueLine":"کلیک برای ادامه رسم","finishLine":"کلیک روی هر نشان موجود برای پایان","finishPoly":"کلیک روی اولین نشان برای پایان","finishRect":"کلیک برای پایان","startCircle":"کلیک برای رسم مرکز دایره","finishCircle":"کلیک برای پایان رسم دایره","placeCircleMarker":"کلیک برای رسم نشان دایره"},"actions":{"finish":"پایان","cancel":"لفو","removeLastVertex":"حذف آخرین رأس"},"buttonTitles":{"drawMarkerButton":"درج نشان","drawPolyButton":"رسم چندضلعی","drawLineButton":"رسم خط","drawCircleButton":"رسم دایره","drawRectButton":"رسم چهارضلعی","editButton":"ویرایش لایه‌هل","dragButton":"جابجایی لایه‌ها","cutButton":"برش لایه‌ها","deleteButton":"حذف لایه‌ها","drawCircleMarkerButton":"رسم نشان دایره","snappingButton":"نشانگر را به لایه ها و رئوس دیگر بکشید","pinningButton":"رئوس مشترک را با هم پین کنید"}}')},function(t,e,i){var n=i(141),r=i(142);t.exports=function(t,e){return null!=t&&r(t,e,n)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(42)),l=n(i(147)),c=n(i(148)),u=i(9);function h(t,e){for(var i=!1,n=0;n<t.coordinates.length;n++)if(y(t.coordinates[n],e.coordinates)){i=!0;break}return i}function p(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){for(var r=n[i],o=!1,a=0,s=t.coordinates;a<s.length;a++)if(y(r,s[a])){o=!0;break}if(!o)return!1}return!0}function d(t,e){for(var i=!1,n=0,r=e.coordinates;n<r.length;n++){var o=r[n];if(c.default(o,t,{ignoreEndVertices:!0})&&(i=!0),!c.default(o,t))return!1}return!!i}function f(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){var r=n[i];if(!l.default(r,t,{ignoreBoundary:!0}))return!1}return!0}function m(t,e){for(var i=!1,n=0,r=e.coordinates;n<r.length;n++){var o=r[n];if(c.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(i=!0),!c.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return i}function g(t,e){var i=!1,n=0;if(!_(s.default(t),s.default(e)))return!1;for(;n<e.coordinates.length-1;n++){var r=o(e.coordinates[n],e.coordinates[n+1]);if(l.default({type:"Point",coordinates:r},t,{ignoreBoundary:!0})){i=!0;break}}return i}function v(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!_(s.default(t),s.default(e)))return!1;for(var i=0,n=u.getGeom(e).coordinates;i<n.length;i++)for(var r=0,o=n[i];r<o.length;r++){var a=o[r];if(!l.default(a,t))return!1}return!0}function _(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function y(t,e){return t[0]===e[0]&&t[1]===e[1]}function o(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.default=function(t,e){var i=u.getGeom(t),n=u.getGeom(e),r=u.getType(t),o=u.getType(e),a=u.getCoords(t),s=u.getCoords(e);switch(r){case"Point":if("Point"!==o)throw new Error("feature2 "+o+" geometry not supported");return y(a,s);case"MultiPoint":switch(o){case"Point":return h(i,n);case"MultiPoint":return p(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return c.default(n,i,{ignoreEndVertices:!0});case"LineString":return m(i,n);case"MultiPoint":return d(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return l.default(n,i,{ignoreBoundary:!0});case"LineString":return g(i,n);case"Polygon":return v(i,n);case"MultiPoint":return f(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.isPointInMultiPoint=h,e.isMultiPointInMultiPoint=p,e.isMultiPointOnLine=d,e.isMultiPointInPoly=f,e.isLineOnLine=m,e.isLineInPoly=g,e.isPolyInPoly=v,e.doBBoxOverlap=_,e.compareCoords=y,e.getMidpoint=o},function(t,e,i){t.exports=i(152)},function(t,e){Array.prototype.findIndex=Array.prototype.findIndex||function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=0;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},Array.prototype.find=Array.prototype.find||function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return o}},"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0==n)return!1;for(var r,o,e=0|e,a=Math.max(0<=e?e:n-Math.abs(e),0);a<n;){if((r=i[a])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}})},function(t,e,i){var c=i(68),u=i(31),h=i(99),p=i(101),d=i(2),f=i(38),m=i(37);t.exports=function n(r,o,a,s,l){r!==o&&h(o,function(t,e){var i;l=l||new c,d(t)?p(r,o,e,a,n,s,l):(i=s?s(m(r,e),t,e+"",r,o,l):void 0,u(r,e,i=void 0===i?t:i))},f)}},function(t,e,i){var n=i(10),r=i(74),o=i(75),a=i(76),s=i(77),i=i(78);function l(t){t=this.__data__=new n(t);this.size=t.size}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,t.exports=l},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,i){var n=i(11),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,t=n(e,t);return!(t<0||(t==e.length-1?e.pop():r.call(e,t,1),--this.size,0))}},function(t,e,i){var n=i(11);t.exports=function(t){var e=this.__data__,t=n(e,t);return t<0?void 0:e[t][1]}},function(t,e,i){var n=i(11);t.exports=function(t){return-1<n(this.__data__,t)}},function(t,e,i){var r=i(11);t.exports=function(t,e){var i=this.__data__,n=r(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}},function(t,e,i){var n=i(10);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,i){var r=i(10),o=i(28),a=i(30);t.exports=function(t,e){var i=this.__data__;if(i instanceof r){var n=i.__data__;if(!o||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new a(n)}return i.set(t,e),this.size=i.size,this}},function(t,e,i){var n=i(17),r=i(83),o=i(2),a=i(85),s=/^\[object .+?Constructor\]$/,l=Function.prototype,i=Object.prototype,l=l.toString,i=i.hasOwnProperty,c=RegExp("^"+l.call(i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(n(t)?c:s).test(a(t))}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(18),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{var n=!(t[s]=void 0)}catch(t){}var r=a.call(t);return n&&(e?t[s]=i:delete t[s]),r}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var i=i(84),n=(i=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!n&&n in t}},function(t,e,i){i=i(3)["__core-js_shared__"];t.exports=i},function(t,e){var i=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,i){var n=i(88),r=i(10),o=i(28);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||r),string:new n}}},function(t,e,i){var n=i(89),r=i(90),o=i(91),a=i(92),i=i(93);function s(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=o,s.prototype.has=a,s.prototype.set=i,t.exports=s},function(t,e,i){var n=i(13);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){t=this.has(t)&&delete this.__data__[t];return this.size-=t?1:0,t}},function(t,e,i){var n=i(13),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(e,t)?e[t]:void 0}},function(t,e,i){var n=i(13),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}},function(t,e,i){var n=i(13);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,i){var n=i(14);t.exports=function(t){t=n(this,t).delete(t);return this.size-=t?1:0,t}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,i){var n=i(14);t.exports=function(t){return n(this,t).get(t)}},function(t,e,i){var n=i(14);t.exports=function(t){return n(this,t).has(t)}},function(t,e,i){var r=i(14);t.exports=function(t,e){var i=r(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}},function(t,e,i){i=i(100)();t.exports=i},function(t,e){t.exports=function(l){return function(t,e,i){for(var n=-1,r=Object(t),o=i(t),a=o.length;a--;){var s=o[l?a:++n];if(!1===e(r[s],s,r))break}return t}}},function(t,e,i){var d=i(31),f=i(102),m=i(103),g=i(106),v=i(107),_=i(21),y=i(5),b=i(111),x=i(35),k=i(17),w=i(2),L=i(113),M=i(36),C=i(37),S=i(117);t.exports=function(t,e,i,n,r,o,a){var s,l,c,u=C(t,i),h=C(e,i),p=a.get(h);p?d(t,i,p):((s=void 0===(c=o?o(u,h,i+"",t,e,a):void 0))&&(p=!(l=y(h))&&x(h),e=!l&&!p&&M(h),c=h,l||p||e?c=y(u)?u:b(u)?g(u):p?f(h,!(s=!1)):e?m(h,!(s=!1)):[]:L(h)||_(h)?_(c=u)?c=S(u):w(u)&&!k(u)||(c=v(h)):s=!1),s&&(a.set(h,c),r(c,h,n,o,a),a.delete(h)),d(t,i,c))}},function(t,o,a){(function(t){var e=a(3),i=o&&!o.nodeType&&o,n=i&&"object"==typeof t&&t&&!t.nodeType&&t,e=n&&n.exports===i?e.Buffer:void 0,r=e?e.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();e=t.length,e=r?r(e):new t.constructor(e);return t.copy(e),e}}).call(this,a(20)(t))},function(t,e,i){var n=i(104);t.exports=function(t,e){e=e?n(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}},function(t,e,i){var n=i(105);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e,i){i=i(3).Uint8Array;t.exports=i},function(t,e){t.exports=function(t,e){var i=-1,n=t.length;for(e=e||Array(n);++i<n;)e[i]=t[i];return e}},function(t,e,i){var n=i(108),r=i(33),o=i(34);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(r(t))}},function(t,e,i){var n=i(2),r=Object.create;function o(){}t.exports=function(t){if(!n(t))return{};if(r)return r(t);o.prototype=t;t=new o;return o.prototype=void 0,t}},function(t,e){t.exports=function(e,i){return function(t){return e(i(t))}}},function(t,e,i){var n=i(8),r=i(4);t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},function(t,e,i){var n=i(22),r=i(4);t.exports=function(t){return r(t)&&n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,i){var n=i(8),r=i(33),o=i(4),a=Function.prototype,i=Object.prototype,s=a.toString,l=i.hasOwnProperty,c=s.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=n(t))return!1;t=r(t);if(null===t)return!0;t=l.call(t,"constructor")&&t.constructor;return"function"==typeof t&&t instanceof t&&s.call(t)==c}},function(t,e,i){var n=i(8),r=i(23),o=i(4),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,o,a){(function(t){var e=a(29),i=o&&!o.nodeType&&o,n=i&&"object"==typeof t&&t&&!t.nodeType&&t,r=n&&n.exports===i&&e.process,e=function(){try{return n&&n.require&&n.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=e}).call(this,a(20)(t))},function(t,e,i){var n=i(118),r=i(38);t.exports=function(t){return n(t,r(t))}},function(t,e,i){var c=i(119),u=i(19);t.exports=function(t,e,i,n){var r=!i;i=i||{};for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),(r?u:c)(i,s,l)}return i}},function(t,e,i){var r=i(19),o=i(12),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var n=t[e];a.call(t,e)&&o(n,i)&&(void 0!==i||e in t)||r(t,e,i)}},function(t,e,i){var u=i(121),h=i(21),p=i(5),d=i(35),f=i(24),m=i(36),g=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i,n=p(t),r=!n&&h(t),o=!n&&!r&&d(t),a=!n&&!r&&!o&&m(t),s=n||r||o||a,l=s?u(t.length,String):[],c=l.length;for(i in t)!e&&!g.call(t,i)||s&&("length"==i||o&&("offset"==i||"parent"==i)||a&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||f(i,c))||l.push(i);return l}},function(t,e){t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},function(t,e,i){var r=i(2),o=i(34),a=i(123),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e,i=o(t),n=[];for(e in t)("constructor"!=e||!i&&s.call(t,e))&&n.push(e);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},function(t,e,i){var n=i(125),l=i(132);t.exports=function(s){return n(function(t,e){var i=-1,n=e.length,r=1<n?e[n-1]:void 0,o=2<n?e[2]:void 0,r=3<s.length&&"function"==typeof r?(n--,r):void 0;for(o&&l(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++i<n;){var a=e[i];a&&s(t,a,i,r)}return t})}},function(t,e,i){var n=i(39),r=i(126),o=i(128);t.exports=function(t,e){return o(r(t,e,n),t+"")}},function(t,e,i){var l=i(127),c=Math.max;t.exports=function(o,a,s){return a=c(void 0===a?o.length-1:a,0),function(){for(var t=arguments,e=-1,i=c(t.length-a,0),n=Array(i);++e<i;)n[e]=t[a+e];e=-1;for(var r=Array(a+1);++e<a;)r[e]=t[e];return r[a]=s(n),l(o,this,r)}}},function(t,e){t.exports=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}},function(t,e,i){var n=i(129),n=i(131)(n);t.exports=n},function(t,e,i){var n=i(130),r=i(32),i=i(39),i=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=i},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var o=Date.now;t.exports=function(i){var n=0,r=0;return function(){var t=o(),e=16-(t-r);if(r=t,0<e){if(800<=++n)return arguments[0]}else n=0;return i.apply(void 0,arguments)}}},function(t,e,i){var r=i(12),o=i(22),a=i(24),s=i(2);t.exports=function(t,e,i){if(!s(i))return!1;var n=typeof e;return!!("number"==n?o(i)&&a(e,i.length):"string"==n&&e in i)&&r(i[e],t)}},function(t,e,i){var r=i(40),o=i(41);t.exports=function(t,e){for(var i=0,n=(e=r(e,t)).length;null!=t&&i<n;)t=t[o(e[i++])];return i&&i==n?t:void 0}},function(t,e,i){var n=i(5),r=i(25),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!r(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,i){var i=i(136),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=i(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(n,function(t,e,i,n){r.push(i?n.replace(o,"$1"):e||t)}),r});t.exports=i},function(t,e,i){var n=i(137);t.exports=function(t){var t=n(t,function(t){return 500===e.size&&e.clear(),t}),e=t.cache;return t}},function(t,e,i){var a=i(30);function s(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var o=function(){var t=arguments,e=r?r.apply(this,t):t[0],i=o.cache;if(i.has(e))return i.get(e);t=n.apply(this,t);return o.cache=i.set(e,t)||i,t};return o.cache=new(s.Cache||a),o}s.Cache=a,t.exports=s},function(t,e,i){var n=i(139);t.exports=function(t){return null==t?"":n(t)}},function(t,e,i){var n=i(18),r=i(140),o=i(5),a=i(25),n=n?n.prototype:void 0,s=n?n.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return r(e,t)+"";if(a(e))return s?s.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i}},function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}},function(t,e){var i=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&i.call(t,e)}},function(t,e,i){var s=i(40),l=i(21),c=i(5),u=i(24),h=i(23),p=i(41);t.exports=function(t,e,i){for(var n=-1,r=(e=s(e,t)).length,o=!1;++n<r;){var a=p(e[n]);if(!(o=null!=t&&i(t,a)))break;t=t[a]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&h(r)&&u(a,r)&&(c(t)||l(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i(6),r=i(9),n=i(15);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return n.flattenEach(t,function(t){!function(e,i){var t=[],n=e.geometry;if(null!==n){switch(n.type){case"Polygon":t=r.getCoords(n);break;case"LineString":t=[r.getCoords(n)]}t.forEach(function(t){var a,s;a=e.properties,s=[],t.reduce(function(t,e){var i,n,r,o=l.lineString([t,e],a);return o.bbox=(i=t[0],n=t[1],r=e[0],t=e[1],[i<r?i:r,n<t?n:t,r<i?i:r,t<n?n:t]),s.push(o),e}),s.forEach(function(t){t.id=i.length,i.push(t)})})}}(t,e)}),l.featureCollection(e)}},function(t,e,i){var n=i(145),r=i(6),o=i(15),a=i(42).default,s=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function c(t){t=n(t);return t.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox||a(t),n.prototype.insert.call(this,t)},t.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox||a(t),e.push(t)}):s(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox||a(t),e.push(t)}),n.prototype.load.call(this,e)},t.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox||a(t),n.prototype.remove.call(this,t,e)},t.clear=function(){return n.prototype.clear.call(this)},t.search=function(t){t=n.prototype.search.call(this,this.toBBox(t));return l(t)},t.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},t.all=function(){var t=n.prototype.all.call(this);return l(t)},t.toJSON=function(){return n.prototype.toJSON.call(this)},t.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},t.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},t}t.exports=c,t.exports.default=c},function(t,e,i){"use strict";t.exports=n,t.exports.default=n;var s=i(146);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function d(t,e){f(t,0,t.children.length,e,t)}function f(t,e,i,n,r){(r=r||g(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],u(r,t.leaf?n(o):o);return r}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function a(t,e){return t.minY-e.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,i,n,r){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,s(t,o,e,i,r),a.push(e,o,o,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!c(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],c(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):p(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!c(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],c(t,a=e.leaf?i(o):o)){if(e.leaf||p(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!p(a,s)?n?(i++,a=n.children[i],o=!1):a=null:(l.push(a),c.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return d(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n;var s,l,c,u,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(v(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(v(t,s,c=Math.min(s+p-1,i),h,this.compareMinY),l=s;l<=c;l+=h)u=Math.min(l+h-1,c),r.children.push(this._build(t,l,u,n-1));return d(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,c,u,h,p;n.push(e),!e.leaf&&n.length-1!==i;){for(c=u=1/0,r=0,o=e.children.length;r<o;r++)l=m(a=e.children[r]),h=t,p=a,(h=(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l)<u?(u=h,c=l<c?l:c,s=a):h===u&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,i=i?t:n(t),r=[],n=this._chooseSubtree(i,this.data,e,r);for(n.children.push(t),u(n,i);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);n=this._chooseSplitIndex(i,r,n),n=g(i.children.splice(n,i.children.length-n));n.height=i.height,n.leaf=i.leaf,d(i,this.toBBox),d(n,this.toBBox),e?t[e-1].children.push(n):this._splitRoot(i,n)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,r,o,a,s,l,c,u,h,p=o=1/0,d=e;d<=i-e;d++)s=n=f(t,0,d,this.toBBox),h=r=f(t,d,i,this.toBBox),l=Math.max(s.minX,h.minX),c=Math.max(s.minY,h.minY),u=Math.min(s.maxX,h.maxX),h=Math.min(s.maxY,h.maxY),c=Math.max(0,u-l)*Math.max(0,h-c),r=m(n)+m(r),c<p?(p=c,a=d,o=r<o?r:o):c===p&&r<o&&(o=r,a=d);return a},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:o,r=t.leaf?this.compareMinY:a;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var r,o=this.toBBox,a=f(t,0,e,o),s=f(t,i-e,i,o),l=h(a)+h(s),c=e;c<i-e;c++)r=t.children[c],u(a,t.leaf?o(r):r),l+=h(a);for(c=i-e-1;e<=c;c--)r=t.children[c],u(s,t.leaf?o(r):r),l+=h(s);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)u(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():d(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){t.exports=function(){"use strict";function d(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function o(t,e){return t<e?-1:e<t?1:0}return function(t,e,i,n,r){!function t(e,i,n,r,o){for(;n<r;){var a,s,l,c;600<r-n&&(a=r-n+1,s=i-n+1,c=Math.log(a),l=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1),t(e,i,Math.max(n,Math.floor(i-s*l/a+c)),Math.min(r,Math.floor(i+(a-s)*l/a+c)),o));var u=e[i],h=n,p=r;for(d(e,n,i),0<o(e[r],u)&&d(e,n,r);h<p;){for(d(e,h,p),h++,p--;o(e[h],u)<0;)h++;for(;0<o(e[p],u);)p--}0===o(e[n],u)?d(e,n,p):d(e,++p,r),p<=i&&(n=p+1),i<=p&&(r=p-1)}}(t,e,i||0,n||t.length-1,r||o)}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=i(9);function h(t,e,i){for(var n=!1,r=0,o=(e=e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]?e.slice(0,e.length-1):e).length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],l=e[o][0],c=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!i;s>t[1]!=c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(n=!n)}return n}e.default=function(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=u.getCoord(t),r=u.getGeom(e),t=r.type,e=e.bbox,o=r.coordinates;if(e&&!1==(e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]))return!1;"Polygon"===t&&(o=[o]);for(var a=!1,s=0;s<o.length&&!a;s++)if(h(n,o[s][0],i.ignoreBoundary)){for(var l=!1,c=1;c<o[s].length&&!l;)h(n,o[s][c],!i.ignoreBoundary)&&(l=!0),c++;l||(a=!0)}return a}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=i(9);e.default=function(t,e,i){void 0===i&&(i={});for(var n,r,o,a,s,l,c,u,h,p=g.getCoord(t),d=g.getCoords(e),f=0;f<d.length-1;f++){var m=!1;if(i.ignoreEndVertices&&(0===f&&(m="start"),f===d.length-2&&(m="end"),0===f&&f+1===d.length-1&&(m="both")),n=d[f],r=d[f+1],o=m,h=u=c=l=s=a=void 0,a=(m=p)[0],s=m[1],l=n[0],c=n[1],u=r[0],h=r[1],n=u-l,r=h-c,0==(m[0]-l)*r-(m[1]-c)*n&&(o?"start"===o?Math.abs(n)>=Math.abs(r)?0<n?l<a&&a<=u:u<=a&&a<l:0<r?c<s&&s<=h:h<=s&&s<c:"end"===o?Math.abs(n)>=Math.abs(r)?0<n?l<=a&&a<u:u<a&&a<=l:0<r?c<=s&&s<h:h<s&&s<=c:"both"===o&&(Math.abs(n)>=Math.abs(r)?0<n?l<a&&a<u:u<a&&a<l:0<r?c<s&&s<h:h<s&&s<c):Math.abs(n)>=Math.abs(r)?0<n?l<=a&&a<=u:u<=a&&a<=l:0<r?c<=s&&s<=h:h<=s&&s<=c))return!0}return!1}},function(t,e){var i,n,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,l=[],c=!1,u=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&p())}function p(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new d(t,e)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e),i(66);var n=i(43),r=i(26),o=i.n(r),a=i(44),s=i(45),l=i(46),c=i(47),u=i(48),h=i(49),p=i(50),d=i(51),f=i(52),e=i(53),r=i(54),m={en:a,de:s,it:l,id:c,ro:u,ru:h,es:p,nl:d,fr:f,pt_br:i(55),zh:e,zh_tw:r,pl:i(56),sv:i(57),el:i(58),hu:i(59),da:i(60),no:i(61),fa:i(62)},p=i(0),g=i.n(p),d=i(63),v=i.n(d);function _(t){var e=L.PM.activeLang;return v()(m,e)||(e="en"),g()(m[e],t)}function y(t){return!function i(t){return t.filter(function(t){return![null,"",void 0].includes(t)}).reduce(function(t,e){return t.concat(Array.isArray(e)?i(e):e)},[])}(t).length}function b(t){return t.reduce(function(t,e){return 0!==e.length&&t.push(Array.isArray(e)?b(e):e),t},[])}function x(t,e,i,n){for(var r,o=[],a=0;a<i;a+=1)r=function(t,e,i){for(var n,r,o,a=6356752.3142,s=1/298.257223563,l=t.lng,c=t.lat,u=i,h=Math.PI,p=e*h/180,d=Math.sin(p),f=Math.cos(p),t=(1-s)*Math.tan(c*h/180),i=1/Math.sqrt(1+t*t),e=t*i,m=Math.atan2(t,f),g=1+(t=272331606681.9453*(c=1-(p=i*d)*p)/(a*a))/16384*(4096+t*(t*(320-175*t)-768)),v=t/1024*(256+t*(t*(74-47*t)-128)),_=u/(a*g),y=2*Math.PI;1e-12<Math.abs(_-y);)n=Math.cos(2*m+_),y=_,_=u/(a*g)+v*(r=Math.sin(_))*(n+v/4*((o=Math.cos(_))*(2*n*n-1)-v/6*n*(4*r*r-3)*(4*n*n-3)));return t=e*r-i*o*f,t=Math.atan2(e*o+i*r*f,(1-s)*Math.sqrt(p*p+t*t)),c=s/16*c*(4+s*(4-3*c)),c=l+180*(Math.atan2(r*d,i*o-e*r*f)-(1-c)*s*p*(_+c*r*(n+c*o*(2*n*n-1))))/h,h=180*t/h,L.latLng(c,h)}(t,360*a/i+n,e),r=L.latLng(r.lng,r.lat),o.push(r);return o}function k(t,e,i,n){return function(t,e,i){e=(e+360)%360;var n=Math.PI/180,r=180/Math.PI,o=t.lng*n,a=t.lat*n,s=e*n,t=Math.sin(a),e=Math.cos(a),n=Math.cos(i/6378137),a=Math.sin(i/6378137),i=Math.asin(t*n+e*a*Math.cos(s)),t=o+Math.atan2(Math.sin(s)*a*e,n-t*Math.sin(i)),t=180<(t*=r)?t-360:t<-180?t+360:t;return L.latLng([i*r,t])}(e,(i=i,e=(t=t).latLngToContainerPoint(e),i=t.latLngToContainerPoint(i),(e=180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI+90)+(e<0?360:0)),n)}var w={calcMiddleLatLng:function(t,e,i){e=t.project(e),i=t.project(i);return t.unproject(e._add(i)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(t){(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&e.push(t)}),e=(e=e.filter(function(t){return!!t.pm})).filter(function(t){return!t._pmTempLayer})},circleToPolygon:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:60,i=x(t.getLatLng(),t.getRadius(),e,0),n=[],r=0;r<i.length;r+=1){var o=[i[r].lat,i[r].lng];n.push(o)}return L.polygon(n,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];t.fire(e,i,n),this.getAllParentGroups(t).groups.forEach(function(t){t.fire(e,i,n)})},getAllParentGroups:function(t){var r=[],o=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||1e3<(new Date).getTime()-t._pmLastGroupFetch.time?(function t(e){for(var i in e._eventParents){var n;-1===r.indexOf(i)&&(r.push(i),n=e._eventParents[i],o.push(n),t(n))}}(t),t._pmLastGroupFetch={time:(new Date).getTime(),groups:o,groupIds:r},{groupIds:r,groups:o}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:x,getTranslation:_,findDeepCoordIndex:function(t,r){var o;t.some(function i(n){return function(t,e){e=n.concat(e);return t.lat&&t.lat===r.lat&&t.lng===r.lng?(o=e,!0):Array.isArray(t)&&t.some(i(e))}}([]));t={};return t=o?{indexPath:o,index:o[o.length-1],parentPath:o.slice(0,o.length-1)}:t},_getIndexFromSegment:function(t,e){if(e&&2===e.length){var i=this.findDeepCoordIndex(t,e[0]),t=this.findDeepCoordIndex(t,e[1]),e=Math.max(i.index,t.index);return 0!==i.index&&0!==t.index||1===e||(e+=1),{indexA:i,indexB:t,newIndex:e,indexPath:i.indexPath,parentPath:i.parentPath}}return null}};function M(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function C(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){var e,i;e=n,t=r[i=t],i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}var S=w.findLayers,f={_globalEditMode:!1,enableGlobalEditMode:function(t){var e=C({snappable:this._globalSnappingEnabled},t);this.Toolbar.toggleButton("editMode",!0),S(this.map).forEach(function(t){t.pm.enable(e)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers=[],this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this.setGlobalEditStatus(!0)},disableGlobalEditMode:function(){S(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",!1),this.setGlobalEditStatus(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditMode},setGlobalEditStatus:function(t){this._globalEditMode=t,this._fireEditModeEvent(this._globalEditMode)},toggleGlobalEditMode:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var e=this,t=this._addedLayers;this._addedLayers=[],t.forEach(function(t){t.pm&&!t._pmTempLayer&&e.globalEditModeEnabled()&&t.pm.enable(C({},e.globalOptions))})},_layerAdded:function(t){t=t.layer;this._addedLayers.push(t)},_fireEditModeEvent:function(t){w._fireEvent(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map})}},P=w.findLayers,e={enableGlobalDragMode:function(){var t=P(this.map);this._globalDragMode=!0,t.forEach(function(t){t.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this._globalDragMode),this._fireDragModeEvent(!0)},disableGlobalDragMode:function(){var t=P(this.map);this._globalDragMode=!1,t.forEach(function(t){t.pm.disableLayerDrag()}),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this._globalDragMode),this._fireDragModeEvent(!1)},globalDragModeEnabled:function(){return!!this._globalDragMode},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(t){t=t.layer;t.pm&&!t._pmTempLayer&&this.globalDragModeEnabled()&&(this.disableGlobalDragMode(),this.enableGlobalDragMode())},_fireDragModeEvent:function(t){w._fireEvent(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map})}},r={enableGlobalRemovalMode:function(){var e=this;this._globalRemovalMode=!0,this.map.eachLayer(function(t){!t.pm||t instanceof L.LayerGroup||(t.pm.disable(),t.on("click",e.removeLayer,e))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this._globalRemovalMode),this._fireRemovalModeEvent(!0)},disableGlobalRemovalMode:function(){var e=this;this._globalRemovalMode=!1,this.map.eachLayer(function(t){t.off("click",e.removeLayer,e)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this._globalRemovalMode),this._fireRemovalModeEvent(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalMode},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){t=t.layer;t.pm&&!t._pmTempLayer&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},_fireRemovalModeEvent:function(t){w._fireEvent(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map})},removeLayer:function(t){t=t.target;t._pmTempLayer||t.pm&&t.pm.dragging()||(t.removeFrom(this.map.pm._getContainingLayer()),t.remove(),t instanceof L.LayerGroup?(w._fireEvent(t,"pm:remove",{layer:t,shape:void 0}),w._fireEvent(this.map,"pm:remove",{layer:t,shape:void 0})):(w._fireEvent(t,"pm:remove",{layer:t,shape:t.pm.getShape()}),w._fireEvent(this.map,"pm:remove",{layer:t,shape:t.pm.getShape()})))}},T=w.findLayers,p=L.Class.extend({includes:[f,e,r],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this._globalRemovalMode=!1,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"}}},setLang:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en",e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"en",n=L.PM.activeLang;e&&(m[t]=o()(m[i],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),w._fireEvent(this.map,"pm:langchange",{oldLang:n,activeLang:t,fallback:i,translations:m[t]})},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Polygon",e=1<arguments.length?arguments[1]:void 0;"Poly"===t&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===t&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(e){var i=this,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).ignoreShapes||[];this.map.pm.Draw.shapes.forEach(function(t){-1===n.indexOf(t)&&i.map.pm.Draw[t].setPathOptions(e)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,i=o()(this.globalOptions,t),t=!1;this.map.pm.Draw.CircleMarker.enabled()&&this.map.pm.Draw.CircleMarker.options.editable!==i.editable&&(this.map.pm.Draw.CircleMarker.disable(),t=!0),this.map.pm.Draw.shapes.forEach(function(t){e.map.pm.Draw[t].setOptions(i)}),t&&this.map.pm.Draw.CircleMarker.enable(),T(this.map).forEach(function(t){t.pm.setOptions(i)}),this.applyGlobalOptions(),this.globalOptions=i},applyGlobalOptions:function(){T(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=T(this.map);if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach(function(t){i.addLayer(t)}),i},getGeomanDrawLayers:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=T(this.map).filter(function(t){return!0===t._drawnByGeoman});if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach(function(t){i.addLayer(t)}),i},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map}}),d=L.Control.extend({options:{position:"topleft"},initialize:function(t){this._button=Object.assign({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):"edit"===this._button.tool?this._container=this._map.pm.Toolbar.editContainer:"options"===this._button.tool?this._container=this._map.pm.Toolbar.optionsContainer:"custom"===this._button.tool?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus="boolean"==typeof t?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},_triggerClick:function(t){t&&t.preventDefault(),this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t})},_makeButton:function(o){var a=this,e=-1<this.options.position.indexOf("right")?"pos-right":"",t=L.DomUtil.create("div","button-container",this._container),i=L.DomUtil.create("a","leaflet-buttons-control-button",t);i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.href="#";var n=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(e),t),r=o.actions,s={cancel:{text:_("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:_("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:_("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[o.jsClass]._removeLastVertex()}},finish:{text:_("actions.finish"),onClick:function(t){this._map.pm.Draw[o.jsClass]._finishShape(t)}}};r.forEach(function(t){var r;if(s[t])r=s[t];else{if(!t.text)return;r=t}t=L.DomUtil.create("a","leaflet-pm-action ".concat(e," action-").concat(t),n);t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.href="#",t.innerHTML=r.text,!o.disabled&&r.onClick&&(L.DomEvent.addListener(t,"click",function(t){t.preventDefault();var e,i="",n=a._map.pm.Toolbar.buttons;for(e in n)if(n[e]._button===o){i=e;break}w._fireEvent(a._map,"pm:actionclick",{text:r.text,action:r,btnName:i,button:o})},a),L.DomEvent.addListener(t,"click",r.onClick,a)),L.DomEvent.disableClickPropagation(t)}),o.toggleStatus&&L.DomUtil.addClass(t,"active");r=L.DomUtil.create("div","control-icon",i);return o.title&&r.setAttribute("title",o.title),o.iconUrl&&r.setAttribute("src",o.iconUrl),o.className&&L.DomUtil.addClass(r,o.className),o.disabled||(L.DomEvent.addListener(i,"click",function(){a._button.disableOtherButtons&&a._map.pm.Toolbar.triggerClickOnToggledButtons(a);var t,e="",i=a._map.pm.Toolbar.buttons;for(t in i)if(i[t]._button===o){e=t;break}w._fireEvent(a._map,"pm:buttonclick",{btnName:e,button:o})}),L.DomEvent.addListener(i,"click",this._triggerClick,this)),o.disabled&&(L.DomUtil.addClass(i,"pm-disabled"),L.DomUtil.addClass(r,"pm-disabled")),L.DomEvent.disableClickPropagation(i),t},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&!1!==this._button.cssToggle?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_clicked:function(){this._button.doToggle&&this.toggle()}});function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L.Control.PMButton=d;f=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;void 0!==t.editPolygon&&(t.editMode=t.editPolygon),void 0!==t.deleteLayer&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this._showHideButtons(),this.isVisible=!0},applyIconStyle:function(){var t,e=this.getButtons(),i={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete"}};for(t in e){var n=e[t];L.Util.setOptions(n,{className:i.geomanIcons[t]})}},removeControls:function(){var t,e=this.getButtons();for(t in e)e[t].remove();this.isVisible=!1},toggleControls:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){var e,i=["snappingOption"];for(e in this.buttons)!i.includes(e)&&this.buttons[e]!==t&&this.buttons[e].toggled()&&this.buttons[e]._triggerClick()},toggleButton:function(t,e){return"deleteLayer"===(t="editPolygon"===t?"editMode":t)&&(t="removalMode"),2<arguments.length&&void 0!==arguments[2]&&!arguments[2]||this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var i=this,t={className:"control-icon leaflet-pm-icon-marker",title:_("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},e={title:_("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},n={className:"control-icon leaflet-pm-icon-polyline",title:_("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},r={title:_("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},o={title:_("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:_("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:_("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},l={title:_("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},c={title:_("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(t,e){i.map.pm.Draw[e.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},u={title:_("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){i.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]};this._addButton("drawMarker",new L.Control.PMButton(t)),this._addButton("drawPolyline",new L.Control.PMButton(n)),this._addButton("drawRectangle",new L.Control.PMButton(a)),this._addButton("drawPolygon",new L.Control.PMButton(e)),this._addButton("drawCircle",new L.Control.PMButton(r)),this._addButton("drawCircleMarker",new L.Control.PMButton(o)),this._addButton("editMode",new L.Control.PMButton(s)),this._addButton("dragMode",new L.Control.PMButton(l)),this._addButton("cutPolygon",new L.Control.PMButton(c)),this._addButton("removalMode",new L.Control.PMButton(u))},_showHideButtons:function(){this.removeControls();var t,e,i=this.getButtons(),n=[];for(t in!1===this.options.drawControls&&(n=n.concat(Object.keys(i).filter(function(t){return!i[t]._button.tool}))),!1===this.options.editControls&&(n=n.concat(Object.keys(i).filter(function(t){return"edit"===i[t]._button.tool}))),!1===this.options.optionsControls&&(n=n.concat(Object.keys(i).filter(function(t){return"options"===i[t]._button.tool}))),!1===this.options.customControls&&(n=n.concat(Object.keys(i).filter(function(t){return"custom"===i[t]._button.tool}))),i)this.options[t]&&-1===n.indexOf(t)&&(e=(e=i[t]._button.tool)||"draw",i[t].setPosition(this._getBtnPosition(e)),i[t].addTo(this.map))},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");"object"!==E(e)&&(e={name:e});var i=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");t=this.map.pm.Draw.createNewDrawInstance(e.name,i),i=this.buttons[i]._button;return e=Object.assign({},i,e),{drawInstance:t,control:this.createCustomControl(e)}},createCustomControl:function(t){if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),!1!==t.toggle&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&"draw"!==t.block||(t.block=""),t.className?-1===t.className.indexOf("control-icon")&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var e={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};!1!==this.options[t.name]&&(this.options[t.name]=!0);e=this._addButton(t.name,new L.Control.PMButton(e));return this.changeControlOrder(),e},changeControlOrder:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=this._shapeMapping(),i=[];t.forEach(function(t){e[t]?i.push(e[t]):i.push(t)});var n=this.getButtons(),r={};i.forEach(function(t){n[t]&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return!n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"edit"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"options"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).filter(function(t){return"custom"===n[t]._button.tool}).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),Object.keys(n).forEach(function(t){-1===i.indexOf(t)&&(r[t]=n[t])}),this.map.pm.Toolbar.buttons=r,this._showHideButtons()},getControlOrder:function(){var t,e=[];for(t in this.getButtons())e.push(t);return e},changeActionsOfControl:function(t,e){t=this._btnNameMapping(t);if(!t)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[t])throw new TypeError("Button with this name not exists");this.buttons[t]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){t=this._btnNameMapping(t);this.buttons[t]._button.disabled=!!e,this._showHideButtons()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]||t}}),e={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(t){Array.isArray(t)?e._assignEvents(t):(t.off("drag",e._handleSnapping,e),t.on("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e),t.on("dragend",e._cleanupSnapping,e))})},_cleanupSnapping:function(){delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(t){t.remove()})},_handleSnapping:function(t){var e=t.target;if(e._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._createSnapList,100,this)),t.originalEvent.altKey)return!1;if(void 0===this._snapList&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0)return!1;var i=this._calcClosestLayer(e.getLatLng(),this._snapList);if(0===Object.keys(i).length)return!1;var n=i.layer instanceof L.Marker||i.layer instanceof L.CircleMarker?i.latlng:this._checkPrioritiySnapping(i),r=this.options.snapDistance,t={marker:e,shape:this._shape,snapLatLng:n,segment:i.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:i.layer,distance:i.distance};return w._fireEvent(t.marker,"pm:snapdrag",t),w._fireEvent(this._layer,"pm:snapdrag",t),i.distance<r?(e._orgLatLng=e.getLatLng(),e.setLatLng(n),e._snapped=!0,e._snapInfo=t,(i=this._snapLatLng||{}).lat===(r=n||{}).lat&&i.lng===r.lng||(this._snapLatLng=n,w._fireEvent(e,"pm:snap",t),w._fireEvent(this._layer,"pm:snap",t))):this._snapLatLng&&(this._unsnap(t),e._snapped=!1,w._fireEvent(t.marker,"pm:unsnap",t),w._fireEvent(this._layer,"pm:unsnap",t)),!0},_createSnapList:function(){var e=this,i=[],n=[],t=this._map;t.off("pm:remove",this._handleSnapLayerRemoval,this),t.on("pm:remove",this._handleSnapLayerRemoval,this),t.eachLayer(function(t){var e;(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&!0!==t.options.snapIgnore&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&((t instanceof L.Circle||t instanceof L.CircleMarker)&&t.pm&&t.pm._hiddenPolyCircle?i.push(t.pm._hiddenPolyCircle):t instanceof L.ImageOverlay&&(t=L.rectangle(t.getBounds())),i.push(t),(e=L.polyline([],{color:"red",pmIgnore:!0}))._pmTempLayer=!0,n.push(e),(t instanceof L.Circle||t instanceof L.CircleMarker)&&n.push(e))}),i=(i=(i=i.filter(function(t){return e._layer!==t})).filter(function(t){return t._latlng||t._latlngs&&!y(t._latlngs)})).filter(function(t){return!t._pmTempLayer}),this._otherSnapLayers?this._snapList=i.concat(this._otherSnapLayers):this._snapList=i,this.debugIndicatorLines=n},_handleSnapLayerRemoval:function(t){var e=t.layer,t=this._snapList.findIndex(function(t){return t._leaflet_id===e._leaflet_id});this._snapList.splice(t,1)},_calcClosestLayer:function(n,t){var r=this,o=[],a={};return t.forEach(function(t,e){var i;t._parentCopy&&t._parentCopy===r._layer||(i=r._calcLayerDistances(n,t),r.debugIndicatorLines[e].setLatLngs([n,i.latlng]),(void 0===a.distance||i.distance<=a.distance)&&(i.distance<a.distance&&(o=[]),(a=i).layer=t,o.push(a)))}),this._getClosestLayerByPriority(o)},_calcLayerDistances:function(t,e){var o,a,s=this,l=this._map,i=e instanceof L.Marker||e instanceof L.CircleMarker,c=e instanceof L.Polygon,u=t,e=i?e.getLatLng():e.getLatLngs();if(i)return{latlng:Object.assign({},e),distance:this._getDistance(l,e,u)};!function n(r){r.forEach(function(t,e){var i;Array.isArray(t)?n(t):(i=t,t=c?e+1===r.length?0:e+1:e+1===r.length?void 0:e+1,(e=r[t])&&(t=s._getDistanceToSegment(l,u,i,e),(void 0===a||t<a)&&(a=t,o=[i,e])))})}(e);t=this._getClosestPointOnSegment(l,t,o[0],o[1]);return{latlng:Object.assign({},t),segment:o,distance:a}},_getClosestLayerByPriority:function(t){t=t.sort(function(t,e){return t._leaflet_id-e._leaflet_id});var e=this._map.pm.globalOptions.snappingOrder||[],i=0,n={};return e.concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach(function(t){n[t]||(i+=1,n[t]=i)}),t.sort(function(t,e){if(!e||0===Object.keys(e).length)return function(t,e){return t-e};for(var i,n=Object.keys(e),r=n.length,o={};r--;)i=n[r],o[i.toLowerCase()]=e[i];function a(t){return t instanceof L.Marker?"Marker":t instanceof L.Circle?"Circle":t instanceof L.CircleMarker?"CircleMarker":t instanceof L.Rectangle?"Rectangle":t instanceof L.Polygon?"Polygon":t instanceof L.Polyline?"Line":void 0}return function(t,e){if(1,i=a(t.layer).toLowerCase(),t=a(e.layer).toLowerCase(),!i||!t)return 0;var e=i in o?o[i]:Number.MAX_SAFE_INTEGER,i=t in o?o[t]:Number.MAX_SAFE_INTEGER,t=0;return e<i?t=-1:i<e&&(t=1),t}}("instanceofShape",n)),t[0]||{}},_checkPrioritiySnapping:function(t){var e=this._map,i=t.segment[0],n=t.segment[1],r=t.latlng,o=this._getDistance(e,i,r),a=this._getDistance(e,n,r),s=o<a?i:n,t=o<a?o:a;return this.options.snapMiddle&&(n=w.calcMiddleLatLng(e,i,n),(e=this._getDistance(e,n,r))<o&&e<a&&(s=n,t=e)),r=t<this.options.snapDistance?s:r,Object.assign({},r)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,i,n){var r=t.getMaxZoom();r===1/0&&(r=t.getZoom());e=t.project(e,r),i=t.project(i,r),n=t.project(n,r),n=L.LineUtil.closestPointOnSegment(e,i,n);return t.unproject(n,r)},_getDistanceToSegment:function(t,e,i,n){e=t.latLngToLayerPoint(e),i=t.latLngToLayerPoint(i),n=t.latLngToLayerPoint(n);return L.LineUtil.pointToSegmentDistance(e,i,n)},_getDistance:function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))}},r=L.Class.extend({includes:[e],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1},setOptions:function(t){L.Util.setOptions(this,t)},initialize:function(t){var e=this,i=new L.Icon.Default;i.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=i,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut"],this.shapes.forEach(function(t){e[t]=new L.PM.Draw[t](e._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){this.options.pathOptions=t},getShapes:function(){return this.shapes},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var e=this;this.shapes.forEach(function(t){e[t].disable()})},addControls:function(){var e=this;this.shapes.forEach(function(t){e[t].addButton()})},getActiveShape:function(){var e,i=this;return this.shapes.forEach(function(t){i[t]._enabled&&(e=t)}),e},_setGlobalDrawMode:function(){"Cut"===this._shape?w._fireEvent(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map}):w._fireEvent(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map});var t=w.findLayers(this._map);this._enabled?t.forEach(function(t){w.disablePopup(t)}):t.forEach(function(t){w.enablePopup(t)})},createNewDrawInstance:function(t,e){var i=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[i])throw new TypeError("There is no class L.PM.Draw.".concat(i));return this[t]=new L.PM.Draw[i](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal"};return e[t]||(this[t]?this[t]._shape:t)},_finishLayer:function(t){t.pm.setOptions(this.options),t.pm&&(t.pm._shape=this._shape),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")}});r.Marker=r.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.enable()}),w._fireEvent(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode()},disable:function(){var e=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),w._fireEvent(this._map,"pm:drawend",{shape:this._shape}),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer},_syncHintMarker:function(t){this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((t=t).target=this._hintMarker,this._handleSnapping(t))},_createMarker:function(t){t.latlng&&(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),t=this._hintMarker.getLatLng(),t=new L.Marker(t,this.options.markerStyle),this._setPane(t,"markerPane"),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),t.pm||(t.options.draggable=!1),t.addTo(this._map.pm._getContainingLayer()),t.pm&&this.options.markerEditable?t.pm.enable():t.dragging&&t.dragging.disable(),w._fireEvent(this._map,"pm:create",{shape:this._shape,marker:t,layer:t}),this._cleanupSnapping(),this.options.continueDrawing||this.disable())}});var d=i(7),D=i.n(d);r.Line=r.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],w._fireEvent(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),w._fireEvent(this._map,"pm:drawend",{shape:this._shape}),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();0<t.length&&(t=t[t.length-1],this._hintline.setLatLngs([t,this._hintMarker.getLatLng()]))},_syncHintMarker:function(t){var e;this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((e=t).target=this._hintMarker,this._handleSnapping(e)),this.options.allowSelfIntersection||this._handleSelfIntersection(!0,t.latlng)},hasSelfIntersection:function(){return 0<D()(this._layer.toGeoJSON(15)).features.length},_handleSelfIntersection:function(t,e){var i=L.polyline(this._layer.getLatLngs());t&&(e=e||this._hintMarker.getLatLng(),i.addLatLng(e));i=D()(i.toGeoJSON(15));this._doesSelfIntersect=0<i.features.length,this._doesSelfIntersect?this._hintline.setStyle({color:"red"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){var e;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,t.latlng),this._doesSelfIntersect)||(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),(e=this._hintMarker.getLatLng()).equals(this._layer.getLatLngs()[0])?this._finishShape(t):(this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e),t=this._createMarker(e),this._setTooltipText(),this._hintline.setLatLngs([e,e]),w._fireEvent(this._layer,"pm:vertexadded",{shape:this._shape,workingLayer:this._layer,marker:t,latlng:e})))},_removeLastVertex:function(){var t,e=this._layer.getLatLngs(),i=e.pop();e.length<1?this.disable():(t=this._layerGroup.getLayers().filter(function(t){return t instanceof L.Marker}).filter(function(t){return!L.DomUtil.hasClass(t._icon,"cursor-marker")}).find(function(t){return t.getLatLng()===i}),this._layerGroup.removeLayer(t),this._layer.setLatLngs(e),this._syncHintLine(),this._setTooltipText())},_finishShape:function(){var t;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||((t=this._layer.getLatLngs()).length<=1||(t=L.polyline(t,this.options.pathOptions),this._setPane(t,"layerPane"),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),w._fireEvent(this._map,"pm:create",{shape:this._shape,layer:t}),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()))},_createMarker:function(t){t=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(t,"vertexPane"),t._pmTempLayer=!0,this._layerGroup.addLayer(t),t.on("click",this._finishShape,this),t},_setTooltipText:function(){var t=_(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine");this._hintMarker.setTooltipContent(t)}}),r.Polygon=r.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_createMarker:function(t){t=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(t,"vertexPane"),t._pmTempLayer=!0,this._layerGroup.addLayer(t),1===this._layer.getLatLngs().flat().length?(t.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(t)-1,this.options.snappable&&this._cleanupSnapping()):t.on("click",function(){return 1}),t},_setTooltipText:function(){var t=_(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly");this._hintMarker.setTooltipContent(t)},_finishShape:function(t){var e;!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||((e=this._layer.getLatLngs()).length<=2||(e=L.polygon(e,this.options.pathOptions),this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),w._fireEvent(this._map,"pm:create",{shape:this._shape,layer:e}),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()))}}),r.Rectangle=r.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var e=0;e<2;e+=1){var i=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._styleMarkers.push(i)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],w._fireEvent(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),w._fireEvent(this._map,"pm:drawend",{shape:this._shape}),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(t){L.DomUtil.addClass(t._icon,"visible"),t.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(_("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){this._hintMarker.setLatLng(t.latlng),this.options.snappable&&((t=t).target=this._hintMarker,this._handleSnapping(t))},_syncRectangleSize:function(){var e,i=this,t=this._startMarker.getLatLng(),n=this._hintMarker.getLatLng();this._layer.setBounds([t,n]),this.options.cursorMarker&&this._styleMarkers&&(n=this._findCorners(),e=[],n.forEach(function(t){t.equals(i._startMarker.getLatLng())||t.equals(i._hintMarker.getLatLng())||e.push(t)}),e.forEach(function(t,e){i._styleMarkers[e].setLatLng(t)}))},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),t=this._startMarker.getLatLng(),e=L.rectangle([t,e],this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),w._fireEvent(this._map,"pm:create",{shape:this._shape,layer:e}),this.disable(),this.options.continueDrawing&&this.enable()}}),r.Circle=r.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],w._fireEvent(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),w._fireEvent(this._map,"pm:drawend",{shape:this._shape}),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),e=this._map.options.crs===L.CRS.Simple?this._map.distance(t,e):t.distanceTo(e);this.options.minRadiusCircle&&e<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(e)},_syncHintMarker:function(t){this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable&&((t=t).target=this._hintMarker,this._handleSnapping(t)),this._handleHintMarkerSnapping()},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);t=this._hintMarker.getLatLng();this._centerMarker.setLatLng(t),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(_("tooltips.finishCircle")),w._fireEvent(this._layer,"pm:centerplaced",{workingLayer:this._layer,latlng:t,shape:this._shape}))},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,t):e.distanceTo(t);this.options.minRadiusCircle&&t<this.options.minRadiusCircle?t=this.options.minRadiusCircle:this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle&&(t=this.options.maxRadiusCircle);t=Object.assign({},this.options.pathOptions,{radius:t}),t=L.circle(e,t);this._setPane(t,"layerPane"),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),t.pm&&t.pm._updateHiddenPolyCircle(),w._fireEvent(this._map,"pm:create",{shape:this._shape,layer:t}),this.disable(),this.options.continueDrawing&&this.enable()},_getNewDestinationOfHintMarker:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=t.distanceTo(e);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?e=k(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(e=k(this._map,t,e,this.options.maxRadiusCircle)),e},_handleHintMarkerSnapping:function(){var t,e;this._hintMarker._snapped&&(t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),e=t.distanceTo(e),(this.options.minRadiusCircle&&e<this.options.minRadiusCircle||this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}}),r.CircleMarker=r.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable?(this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"):(this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(_("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip()),this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.enable()}),this._layer.bringToBack(),w._fireEvent(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._setGlobalDrawMode()},disable:function(){var e=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(t){e.isRelevantMarker(t)&&t.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),w._fireEvent(this._map,"pm:drawend",{shape:this._shape}),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);t=this._hintMarker.getLatLng();this._centerMarker.setLatLng(t),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(_("tooltips.finishCircle")),w._fireEvent(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:this._layer,latlng:t}))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),e=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&e<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&e>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(e)},_syncHintMarker:function(t){this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable&&((t=t).target=this._hintMarker,this._handleSnapping(t)),this._handleHintMarkerSnapping()},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){t.latlng&&!this._layerIsDragging&&(this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng),t=this._hintMarker.getLatLng(),t=L.circleMarker(t,this.options.pathOptions),this._setPane(t,"layerPane"),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),t.pm&&this.options.markerEditable&&t.pm.enable(),w._fireEvent(this._map,"pm:create",{shape:this._shape,marker:t,layer:t}),this._cleanupSnapping(),this.options.continueDrawing||this.disable())},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),t=this._map.project(e).distanceTo(this._map.project(t));this.options.editable&&(this.options.minRadiusCircleMarker&&t<this.options.minRadiusCircleMarker?t=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&t>this.options.maxRadiusCircleMarker&&(t=this.options.maxRadiusCircleMarker));t=Object.assign({},this.options.pathOptions,{radius:t}),t=L.circleMarker(e,t);this._setPane(t,"layerPane"),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),t.pm&&t.pm._updateHiddenPolyCircle(),w._fireEvent(this._map,"pm:create",{shape:this._shape,layer:t}),this.disable(),this.options.continueDrawing&&this.enable()},_getNewDestinationOfHintMarker:function(){var t,e,i=this._hintMarker.getLatLng();return this.options.editable&&(t=this._centerMarker.getLatLng(),e=this._map.project(t).distanceTo(this._map.project(i)),this.options.minRadiusCircleMarker&&e<this.options.minRadiusCircleMarker?i=k(this._map,t,i,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&e>this.options.maxRadiusCircleMarker&&(i=k(this._map,t,i,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))),i},_handleHintMarkerSnapping:function(){var t,e;this.options.editable&&(this._hintMarker._snapped&&(t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),e=this._map.project(t).distanceTo(this._map.project(e)),(this.options.minRadiusCircleMarker&&e<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&e>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()))},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),i=this._map.project(e),i=L.point(i.x+t,i.y);return this._map.unproject(i).distanceTo(e)}});var d=i(1),A=i.n(d);function O(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function I(t,e){return t<e?-1:e<t?1:0}function B(t,e){if(!(this instanceof B))return new B(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function R(t,e){z(t,0,t.children.length,e,t)}function z(t,e,i,n,r){(r=r||W(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],F(r,t.leaf?n(o):o);return r}function F(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function N(t,e){return t.minX-e.minX}function j(t,e){return t.minY-e.minY}function U(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function H(t){return t.maxX-t.minX+(t.maxY-t.minY)}function G(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Z(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function W(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V(t,e,i,n,r){for(var o,a,s,l=[e,i];l.length;)(i=l.pop())-(e=l.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,s=r,function t(e,i,n,r,o){for(;n<r;){var a,s,l,c;600<r-n&&(a=r-n+1,s=i-n+1,c=Math.log(a),l=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1),t(e,i,Math.max(n,Math.floor(i-s*l/a+c)),Math.min(r,Math.floor(i+(a-s)*l/a+c)),o));var u=e[i],h=n,p=r;for(O(e,n,i),0<o(e[r],u)&&O(e,n,r);h<p;){for(O(e,h,p),h++,p--;o(e[h],u)<0;)h++;for(;0<o(e[p],u);)p--}0===o(e[n],u)?O(e,n,p):O(e,++p,r),p<=i&&(n=p+1),i<=p&&(r=p-1)}}(a=t,o,e||0,i||a.length-1,s||I),l.push(e,o,o,i))}B.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!Z(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],Z(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):G(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Z(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],Z(t,a=e.leaf?i(o):o)){if(e.leaf||G(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=W([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!G(a,s)?n?(i++,a=n.children[i],o=!1):a=null:(l.push(a),c.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return t},compareMinX:N,compareMinY:j,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return R(r=W(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=W([])).leaf=!1,r.height=n;var s,l,c,u,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(V(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(V(t,s,c=Math.min(s+p-1,i),h,this.compareMinY),l=s;l<=c;l+=h)u=Math.min(l+h-1,c),r.children.push(this._build(t,l,u,n-1));return R(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,c,u,h,p;n.push(e),!e.leaf&&n.length-1!==i;){for(c=u=1/0,r=0,o=e.children.length;r<o;r++)l=U(a=e.children[r]),h=t,p=a,(h=(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l)<u?(u=h,c=l<c?l:c,s=a):h===u&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,i=i?t:n(t),r=[],n=this._chooseSubtree(i,this.data,e,r);for(n.children.push(t),F(n,i);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);n=this._chooseSplitIndex(i,r,n),n=W(i.children.splice(n,i.children.length-n));n.height=i.height,n.leaf=i.leaf,R(i,this.toBBox),R(n,this.toBBox),e?t[e-1].children.push(n):this._splitRoot(i,n)},_splitRoot:function(t,e){this.data=W([t,e]),this.data.height=t.height+1,this.data.leaf=!1,R(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,r,o,a,s,l,c,u,h,p=o=1/0,d=e;d<=i-e;d++)s=n=z(t,0,d,this.toBBox),h=r=z(t,d,i,this.toBBox),l=Math.max(s.minX,h.minX),c=Math.max(s.minY,h.minY),u=Math.min(s.maxX,h.maxX),h=Math.min(s.maxY,h.maxY),c=Math.max(0,u-l)*Math.max(0,h-c),r=U(n)+U(r),c<p?(p=c,a=d,o=r<o?r:o):c===p&&r<o&&(o=r,a=d);return a},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:N,r=t.leaf?this.compareMinY:j;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var r,o=this.toBBox,a=z(t,0,e,o),s=z(t,i-e,i,o),l=H(a)+H(s),c=e;c<i-e;c++)r=t.children[c],F(a,t.leaf?o(r):r),l+=H(a);for(c=i-e-1;e<=c;c--)r=t.children[c],F(s,t.leaf?o(r):r),l+=H(s);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)F(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():R(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var q=B;function $(t,e,i){if(!X(i=i||{}))throw new Error("options is invalid");var n=i.bbox,r=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&Q(n),r&&tt(r);i={type:"Feature"};return r&&(i.id=r),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function Y(t,e,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!K(t[0][1])||!K(t[0][1]))throw new Error("coordinates must contain numbers");return $({type:"LineString",coordinates:t},e,i)}function J(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&Q(i),n&&tt(n);e={type:"FeatureCollection"};return n&&(e.id=n),i&&(e.bbox=i),e.features=t,e}function K(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function X(t){return t&&t.constructor===Object}function Q(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!K(t))throw new Error("bbox must only contain numbers")})}function tt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function et(t,e,i){if(null!==t)for(var n,r,o,a,s,l,c,u,h=0,p=t.type,d="FeatureCollection"===p,f="Feature"===p,m=d?t.features.length:1,g=0;g<m;g++){s=(u=!!(c=d?t.features[g].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var _=0,y=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type,x=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(l,h,g,_,y))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],h,g,_,y))return!1;h++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-x;r++){if(!1===e(l[n][r],h,g,_,y))return!1;h++}"MultiLineString"===b&&_++,"Polygon"===b&&y++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===b&&(y=0),r=0;r<l[n].length;r++){for(o=0;o<l[n][r].length-x;o++){if(!1===e(l[n][r][o],h,g,_,y))return!1;h++}y++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===et(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function it(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function nt(t,c){!function(t,e){for(var i,n,r,o,a,s,l,c,u,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,f=p?t.features.length:1,m=0;m<f;m++){for(a=p?t.features[m].geometry:d?t.geometry:t,l=p?t.features[m].properties:d?t.properties:{},c=p?t.features[m].bbox:d?t.bbox:void 0,u=p?t.features[m].id:d?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<o;n++)if(null!==(r=s?a.geometries[n]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,h,l,c,u))return;break;case"GeometryCollection":for(i=0;i<r.geometries.length;i++)if(!1===e(r.geometries[i],h,l,c,u))return;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return;h++}}(t,function(t,e,i,n,r){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==c($(t,i,{bbox:n,id:r}),e,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var l=t.coordinates[s];if(!1===c($({type:o,coordinates:l},i),e,s))return!1}})}function rt(t){var e=[t[0],t[1]],i=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,i,e]]}}}function ot(t){var e=[1/0,1/0,-1/0,-1/0];return et(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}var at=function(t){t=q(t);return t.insert=function(t){var e;return Array.isArray(t)?(t=rt(e=t)).bbox=e:t.bbox=t.bbox||ot(t),q.prototype.insert.call(this,t)},t.load=function(t){var i=[];return Array.isArray(t)?t.forEach(function(t){var e=rt(t);e.bbox=t,i.push(e)}):it(t,function(t){t.bbox=t.bbox||ot(t),i.push(t)}),q.prototype.load.call(this,i)},t.remove=function(t){var e;return Array.isArray(t)&&((t=rt(e=t)).bbox=e),q.prototype.remove.call(this,t)},t.clear=function(){return q.prototype.clear.call(this)},t.search=function(t){return{type:"FeatureCollection",features:q.prototype.search.call(this,this.toBBox(t))}},t.collides=function(t){return q.prototype.collides.call(this,this.toBBox(t))},t.all=function(){return{type:"FeatureCollection",features:q.prototype.all.call(this)}},t.toJSON=function(){return q.prototype.toJSON.call(this)},t.fromJSON=function(t){return q.prototype.fromJSON.call(this,t)},t.toBBox=function(t){return{minX:(t=t.bbox||(Array.isArray(t)&&4===t.length?t:ot(t)))[0],minY:t[1],maxX:t[2],maxY:t[3]}},t},d=6371008.8,st={meters:d,metres:d,millimeters:1e3*d,millimetres:1e3*d,centimeters:100*d,centimetres:100*d,kilometers:d/1e3,kilometres:d/1e3,miles:d/1609.344,nauticalmiles:d/1852,inches:39.37*d,yards:d/1.0936,feet:3.28084*d,radians:1,degrees:d/111325};function lt(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function ct(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ut(t,e){if(!(i=e=e||{})||i.constructor!==Object)throw new Error("options is invalid");var i=e.precision,n=e.coordinates,e=e.mutate,i=null==i||isNaN(i)?6:i,n=null==n||isNaN(n)?3:n;if(!t)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==e&&void 0!==e||(t=JSON.parse(JSON.stringify(t)));var r=Math.pow(10,i);return function t(e,i,n){if(null!==e)for(var r,o,a,s,l,c,u,h,p=0,d=e.type,f="FeatureCollection"===d,m="Feature"===d,g=f?e.features.length:1,v=0;v<g;v++){l=(h=!!(u=f?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<l;_++){var y=0,b=0;if(null!==(s=h?u.geometries[_]:u)){c=s.coordinates;var x=s.type,k=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1;switch(x){case null:break;case"Point":if(!1===i(c,p,v,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===i(c[r],p,v,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-k;o++){if(!1===i(c[r][o],p,v,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===x&&(b=0),o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-k;a++){if(!1===i(c[r][o][a],p,v,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===t(s.geometries[r],i,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(t,function(t){!function(t,e){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,r)}),t}var ht=function(t,e,i){if(!(r=i=i||{})||r.constructor!==Object)throw new Error("options is invalid");var n=i.units,r=ct(t),i=ct(e),t=lt(i[1]-r[1]),e=lt(i[0]-r[0]),r=lt(r[1]),i=lt(i[1]),i=Math.pow(Math.sin(t/2),2)+Math.pow(Math.sin(e/2),2)*Math.cos(r)*Math.cos(i);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=st[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),n)};function pt(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dt(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ft(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}var mt=function(t){if(!t)throw new Error("geojson is required");var e=[];return nt(t,function(t){!function(e,i){var t=[],n=e.geometry;switch(n.type){case"Polygon":t=dt(n);break;case"LineString":t=[dt(n)]}t.forEach(function(t){var a,s;a=e.properties,s=[],t.reduce(function(t,e){var i,n,r,o=Y([t,e],a);return o.bbox=(i=t[0],n=t[1],r=e[0],t=e[1],[i<r?i:r,n<t?n:t,r<i?i:r,t<n?n:t]),s.push(o),e}),s.forEach(function(t){t.id=i.length,i.push(t)})})}(t,e)}),J(e)};function gt(t,e){var i=dt(t),n=dt(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],t=n[0][1],e=n[1][0],i=n[1][1],n=(i-t)*(a-r)-(e-l)*(s-o);if(0==n)return null;i=((e-l)*(o-t)-(i-t)*(r-l))/n,n=((a-r)*(o-t)-(s-o)*(r-l))/n;return 0<=i&&i<=1&&0<=n&&n<=1?function(t){if(0,!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!K(t[0])||!K(t[1]))throw new Error("coordinates must contain numbers");return $({type:"Point",coordinates:t},void 0,void 0)}([r+i*(a-r),o+i*(s-o)]):null}function vt(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function _t(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var yt=function t(e,i,n){if(!(o=n=n||{})||o.constructor!==Object)throw new Error("options is invalid");if(!0===n.final)return(t(i,e)+180)%360;var r=_t(e),o=_t(i),n=vt(r[0]),e=vt(o[0]),i=vt(r[1]),r=vt(o[1]),o=Math.sin(e-n)*Math.cos(r),n=Math.cos(i)*Math.sin(r)-Math.sin(i)*Math.cos(r)*Math.cos(e-n);return function(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}(Math.atan2(o,n))},d=6371008.8,bt={meters:d,metres:d,millimeters:1e3*d,millimetres:1e3*d,centimeters:100*d,centimetres:100*d,kilometers:d/1e3,kilometres:d/1e3,miles:d/1609.344,nauticalmiles:d/1852,inches:39.37*d,yards:d/1.0936,feet:3.28084*d,radians:1,degrees:d/111325};function xt(t,e,i){if(!Mt(i=i||{}))throw new Error("options is invalid");var n=i.bbox,r=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Lt(t))throw new Error("bbox must only contain numbers")})}(n),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);i={type:"Feature"};return r&&(i.id=r),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function kt(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function wt(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Lt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Mt(t){return t&&t.constructor===Object}var Ct=function(t,e,i,n){if(!Mt(n=n||{}))throw new Error("options is invalid");var r=n.units,o=n.properties,n=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),t=wt(n[0]),n=wt(n[1]),i=wt(i),e=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=bt[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t/i}(e,r),r=Math.asin(Math.sin(n)*Math.cos(e)+Math.cos(n)*Math.sin(e)*Math.cos(i));return function(t,e){if(0,!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Lt(t[0])||!Lt(t[1]))throw new Error("coordinates must contain numbers");return xt({type:"Point",coordinates:t},e,void 0)}([kt(t+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(n),Math.cos(e)-Math.sin(n)*Math.sin(r))),kt(r)],o)};function St(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Pt(t,e){return t<e?-1:e<t?1:0}function Tt(t,e){if(!(this instanceof Tt))return new Tt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Et(t,e){Dt(t,0,t.children.length,e,t)}function Dt(t,e,i,n,r){(r=r||Nt(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],At(r,t.leaf?n(o):o);return r}function At(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ot(t,e){return t.minX-e.minX}function It(t,e){return t.minY-e.minY}function Bt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Rt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function zt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Nt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jt(t,e,i,n,r){for(var o,a,s,l=[e,i];l.length;)(i=l.pop())-(e=l.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,s=r,function t(e,i,n,r,o){for(;n<r;){var a,s,l,c;600<r-n&&(a=r-n+1,s=i-n+1,c=Math.log(a),l=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1),t(e,i,Math.max(n,Math.floor(i-s*l/a+c)),Math.min(r,Math.floor(i+(a-s)*l/a+c)),o));var u=e[i],h=n,p=r;for(St(e,n,i),0<o(e[r],u)&&St(e,n,r);h<p;){for(St(e,h,p),h++,p--;o(e[h],u)<0;)h++;for(;0<o(e[p],u);)p--}0===o(e[n],u)?St(e,n,p):St(e,++p,r),p<=i&&(n=p+1),i<=p&&(r=p-1)}}(a=t,o,e||0,i||a.length-1,s||Pt),l.push(e,o,o,i))}Tt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!Ft(t,e))return i;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],Ft(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):zt(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Ft(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],Ft(t,a=e.leaf?i(o):o)){if(e.leaf||zt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Nt([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!zt(a,s)?n?(i++,a=n.children[i],o=!1):a=null:(l.push(a),c.push(i),i=0,a=(n=a).children[0])}return this},toBBox:function(t){return t},compareMinX:Ot,compareMinY:It,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return Et(r=Nt(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=Nt([])).leaf=!1,r.height=n;var s,l,c,u,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(jt(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(jt(t,s,c=Math.min(s+p-1,i),h,this.compareMinY),l=s;l<=c;l+=h)u=Math.min(l+h-1,c),r.children.push(this._build(t,l,u,n-1));return Et(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,l,c,u,h,p;n.push(e),!e.leaf&&n.length-1!==i;){for(c=u=1/0,r=0,o=e.children.length;r<o;r++)l=Bt(a=e.children[r]),h=t,p=a,(h=(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l)<u?(u=h,c=l<c?l:c,s=a):h===u&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,i=i?t:n(t),r=[],n=this._chooseSubtree(i,this.data,e,r);for(n.children.push(t),At(n,i);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);n=this._chooseSplitIndex(i,r,n),n=Nt(i.children.splice(n,i.children.length-n));n.height=i.height,n.leaf=i.leaf,Et(i,this.toBBox),Et(n,this.toBBox),e?t[e-1].children.push(n):this._splitRoot(i,n)},_splitRoot:function(t,e){this.data=Nt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Et(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var n,r,o,a,s,l,c,u,h,p=o=1/0,d=e;d<=i-e;d++)s=n=Dt(t,0,d,this.toBBox),h=r=Dt(t,d,i,this.toBBox),l=Math.max(s.minX,h.minX),c=Math.max(s.minY,h.minY),u=Math.min(s.maxX,h.maxX),h=Math.min(s.maxY,h.maxY),c=Math.max(0,u-l)*Math.max(0,h-c),r=Bt(n)+Bt(r),c<p?(p=c,a=d,o=r<o?r:o):c===p&&r<o&&(o=r,a=d);return a},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:Ot,r=t.leaf?this.compareMinY:It;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);for(var r,o=this.toBBox,a=Dt(t,0,e,o),s=Dt(t,i-e,i,o),l=Rt(a)+Rt(s),c=e;c<i-e;c++)r=t.children[c],At(a,t.leaf?o(r):r),l+=Rt(a);for(c=i-e-1;e<=c;c--)r=t.children[c],At(s,t.leaf?o(r):r),l+=Rt(s);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;0<=n;n--)At(e[n],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Et(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ut=Tt;function Ht(t,e,i){if(!qt(i=i||{}))throw new Error("options is invalid");var n=i.bbox,r=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&$t(n),r&&Yt(r);i={type:"Feature"};return r&&(i.id=r),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function Gt(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Vt(t[0])||!Vt(t[1]))throw new Error("coordinates must contain numbers");return Ht({type:"Point",coordinates:t},e,i)}function Zt(t,e,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Vt(t[0][1])||!Vt(t[0][1]))throw new Error("coordinates must contain numbers");return Ht({type:"LineString",coordinates:t},e,i)}function Wt(t,e){if(!qt(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&$t(i),n&&Yt(n);e={type:"FeatureCollection"};return n&&(e.id=n),i&&(e.bbox=i),e.features=t,e}function Vt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function qt(t){return t&&t.constructor===Object}function $t(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Vt(t))throw new Error("bbox must only contain numbers")})}function Yt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Jt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function Kt(t,c){!function(t,e){for(var i,n,r,o,a,s,l,c,u,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,f=p?t.features.length:1,m=0;m<f;m++){for(a=p?t.features[m].geometry:d?t.geometry:t,l=p?t.features[m].properties:d?t.properties:{},c=p?t.features[m].bbox:d?t.bbox:void 0,u=p?t.features[m].id:d?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<o;n++)if(null!==(r=s?a.geometries[n]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,h,l,c,u))return;break;case"GeometryCollection":for(i=0;i<r.geometries.length;i++)if(!1===e(r.geometries[i],h,l,c,u))return;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return;h++}}(t,function(t,e,i,n,r){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==c(Ht(t,i,{bbox:n,id:r}),e,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var l=t.coordinates[s];if(!1===c(Ht({type:o,coordinates:l},i),e,s))return!1}})}function Xt(t){var e=[t[0],t[1]],i=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,i,e]]}}}function Qt(t){var e=[1/0,1/0,-1/0,-1/0];return function t(e,i,n){if(null!==e)for(var r,o,a,s,l,c,u,h,p=0,d=e.type,f="FeatureCollection"===d,m="Feature"===d,g=f?e.features.length:1,v=0;v<g;v++){l=(h=!!(u=f?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<l;_++){var y=0,b=0;if(null!==(s=h?u.geometries[_]:u)){c=s.coordinates;var x=s.type,k=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1;switch(x){case null:break;case"Point":if(!1===i(c,p,v,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===i(c[r],p,v,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-k;o++){if(!1===i(c[r][o],p,v,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===x&&(b=0),o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-k;a++){if(!1===i(c[r][o][a],p,v,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===t(s.geometries[r],i,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function te(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ee(t){if(!t)throw new Error("geojson is required");var e=[];return Kt(t,function(t){!function(e,i){var t=[],n=e.geometry;switch(n.type){case"Polygon":t=te(n);break;case"LineString":t=[te(n)]}t.forEach(function(t){var a,s;a=e.properties,s=[],t.reduce(function(t,e){var i,n,r,o=Zt([t,e],a);return o.bbox=(i=t[0],n=t[1],r=e[0],t=e[1],[i<r?i:r,n<t?n:t,r<i?i:r,t<n?n:t]),s.push(o),e}),s.forEach(function(t){t.id=i.length,i.push(t)})})}(t,e)}),Wt(e)}function ie(t,e){var i=te(t),n=te(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],t=n[0][1],e=n[1][0],i=n[1][1],n=(i-t)*(a-r)-(e-l)*(s-o);if(0==n)return null;i=((e-l)*(o-t)-(i-t)*(r-l))/n,n=((a-r)*(o-t)-(s-o)*(r-l))/n;return 0<=i&&i<=1&&0<=n&&n<=1?Gt([r+i*(a-r),o+i*(s-o)]):null}var ne=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=Ht(t)),"LineString"===e.type&&(e=Ht(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=ie(t,e);return i&&r.push(i),Wt(r)}var o=((i=Ut(void 0)).insert=function(t){var e;return Array.isArray(t)?(t=Xt(e=t)).bbox=e:t.bbox=t.bbox||Qt(t),Ut.prototype.insert.call(this,t)},i.load=function(t){var i=[];return Array.isArray(t)?t.forEach(function(t){var e=Xt(t);e.bbox=t,i.push(e)}):Jt(t,function(t){t.bbox=t.bbox||Qt(t),i.push(t)}),Ut.prototype.load.call(this,i)},i.remove=function(t){var e;return Array.isArray(t)&&((t=Xt(e=t)).bbox=e),Ut.prototype.remove.call(this,t)},i.clear=function(){return Ut.prototype.clear.call(this)},i.search=function(t){return{type:"FeatureCollection",features:Ut.prototype.search.call(this,this.toBBox(t))}},i.collides=function(t){return Ut.prototype.collides.call(this,this.toBBox(t))},i.all=function(){return{type:"FeatureCollection",features:Ut.prototype.all.call(this)}},i.toJSON=function(){return Ut.prototype.toJSON.call(this)},i.fromJSON=function(t){return Ut.prototype.fromJSON.call(this,t)},i.toBBox=function(t){return{minX:(t=t.bbox||(Array.isArray(t)&&4===t.length?t:Qt(t)))[0],minY:t[1],maxX:t[2],maxY:t[3]}},i);return o.load(ee(e)),Jt(ee(t),function(i){Jt(o.search(i),function(t){var e=ie(i,t);e&&(t=te(e).join(","),n[t]||(n[t]=!0,r.push(e)))})}),Wt(r)};function re(n,t){var r=[],o=at();return nt(t,function(t){var e,i;r.forEach(function(t,e){t.id=e}),r.length?(e=o.search(t)).features.length&&(i=ae(t,e),r=r.filter(function(t){return t.id!==i.id}),o.remove(i),it(oe(i,t),function(t){r.push(t),o.insert(t)})):((r=oe(n,t).features).forEach(function(t){var e;t.bbox||(t.bbox=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=ht(t.slice(0,2),[n,i]);if(ht(t.slice(0,2),[e,r])<=o){o=(i+r)/2;return[e,o-(n-e)/2,n,o+(n-e)/2]}n=(e+n)/2;return[n-(r-i)/2,i,n+(r-i)/2,r]}((e=[1/0,1/0,-1/0,-1/0],et(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e)))}),o.load(J(r)))}),J(r)}function oe(t,r){var o=[],e=dt(t)[0],i=dt(t)[t.geometry.coordinates.length-1];if(se(e,pt(r))||se(i,pt(r)))return J([t]);var n=at(),i=mt(t);n.load(i);n=n.search(r);if(!n.features.length)return J([t]);var a,s=ae(r,n),i=(a=[e],it(i,function(t,e){var i,n;i=a,n=e,e=dt(t)[1],t=pt(r),a=n===s.id?(i.push(t),o.push(Y(i)),se(t,e)?[t]:[t,e]):(i.push(e),i)}),a);return 1<i.length&&o.push(Y(i)),J(o)}function ae(i,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var n,r=1/0;return it(t,function(t){var e=function(t,c,u){if(!qt(u={}))throw new Error("options is invalid");var e=(t.geometry||t).type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var h=Gt([1/0,1/0],{dist:1/0}),p=0;return Kt(t,function(t){for(var e=te(t),i=0;i<e.length-1;i++){var n=Gt(e[i]);n.properties.dist=ht(c,n,u);var r=Gt(e[i+1]);r.properties.dist=ht(c,r,u);var o=ht(n,r,u),a=Math.max(n.properties.dist,r.properties.dist),s=yt(n,r),l=Ct(c,a,s+90,u),s=Ct(c,a,s-90,u),l=ne(Zt([l.geometry.coordinates,s.geometry.coordinates]),Zt([n.geometry.coordinates,r.geometry.coordinates])),s=null;0<l.features.length&&((s=l.features[0]).properties.dist=ht(c,s,u),s.properties.location=p+ht(n,s,u)),n.properties.dist<h.properties.dist&&((h=n).properties.index=i,h.properties.location=p),r.properties.dist<h.properties.dist&&((h=r).properties.index=i+1,h.properties.location=p+o),s&&s.properties.dist<h.properties.dist&&((h=s).properties.index=i),p+=o}}),h}(t,i).properties.dist;e<r&&(n=t,r=e)}),n}function se(t,e){return t[0]===e[0]&&t[1]===e[1]}var d=i(64),le=i.n(d),d=i(27),ce=i.n(d);function ue(t){var e={type:"Feature"};return e.geometry=t,e}function he(t){return"Feature"===t.type?t.geometry:t}function pe(t){return t.geometry.coordinates}function de(t){return ue({type:"Polygon",coordinates:t})}function fe(t){return ue({type:"MultiPolygon",coordinates:t})}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}r.Cut=r.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t,i=this;this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||(t=this._layer.getLatLngs(),(t=L.polygon(t,this.options.pathOptions))._latlngInfos=this._layer._latlngInfo,this.cut(t),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(t){var e=t.layer,t=t.originalLayer;w._fireEvent(t,"pm:cut",{shape:i._shape,layer:e,originalLayer:t}),w._fireEvent(i._map,"pm:cut",{shape:i._shape,layer:e,originalLayer:t}),w._fireEvent(t,"pm:edit",{layer:t,shape:t.pm.getShape()})}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable())},cut:function(n){var a=this,e=this._map._layers,s=n._latlngInfos||[];Object.keys(e).map(function(t){return e[t]}).filter(function(t){return t.pm}).filter(function(t){return t instanceof L.Polyline}).filter(function(t){return t!==n}).filter(function(t){return!a._layerGroup.hasLayer(t)}).filter(function(t){try{return 0<!!A()(n.toGeoJSON(15),t.toGeoJSON(15)).features.length||!!function(t,e){t=he(t),e=he(e),e=ce.a.intersection(t.coordinates,e.coordinates);return 0!==e.length&&(1===e.length?de(e[0]):fe(e))}(n.toGeoJSON(15),t.toGeoJSON(15))}catch(t){return console.error("You cant cut polygons with self-intersections"),!1}}).forEach(function(t){var r,o;t instanceof L.Polygon?(o=(r=L.polygon(t.getLatLngs())).getLatLngs(),s.forEach(function(t){var e,i,n;t&&t.snapInfo&&(e=t.latlng,(i=a._calcClosestLayer(e,[r]))&&i.segment&&i.distance<a.options.snapDistance&&((n=i.segment)&&2===n.length&&(i=(t=w._getIndexFromSegment(o,n)).indexPath,n=t.parentPath,t=t.newIndex,(1<i.length?g()(o,n):o).splice(t,0,e))))})):r=t;var e=a._cutLayer(n,r),i=L.geoJSON(e,t.options);1===i.getLayers().length&&(i=(function(t){if(Array.isArray(t))return t}(e=i.getLayers())||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(e.push(o.value),1!==e.length);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e}}(e)||function(t){if(t){if("string"==typeof t)return me(t,1);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?me(t,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]),a._setPane(i,"layerPane");i=i.addTo(a._map.pm._getContainingLayer());i.pm.enable(a.options),i.pm.disable(),t._pmTempLayer=!0,n._pmTempLayer=!0,t.remove(),t.removeFrom(a._map.pm._getContainingLayer()),n.remove(),n.removeFrom(a._map.pm._getContainingLayer()),i.getLayers&&0===i.getLayers().length&&a._map.pm.removeLayer({target:i}),a._addDrawnLayerProp(i),a._editedLayers.push({layer:i,originalLayer:t})})},_cutLayer:function(i,t){var e,n,r,o=L.geoJSON(),a=t instanceof L.Polygon?function(t,e){t=he(t),e=he(e),e=ce.a.difference(t.coordinates,e.coordinates);return 0===e.length?null:1===e.length?de(e[0]):fe(e)}(t.toGeoJSON(15),i.toGeoJSON(15)):((a=(n=pe(a=(a=t)instanceof L.Polyline?a.toGeoJSON(15):a),t=function t(e){return Array.isArray(e)?1+t(e[0]):-1}(n),r=[],1<t?n.forEach(function(t){r.push(ue({type:"LineString",coordinates:t}))}):r.push(a),r)).forEach(function(t){var e=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var i=ft(t),n=ft(e);if("LineString"!==i)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var r=ut(e,{precision:7});switch(n){case"Point":return oe(t,r);case"MultiPoint":return re(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return re(t,function(t,e){var n={},r=[];if("LineString"===t.type&&(t=$(t)),"LineString"===e.type&&(e=$(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=gt(t,e);return i&&r.push(i),J(r)}var o=at();return o.load(mt(e)),it(mt(t),function(i){it(o.search(i),function(t){var e=gt(i,t);e&&(t=dt(e).join(","),n[t]||(n[t]=!0,r.push(e)))})}),J(r)}(t,r))}}(t,i.toGeoJSON(15));(e&&0<e.features.length?L.geoJSON(e):L.geoJSON(t)).getLayers().forEach(function(t){le()(i.toGeoJSON(15),t.toGeoJSON(15))||t.addTo(o)})}),1<a.length?(e=[],o.eachLayer(function(t){e.push(pe(t.toGeoJSON(15)))}),ue({type:"MultiLineString",coordinates:e})):o.toGeoJSON(15));return a}});d={enableLayerDrag:function(){if(this.disable(),this._map||(this._map=this._layer._map),this._layer instanceof L.Marker)return this._layer.on("dragstart",this._fireDragStart,this),this._layer.on("drag",this._fireDrag,this),this._layer.on("dragend",this._fireDragEnd,this),this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),void(this._layer.dragging&&this._layer.dragging.enable());this._layer instanceof L.ImageOverlay&&(this._getDOMElem().ondragstart=function(){return!1}),this._tempDragCoord=null,this._layer._map.options.preferCanvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0,this._layer.on("mousedown",this._dragMixinOnMouseDown,this)},disableLayerDrag:function(){if(this._layer instanceof L.Marker)return this._layer.off("dragstart",this._fireDragStart,this),this._layer.off("drag",this._fireDrag,this),this._layer.off("dragend",this._fireDragEnd,this),void(this._layer.dragging&&this._layer.dragging.disable());this._layer._map.options.preferCanvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._safeToCacheDragState=!1,this._layer.off("mousedown",this._dragMixinOnMouseDown,this)},dragging:function(){return this._dragging},_dragMixinOnMouseDown:function(t){0<t.originalEvent.button||(this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,this._layer._map.on("mouseup",this._dragMixinOnMouseUp,this),this._layer._map.on("mousemove",this._dragMixinOnMouseMove,this))},_dragMixinOnMouseMove:function(t){var e=this._getDOMElem();this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer.bringToFront(),this._originalMapDragState&&this._layer._map.dragging.disable(),this._fireDragStart()),this._onLayerDrag(t)},_dragMixinOnMouseUp:function(){var t=this,e=this._getDOMElem();return this._originalMapDragState&&this._layer._map.dragging.enable(),this._safeToCacheDragState=!0,this._layer._map.off("mousemove",this._dragMixinOnMouseMove,this),this._layer._map.off("mouseup",this._dragMixinOnMouseUp,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),window.setTimeout(function(){t._dragging=!1,L.DomUtil.removeClass(e,"leaflet-pm-dragging"),t._fireDragEnd(),t._fireEdit()},10),!0)},_onLayerDrag:function(t){var e,i,n=t.latlng,r=n.lat-this._tempDragCoord.lat,o=n.lng-this._tempDragCoord.lng,a=function e(t){return t.map(function(t){return Array.isArray(t)?e(t):{lat:t.lat+r,lng:t.lng+o}})};this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable?(e=a([this._layer.getLatLng()]),this._layer.setLatLng(e[0])):this._layer instanceof L.CircleMarker?(i=this._layer.getLatLng(),i=a([i=this._layer._snapped?this._layer._orgLatLng:i]),this._layer.setLatLng(i[0])):this._layer instanceof L.ImageOverlay?(i=a([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]),this._layer.setBounds(i)):(a=a(this._layer.getLatLngs()),this._layer.setLatLngs(a)),this._tempDragCoord=n,t.layer=this._layer,this._fireDrag(t)},_fireDragStart:function(){w._fireEvent(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()})},_fireDrag:function(t){w._fireEvent(this._layer,"pm:drag",Object.assign({},t,{shape:this.getShape()}))},_fireDragEnd:function(){w._fireEvent(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()})},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image&&(t=this._layer._image),t}},d=L.Class.extend({includes:[d,e],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,draggable:!0},setOptions:function(t){L.Util.setOptions(this,t)},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")}});function ge(t){return function(t){if(Array.isArray(t))return ve(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return ve(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ve(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}d.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.findLayers(),this._getMap(),this._layers.forEach(function(t){return e._initLayer(t)}),this._layerGroup.on("layeradd",L.Util.throttle(function(t){t.target._pmTempLayer||(e._layers=e.findLayers(),(t=e._layers.filter(function(t){return!(t.pm._parentLayerGroup&&e._layerGroup._leaflet_id in t.pm._parentLayerGroup)})).forEach(function(t){e._initLayer(t)}),0<t.length&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions()))},100,this),this),this._layerGroup.on("layerremove",function(t){e._removeLayerFromGroup(t.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(t){t.target._pmTempLayer||(e._layers=e.findLayers())},100,this),this)},enable:function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this._options=e,this._layers.forEach(function(t){t instanceof L.LayerGroup?-1===i.indexOf(t._leaflet_id)&&(i.push(t._leaflet_id),t.pm.enable(e,i)):t.pm.enable(e)})},disable:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this._layers.forEach(function(t){t instanceof L.LayerGroup?-1===e.indexOf(t._leaflet_id)&&(e.push(t._leaflet_id),t.pm.disable(e)):t.pm.disable()})},enabled:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return!!this._layers.find(function(t){return t instanceof L.LayerGroup?-1===e.indexOf(t._leaflet_id)&&(e.push(t._leaflet_id),t.pm.enabled(e)):t.pm.enabled()})},toggleEdit:function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this._options=e,this._layers.forEach(function(t){t instanceof L.LayerGroup?-1===i.indexOf(t._leaflet_id)&&(i.push(t._leaflet_id),t.pm.toggleEdit(e,i)):t.pm.toggleEdit(e)})},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){var e;t.pm&&t.pm._layerGroup&&(e=L.Util.stamp(this._layerGroup),delete t.pm._layerGroup[e])},findLayers:function(){return this._layerGroup.getLayers().filter(function(t){return!!t.pm}).filter(function(t){return!t._pmTempLayer})},dragging:function(){return!!this._layers&&!!this._layers.find(function(t){return t.pm.dragging()})},getOptions:function(){return this._options},_getMap:function(){var t;return this._map||(null===(t=this._layers.find(function(t){return!!t._map}))||void 0===t?void 0:t._map)||null}}),d.Marker=d.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this.enabled()||(this.applyOptions(),this._enabled=!0,w._fireEvent(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()}))},disable:function(){this._enabled=!1,this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),w._fireEvent(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()}),this._layerEdited&&w._fireEvent(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){t=t.target;t.remove(),w._fireEvent(t,"pm:remove",{layer:t,shape:this.getShape()}),w._fireEvent(this._map,"pm:remove",{layer:t,shape:this.getShape()})},_onDragEnd:function(t){t=t.target;w._fireEvent(t,"pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,t.off("drag",this._handleSnapping,this),t.on("drag",this._handleSnapping,this),t.off("dragend",this._cleanupSnapping,this),t.on("dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("drag",this._handleSnapping,this),t.off("dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});e={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),-1<this.options.limitMarkersToCount&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(ge(this._markerGroup.getLayers()),ge(this.markerCache));this.markerCache=t.filter(function(t,e,i){return i.indexOf(t)===e})},renderLimits:function(e){var i=this;this.markerCache.forEach(function(t){e.includes(t)?i._markerGroup.addLayer(t):i._markerGroup.removeLayer(t)})},applyLimitFilters:function(t){t=t.latlng,t=void 0===t?{lat:0,lng:0}:t,t=ge(this._filterClosestMarkers(t));this.renderLimits(t)},_filterClosestMarkers:function(i){var t=ge(this.markerCache),n=this.options.limitMarkersToCount;return t.sort(function(t,e){return t._latlng.distanceTo(i)-e._latlng.distanceTo(i)}),t.filter(function(t,e){return!(-1<n)||e<n})}};function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}d.Line=d.extend({includes:[e],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:("red"!==this._layer.options.color?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),w._fireEvent(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()}))},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;t.pm._enabled=!1,t.pm._markerGroup.clearLayers(),t.pm._markerGroup.removeFrom(this._map),this._layer.off("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);t=t._path||this._layer._renderer._container;return L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&w._fireEvent(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1,w._fireEvent(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()}),!0},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_onLayerRemove:function(t){this.disable(t.target)},_initMarkers:function(){var o=this,t=this._map,e=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function t(n){if(Array.isArray(n[0]))return n.map(t,o);var r=n.map(o._createMarker,o);return!0!==o.options.hideMiddleMarkers&&n.map(function(t,e){var i=o.isPolygon()?(e+1)%n.length:e+1;return o._createMiddleMarker(r[e],r[i])}),r}(e),this.filterMarkerGroup(),t.addLayer(this._markerGroup)},_createMarker:function(t){t=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(t,"vertexPane"),t._pmTempLayer=!0,t.on("click",this._onVertexClick,this),t.on("dragstart",this._onMarkerDragStart,this),t.on("move",this._onMarkerDrag,this),t.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||t.on("contextmenu",this._removeMarker,this),this._markerGroup.addLayer(t),t},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var i=w.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),n=this._createMarker(i),i=L.divIcon({className:"marker-icon marker-icon-middle"});return n.setIcon(i),n.leftM=t,n.rightM=e,t._middleMarkerNext=n,(e._middleMarkerPrev=n).on("click",this._onMiddleMarkerClick,this),n.on("movestart",this._onMiddleMarkerMoveStart,this),n},_onMiddleMarkerClick:function(t){var e=t.target,t=L.divIcon({className:"marker-icon"});e.setIcon(t),this._addMarker(e,e.leftM,e.rightM)},_onMiddleMarkerMoveStart:function(t){t=t.target;t.on("moveend",this._onMiddleMarkerMoveEnd,this),this._addMarker(t,t.leftM,t.rightM)},_onMiddleMarkerMoveEnd:function(t){var e=t.target,t=L.divIcon({className:"marker-icon"});e.setIcon(t),e.off("moveend",this._onMiddleMarkerMoveEnd,this)},_addMarker:function(t,e,i){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off("click",this._onMiddleMarkerClick,this),t.on("click",this._onVertexClick,this);var n=t.getLatLng(),r=this._layer._latlngs;delete t.leftM,delete t.rightM;var o=this.findDeepMarkerIndex(this._markers,e),a=o.indexPath,s=o.index,l=o.parentPath,o=1<a.length?g()(r,l):r,l=1<a.length?g()(this._markers,l):this._markers;o.splice(s+1,0,n),l.splice(s+1,0,t),this._layer.setLatLngs(r),!0!==this.options.hideMiddleMarkers&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,i)),this._fireEdit(),w._fireEvent(this._layer,"pm:vertexadded",{layer:this._layer,marker:t,indexPath:this.findDeepMarkerIndex(this._markers,t).indexPath,latlng:n,shape:this.getShape()}),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return 0<D()(this._layer.toGeoJSON(15)).features.length},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;this.hasSelfIntersection()?(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed||(t?this._flashLayer():(e.setStyle({color:"red"}),this.isRed=!0),w._fireEvent(this._layer,"pm:intersect",{layer:this._layer,intersection:D()(this._layer.toGeoJSON(15)),shape:this.getShape()}))):(e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1))},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"red"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,e){var i=this;t.forEach(function(t){return Array.isArray(t)?i._updateDisabledMarkerStyle(t,e):void(t._icon&&(e&&!i._checkMarkerAllowedToDrag(t)?L.DomUtil.addClass(t._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(t._icon,"vertexmarker-disabled")))})},_removeMarker:function(t){this.options.allowSelfIntersection||(e=this._layer.getLatLngs(),this._coordsBeforeEdit=JSON.parse(JSON.stringify(e)));var e,i,n,r=t.target,o=this._layer.getLatLngs(),a=this.findDeepMarkerIndex(this._markers,r),s=a.indexPath,l=a.index,c=a.parentPath;s&&(e=1<s.length?g()(o,c):o,t=1<s.length?g()(this._markers,c):this._markers,this.options.removeLayerBelowMinVertexCount||!(e.length<=2||this.isPolygon()&&e.length<=3)?(e.splice(l,1),this._layer.setLatLngs(o),this.isPolygon()&&e.length<=2&&e.splice(0,e.length),a=!1,e.length<=1&&(e.splice(0,e.length),this._layer.setLatLngs(o),this.disable(),this.enable(this.options),a=!0),y(o)&&this._layer.remove(),o=b(o),this._layer.setLatLngs(o),this._markers=b(this._markers),!a&&(t=1<s.length?g()(this._markers,c):this._markers,r._middleMarkerPrev&&this._markerGroup.removeLayer(r._middleMarkerPrev),r._middleMarkerNext&&this._markerGroup.removeLayer(r._middleMarkerNext),this._markerGroup.removeLayer(r),t)&&(this.isPolygon()?(n=(l+1)%t.length,i=(l+(t.length-1))%t.length):(i=l-1<0?void 0:l-1,n=l+1>=t.length?void 0:l+1),n!==i&&(i=t[i],n=t[n],!0!==this.options.hideMiddleMarkers&&this._createMiddleMarker(i,n)),t.splice(l,1)),this._fireEdit(),w._fireEvent(this._layer,"pm:vertexremoved",{layer:this._layer,marker:r,indexPath:s,shape:this.getShape()})):this._flashLayer())},findDeepMarkerIndex:function(t,r){var o;t.some(function i(n){return function(t,e){e=n.concat(e);return t._leaflet_id===r._leaflet_id?(o=e,!0):Array.isArray(t)&&t.some(i(e))}}([]));t={};return t=o?{indexPath:o,index:o[o.length-1],parentPath:o.slice(0,o.length-1)}:t},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),i=t.getLatLng(),n=this.findDeepMarkerIndex(this._markers,t),r=n.indexPath,t=n.index,n=n.parentPath;(1<r.length?g()(e,n):e).splice(t,1,i),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=this.findDeepMarkerIndex(this._markers,t),i=e.indexPath,t=e.index,e=e.parentPath,i=1<i.length?g()(this._markers,e):this._markers,e=(t+1)%i.length;return{prevMarker:i[(t+(i.length-1))%i.length],nextMarker:i[e]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,e=e.nextMarker,i=L.polyline([i.getLatLng(),t.getLatLng()]),e=L.polyline([t.getLatLng(),e.getLatLng()]),i=A()(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,e=A()(this._layer.toGeoJSON(15),e.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?e+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(i+=1),!(i<=2&&e<=2)},_onMarkerDragStart:function(t){var e=t.target,i=this.findDeepMarkerIndex(this._markers,e).indexPath;w._fireEvent(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,indexPath:i,shape:this.getShape()}),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),this.cachedColor||(this.cachedColor=this._layer.options.color),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null},_onMarkerDrag:function(t){var e=t.target,i=this.findDeepMarkerIndex(this._markers,e),n=i.indexPath,r=i.index,o=i.parentPath;if(n){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&!1===this._markerAllowedToDrag)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var a=1<n.length?g()(this._markers,o):this._markers,i=(r+1)%a.length,o=(r+(a.length-1))%a.length,r=e.getLatLng(),o=a[o].getLatLng(),i=a[i].getLatLng();e._middleMarkerNext&&(i=w.calcMiddleLatLng(this._map,r,i),e._middleMarkerNext.setLatLng(i)),e._middleMarkerPrev&&(o=w.calcMiddleLatLng(this._map,r,o),e._middleMarkerPrev.setLatLng(o)),this.options.allowSelfIntersection||this._handleLayerStyle(),w._fireEvent(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:n})}},_onMarkerDragEnd:function(t){var e=t.target,e=this.findDeepMarkerIndex(this._markers,e).indexPath;w._fireEvent(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()});e=this.hasSelfIntersection();if(e&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(e=!1),!this.options.allowSelfIntersection&&e)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),void this._handleLayerStyle();!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit()},_onVertexClick:function(t){var e=t.target,e=this.findDeepMarkerIndex(this._markers,e).indexPath;w._fireEvent(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()})},_fireEdit:function(){this._layerEdited=!0,w._fireEvent(this._layer,"pm:edit",{layer:this._layer,shape:this.getShape()})}}),d.Polygon=d.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,e=e.nextMarker,i=L.polyline([i.getLatLng(),t.getLatLng()]),e=L.polyline([t.getLatLng(),e.getLatLng()]),i=A()(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,e=A()(this._layer.toGeoJSON(15),e.toGeoJSON(15)).features.length;return!(i<=2&&e<=2)}}),d.Rectangle=d.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this._map,e=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,t.addLayer(this._markerGroup),this._markers=[],this._markers[0]=e.map(this._createMarker,this);e=function(t){if(Array.isArray(t))return t}(e=this._markers)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(e.push(o.value),1!==e.length);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}return e}}(e)||function(t){if(t){if("string"==typeof t)return _e(t,1);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_e(t,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();this._cornerMarkers=e[0]},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._origLatLng=t,i._index=e,i._pmTempLayer=!0,this._markerGroup.addLayer(i),i},_addMarkerEvents:function(){var e=this;this._markers[0].forEach(function(t){t.on("dragstart",e._onMarkerDragStart,e),t.on("drag",e._onMarkerDrag,e),t.on("dragend",e._onMarkerDragEnd,e),t.on("pm:snap",e._adjustRectangleForMarkerSnap,e),e.options.preventMarkerRemoval||t.on("contextmenu",e._removeMarker,e)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){var e=t.target,i=this._findCorners();e._oppositeCornerLatLng=i[(e._index+2)%4],e._snapped=!1,w._fireEvent(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDrag:function(t){var e=t.target;void 0!==e._index&&(e._snapped||this._adjustRectangleForMarkerMove(e),w._fireEvent(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0}))},_onMarkerDragEnd:function(t){var e=this._findCorners();this._adjustAllMarkers(e),this._cornerMarkers.forEach(function(t){delete t._oppositeCornerLatLng}),this._layer.setLatLngs(e),w._fireEvent(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0}),this._fireEdit()},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=t.getLatLng();this._layer.setBounds(L.latLngBounds(e,t._oppositeCornerLatLng)),this._adjustAdjacentMarkers(t),this._layer.redraw()},_adjustRectangleForMarkerSnap:function(t){this.options.snappable&&(t=t.target,this._adjustRectangleForMarkerMove(t))},_adjustAllMarkers:function(i){i.length&&4===i.length?this._cornerMarkers.forEach(function(t,e){t.setLatLng(i[e])}):console.error("_adjustAllMarkers() requires an array of EXACTLY 4 LatLng coordinates")},_adjustAdjacentMarkers:function(t){var i,n,r,o;t&&t.getLatLng&&t._oppositeCornerLatLng?(i=t.getLatLng(),n=t._oppositeCornerLatLng,r=[],this._findCorners().forEach(function(t){t.equals(i)||t.equals(n)||r.push(t)}),o=0,2===r.length&&this._cornerMarkers.forEach(function(t){var e=t.getLatLng();e.equals(i)||e.equals(n)||(t.setLatLng(r[o]),o+=1)})):console.error("_adjustAdjacentMarkers() requires a valid Marker object")},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),d.Circle=d.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){var e=this;L.Util.setOptions(this,t),this._map=this._layer._map,this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",function(t){e.disable(t.target)}),this._updateHiddenPolyCircle(),w._fireEvent(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()})},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;this._centerMarker.off("dragstart",this._fireDragStart,this),this._centerMarker.off("drag",this._fireDrag,this),this._centerMarker.off("dragend",this._fireDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),t.pm._enabled=!1,t.pm._helperLayers.clearLayers();t=t._path||this._layer._renderer._container;return L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&w._fireEvent(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1,w._fireEvent(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()}),!0},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),t=this._layer._radius,t=this._getLatLngOnCircle(e,t);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(t),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){t=t.getLatLng(),e=e.getLatLng();this._hintline=L.polyline([t,e],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){t=this._createMarker(t);return L.DomUtil.addClass(t._icon,"leaflet-pm-draggable"),t.on("drag",this._moveCircle,this),t.on("dragstart",this._fireDragStart,this),t.on("drag",this._fireDrag,this),t.on("dragend",this._fireDragEnd,this),t},_createOuterMarker:function(t){t=this._createMarker(t);return t.on("drag",this._resizeCircle,this),t},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){var e=t.latlng;this._layer.setLatLng(e);t=this._layer._radius,t=this._getLatLngOnCircle(e,t);this._outerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle(),w._fireEvent(this._layer,"pm:centerplaced",{layer:this._layer,latlng:e,shape:this.getShape()})},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),e=t.distanceTo(e);this.options.minRadiusCircle&&e<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(e),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var e=this;this._markers.forEach(function(t){t.off("move",e._syncHintLine,e),t.off("move",e._syncCircleRadius,e),t.off("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){w._fireEvent(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDrag:function(t){w._fireEvent(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDragEnd:function(t){this._fireEdit(),w._fireEvent(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_fireEdit:function(){w._fireEvent(this._layer,"pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_fireDragStart:function(){w._fireEvent(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()})},_fireDrag:function(t){w._fireEvent(this._layer,"pm:drag",Object.assign({},t,{shape:this.getShape()}))},_fireDragEnd:function(){w._fireEvent(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()})},_updateHiddenPolyCircle:function(){this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(w.circleToPolygon(this._layer,200).getLatLngs()):this._hiddenPolyCircle=w.circleToPolygon(this._layer,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){t=this._map.project(t),t=L.point(t.x+e,t.y);return this._map.unproject(t)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=t.distanceTo(e);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?e=k(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(e=k(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){var t,e;this._outerMarker._snapped&&(t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),e=t.distanceTo(e),(this.options.minRadiusCircle&&e<this.options.minRadiusCircle||this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)),this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),d.CircleMarker=d.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.enabled()&&this.disable(),this.applyOptions(),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),w._fireEvent(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()}))},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;return!(t.pm._dragging||(t.pm._helperLayers&&t.pm._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this.enabled()&&(this._layerEdited&&w._fireEvent(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!1,w._fireEvent(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()})),t.pm._enabled=!1))},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),t=this._layer._radius,t=this._getLatLngOnCircle(e,t);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(t),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){t=this._map.project(t),t=L.point(t.x+e,t.y);return this._map.unproject(t)},_createHintLine:function(t,e){t=t.getLatLng(),e=e.getLatLng();this._hintline=L.polyline([t,e],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){t=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(t._icon,"leaflet-pm-draggable"):t.dragging.disable(),t},_createOuterMarker:function(t){t=this._createMarker(t);return t.on("drag",this._resizeCircle,this),t},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,e=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(e),this._syncHintLine(),this._updateHiddenPolyCircle(),w._fireEvent(this._layer,"pm:centerplaced",{layer:this._layer,latlng:t,shape:this.getShape()})},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,e=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(e),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),e=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&e<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&e>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(e),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),w._fireEvent(this._layer,"pm:remove",{layer:this._layer,shape:this.getShape()}),w._fireEvent(this._map,"pm:remove",{layer:this._layer,shape:this.getShape()})},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){w._fireEvent(this._layer,"pm:markerdragstart",{markerEvent:t,layer:this._layer,shape:this.getShape(),indexPath:void 0})},_onMarkerDrag:function(t){w._fireEvent(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1,w._fireEvent(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:void 0})},_fireEdit:function(){w._fireEvent(this._layer,"pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t,e=this._layer._map||this._map;e&&(t=e.project(this._layer.getLatLng()),t=L.point(t.x+this._layer.getRadius(),t.y),e=this._layer.getLatLng().distanceTo(e.unproject(t)),(t=L.circle(this._layer.getLatLng(),this._layer.options)).setRadius(e),this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(w.circleToPolygon(t,200).getLatLngs()):this._hiddenPolyCircle=w.circleToPolygon(t,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer))},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?e=k(this._map,t,e,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(e=k(this._map,t,e,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker))),e},_handleOuterMarkerSnapping:function(){var t,e;this._outerMarker._snapped&&(t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),e=this._map.project(t).distanceTo(this._map.project(e)),(this.options.minRadiusCircleMarker&&e<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&e>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)),this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),i=this._map.project(e),i=L.point(i.x+t,i.y);return this._map.unproject(i).distanceTo(e)}}),d.ImageOverlay=d.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.enabled()||this.disable(),this.enableLayerDrag(),this._enabled=!0,this._otherSnapLayers=L.PM.Edit.Rectangle.prototype._findCorners.apply(this),w._fireEvent(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()}))},disable:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._layer;return!(t.pm._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this.enabled()||(this._layerEdited&&w._fireEvent(t,"pm:update",{layer:t,shape:this.getShape()}),this._layerEdited=!1,w._fireEvent(t,"pm:disable",{layer:t,shape:this.getShape()})),this._layer.off("contextmenu",this._removeMarker,this),t.pm._enabled=!1))},_fireEdit:function(){w._fireEvent(this._layer,"pm:edit",{layer:this._layer,shape:this.getShape()}),this._layerEdited=!0}}),i(150),i(151),L.PM=L.PM||{version:n.a,Map:p,Toolbar:f,Draw:r,Edit:d,Utils:w,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup?t.eachLayer(function(t){e.reInitLayer(t)}):t.pm||L.PM.optIn&&!1!==t.options.pmIgnore||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline&&(t.pm=new L.PM.Edit.Line(t)))}},L.PM.initialize()}],r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=65)},1639:function(t,e,i){"use strict";t.exports=i(9281)},7114:function(t,e,i){"use strict";var n=i(5670),i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(i.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(i.input,{marginTop:"-1px"}),t.exports=i},3312:function(t,e,i){"use strict";var s=i(5670),l=i(3855),c=i(6619),r=i(7114),i=i(6823);function n(t){var e,i;(t=t||{}).templates=t.templates||{},t.source||s.error("missing source"),t.name&&!/^[_a-zA-Z0-9-]+$/.test(t.name)&&s.error("invalid dataset name: "+t.name),this.query=null,this._isEmpty=!0,this.highlight=!!t.highlight,this.name=void 0===t.name||null===t.name?s.getUniqueId():t.name,this.source=t.source,this.displayFn=(e=(e=t.display||t.displayKey)||"value",s.isFunction(e)?e:function(t){return t[e]}),this.debounce=t.debounce,this.cache=!1!==t.cache,this.templates=(n=t.templates,i=this.displayFn,{empty:n.empty&&s.templatify(n.empty),header:n.header&&s.templatify(n.header),footer:n.footer&&s.templatify(n.footer),suggestion:n.suggestion||function(t){return"<p>"+i(t)+"</p>"}}),this.css=s.mixin({},r,t.appendTo?r.appendTo:{}),this.cssClasses=t.cssClasses=s.mixin({},r.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var n=s.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=t.$menu&&0<t.$menu.find(n+"-"+this.name).length?l.element(t.$menu.find(n+"-"+this.name)[0]):l.element(c.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=t.$menu,this.clearCachedSuggestions()}n.extractDatasetName=function(t){return l.element(t).data("aaDataset")},n.extractValue=function(t){return l.element(t).data("aaValue")},n.extractDatum=function(t){t=l.element(t).data("aaDatum");return t="string"==typeof t?JSON.parse(t):t},s.mixin(n.prototype,i,{_render:function(e,r){if(this.$el){var i,o=this,t=[].slice.call(arguments,2);if(this.$el.empty(),i=r&&r.length,this._isEmpty=!i,!i&&this.templates.empty)this.$el.html(function(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),o.templates.empty.apply(this,t)}.apply(this,t)).prepend(o.templates.header?n.apply(this,t):null).append(o.templates.footer?a.apply(this,t):null);else if(i)this.$el.html(function(){var t,i=[].slice.call(arguments,0),n=this,e=c.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return t=l.element(e).css(this.css.suggestions),e=s.map(r,function(t){var e=c.suggestion.replace("%PREFIX%",n.cssClasses.prefix).replace("%SUGGESTION%",n.cssClasses.suggestion);return(e=l.element(e).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(o.templates.suggestion.apply(this,[t].concat(i)))).data("aaDataset",o.name),e.data("aaValue",o.displayFn(t)||void 0),e.data("aaDatum",JSON.stringify(t)),e.children().each(function(){l.element(this).css(n.css.suggestionChild)}),e}),t.append.apply(t,e),t}.apply(this,t)).prepend(o.templates.header?n.apply(this,t):null).append(o.templates.footer?a.apply(this,t):null);else if(r&&!Array.isArray(r))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(i?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(i?"without":"with")+"-"+this.name),this.trigger("rendered",e)}function n(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return o.templates.header.apply(this,t)}function a(){var t=[].slice.call(arguments,0),t=[{query:e,isEmpty:!i}].concat(t);return o.templates.footer.apply(this,t)}},getRoot:function(){return this.$el},update:function(i){function t(t){var e;this.canceled||i!==this.query||(e=[].slice.call(arguments,1),this.cacheSuggestions(i,t,e),this._render.apply(this,[i,t].concat(e)))}var e,n;this.query=i,this.canceled=!1,this.shouldFetchFromCache(i)?t.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs)):(n=function(){e.canceled||e.source(i,t.bind(e))},(e=this).debounce?(clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(function(){e.debounceTimeout=null,n()},this.debounce)):n())},cacheSuggestions:function(t,e,i){this.cachedQuery=t,this.cachedSuggestions=e,this.cachedRenderExtraArgs=i},shouldFetchFromCache:function(t){return this.cache&&this.cachedQuery===t&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.$el&&(this.cancel(),this.$el.empty(),this.trigger("rendered",""))},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),t.exports=n},5445:function(t,e,i){"use strict";var s=i(5670),l=i(3855),n=i(6823),r=i(3312),c=i(7114);function u(n){var t,e,i,r=this;(n=n||{}).menu||s.error("menu is required"),s.isArray(n.datasets)||s.isObject(n.datasets)||s.error("1 or more datasets required"),n.datasets||s.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=n.minLength||0,this.templates={},this.appendTo=n.appendTo||!1,this.css=s.mixin({},c,n.appendTo?c.appendTo:{}),this.cssClasses=n.cssClasses=s.mixin({},c.defaultClasses,n.cssClasses||{}),this.cssClasses.prefix=n.cssClasses.formattedPrefix||s.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),t=s.bind(this._onSuggestionClick,this),e=s.bind(this._onSuggestionMouseEnter,this),i=s.bind(this._onSuggestionMouseLeave,this);var o=s.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=l.element(n.menu).on("mouseenter.aa",o,e).on("mouseleave.aa",o,i).on("click.aa",o,t),this.$container=n.appendTo?n.wrapper:this.$menu,n.templates&&n.templates.header&&(this.templates.header=s.templatify(n.templates.header),this.$menu.prepend(this.templates.header())),n.templates&&n.templates.empty&&(this.templates.empty=s.templatify(n.templates.empty),this.$empty=l.element('<div class="'+s.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=s.map(n.datasets,function(t){return e=r.$menu,i=t,t=n.cssClasses,new u.Dataset(s.mixin({$menu:e,cssClasses:t},i));var e,i}),s.each(this.datasets,function(t){var e=t.getRoot();e&&0===e.parent().length&&r.$menu.append(e),t.onSync("rendered",r._onRendered,r)}),n.templates&&n.templates.footer&&(this.templates.footer=s.templatify(n.templates.footer),this.$menu.append(this.templates.footer()));var a=this;l.element(window).resize(function(){a._redraw()})}s.mixin(u.prototype,n,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",l.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){var e,i=l.element(t.currentTarget);i.hasClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))||(this._removeCursor(),e=this,setTimeout(function(){e._setCursor(i,!1)},0))},_onSuggestionMouseLeave:function(t){if(t.relatedTarget&&0<l.element(t.relatedTarget).closest("."+s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(t,e){var i;this.isEmpty=s.every(this.datasets,function(t){return t.isEmpty()}),this.isEmpty?(e.length>=this.minLength&&this.trigger("empty"),this.$empty?e.length<this.minLength?this._hide():(i=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query}),this.$empty.html(i),this.$empty.show(),this._show()):!s.any(this.datasets,function(t){return t.templates&&t.templates.empty})||e.length<this.minLength?this._hide():this._show()):this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),e.length>=this.minLength?this._show():this._hide()),this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(s.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(t,e){t.first().addClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",e)},_removeCursor:function(){this._getCursor().removeClass(s.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(t){var e,i;this.isOpen&&(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(t=((t=e.index(i)+t)+1)%(e.length+1)-1)?(t<-1&&(t=e.length-1),this._setCursor(t=e.eq(t),!0),this._ensureVisible(t)):this.trigger("cursorRemoved"))},_ensureVisible:function(t){var e=t.position().top,i=e+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),n=this.$menu.scrollTop(),t=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10);e<0?this.$menu.scrollTop(n+e):t<i&&this.$menu.scrollTop(n+(i-t))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return e=t.length?{raw:r.extractDatum(t),value:r.extractValue(t),datasetName:r.extractDatasetName(t)}:e},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(e){s.each(this.datasets,function(t){t.update(e)})},empty:function(){s.each(this.datasets,function(t){t.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,s.each(this.datasets,function(t){t.destroy()})}}),u.Dataset=r,t.exports=u},7368:function(t,e,i){"use strict";var r=i(5670),n=i(3855);function o(t){t&&t.el||r.error("EventBus initialized without el"),this.$el=n.element(t.el)}r.mixin(o.prototype,{trigger:function(t,e,i,n){t=r.Event("autocomplete:"+t);return this.$el.trigger(t,[e,i,n]),t}}),t.exports=o},6823:function(t,e,i){"use strict";var o=i(624),s=/\s+/;function n(t,e,i,n){var r,o,a;if(!i)return this;for(e=e.split(s),i=n?(a=n,(o=i).bind?o.bind(a):function(){o.apply(a,[].slice.call(arguments,0))}):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function a(n,r,o){return function(){for(var t,e=0,i=n.length;!t&&e<i;e+=1)t=!1===n[e].apply(r,o);return!t}}t.exports={onSync:function(t,e,i){return n.call(this,"sync",t,e,i)},onAsync:function(t,e,i){return n.call(this,"async",t,e,i)},off:function(t){var e;if(!this._callbacks)return this;t=t.split(s);for(;e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,i,n,r;if(!this._callbacks)return this;t=t.split(s),i=[].slice.call(arguments,1);for(;(r=t.shift())&&(e=this._callbacks[r]);)n=a(e.sync,this,[r].concat(i)),r=a(e.async,this,[r].concat(i)),n()&&o(r);return this}}},6619:function(t){"use strict";t.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},1286:function(t,e,i){"use strict";var a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},s=i(5670),l=i(3855),i=i(6823);function n(t){var e,i,n,r,o=this;(t=t||{}).input||s.error("input is missing"),e=s.bind(this._onBlur,this),i=s.bind(this._onFocus,this),n=s.bind(this._onKeydown,this),r=s.bind(this._onInput,this),this.$hint=l.element(t.hint),this.$input=l.element(t.input).on("blur.aa",e).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=s.noop),s.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(t){a[t.which||t.keyCode]||s.defer(s.bind(o._onInput,o,t))}):this.$input.on("input.aa",r),this.query=this.$input.val(),this.$overflowHelper=(r=this.$input,l.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:r.css("font-family"),fontSize:r.css("font-size"),fontStyle:r.css("font-style"),fontVariant:r.css("font-variant"),fontWeight:r.css("font-weight"),wordSpacing:r.css("word-spacing"),letterSpacing:r.css("letter-spacing"),textIndent:r.css("text-indent"),textRendering:r.css("text-rendering"),textTransform:r.css("text-transform")}).insertAfter(r))}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},s.mixin(n.prototype,i,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,r;switch(t){case"tab":n=this.getHint(),r=this.getInputValue(),i=n&&n!==r&&!o(e);break;case"up":case"down":i=!o(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){e="tab"!==t||!o(e);return e},_checkInputValue:function(){var t,e,i=this.getInputValue();t=i,e=this.query,e=!(!(t=n.normalizeQuery(t)===n.normalizeQuery(e))||!this.query)&&this.query.length!==i.length,this.query=i,t?e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){void 0===t&&(t=this.query),this.$input.val(t),e?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(t){this.$input.attr("aria-activedescendant",t)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t=this.getInputValue(),e=this.getHint(),e=t!==e&&0===e.indexOf(t);""!==t&&e&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t=this.$input.val().length,e=this.$input[0].selectionStart;return s.isNumber(e)?e===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),t.exports=n},4520:function(t,e,i){"use strict";var o="aaAttrs",a=i(5670),s=i(3855),r=i(7368),n=i(1286),l=i(5445),c=i(6619),u=i(7114);function h(t){if((t=t||{}).input||a.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.autoselectOnBlur=!!t.autoselectOnBlur,this.openOnFocus=!!t.openOnFocus,this.minLength=a.isNumber(t.minLength)?t.minLength:1,this.autoWidth=void 0===t.autoWidth||!!t.autoWidth,this.clearOnSelected=!!t.clearOnSelected,this.tabAutocomplete=void 0===t.tabAutocomplete||!!t.tabAutocomplete,t.hint=!!t.hint,t.hint&&t.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=t.css=a.mixin({},u,t.appendTo?u.appendTo:{}),this.cssClasses=t.cssClasses=a.mixin({},u.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix=a.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=t.listboxId=[this.cssClasses.root,"listbox",a.getUniqueId()].join("-");var e=function(t){var e,i,n;e=s.element(t.input),i=s.element(c.wrapper.replace("%ROOT%",t.cssClasses.root)).css(t.css.wrapper),t.appendTo||"block"!==e.css("display")||"table"!==e.parent().css("display")||i.css("display","table-cell");var r=c.dropdown.replace("%PREFIX%",t.cssClasses.prefix).replace("%DROPDOWN_MENU%",t.cssClasses.dropdownMenu);n=s.element(r).css(t.css.dropdown).attr({role:"listbox",id:t.listboxId}),t.templates&&t.templates.dropdownMenu&&n.html(a.templatify(t.templates.dropdownMenu)());(r=e.clone().css(t.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(e))).val("").addClass(a.className(t.cssClasses.prefix,t.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),r.removeData&&r.removeData();e.data(o,{"aria-autocomplete":e.attr("aria-autocomplete"),"aria-expanded":e.attr("aria-expanded"),"aria-owns":e.attr("aria-owns"),autocomplete:e.attr("autocomplete"),dir:e.attr("dir"),role:e.attr("role"),spellcheck:e.attr("spellcheck"),style:e.attr("style"),type:e.attr("type")}),e.addClass(a.className(t.cssClasses.prefix,t.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":t.datasets&&t.datasets[0]&&t.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":t.ariaLabel,"aria-owns":t.listboxId}).css(t.hint?t.css.input:t.css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(t){}return(i=t.appendTo?i.appendTo(s.element(t.appendTo).eq(0)).eq(0):e.wrap(i).parent()).prepend(t.hint?r:null).append(n),{wrapper:i,input:e,hint:r,menu:n}}(t);this.$node=e.wrapper;var i=this.$input=e.input,n=e.menu,e=e.hint;t.dropdownMenuContainer&&s.element(t.dropdownMenuContainer).css("position","relative").append(n.css("top","0")),i.on("blur.aa",function(t){var e=document.activeElement;a.isMsie()&&(n[0]===e||n[0].contains(e))&&(t.preventDefault(),t.stopImmediatePropagation(),a.defer(function(){i.focus()}))}),n.on("mousedown.aa",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new r({el:i}),this.dropdown=new h.Dropdown({appendTo:t.appendTo,wrapper:this.$node,menu:n,datasets:t.datasets,templates:t.templates,cssClasses:t.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h.Input({input:i,hint:e}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(t),this._setLanguageDirection()}a.mixin(h.prototype,{_bindKeyboardShortcuts:function(t){var n,r;t.keyboardShortcuts&&(n=this.$input,r=[],a.each(t.keyboardShortcuts,function(t){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),r.push(t)}),s.element(document).keydown(function(t){var e=t.target||t.srcElement,i=e.tagName;e.isContentEditable||"INPUT"===i||"SELECT"===i||"TEXTAREA"===i||(i=t.which||t.keyCode,-1!==r.indexOf(i)&&(n.focus(),t.stopPropagation(),t.preventDefault()))}))},_onSuggestionClicked:function(t,e){(e=this.dropdown.getDatumForSuggestion(e))&&this._select(e,{selectionMethod:"click"})},_onCursorMoved:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(n),i&&(e&&this.input.setInputValue(i.value,!0),this.eventBus.trigger("cursorchanged",i.raw,i.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var t=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",t.width+"px");var e=this.$node[0].getBoundingClientRect(),i=t.bottom-e.top;this.$node.css("top",i+"px");e=t.left-e.left;this.$node.css("left",e+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){var t;this.isActivated=!0,this.openOnFocus&&((t=this.input.getQuery()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open())},_onBlurred:function(){var t=this.dropdown.getDatumForCursor(),e=this.dropdown.getDatumForTopSuggestion(),i={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&t?this._select(t,i):this.autoselectOnBlur&&e?this._select(e,i):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),r={selectionMethod:"enterKey"};i?(this._select(i,r),e.preventDefault()):this.autoselect&&n&&(this._select(n,r),e.preventDefault())},_onTabKeyed:function(t,e){var i;this.tabAutocomplete?(i=this.dropdown.getDatumForCursor())?(this._select(i,{selectionMethod:"tabKey"}),e.preventDefault()):this._autocomplete(!0):this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,i=this.dropdown.getDatumForTopSuggestion();i&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),e=n.normalizeQuery(t),e=a.escapeRegExChars(e),(i=new RegExp("^(?:"+e+")(.+$)","i").exec(i.value))?this.input.setHint(t+i[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e=this.input.getHint(),i=this.input.getQuery(),t=t||this.input.isCursorAtEnd();e&&i!==e&&t&&((t=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(t.value),this.eventBus.trigger("autocompleted",t.raw,t.datasetName))},_select:function(t,e){void 0!==t.value&&this.input.setQuery(t.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(t.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",t.raw,t.datasetName,e).isDefaultPrevented()&&(this.dropdown.close(),a.defer(a.bind(this.dropdown.empty,this.dropdown)))},open:function(){var t;this.isActivated||((t=this.input.getInputValue()).length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()),this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=a.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){var t,e,i;this.input.destroy(),this.dropdown.destroy(),t=this.$node,e=this.cssClasses,i=t.find(a.className(e.prefix,e.input)),a.each(i.data(o),function(t,e){void 0===t?i.removeAttr(e):i.attr(e,t)}),i.detach().removeClass(a.className(e.prefix,e.input,!0)).insertAfter(t),i.removeData&&i.removeData(o),t.remove(),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),h.Dropdown=l,h.Input=n,h.sources=i(6331),t.exports=h},3855:function(t){"use strict";t.exports={element:null}},2926:function(t){"use strict";t.exports=function(t){t=t.match(/Algolia for JavaScript \((\d+\.)(\d+\.)(\d+)\)/)||t.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(t)return[t[1],t[2],t[3]]}},5670:function(t,e,i){"use strict";var n,r=i(3855);function a(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(t){if(void 0===t&&(t=navigator.userAgent),/(msie|trident)/i.test(t)){t=t.match(/(msie |rv:)(\d+(.\d+)?)/i);if(t)return t[2]}return!1},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(t){return"number"==typeof t},toStr:function(t){return null==t?"":t+""},cloneDeep:function(t){var i=this.mixin({},t),n=this;return this.each(i,function(t,e){t&&(n.isArray(t)?i[e]=[].concat(t):n.isObject(t)&&(i[e]=n.cloneDeep(t)))}),i},error:function(t){throw new Error(t)},every:function(i,n){var r=!0;return i?(this.each(i,function(t,e){r=r&&(n.call(null,t,e,i)&&r)}),!!r):r},any:function(i,n){var r=!1;return i&&this.each(i,function(t,e){if(n.call(null,t,e,i))return!(r=!0)}),r},getUniqueId:(n=0,function(){return n++}),templatify:function(t){if(this.isFunction(t))return t;var e=r.element(t);return"SCRIPT"===e.prop("tagName")?function(){return e.text()}:function(){return String(t)}},defer:function(t){setTimeout(t,0)},noop:function(){},formatPrefix:function(t,e){return e?"":t+"-"},className:function(t,e,i){return(i?"":".")+t+e},escapeHighlightedString:function(t,e,i){e=e||"<em>";var n=document.createElement("div");n.appendChild(document.createTextNode(e)),i=i||"</em>";var r=document.createElement("div");r.appendChild(document.createTextNode(i));var o=document.createElement("div");return o.appendChild(document.createTextNode(t)),o.innerHTML.replace(RegExp(a(n.innerHTML),"g"),e).replace(RegExp(a(r.innerHTML),"g"),i)}}},2683:function(t,e,i){"use strict";var s=i(5670),n=i(3489),r=i(2926);var l,c,o=(l=[],c=window.Promise.resolve(),function(o,a){return function(t,e){var i,n,r=o.as,t=l.push({indexName:o.indexName,query:t,params:a})-1;i=r,n=t,window.Promise.resolve().then(function(){return l.length&&(c=i.search(l),l=[]),c}).then(function(t){if(t)return t.results[n]}).then(function(t){t&&e(t.hits,t)}).catch(function(t){s.error(t.message)})}});t.exports=function(t,e){var i=r(t.as._ua);return i&&3<=i[0]&&20<i[1]&&(i="autocomplete.js "+n,-1===t.as._ua.indexOf(i)&&(t.as._ua+="; "+i)),o(t,e)}},6331:function(t,e,i){"use strict";t.exports={hits:i(2683),popularIn:i(2226)}},2226:function(t,e,i){"use strict";var u=i(5670),h=i(3489),p=i(2926);t.exports=function(e,i,n,s){var t=p(e.as._ua);if(t&&3<=t[0]&&20<t[1]&&((i=i||{}).additionalUA="autocomplete.js "+h),!n.source)return u.error("Missing 'source' key");var l=u.isFunction(n.source)?n.source:function(t){return t[n.source]};if(!n.index)return u.error("Missing 'index' key");var c=n.index;return s=s||{},function(t,a){e.search(t,i,function(t,r){if(t)u.error(t.message);else{if(0<r.hits.length){var o=r.hits[0],e=u.mixin({hitsPerPage:0},n);delete e.source,delete e.index;t=p(c.as._ua);return t&&3<=t[0]&&20<t[1]&&(i.additionalUA="autocomplete.js "+h),void c.search(l(o),e,function(t,e){if(t)u.error(t.message);else{var n=[];s.includeAll&&(t=s.allTitle||"All departments",n.push(u.mixin({facet:{value:t,count:e.nbHits}},u.cloneDeep(o)))),u.each(e.facets,function(t,i){u.each(t,function(t,e){n.push(u.mixin({facet:{facet:i,value:e,count:t}},u.cloneDeep(o)))})});for(var i=1;i<r.hits.length;++i)n.push(r.hits[i]);a(n,r)}})}a([])}})}}},9281:function(t,e,i){"use strict";var s=i(7939);i(3855).element=s;var n=i(5670);n.isArray=s.isArray,n.isFunction=s.isFunction,n.isObject=s.isPlainObject,n.bind=s.proxy,n.each=function(t,i){s.each(t,function(t,e){return i(e,t)})},n.map=s.map,n.mixin=s.extend,n.Event=s.Event;var l="aaAutocomplete",c=i(4520),u=i(7368);function r(t,r,o,a){o=n.isArray(o)?o:[].slice.call(arguments,2);var e=s(t).each(function(t,e){var i=s(e),n=new u({el:i}),e=a||new c({input:i,eventBus:n,dropdownMenuContainer:r.dropdownMenuContainer,hint:void 0===r.hint||!!r.hint,minLength:r.minLength,autoselect:r.autoselect,autoselectOnBlur:r.autoselectOnBlur,tabAutocomplete:r.tabAutocomplete,openOnFocus:r.openOnFocus,templates:r.templates,debug:r.debug,clearOnSelected:r.clearOnSelected,cssClasses:r.cssClasses,datasets:o,keyboardShortcuts:r.keyboardShortcuts,appendTo:r.appendTo,autoWidth:r.autoWidth,ariaLabel:r.ariaLabel||e.getAttribute("aria-label")});i.data(l,e)});return e.autocomplete={},n.each(["open","close","getVal","setVal","destroy","getWrapper"],function(r){e.autocomplete[r]=function(){var i,n=arguments;return e.each(function(t,e){e=s(e).data(l);i=e[r].apply(e,n)}),i}}),e}r.sources=c.sources,r.escapeHighlightedString=n.escapeHighlightedString;var o="autocomplete"in window,a=window.autocomplete;r.noConflict=function(){return o?window.autocomplete=a:delete window.autocomplete,r},t.exports=r},3489:function(t){t.exports="0.38.0"},7939:function(t){var e,$,i;e=window,t.exports=($=e,function(u){function c(t){return"string"==typeof t}var h,e=1,p=Array.prototype.slice,d=u.isFunction,f={},o={},i="onfocusin"in $,n={focus:"focusin",blur:"focusout"},m={mouseenter:"mouseover",mouseleave:"mouseout"};function g(t){return t._zid||(t._zid=e++)}function a(t,e,i,n){var r,o;return(e=v(e)).ns&&(o=e.ns,r=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(f[g(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!i||g(t.fn)===g(i))&&(!n||t.sel==n)})}function v(t){t=(""+t).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function _(t,e){return t.del&&!i&&t.e in n||!!e}function y(t){return m[t]||i&&n[t]||t}function b(r,t,e,o,a,s,l){var i=g(r),c=f[i]||(f[i]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return u(document).ready(e);var i=v(t);i.fn=e,i.sel=a,i.e in m&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!u.contains(this,e))return i.fn.apply(this,arguments)});var n=(i.del=s)||e;i.proxy=function(t){if(!(t=w(t)).isImmediatePropagationStopped()){try{var e=Object.getOwnPropertyDescriptor(t,"data");e&&!e.writable||(t.data=o)}catch(t){}var i=n.apply(r,t._args==h?[t]:[t].concat(t._args));return!1===i&&(t.preventDefault(),t.stopPropagation()),i}},i.i=c.length,c.push(i),"addEventListener"in r&&r.addEventListener(y(i.e),i.proxy,_(i,l))})}function x(e,t,i,n,r){var o=g(e);(t||"").split(/\s/).forEach(function(t){a(e,t,i,n).forEach(function(t){delete f[o][t.i],"removeEventListener"in e&&e.removeEventListener(y(t.e),t.proxy,_(t,r))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",u.event={add:b,remove:x},u.proxy=function(t,e){var i=2 in arguments&&p.call(arguments,2);if(d(t)){function n(){return t.apply(e,i?i.concat(p.call(arguments)):arguments)}return n._zid=g(t),n}if(c(e))return i?(i.unshift(t[e],t),u.proxy.apply(null,i)):u.proxy(t[e],t);throw new TypeError("expected function")},u.fn.bind=function(t,e,i){return this.on(t,e,i)},u.fn.unbind=function(t,e){return this.off(t,e)},u.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var s=function(){return!0},k=function(){return!1},r=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function w(n,r){if(r||!n.isDefaultPrevented){r=r||n,u.each(t,function(t,e){var i=r[t];n[t]=function(){return this[e]=s,i&&i.apply(r,arguments)},n[e]=k});try{n.timeStamp||(n.timeStamp=Date.now())}catch(t){}(r.defaultPrevented!==h?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=s)}return n}function L(t){var e,i={originalEvent:t};for(e in t)r.test(e)||t[e]===h||(i[e]=t[e]);return w(i,t)}u.fn.delegate=function(t,e,i){return this.on(e,t,i)},u.fn.undelegate=function(t,e,i){return this.off(e,t,i)},u.fn.live=function(t,e){return u(document.body).delegate(this.selector,t,e),this},u.fn.die=function(t,e){return u(document.body).undelegate(this.selector,t,e),this},u.fn.on=function(e,r,i,o,a){var s,l,n=this;return e&&!c(e)?(u.each(e,function(t,e){n.on(t,r,i,e,a)}),n):(c(r)||d(o)||!1===o||(o=i,i=r,r=h),o!==h&&!1!==i||(o=i,i=h),!1===o&&(o=k),n.each(function(t,n){a&&(s=function(t){return x(n,t.type,o),o.apply(this,arguments)}),b(n,e,o,i,r,(l=r?function(t){var e,i=u(t.target).closest(r,n).get(0);if(i&&i!==n)return e=u.extend(L(t),{currentTarget:i,liveFired:n}),(s||o).apply(i,[e].concat(p.call(arguments,1)))}:l)||s)}))},u.fn.off=function(t,i,e){var n=this;return t&&!c(t)?(u.each(t,function(t,e){n.off(t,i,e)}),n):(c(i)||d(e)||!1===e||(e=i,i=h),!1===e&&(e=k),n.each(function(){x(this,t,e,i)}))},u.fn.trigger=function(t,e){return(t=c(t)||u.isPlainObject(t)?u.Event(t):w(t))._args=e,this.each(function(){t.type in n&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):u(this).triggerHandler(t,e)})},u.fn.triggerHandler=function(i,n){var r,o;return this.each(function(t,e){(r=L(c(i)?u.Event(i):i))._args=n,r.target=e,u.each(a(e,i.type||i),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){u.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),u.Event=function(t,e){c(t)||(t=(e=t).type);var i=document.createEvent(o[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),w(i)}}(i=function(){var l,a,c,n,s,i,r=[],o=r.concat,u=r.filter,h=r.slice,p=$.document,d={},e={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},m=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],t=p.createElement("table"),x=p.createElement("tr"),k={tr:p.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:x,th:x,"*":p.createElement("div")},w=/complete|loaded|interactive/,L=/^[\w-]*$/,M={},C=M.toString,S={},P=p.createElement("div"),T={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},E=Array.isArray||function(t){return t instanceof Array};function D(t){return null==t?String(t):M[C.call(t)]||"object"}function A(t){return"function"==D(t)}function O(t){return null!=t&&t==t.window}function I(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function B(t){return"object"==D(t)}function R(t){return B(t)&&!O(t)&&Object.getPrototypeOf(t)==Object.prototype}function z(t){var e=!!t&&"length"in t&&t.length,i=c.type(t);return"function"!=i&&!O(t)&&("array"==i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function F(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function N(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function j(t,e){return"number"!=typeof e||f[F(t)]?e:e+"px"}function U(t){return"children"in t?h.call(t.children):c.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function H(t,e){for(var i=t?t.length:0,n=0;n<i;n++)this[n]=t[n];this.length=i,this.selector=e||""}function G(t,e){return null==e?c(t):c(t).filter(e)}function Z(t,e,i,n){return A(e)?e.call(t,i,n):e}function W(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function V(t,e){var i=t.className||"",n=i&&i.baseVal!==l;if(e===l)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function q(e){try{return e&&("true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?c.parseJSON(e):e))}catch(t){return e}}return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n=t.parentNode,i=!n;return i&&(n=P).appendChild(t),e=~S.qsa(n,e).indexOf(t),i&&P.removeChild(t),e},s=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},i=function(i){return u.call(i,function(t,e){return i.indexOf(t)==e})},S.fragment=function(t,e,i){var n,r,o;return(n=g.test(t)?c(p.createElement(RegExp.$1)):n)||(t.replace&&(t=t.replace(v,"<$1></$2>")),e===l&&(e=m.test(t)&&RegExp.$1),(o=k[e=!(e in k)?"*":e]).innerHTML=""+t,n=c.each(h.call(o.childNodes),function(){o.removeChild(this)})),R(i)&&(r=c(n),c.each(i,function(t,e){-1<b.indexOf(t)?r[t](e):r.attr(t,e)})),n},S.Z=function(t,e){return new H(t,e)},S.isZ=function(t){return t instanceof S.Z},S.init=function(t,e){var i,n;if(!t)return S.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&m.test(t))i=S.fragment(t,RegExp.$1,e),t=null;else{if(e!==l)return c(e).find(t);i=S.qsa(p,t)}else{if(A(t))return c(p).ready(t);if(S.isZ(t))return t;if(E(t))n=t,i=u.call(n,function(t){return null!=t});else if(B(t))i=[t],t=null;else if(m.test(t))i=S.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==l)return c(e).find(t);i=S.qsa(p,t)}}return S.Z(i,t)},(c=function(t,e){return S.init(t,e)}).extend=function(e){var i,t=h.call(arguments,1);return"boolean"==typeof e&&(i=e,e=t.shift()),t.forEach(function(t){!function t(e,i,n){for(a in i)n&&(R(i[a])||E(i[a]))?(R(i[a])&&!R(e[a])&&(e[a]={}),E(i[a])&&!E(e[a])&&(e[a]=[]),t(e[a],i[a],n)):i[a]!==l&&(e[a]=i[a])}(e,t,i)}),e},S.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],o=n||r?e.slice(1):e,a=L.test(o);return t.getElementById&&a&&n?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:h.call(a&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},c.contains=p.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},c.type=D,c.isFunction=A,c.isWindow=O,c.isArray=E,c.isPlainObject=R,c.isEmptyObject=function(t){for(var e in t)return!1;return!0},c.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},c.inArray=function(t,e,i){return r.indexOf.call(e,t,i)},c.camelCase=s,c.trim=function(t){return null==t?"":String.prototype.trim.call(t)},c.uuid=0,c.support={},c.expr={},c.noop=function(){},c.map=function(t,e){var i,n,r,o,a=[];if(z(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&a.push(i);else for(r in t)null!=(i=e(t[r],r))&&a.push(i);return 0<(o=a).length?c.fn.concat.apply([],o):o},c.each=function(t,e){var i,n;if(z(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},c.grep=function(t,e){return u.call(t,e)},$.JSON&&(c.parseJSON=JSON.parse),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){M["[object "+e+"]"]=e.toLowerCase()}),c.fn={constructor:S.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){for(var t,e=[],i=0;i<arguments.length;i++)t=arguments[i],e[i]=S.isZ(t)?t.toArray():t;return o.apply(S.isZ(this)?this.toArray():this,e)},map:function(i){return c(c.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return c(h.apply(this,arguments))},ready:function(t){return w.test(p.readyState)&&p.body?t(c):p.addEventListener("DOMContentLoaded",function(){t(c)},!1),this},get:function(t){return t===l?h.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return r.every.call(this,function(t,e){return!1!==i.call(t,e,t)}),this},filter:function(e){return A(e)?this.not(this.not(e)):c(u.call(this,function(t){return S.matches(t,e)}))},add:function(t,e){return c(i(this.concat(c(t,e))))},is:function(t){return 0<this.length&&S.matches(this[0],t)},not:function(e){var i,n=[];return A(e)&&e.call!==l?this.each(function(t){e.call(this,t)||n.push(this)}):(i="string"==typeof e?this.filter(e):z(e)&&A(e.item)?h.call(e):c(e),this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})),c(n)},has:function(t){return this.filter(function(){return B(t)?c.contains(this,t):c(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!B(t)?t:c(t)},last:function(){var t=this[this.length-1];return t&&!B(t)?t:c(t)},find:function(t){var i=this,e=t?"object"==typeof t?c(t).filter(function(){var e=this;return r.some.call(i,function(t){return c.contains(t,e)})}):1==this.length?c(S.qsa(this[0],t)):this.map(function(){return S.qsa(this,t)}):c();return e},closest:function(i,n){var r=[],o="object"==typeof i&&c(i);return this.each(function(t,e){for(;e&&!(o?0<=o.indexOf(e):S.matches(e,i));)e=e!==n&&!I(e)&&e.parentNode;e&&r.indexOf(e)<0&&r.push(e)}),c(r)},parents:function(t){for(var e=[],i=this;0<i.length;)i=c.map(i,function(t){if((t=t.parentNode)&&!I(t)&&e.indexOf(t)<0)return e.push(t),t});return G(e,t)},parent:function(t){return G(i(this.pluck("parentNode")),t)},children:function(t){return G(this.map(function(){return U(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||h.call(this.childNodes)})},siblings:function(t){return G(this.map(function(t,e){return u.call(U(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return c.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,d[t]||(e=p.createElement(t),p.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),d[t]=i),d[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var i,n,r=A(e);return this[0]&&!r&&(i=c(e).get(0),n=i.parentNode||1<this.length),this.each(function(t){c(this).wrapAll(r?e.call(this,t):n?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(c(this[0]).before(t=c(t));(e=t.children()).length;)t=e.first();c(t).append(this)}return this},wrapInner:function(n){var r=A(n);return this.each(function(t){var e=c(this),i=e.contents(),t=r?n.call(this,t):n;i.length?i.wrapAll(t):e.append(t)})},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=c(this);(e===l?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return c(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return c(this.pluck("nextElementSibling")).filter(t||"*")},html:function(i){return 0 in arguments?this.each(function(t){var e=this.innerHTML;c(this).empty().append(Z(this,i,t,e))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){t=Z(this,e,t,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,i){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(B(e))for(a in e)W(this,a,e[a]);else W(this,e,Z(this,i,t,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(e))?t:l},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){W(this,t)},this)})},prop:function(e,i){return e=T[e]||e,1 in arguments?this.each(function(t){this[e]=Z(this,i,t,this[e])}):this[0]&&this[0][e]},removeProp:function(t){return t=T[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(y,"-$1").toLowerCase(),i=1 in arguments?this.attr(i,e):this.attr(i);return null!==i?q(i):l},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=Z(this,e,t,this.value)})):this[0]&&(this[0].multiple?c(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(n){if(n)return this.each(function(t){var e=c(this),i=Z(this,n,t,e.offset()),t=e.offsetParent().offset(),t={top:i.top-t.top,left:i.left-t.left};"static"==e.css("position")&&(t.position="relative"),e.css(t)});if(!this.length)return null;if(p.documentElement!==this[0]&&!c.contains(p.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+$.pageXOffset,top:t.top+$.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t)return i?i.style[s(t)]||getComputedStyle(i,"").getPropertyValue(t):void 0;if(E(t)){if(!i)return;var n={},r=getComputedStyle(i,"");return c.each(t,function(t,e){n[e]=i.style[s(e)]||r.getPropertyValue(e)}),n}}var o="";if("string"==D(t))e||0===e?o=F(t)+":"+j(t,e):this.each(function(){this.style.removeProperty(F(t))});else for(a in t)t[a]||0===t[a]?o+=F(a)+":"+j(a,t[a])+";":this.each(function(){this.style.removeProperty(F(a))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(c(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&r.some.call(this,function(t){return this.test(V(t))},N(t))},addClass:function(i){return i?this.each(function(t){var e;"className"in this&&(n=[],e=V(this),Z(this,i,t,e).split(/\s+/g).forEach(function(t){c(this).hasClass(t)||n.push(t)},this),n.length&&V(this,e+(e?" ":"")+n.join(" ")))}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===l)return V(this,"");n=V(this),Z(this,e,t,n).split(/\s+/g).forEach(function(t){n=n.replace(N(t)," ")}),V(this,n.trim())}})},toggleClass:function(i,n){return i?this.each(function(t){var e=c(this);Z(this,i,t,V(this)).split(/\s+/g).forEach(function(t){(n===l?!e.hasClass(t):n)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===l?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===l?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=_.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(c(t).css("margin-top"))||0,i.left-=parseFloat(c(t).css("margin-left"))||0,n.top+=parseFloat(c(e[0]).css("border-top-width"))||0,n.left+=parseFloat(c(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||p.body;t&&!_.test(t.nodeName)&&"static"==c(t).css("position");)t=t.offsetParent;return t})}},c.fn.detach=c.fn.remove,["width","height"].forEach(function(n){var r=n.replace(/./,function(t){return t[0].toUpperCase()});c.fn[n]=function(e){var t,i=this[0];return e===l?O(i)?i["inner"+r]:I(i)?i.documentElement["scroll"+r]:(t=this.offset())&&t[n]:this.each(function(t){(i=c(this)).css(n,Z(this,e,t,i[n]()))})}}),["after","prepend","before","append"].forEach(function(e,a){var s=a%2;c.fn[e]=function(){var i,n,r=c.map(arguments,function(t){var e=[];return"array"==(i=D(t))?(t.forEach(function(t){return t.nodeType!==l?e.push(t):c.zepto.isZ(t)?e=e.concat(t.get()):void(e=e.concat(S.fragment(t)))}),e):"object"==i||null==t?t:S.fragment(t)}),o=1<this.length;return r.length<1?this:this.each(function(t,e){n=s?e:e.parentNode,e=0==a?e.nextSibling:1==a?e.firstChild:2==a?e:null;var i=c.contains(p.documentElement,n);r.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!n)return c(t).remove();n.insertBefore(t,e),i&&function t(e,i){i(e);for(var n=0,r=e.childNodes.length;n<r;n++)t(e.childNodes[n],i)}(t,function(t){var e;null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||(e=t.ownerDocument?t.ownerDocument.defaultView:$).eval.call(e,t.innerHTML)})})})},c.fn[s?e+"To":"insert"+(a?"Before":"After")]=function(t){return c(t)[e](this),this}}),S.Z.prototype=H.prototype=c.fn,S.uniq=i,S.deserializeValue=q,c.zepto=S,c}()),function(){var t,e=[];i.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(e.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){e=[]},6e4)),this.parentNode.removeChild(this))})}}(),function(a){var s={},r=a.fn.data,l=a.camelCase,c=a.expando="Zepto"+ +new Date,u=[];function o(t,e,i){var n,r,o=t[c]||(t[c]=++a.uuid),n=s[o]||(s[o]=(n=t,r={},a.each(n.attributes||u,function(t,e){0==e.name.indexOf("data-")&&(r[l(e.name.replace("data-",""))]=a.zepto.deserializeValue(e.value))}),r));return void 0!==e&&(n[l(e)]=i),n}a.fn.data=function(e,t){return void 0===t?a.isPlainObject(e)?this.each(function(t,i){a.each(e,function(t,e){o(i,t,e)})}):0 in this?function(t,e){var i=t[c],n=i&&s[i];if(void 0===e)return n||o(t);if(n){if(e in n)return n[e];i=l(e);if(i in n)return n[i]}return r.call(a(t),e)}(this[0],e):void 0:this.each(function(){o(this,e,t)})},a.data=function(t,e,i){return a(t).data(e,i)},a.hasData=function(t){t=t[c],t=t&&s[t];return!!t&&!a.isEmptyObject(t)},a.fn.removeData=function(i){return"string"==typeof i&&(i=i.split(/\s+/)),this.each(function(){var t=this[c],e=t&&s[t];e&&a.each(i||e,function(t){delete e[i?l(this):t]})})},["remove","empty"].forEach(function(e){var i=a.fn[e];a.fn[e]=function(){var t=this.find("*");return(t="remove"===e?t.add(this):t).removeData(),i.call(this)}})}(i),i)},1241:function(t,e,i){"use strict";i(7310);function n(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}n.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");t=this.xml.querySelector("metadata");null!==t&&(this.metadata=this.parseMetadataType(t));for(var n=[].slice.call(this.xml.querySelectorAll("wpt")),r=0;r<n.length;r++){var o=n[r],o=e.parseWptType(o,!0);e.waypoints.push(o)}for(var a=[].slice.call(this.xml.querySelectorAll("rte")),r=0;r<a.length;r++){var s=a[r],s=e.parseRteType(s);s.time=e.calcTime(s.points),s.distance=e.calcDistance(s.points),s.elevation=e.calcElevation(s.points),s.heartRate=e.calcHeartRate(s.points),e.routes.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("trk")),r=0;r<l.length;r++){var c=l[r],c=e.parseTrkType(c);c.time=e.calcTime(c.points),c.distance=e.calcDistance(c.points),c.elevation=e.calcElevation(c.points),c.heartRate=e.calcHeartRate(c.points),e.tracks.push(c)}},n.prototype.getFirstTagValue=function(t,e){e=t.querySelectorAll(e);return e.length?e[0].textContent:null},n.prototype.getFirstTagValueNs=function(t,e,i){i=t.getElementsByTagNameNS(e,i);return i.length?i[0].textContent:null},n.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return i=null===i?this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e):i},n.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var r=i[n],r=this.parseLinkType(r);e.push(r)}return e},n.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var r=i[n],r=this.parseWptType(r,!1);e.push(r)}return e},n.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var r=i[n],r=this.parseWptType(r,!1);e.push(r)}return e},n.prototype.parseTrksegs=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkseg")),n=0;n<i.length;n++){var r=i[n],r=this.parseTrksegType(r,!1);r.time=this.calcTime(r.points),r.distance=this.calcDistance(r.points),r.elevation=this.calcElevation(r.points),r.heartRate=this.calcHeartRate(r.points),e.push(r)}return e},n.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},n.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},n.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},n.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},n.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i)return{};for(var n={},r=0;r<e.length;r++){var o=e[r];n[o]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",o)}return n},n.prototype.parseTrackPointExtensionType=function(t){t=t.querySelector("TrackPointExtension");return null===t?{}:{atemp:parseFloat(this.getTpxValue(t,"atemp")),wtemp:parseFloat(this.getTpxValue(t,"wtemp")),depth:parseFloat(this.getTpxValue(t,"depth")),hr:parseInt(this.getTpxValue(t,"hr")),cad:parseInt(this.getTpxValue(t,"cad")),speed:parseFloat(this.getTpxValue(t,"speed")),course:parseFloat(this.getTpxValue(t,"course")),bearing:parseFloat(this.getTpxValue(t,"bearing"))}},n.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var r=t[n+1].time-t[n].time;isNaN(r)||(e+=r,r<this.settings.timeMovingThreshold&&(i+=r)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},n.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++)e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e;return{total:e}},n.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),i=Math.sin((e.lon-t.lon)*i/2),i=o*o+Math.cos(n)*Math.cos(r)*i*i;return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},n.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,r=null,o=0;o<t.length;o++){var a,s=t[o].ele;isNaN(s)?(t[o].gain=Math.abs(i),t[o].loss=Math.abs(n)):(null!==r?(a=s-r,5<=Math.abs(a)&&(0<a?i+=a:a<0&&(n+=a),r=s,e.push(s))):(e.push(s),r=s),t[o].gain=Math.abs(i),t[o].loss=Math.abs(n))}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce(function(t,e){return t+e},0)/e.length}},n.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce(function(t,e){return t+e},0)/e.length}};var r=n,o=i(7757),s=i.n(o),f=i(5243),R=i.n(f),a=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,l=""===document.documentElement.style.pointerEvents,c={cors:a,pointerEvents:l},u={attributionWidthOffset:55},h=0;function p(t){var e,i,n,r="";for(e in t.f=t.f||"json",t)t.hasOwnProperty(e)&&(n=t[e],i=Object.prototype.toString.call(n),r.length&&(r+="&"),n="[object Array]"===i?"[object Object]"===Object.prototype.toString.call(n[0])?JSON.stringify(n):n.join(","):"[object Object]"===i?JSON.stringify(n):"[object Date]"===i?n.valueOf():n,r+=encodeURIComponent(e)+"="+encodeURIComponent(n));return r}function d(n,r){var o=new window.XMLHttpRequest;return o.onerror=function(t){o.onreadystatechange=f.Util.falseFn,n.call(r,{error:{code:500,message:"XMLHttpRequest error"}},null)},o.onreadystatechange=function(){var e,i;if(4===o.readyState){try{e=JSON.parse(o.responseText)}catch(t){e=null,i={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!i&&e.error&&(i=e.error,e=null),o.onerror=f.Util.falseFn,n.call(r,i,e)}},o.ontimeout=function(){this.onerror()},o}function m(t,e,i,n){i=d(i,n);return i.open("GET",t+"?"+p(e),!0),null!=n&&void 0!==n.options&&(i.timeout=n.options.timeout,n.options.withCredentials&&(i.withCredentials=!0)),i.send(null),i}function g(t,e,i,n){var r=p(e),o=d(i,n),a=(t+"?"+r).length;if(a<=2e3&&c.cors?o.open("GET",t+"?"+r):2e3<a&&c.cors&&(o.open("POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout,n.options.withCredentials&&(o.withCredentials=!0)),a<=2e3&&c.cors)o.send(null);else{if(!(2e3<a&&c.cors))return a<=2e3&&!c.cors?v(t,e,i,n):void y("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");o.send(r)}return o}function v(t,e,n,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+h;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){var e,i;!0!==window._EsriLeafletCallbacks[o]&&("[object Object]"!==(i=Object.prototype.toString.call(t))&&"[object Array]"!==i&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),n.call(r,e,t),window._EsriLeafletCallbacks[o]=!0)};var i=f.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=t+"?"+p(e),i.id=o,i.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[o]&&(n.call(r,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0)},f.DomUtil.addClass(i,"esri-leaflet-jsonp"),h++,{id:o,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var _=c.cors?m:v;function y(){console&&console.warn&&console.warn.apply(console,arguments)}_.CORS=m,_.JSONP=v;function b(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(function(t,e,i,n){var r=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),o=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),t=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!=t){r=r/t,t=o/t;if(0<=r&&r<=1&&0<=t&&t<=1)return!0}return!1}(t[i],t[i+1],e[n],e[n+1]))return!0;return!1}function x(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function k(t){for(var e,i=0,n=0,r=t.length,o=t[n];n<r-1;n++)i+=((e=t[n+1])[0]-o[0])*(e[1]+o[1]),o=e;return 0<=i}function w(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function L(t){for(var e,i,n=[],r=[],o=0;o<t.length;o++){var a,s=x(t[o].slice(0));s.length<4||(k(s)?(a=[s.slice().reverse()],n.push(a)):r.push(s.slice().reverse()))}for(var l,c,u,h=[];r.length;){i=r.pop();for(var p=!1,d=n.length-1;0<=d;d--)if(e=n[d][0],u=void 0,u=b(l=e,c=i),c=function(t,e){for(var i=!1,n=-1,r=t.length,o=r-1;++n<r;o=n)(t[n][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[o][0]-t[n][0])*(e[1]-t[n][1])/(t[o][1]-t[n][1])+t[n][0]&&(i=!i);return i}(l,c[0]),!(u||!c)){n[d].push(i),p=!0;break}p||h.push(i)}for(;h.length;){i=h.pop();var f=!1;for(d=n.length-1;0<=d;d--)if(e=n[d][0],b(e,i)){n[d].push(i),f=!0;break}f||n.push([i.reverse()])}return 1===n.length?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}function M(t){var e=[],i=t.slice(0);if(4<=(t=x(i.shift().slice(0))).length){k(t)||t.reverse(),e.push(t);for(var n=0;n<i.length;n++){var r=x(i[n].slice(0));4<=r.length&&(k(r)&&r.reverse(),e.push(r))}}return e}var C={request:g,get:_,post:function(t,e,i,n){return(i=d(i,n)).open("POST",t),null!=n&&void 0!==n.options&&(i.timeout=n.options.timeout),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(p(e)),i}},S=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var r=0;r<e.features.length;r++)n.features.push(t(e.features[r],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=L(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?w(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var r=i[n];if(r in t&&("string"==typeof t[r]||"number"==typeof t[r]))return t[r]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},P=function t(e,i){i=i||"OBJECTID";var n,r={wkid:4326},o={};switch(e.type){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],o.spatialReference=r;break;case"MultiPoint":o.points=e.coordinates.slice(0),o.spatialReference=r;break;case"LineString":o.paths=[e.coordinates.slice(0)],o.spatialReference=r;break;case"MultiLineString":o.paths=e.coordinates.slice(0),o.spatialReference=r;break;case"Polygon":o.rings=M(e.coordinates.slice(0)),o.spatialReference=r;break;case"MultiPolygon":o.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=M(t[i]),r=n.length-1;0<=r;r--){var o=n[r].slice(0);e.push(o)}return e}(e.coordinates.slice(0)),o.spatialReference=r;break;case"Feature":e.geometry&&(o.geometry=t(e.geometry,i)),o.attributes=e.properties?w(e.properties):{},e.id&&(o.attributes[i]=e.id);break;case"FeatureCollection":for(o=[],n=0;n<e.features.length;n++)o.push(t(e.features[n],i));break;case"GeometryCollection":for(o=[],n=0;n<e.geometries.length;n++)o.push(t(e.geometries[n],i))}return o},T='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function E(t,e){return P(t,e)}function D(t,e){return S(t,e)}function A(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=(0,f.latLng)(t.ymin,t.xmin),t=(0,f.latLng)(t.ymax,t.xmax);return(0,f.latLngBounds)(e,t)}function O(t){return{xmin:(t=(0,f.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var I=/^(OBJECTID|FID|OID|ID)$/i;function B(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(I)){e=t.fields[i].name;break}}return e}function z(t){for(var e in t.attributes)if(e.match(I))return e}function F(t,e){var i=t.features||t.results,n=i&&i.length,r=e||B(t),o={type:"FeatureCollection",features:[]};if(n)for(var a=i.length-1;0<=a;a--){var s=D(i[a],r||z(i[a]));o.features.push(s)}return o}function N(t){return"/"!==(t=f.Util.trim(t))[t.length-1]&&(t+="/"),t}function j(t){var e;return-1!==t.url.indexOf("?")&&(t.requestParams=t.requestParams||{},e=t.url.substring(t.url.indexOf("?")+1),t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),t.url=N(t.url.split("?")[0]),t}function U(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function H(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function G(t){return t.getSize().x-u.attributionWidthOffset+"px"}function Z(e){var t;e.attributionControl&&(e.attributionControl._esriAttributionLayerCount||(e.attributionControl._esriAttributionLayerCount=0),0===e.attributionControl._esriAttributionLayerCount&&(e.attributionControl._esriAttributionAddedOnce||((t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+G(e)+";}",document.getElementsByTagName("head")[0].appendChild(t),e.on("resize",function(t){e.attributionControl&&(e.attributionControl._container.style.maxWidth=G(t.target))}),e.attributionControl._esriAttributionAddedOnce=!0),e.attributionControl.setPrefix(T+' | Powered by <a href="https://www.esri.com">Esri</a>'),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution")),e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount+1)}function W(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix(T),f.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function V(t){var e={geometry:null,geometryType:null};return t instanceof f.LatLngBounds?(e.geometry=O(t),e.geometryType="esriGeometryEnvelope",e):((t=(t=t.getLatLng?t.getLatLng():t)instanceof f.LatLng?{type:"Point",coordinates:[t.lng,t.lat]}:t)instanceof f.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=E(t),e.geometryType=H(t.type)),"Point"===(t="Feature"===(t=t.toGeoJSON?t.toGeoJSON():t).type?t.geometry:t).type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=E(t),e.geometryType=H(t.type),e):void y("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function q(t,l){c.cors&&g(t,{},f.Util.bind(function(t,e){if(!t){l._esriAttributions=[];for(var i=0;i<e.contributors.length;i++)for(var n=e.contributors[i],r=0;r<n.coverageAreas.length;r++){var o=n.coverageAreas[r],a=(0,f.latLng)(o.bbox[0],o.bbox[1]),s=(0,f.latLng)(o.bbox[2],o.bbox[3]);l._esriAttributions.push({attribution:n.attribution,score:o.score,bounds:(0,f.latLngBounds)(a,s),minZoom:o.zoomMin,maxZoom:o.zoomMax})}l._esriAttributions.sort(function(t,e){return e.score-t.score}),$({target:l})}},this))}function $(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var r="",t=e.getBounds(),o=(0,f.latLngBounds)(t.getSouthWest().wrap(),t.getNorthEast().wrap()),a=e.getZoom(),s=0;s<i.length;s++){var l=i[s],c=l.attribution;!r.match(c)&&l.bounds.intersects(o)&&a>=l.minZoom&&a<=l.maxZoom&&(r+=", "+c)}r=r.substr(2),n.innerHTML=r,n.style.maxWidth=G(e),e.fire("attributionupdated",{attribution:r})}}}var Y={warn:y,cleanUrl:N,getUrlParams:j,isArcgisOnline:U,geojsonTypeToArcGIS:H,responseToFeatureCollection:F,geojsonToArcGIS:E,arcgisToGeoJSON:D,boundsToExtent:O,extentToBounds:A,calcAttributionWidth:G,setEsriAttribution:Z,_setGeometry:V,_getAttributionData:q,_updateMapAttribution:$,_findIdAttributeFromFeature:z,_findIdAttributeFromResponse:B},J=f.Class.extend({options:{proxy:!1,useCors:a},generateSetter:function(e,t){return f.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,f.Util.setOptions(this,t.options)):(f.Util.setOptions(this,t),this.options.url=N(t.url)),this.params=f.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&f.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,r){e=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?C[t](e,i,n,r):C.get.JSONP(e,i,n,r)}});var K=J.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=(0,f.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(i,n){return this._cleanParams(),this.options.isModern||U(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),i.call(n,t,e&&F(e),e)},this)},count:function(i,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.count,e)},t)},ids:function(i,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.objectIds,e)},t)},bounds:function(i,n){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&A(e.extent)?i.call(n,t,A(e.extent),e):(t={message:"Invalid Bounds"},i.call(n,t,null,e))},n)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){t=(0,f.point)(t);return this.params.pixelSize=[t.x,t.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&y("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;t=V(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});var X=function(t){return new K(t)},Q=J.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&F(e),e)},n)}});var tt=function(t){return new Q(t)},et=J.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var it=et.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=O(t.getBounds()),t=t.getSize();return this.params.imageDisplay=[t.x,t.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=(0,f.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(r,o){return this.request(function(t,e){if(t)r.call(o,t,void 0,e);else{var i=F(e);e.results=e.results.reverse();for(var n=0;n<i.features.length;n++)i.features[n].layerId=e.results[n].layerId;r.call(o,void 0,i,e)}})},_setGeometryParams:function(t){t=V(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});var nt=function(t){return new it(t)},rt=et.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=(0,f.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(i,n){return this.request(function(t,e){i.call(n,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(r.pixel.properties.values=t.properties.Values),i&&i.features&&(r.catalogItems=F(i),n&&n.length===r.catalogItems.features.length))for(var o=n.length-1;0<=o;o--)r.catalogItems.features[o].properties.catalogItemVisibility=n[o];return r}});var ot=function(t){return new rt(t)},at=f.Evented.extend({options:{proxy:!1,useCors:a,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,f.Util.setOptions(this,t),this.options.url=N(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,r){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var o=this._createServiceCallback(t,e,i,n,r);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&f.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?C[t](a,i,o,r):C.get.JSONP(a,i,o,r)}this._requestQueue.push([t,e,i,n,r])},_createServiceCallback:function(i,n,r,o,a){return f.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([i,n,r,o,a]),this.fire("authenticationrequired",{authenticate:f.Util.bind(this.authenticate,this)},!0),t.authenticate=f.Util.bind(this.authenticate,this)),o.call(a,t,e),t?this.fire("requesterror",{url:this.options.url+n,params:r,message:t.message,code:t.code,method:i},!0):this.fire("requestsuccess",{url:this.options.url+n,params:r,response:e,method:i},!0),this.fire("requestend",{url:this.options.url+n,params:r,method:i},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var st=at.extend({identify:function(){return nt(this)},find:function(){return tt(this)},query:function(){return X(this)}});var lt=function(t){return new st(t)},ct=at.extend({query:function(){return X(this)},identify:function(){return ot(this)}});var ut=function(t){return new ct(t)},ht=at.extend({options:{idAttribute:"OBJECTID"},query:function(){return X(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,n,r){for(var e=t.features||[t],i=e.length-1;0<=i;i--)delete e[i].id;return t=E(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var i=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;n&&n.call(r,t||e.addResults[0].error,i)},r)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,r){var e=t.features||[t];return t=E(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var i=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;n&&n.call(r,t||e.updateResults[0].error,i)},r)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,n,r){return this.post("deleteFeatures",{objectIds:t},function(t,e){var i=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;n&&n.call(r,t||e.deleteResults[0].error,i)},r)}});var pt=function(t){return new ht(t)},dt="https:"!==window.location.protocol?"http:":"https:",ft=f.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:dt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:l?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:dt+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:dt+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:dt+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:dt+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!ft.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=ft.TILES[t]}e=f.Util.extend(i.options,e);f.Util.setOptions(this,e),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),f.TileLayer.prototype.initialize.call(this,i.urlTemplate,e)},onAdd:function(t){Z(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&q((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",$),f.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){W(t),t.off("moveend",$),f.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){var t;this._map.getPane(this.options.pane)||((t=this._map.createPane(this.options.pane)).style.pointerEvents="none",t.style.zIndex=500)},getAttribution:function(){var t;return t=this.options.attribution?'<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>":t}});function mt(t,e){return new ft(t,e)}var gt=f.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=j(t=f.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?f.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=lt(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),f.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return f.Util.template(this.tileUrl,f.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return f.DomEvent.on(i,"load",f.Util.bind(this._tileOnLoad,this,e,i)),f.DomEvent.on(i,"error",f.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",function(){i.src=this.getTileUrl(t)},this),i},onAdd:function(l){Z(l),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){t=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&l.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,l.attributionControl.addAttribution(this.getAttribution())),l.options.crs!==f.CRS.EPSG3857||102100!==t&&3857!==t)l.options.crs&&l.options.crs.code&&-1<l.options.crs.code.indexOf(t)||y("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var i=e.tileInfo.lods,n=gt.MercatorZoomLevels,r=0;r<i.length;r++){var o,a=i[r];for(o in n){var s=n[o];if(this._withinPercentage(a.resolution,s,this.options.zoomOffsetAllowance)){this._lodMap[o]=a.level;break}}}this.fire("lodmap")}}},this),f.TileLayer.prototype.onAdd.call(this,l)},onRemove:function(t){W(t),f.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var vt=f.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,f.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===f.CRS.EPSG3857?f.ImageOverlay.prototype._reset.call(this):f.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),_t=f.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:a,attribution:null,interactive:!1,alt:""},onAdd:function(i){Z(i),this.options.zIndex&&(this.options.position=null),this._update=f.Util.throttle(this._update,this.options.updateInterval,this),i.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?i.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){W(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,f.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,i,e){var n,r;this._map&&(t=e?"data:"+e+";base64,"+t:t)&&(n=new vt(t,i,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(t){var e;n.off("error",r,this),this._map&&(e=t.target,t=this._currentImage,e._bounds.equals(i)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),t&&this._map&&this._map.removeLayer(t),t&&t._map&&t._map.removeLayer(t)):this._map.removeLayer(e)),this.fire("load",{bounds:i})},n.once("error",function(){this._map.removeLayer(n),this.fire("error"),n.off("load",r,this)},this),n.once("load",r,this))},_update:function(){var t,e;this._map&&(e=this._map.getZoom(),t=this._map.getBounds(),this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(e>this.options.maxZoom||e<this.options.minZoom?this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null):(e=this._buildExportParams(),f.Util.extend(e,this.options.requestParams),e?(this._requestExport(e,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null))))},_renderPopup:function(t,e,i,n){t=(0,f.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)&&((n=this._popupFunction(e,i,n))&&this._popup.setLatLng(t).setContent(n).openOn(this._map))},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.options.crs.project(t),e=this._map.options.crs.project(e),e=(0,f.bounds)(t,e);return[e.getBottomLeft().x,e.getBottomLeft().y,e.getTopRight().x,e.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.latLngToLayerPoint(t).y,i=this._map.latLngToLayerPoint(i).y;return(0<t||i<e.y)&&(e.y=i-t),e.x+","+e.y}});_t.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=j(t),this.service=ut(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return f.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return f.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(n){var t=f.Util.bind(function(t,e,i){t||setTimeout(f.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=this.identify().at(n.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),0!==this.options.noData&&!this.options.noData||(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(t,i){"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,i))},this):(t.f="image",t=this.options.url+"exportImage"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,i))}});_t.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=j(t),this.service=lt(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(n){var t=f.Util.bind(function(t,e,i){t||setTimeout(f.Util.bind(function(){this._renderPopup(n.latlng,t,e,i)},this),300)},this),e=(this.options.popup||this.identify()).on(this._map).at(n.latlng);if(e.params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(t),this._shouldRenderPopup=!0,this._lastClick=n.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(t,i){"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,i):this._renderImage(e.imageData,i,e.contentType))},this):(t.f="image",t=this.options.url+"export"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,i))}});var yt=f.Layer.extend({options:{cellSize:512,updateWhenIdle:f.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){f.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof f.Point?t:new f.Point(t,t)},_pruneCells:function(){if(this._map){var t,e,i;for(t in this._cells)(i=this._cells[t]).retain=i.current;for(t in this._cells)(i=this._cells[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),t=Math.floor(e/2),e=i-1,i=new f.Point(+r,+t);i.z=+e;i=this._cellCoordsToKey(i),i=this._cells[i];return i&&i.active?i.retain=!0:(i&&i.loaded&&(i.retain=!0),n<e&&this._retainParent(r,t,e,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new f.Point(r,o);a.z=i+1;a=this._cellCoordsToKey(a),a=this._cells[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(t,e,i,n){e=Math.round(e);n||(this._cellZoom=e,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==e&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(i,this._cellZoom),t=e.project(t,this._cellZoom).floor(),i=e.getSize().divideBy(2*i);return new f.Bounds(t.subtract(i),t.add(i))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n,e=this._getCelldPixelBounds(t),r=this._pxBoundsToCellRange(e),o=r.getCenter(),a=[],e=this.options.keepBuffer,s=new f.Bounds(r.getBottomLeft().subtract([e,-e]),r.getTopRight().add([e,-e]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(n in this._cells){var l=this._cells[n].coords;l.z===this._cellZoom&&s.contains(new f.Point(l.x,l.y))||(this._cells[n].current=!1)}if(1<Math.abs(i-this._cellZoom))this._setView(t,i);else{for(var c=r.min.y;c<=r.max.y;c++)for(var u=r.min.x;u<=r.max.x;u++){var h,p=new f.Point(u,c);p.z=this._cellZoom,this._isValidCell(p)&&((h=this._cells[this._cellCoordsToKey(p)])?h.current=!0:a.push(p))}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length)for(this._loading||(this._loading=!0),u=0;u<a.length;u++){var d=this._cellCoordsToKey(a[u]),d=this._keyToCellCoords(d);this._activeCells[d]?this._reuseCell(a[u]):this._createCell(a[u])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;t=this._cellCoordsToBounds(t);return(0,f.toLatLngBounds)(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),i=n.add(i);return[e.unproject(n,t.z),e.unproject(i,t.z)]},_cellCoordsToBounds:function(t){t=this._cellCoordsToNwSe(t),t=new f.LatLngBounds(t[0],t[1]);return t=!this.options.noWrap?this._map.wrapLatLngBounds(t):t},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),t=new f.Point(+e[0],+e[1]);return t.z=+e[2],t},_removeCell:function(t){var e,i,n=this._cells[t];n&&(i=this._keyToCellCoords(t),e=this._wrapCoords(i),i=this._cellCoordsToBounds(this._wrapCoords(i)),n.current=!1,delete this._cells[t],this._activeCells[t]=n,this.cellLeave(i,e,t),this.fire("cellleave",{key:t,coords:e,bounds:i}))},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),t=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(t,i,e),this.fire("cellenter",{key:e,coords:i,bounds:t})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},f.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){t=this._cellCoordsToKey(t);(i=this._cells[t])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new f.Point(this._wrapX?f.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?f.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new f.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function bt(t){this.values=[].concat(t||[])}bt.prototype.query=function(t){t=this.getIndex(t);return this.values[t]},bt.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,r=this.values.length-1;n<=r;)if(e=(n+r)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=1+e;else{if(!(+i.value>+t))return e;r=e-1}return Math.abs(~r)},bt.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},bt.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},bt.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},bt.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var xt=bt,kt=yt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(yt.prototype.initialize.call(this,t),t=j(t),t=f.Util.setOptions(this,t),this.service=pt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&y("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new xt,this._endTimeIndex=new xt):this.options.timeField&&(this._timeIndex=new xt),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(n){return Z(n),this.service.metadata(function(t,e){var i;t||(i=e.supportedQueryFormats,!(t=(t=!1)===this.service.options.isModern||this.options.fetchAllFeatures?!0:t)&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&n.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,n.attributionControl.addAttribution(this.getAttribution())))},this),n.on("zoomend",this._handleZoomChange,this),yt.prototype.onAdd.call(this,n)},onRemove:function(t){return W(t),t.off("zoomend",this._handleZoomChange,this),yt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(n,r,o,a){this._activeRequests++,a=a||0;var s=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:n},!0),this._buildQuery(n,a).run(function(t,e,i){i&&i.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===s&&(!t&&e&&e.features.length&&f.Util.requestAnimFrame(f.Util.bind(function(){this._addFeatures(e.features,r),this._postProcessFeatures(n)},this)),t||!e||e.features.length||this._postProcessFeatures(n),t&&this._postProcessFeatures(n),o&&o.call(this,t,e),i&&(i.exceededTransferLimit||i.properties&&i.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(n,r,o,a+e.features.length))},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var i;e&&(i=this._cacheKey(e),this._cache[i]=this._cache[i]||[]);for(var n=t.length-1;0<=n;n--){var r=t[n].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),void 0!==i&&-1===this._cache[i].indexOf(r)&&this._cache[i].push(r)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){t=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return(t=this.options.fetchAllFeatures&&!isNaN(parseInt(e))?t.offset(e):t).params.resultType="tile",this.options.requestParams&&f.Util.extend(t.params,this.options.requestParams),this.options.simplifyFactor&&t.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&t.between(this.options.from,this.options.to),t},setWhere:function(n,r,o){this.options.where=n&&n.length?n:"1=1";for(var t,a=[],s=[],l=0,c=null,e=f.Util.bind(function(t,e){if(t&&(c=t),e)for(var i=e.features.length-1;0<=i;i--)s.push(e.features[i].id);--l<=0&&this._visibleZoom()&&n===this.options.where&&(this._currentSnapshot=s,f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(a),this.addLayers(s),r&&r.call(o,c)},this)))},this),i=this._currentSnapshot.length-1;0<=i;i--)a.push(this._currentSnapshot[i]);for(t in this._cache={},this._cells){l++;var u=this._keyToCellCoords(t),h=this._cellCoordsToBounds(u);this._requestFeatures(h,u,e)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,i,n,r){var o=this.options.from,a=this.options.to,s=0,l=null,t=f.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(o,a,e,i),s--,n&&s<=0&&n.call(r,l)},this);if(this.options.from=e,this.options.to=i,this._filterExistingFeatures(o,a,e,i),"server"===this.options.timeFilterMode)for(var c in this._cells){s++;var u=this._keyToCellCoords(c),h=this._cellCoordsToBounds(u);this._requestFeatures(h,u,t)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var r=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,o=this._getFeaturesInTimeRange(i,n);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);0<=s&&r.splice(s,1)}f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(t,e){var i=[];if(this.options.timeField.start&&this.options.timeField.end)var n=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e),o=n.concat(r);else{if(!this._timeIndex)return y("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];o=this._timeIndex.between(t,e)}for(var a=o.length-1;0<=a;a--)i.push(o[a].id);return i},_buildTimeIndexes:function(t){var e;if(this.options.timeField.start&&this.options.timeField.end){for(var i=[],n=[],r=t.length-1;0<=r;r--)e=t[r],i.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),n.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(n)}else{var o=[];for(r=t.length-1;0<=r;r--)e=t[r],o.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return e<=n&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){n=+t.properties[this.options.timeField.start],t=+t.properties[this.options.timeField.end];return e<=n&&n<=i||e<=t&&t<=i||n<=e&&i<=t}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,e=this._cacheKey(e);this._cache[e]&&this.addLayers(this._cache[e])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(i){this._metadata?i(void 0,this._metadata):this.metadata(f.Util.bind(function(t,e){this._metadata=e,i(t,this._metadata)},this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(e,o,a){this._getMetadata(f.Util.bind(function(t,n){var r;t?o&&o.call(this,t,null):(r=e.features||[e],this.service.addFeatures(e,f.Util.bind(function(t,e){if(!t){for(var i=r.length-1;0<=i;i--)r[i].properties[n.objectIdField]=(1<r.length?e[i]:e).objectId,r[i].id=(1<r.length?e[i]:e).objectId;this._addFeatures(r)}o&&o.call(a,t,e)},this)))},this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,n,r){var o=t.features||[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var i=o.length-1;0<=i;i--)this.removeLayers([o[i].id],!0);this._addFeatures(o)}n&&n.call(r,t,e)},this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,r,o){return this.service.deleteFeatures(t,function(t,e){var i=e.length?e:[e];if(!t&&0<i.length)for(var n=i.length-1;0<=n;n--)this.removeLayers([i[n].objectId],!0);r&&r.call(o,t,e)},this)}});kt.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),kt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return kt.prototype.onRemove.call(this,t)},createNewLayer:function(t){t=f.GeoJSON.geometryToLayer(t,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||f.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=f.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=t[e],n=this._layers[i.id];!this._visibleZoom()||!n||this._map.hasLayer(n)||this.options.timeField&&!this._featureWithinTimeRange(i)||(this._map.addLayer(n),this.fire("addfeature",{feature:n.feature},!0)),n&&0<this.options.simplifyFactor&&(n.setLatLngs||n.setLatLng)&&this._updateLayer(n,i),n||((n=this.createNewLayer(i))?(n.feature=i,n.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(n.feature,n),this._layers[n.feature.id]=n,this.setFeatureStyle(n.feature.id,this.options.style),this.fire("createfeature",{feature:n.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&this._map.addLayer(n)):y("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i],r=this._layers[n];r&&(this.fire("removefeature",{feature:r.feature,permanent:e},!0),this._map.removeLayer(r)),r&&e&&delete this._layers[n]}},cellEnter:function(t,i){this._visibleZoom()&&!this._zooming&&this._map&&f.Util.requestAnimFrame(f.Util.bind(function(){var t=this._cacheKey(i),e=this._cellCoordsToKey(i),t=this._cache[t];this._activeCells[e]&&t&&this.addLayers(t)},this))},cellLeave:function(t,s){this._zooming||f.Util.requestAnimFrame(f.Util.bind(function(){if(this._map){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),i=this._cache[t],n=this._map.getBounds();if(!this._activeCells[e]&&i){for(var r=!0,o=0;o<i.length;o++){var a=this._layers[i[o]];a&&a.getBounds&&n.intersects(a.getBounds())&&(r=!1)}r&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||f.Path.prototype.options;return e&&(f.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){t=this._layers[t];return"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i,n=this._map.getBounds();for(i in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[i].feature.id)&&("function"==typeof this._layers[i].getLatLng&&n.contains(this._layers[i].getLatLng())||"function"==typeof this._layers[i].getBounds&&n.intersects(this._layers[i].getBounds()))&&t.call(e,this._layers[i])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e,i=this._layers[t],t=i.feature;i&&i.setIcon&&this.options.pointToLayer&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,(0,f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options.icon,i.setIcon(e)),i&&i.setStyle&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,(0,f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options,this.setFeatureStyle(t.id,e)),i&&i.setStyle&&this.options.style&&this.resetStyle(t.id)}});i(5732),i(9627),i(7977);R().TileLayer.HERE=R().TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e,i,n=(t=R().setOptions(this,t)).scheme.split(".")[0];t.tileResolution=256,R().Browser.retina&&(t.tileResolution=512),i=t.apiKey?(e=".maps.ls.hereapi.com",r="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}","/maptile/2.1/copyright/{mapId}?apiKey={apiKey}"):(e=".maps.api.here.com",r="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}","/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}");var n="satellite"!=n&&"terrain"!=n&&"hybrid"!=n?"base":"aerial",r="https://{s}."+(n=-1!==t.scheme.indexOf(".traffic.")?"traffic":n)+e+r;this._attributionUrl=R().Util.template("https://1."+n+e+i,this.options),R().TileLayer.prototype.initialize.call(this,r,t),this._attributionText=""},onAdd:function(t){R().TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){R().TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=R().bind(function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))},this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var r=e[i].boxes[n];e[i].boxes[n]=R().latLngBounds([[r[0],r[1]],[r[2],r[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),r=0;r<t.length;r++){if(t[r].minLevel<i&&t[r].maxLevel>i&&!t[r].boxes){e.push(t[r]);break}for(var o=0;o<t[r].boxes.length;o++){var a=t[r].boxes[o];if(n.overlaps(a)){e.push(t[r]);break}}}for(var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'],r=0;r<e.length;r++){var l=e[r];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var c="© "+s.join(", ")+". ";c!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=c))}}}),R().tileLayer.here=function(t){return new(R().TileLayer.HERE)(t)},R().TileLayer.TomTom=R().TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=R().setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;R().TileLayer.prototype.initialize.call(this,e,t),this._copyright=R().DomUtil.create("div","tomtom-copyright"),this._copyrightClose=R().DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=R().DomUtil.create("div","tomtom-copyright-content",this._copyright),R().DomEvent.on(this._copyrightClose,"click",function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()},this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){R().TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){R().TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){var t;void 0!==this._map.attributionControl&&(this._map.attributionControl.addAttribution(this._attributionText),null!==(t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution"))&&R().DomEvent.on(t,"click",function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()},this))},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n=this._map.getBounds(),r=n.getNorthEast().wrap(),t=n.getSouthWest().wrap(),n=t.lng<r.lng?(e=t.lng,r.lng):(e=r.lng,t.lng),t=t.lat<r.lat?(i=t.lat,r.lat):(i=r.lat,t.lat),t="https://api.tomtom.com/map/1/copyrights/"+e+"/"+i+"/"+n+"/"+t+".json?key="+this.options.apiKey,o=new XMLHttpRequest;o.onreadystatechange=R().bind(function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){for(var t=JSON.parse(o.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var r=0;r<n.copyrights.length;r++)e+="<p>"+n.copyrights[r]+"</p>"}this._copyrightContent.innerHTML=e}},this),o.open("GET",t,!0),o.send()},_hideCopyright:function(){this._copyright.remove()}}),R().tileLayer.tomTom=function(t,e){return new(R().TileLayer.TomTom)(t,e)};i(810),i(5830),i(8292),i(7244),i(687);function wt(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function Lt(t,n,r,o){return t.sort(function(t,e){var i,e="desc"===r?(i=e[n],t[n]):(i=t[n],e[n]);return o?i-e:i.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})}),t}function Mt(t,e){var i=Math.floor(t),n=i%1e3,r=(i=Math.floor(i/1e3))%60,o=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,i=i=Math.floor(i/24);return e?(n="",r+='"'):(n+='"',r+="."),6e4<t?o+="'":o="",36e5<t?a+=":":a="",864e5<t?i+=".":i="",i+a+o+r+n}function Ct(t,e){e=Math.pow(10,e);return Math.round(t*e)/e}R().Control.ResetView=R().Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=R().DomUtil.create("div","leaflet-control-reset-view leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",function(){e.style.display="block"})),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"leaflet-control-reset-view-button leaflet-bar-part",e,this._resetView),e},_createButton:function(t,e,i,n,r){n=R().DomUtil.create("a",i,n);n.innerHTML=t,n.href="#",n.title=e,R().DomEvent.disableClickPropagation(n),R().DomEvent.on(n,"click",R().DomEvent.stop),R().DomEvent.on(n,"click",r,this),R().DomEvent.on(n,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",function(){this._container.style.display="none"},this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),R().control.resetView=function(t){return new(R().Control.ResetView)(t)},R().Control.Filters=R().Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){R().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",r=this._container=R().DomUtil.create("div",n);r.setAttribute("aria-haspopup",!0),R().DomEvent.disableClickPropagation(r),R().DomEvent.disableScrollPropagation(r),i&&(this._map.on("click",this.collapse,this),R().Browser.android||R().DomEvent.on(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=R().DomUtil.create("a",n+"-toggle",r);o.href="#",o.title="Filters",R().Browser.touch?(R().DomEvent.on(o,"click",R().DomEvent.stop),R().DomEvent.on(o,"click",this.expand,this)):R().DomEvent.on(o,"focus",this.expand,this);var a,s=this._form=R().DomUtil.create("form",n+"-list",r);this.options.buttons&&(a=R().DomUtil.create("div","mmp-control-filters-buttons",s),(o=R().DomUtil.create("a",null,a)).innerHTML=this.options.allText,o.href="#",o.title=this.options.allText,R().DomEvent.disableClickPropagation(o),R().DomEvent.on(o,"click",R().DomEvent.stop),R().DomEvent.on(o,"click",function(){this._batchSelect(!0)},this),(a=R().DomUtil.create("a",null,a)).innerHTML=this.options.noneText,a.href="#",a.title=this.options.noneText,R().DomEvent.disableClickPropagation(a),R().DomEvent.on(a,"click",R().DomEvent.stop),R().DomEvent.on(a,"click",function(){this._batchSelect(!1)},this));var l=[];Object.keys(e.settings.filtersDetails).forEach(function(t){void 0!==e.groups[t]&&l.push({index:e.settings.filtersDetails[t].index,id:t,icon:e.settings.filtersDetails[t].icon,name:e.settings.filtersDetails[t].name,count:Object.keys(e.groups[t].markers).length})}),l="id"==e.settings.filtersOrderBy?Lt(l,"id",e.settings.filtersSortOrder,!0):"name"==e.settings.filtersOrderBy?Lt(l,"name",e.settings.filtersSortOrder,!1):"count"==e.settings.filtersOrderBy?Lt(l,"count",e.settings.filtersSortOrder,!0):Lt(l,"index",e.settings.filtersSortOrder,!0);for(var c=0;c<l.length;c++){var u=R().DomUtil.create("label",null,s),h=R().DomUtil.create("input",n+"-selector",u);h.type="checkbox",h.value=l[c].id,void 0!==e.groups[l[c].id]&&e.groups[l[c].id].active&&(h.checked=!0);var p=R().DomUtil.create("span",null,u),u="";e.settings.filtersIcon&&(u+='<img class="mmp-filter-icon" src="'+(l[c].icon?mmpVars.iconsUrl+l[c].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />'),e.settings.filtersName&&(u+=l[c].name),e.settings.filtersCount&&(u+=" ["+l[c].count+"]"),p.innerHTML=u;var d=this;R().DomEvent.on(h,"click",function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),d._update(),t.fire("filterclick")},h)}return i||this.expand(),r},expand:function(){R().DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(R().DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):R().DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return R().DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;0<=n;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);this._update(),this._map.fire("filterclick")},_update:function(){var t,e=this.options.mmp;"map"===e.type&&e.settings.list?e.getList():(t=e.getActiveMarkers(),e.drawMarkers(t)),e.drawGeoJson()}}),R().control.filters=function(t){return new(R().Control.Filters)(t)},R().Control.Gpx=R().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){R().Util.setOptions(this,t)},onAdd:function(e){this._map=e;var i=this.options.mmp,t=this.options.collapsed,n="mmp-control-tracks",r=this._container=R().DomUtil.create("div",n);r.setAttribute("aria-haspopup",!0),R().DomEvent.disableClickPropagation(r),R().DomEvent.disableScrollPropagation(r),t&&(this._map.on("click",this.collapse,this),R().Browser.android||R().DomEvent.on(r,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=R().DomUtil.create("a",n+"-toggle",r);o.href="#",o.title="Tracks",R().Browser.touch?(R().DomEvent.on(o,"click",R().DomEvent.stop),R().DomEvent.on(o,"click",this.expand,this)):R().DomEvent.on(o,"focus",this.expand,this);for(var a=this._form=R().DomUtil.create("form",n+"-list",r),s=0;s<i.gpx.tracks.length;s++){var l=R().DomUtil.create("label",null,a),c=R().DomUtil.create("input",n+"-selector",l);c.type="radio",c.name="mmp-gpx-tracks",0==(c.value=s)&&(c.checked=!0),R().DomUtil.create("span",null,l).innerHTML=i.gpx.tracks[s].name||"Unnamed Track",R().DomEvent.on(c,"click",function(){var t=parseInt(this.value);e._activeTrack=t,e.fitBounds(i.gpxTracks[t].getBounds(),{padding:[10,10]}),i.updateElevationChart(!0)},c)}return t||this.expand(),r},expand:function(){R().DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(R().DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):R().DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return R().DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),R().control.gpx=function(t){return new(R().Control.Gpx)(t)};i(5356);var St=i(1639),Pt=i.n(St);var Tt=function(t,e,i,n,r,o,a){var h=this;this.querySelector=t,this.error=e,this.selected=i,this.provider=n,this.options=r,this.typinginterval=o,this.minChars=a,this.input,this.providers={algolia:{getUrl:function(t){var e=h.options.algolia,t="https://places-dsn.algolia.net/1/places/query?query="+t+"&hitsPerPage=10";return e.appId&&(t+="&x-algolia-application-id="+e.appId),e.apiKey&&(t+="&x-algolia-api-key="+e.apiKey),t+="&language="+e.language,e.countries&&(t+="&countries="+e.countries),t+="&aroundLatLngViaIP="+(e.aroundLatLngViaIP?"true":"false"),e.aroundLatLng&&(t+="&aroundLatLng="+e.aroundLatLng),t},beforeSend:function(t){var e=h.options.algolia;e.appId&&e.apiKey&&(t.setRequestHeader("X-Algolia-Application-Id",e.appId),t.setRequestHeader("X-Algolia-API-Key",e.apiKey))},formatResults:function(t,e){var l=[];return t.hits.length&&jQuery.each(t.hits,function(t,e){var i=h.options.algolia.language,n=e.administrative,r=e.city,o=e.country,a="";void 0!==e._highlightResult.locale_names[i]&&e._highlightResult.locale_names[i].length?a=e._highlightResult.locale_names[i][0].value:void 0!==e._highlightResult.locale_names&&e._highlightResult.locale_names.length&&(a=e._highlightResult.locale_names[0].value),r=r?e._highlightResult.city[0].value:null,n=n&&void 0!==e._highlightResult.administrative?e._highlightResult.administrative[0].value:null,o=o?e._highlightResult.country.value:null;var s=e._tags,i=h.getUnifiedType(["country","city","address"],s),s=i.charAt(0).toUpperCase()+i.slice(1),o='<span class="ap-suggestion-icon ap-'+i+'" title="'+s+'"></span><span class="ap-name">'+a+'</span><span class="ap-address">'+((n?", "+n:"")+(r?", "+r:"")+(o?", "+o:""))+"</span>";l.push({value:jQuery(o).text().trim(),formatted:o,lat:e._geoloc.lat,lng:e._geoloc.lng})}),l},footer:h.options.algolia.footer},locationiq:{getUrl:function(t){var e=h.options.locationiq,t="https://api.locationiq.com/v1/autocomplete.php?q="+t+"&normalizecity=1&limit=10";return e.apiKey&&(t+="&key="+e.apiKey),e.bounds&&(t+="&viewbox="+[e.lon1,e.lat1,e.lon2,e.lat2].join(",")),t+="&accept-language="+e.language},formatResults:function(t,c){var u=[];return t.length&&jQuery.each(t,function(t,e){var i=e.address.country,n=e.address.city,r=e.address.housenumber,o=e.address.road,a=e.address.postcode,s=e.address.state,l=void 0!==e.address.name?e.address.name.replace(c,"<em>"+c+"</em>"):"",n=(n=(o?", "+o+(r?" "+r:""):"")+(a?" "+a:"")+(n?", "+n:"")+(s?", "+s:"")+(i?", "+i:"")).replace(c,"<em>"+c+"</em>"),s=e.type.toLowerCase(),i=h.getUnifiedType(["country","state","city","address"],s),s=i.charAt(0).toUpperCase()+i.slice(1),n='<span class="ap-suggestion-icon ap-'+i+'" title="'+s+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+n+"</span>";u.push({value:jQuery(n).text().trim(),formatted:n,lat:parseFloat(e.lat),lng:parseFloat(e.lon)})}),u},footer:h.options.locationiq.footer},mapquest:{getUrl:function(t){var e=h.options.mapquest,t="https://www.mapquestapi.com/geocoding/v1/address?location="+t+"&maxResults=10";return e.api_key&&(t+="&key="+e.api_key),e.boundingBox&&(t+="&boundingBox="+[e.lat1,e.lon1,e.lat2,e.lon2].join(",")),t},formatResults:function(t,o){var a=[];return t.results[0].locations.length&&jQuery.each(t.results[0].locations,function(t,e){var i="";i+=void 0!==e.street&&e.street?e.street+", ":"",i+=void 0!==e.adminArea5&&e.adminArea5?e.adminArea5+", ":"",i+=void 0!==e.adminArea4&&e.adminArea4?e.adminArea4+", ":"",i+=void 0!==e.adminArea3&&e.adminArea3?e.adminArea3+", ":"",i+=void 0!==e.adminArea2&&e.adminArea2?e.adminArea2+", ":"",i+=void 0!==e.adminArea1&&e.adminArea1?e.adminArea1:"";var n=e.geocodeQuality.toLowerCase(),r=h.getUnifiedType(["country","city","address"],n),n=r.charAt(0).toUpperCase()+r.slice(1),i='<span class="ap-suggestion-icon ap-'+r+'" title="'+n+'"></span><span class="ap-name">'+i.replace(o,"<em>"+o+"</em>")+"</span>";a.push({value:jQuery(i).text().trim(),formatted:i,lat:e.latLng.lat,lng:e.latLng.lng})}),a},footer:h.options.mapquest.footer},google:{getUrl:function(t){var e=h.options.google,t=mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&address="+t;return e.nonce&&(t+="&nonce="+e.nonce),t},formatResults:function(t,r){var o=[];return t.results.length&&jQuery.each(t.results,function(t,e){var i=e.types,n=h.getUnifiedType(["country","locality","street_address"],i),i=n.charAt(0).toUpperCase()+n.slice(1),i='<span class="ap-suggestion-icon ap-'+n+'" title="'+i+'"></span><span class="ap-name">'+e.address.replace(r,"<em>"+r+"</em>")+"</span>";o.push({value:jQuery(i).text().trim(),formatted:i,placeId:e.place_id})}),o},footer:h.options.google.footer},tomtom:{getUrl:function(t){var e=h.options.tomtom,t="https://api.tomtom.com/search/2/geocode/"+t+".JSON?limit=10";return e.apiKey&&(t+="&key="+e.apiKey),e.language&&(t+="&language="+e.language),e.countrySet&&(t+="&countrySet="+e.countrySet),e.lat&&(t+="&lat="+e.lat),e.lon&&(t+="&lon="+e.lon),e.radius&&(t+="&radius="+e.radius),t},formatResults:function(t,o){var a=[];return t.results.length&&jQuery.each(t.results,function(t,e){var i=e.address.freeformAddress;i+=i!==e.address.country?", "+e.address.country:"";var n=e.type,r=(n="Geography"===n?"Municipality"===e.entityType?"city":"Country"===e.entityType?"country":"address":"address").charAt(0).toUpperCase()+n.slice(1),i='<span class="ap-suggestion-icon ap-'+n+'" title="'+r+'"></span><span class="ap-name">'+i.replace(o,"<em>"+o+"</em>")+"</span>";a.push({value:jQuery(i).text().trim(),formatted:i,lat:e.position.lat,lng:e.position.lon})}),a},footer:h.options.tomtom.footer}},this.init=function(){h.input=Pt()(h.querySelector,{minLength:h.minChars,hint:!1,autoselect:!0,openOnFocus:!1,debug:!1},[{source:function(e,i){var n=h.providers[h.provider];jQuery.ajax({url:n.getUrl(e),type:"GET",beforeSend:function(t){jQuery(h.querySelector).removeClass("results-error"),jQuery(h.querySelector).addClass("results-loading"),"function"==typeof n.beforeSend&&n.beforeSend(t)}}).done(function(t){t=n.formatResults(t,e);i(t)}).fail(function(t){var e="Geocoding error";t.status&&t.statusText&&(e+=" "+t.status+" ("+t.statusText+")"),jQuery(h.querySelector).addClass("results-error"),h.error(e)}).always(function(){jQuery(h.querySelector).removeClass("results-loading")})},templates:{suggestion:function(t){return t.formatted},footer:h.providers[h.provider].footer,header:'<div id="geocoding-results-header-div">'+h.options.header+'</div><div id="geocoding-results-header-image-div"><img src="'+mmpVars.pluginUrl+'images/geocoding/icon-key-enter.png" /></div><div style="clear:both; border-bottom:1px solid #ccc;"></div>'},debounce:h.typinginterval}]).on("autocomplete:selected",function(t,e){e.placeId?jQuery.ajax({url:mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&place_id="+e.placeId+"&nonce="+h.options.google.nonce,type:"GET"}).done(function(t){"OK"===t.status&&h.selected(t.results.geometry.location.lat,t.results.geometry.location.lng)}):h.selected(e.lat,e.lng)})},this.reload=function(){h.input.autocomplete.destroy(),h.init()},this.getUnifiedType=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(-1!==e.indexOf(n))break}switch(n){case"address":case"street_address":return"address";case"city":case"locality":case"venue":return"city";case"state":case"country":return"country";default:return"address"}}};function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(t){var f=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.markers,this.settings=t.overrides||{},this.language=t.language||null,this.highlight=t.highlight||null,this.fullscreen=t.fullscreen||!1,this.page=t.page||null,this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.listeners={},this.list={page:1,term:null,sort:null,order:null,lat:null,lng:null,radius:0,located:!1,geocoding:{},circle:{}},this.on=function(t,e){f.listeners[t]instanceof Array||(f.listeners[t]=[]),-1===f.listeners[t].indexOf(e)&&f.listeners[t].push(e)},this.off=function(t,e){f.listeners[t]instanceof Array&&(-1!==(e=f.listeners[t].indexOf(e))&&f.listeners[t].splice(e,1))},this.fire=function(t,e){if(f.listeners[t]instanceof Array)for(var i=0;i<f.listeners[t].length;i++)f.listeners[t][i].call(f,e)},this.checkInvalidateSize=function(){var t=wt(f.containers.main);!f.mapVisible&&t&&(f.map.invalidateSize(),void 0!==f.controls.minimap&&f.controls.minimap._miniMap.invalidateSize()),f.mapVisible=t},this.strToBounds=function(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])},this.boundsToStr=function(t){return[t.getSouth(),t.getWest(),t.getNorth(),t.getEast()].join(",")},this.checkJson=function(t){try{var e=JSON.parse(t);if(e&&"object"===Et(e))return e}catch(t){}return!1},this.formatGpxValue=function(t,e,i){if(isNaN(t))return"N/A";var n,r,e="dist"===e?(n=1.609344,r=" km"," mi"):(n=.3048,r=" m"," ft"),o="imperial"===i||"imperial-metric"===i?(a=t*n,t):(a=t)/n,a=Ct(a,2)+r;switch(o=Ct(o,2)+e,i){case"imperial":return o;case"metric-imperial":return a+" ("+o+")";case"imperial-metric":return o+" ("+a+")";default:return a}},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=document.createElement("div");e.className="mmp-loading-spinner";var i=document.createElement("div");i.className="rect-wrap",e.appendChild(i);for(var n=1;n<=5;n++){var r=document.createElement("div");r.className="rect"+n,i.appendChild(r)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,e){void 0!==f.containers.mapModal&&f.containers.mapModal.remove(),f.containers.mapModal=R().DomUtil.create("div","mmp-map-modal"),f.containers.mapModal.addEventListener("click",function(t){t.target===this&&this.remove()});var i=R().DomUtil.create("div","mmp-map-modal-content",f.containers.mapModal),n=R().DomUtil.create("span","mmp-map-modal-close",i);n.innerHTML="&times;",n.addEventListener("click",function(t){t.target===this&&f.containers.mapModal.remove()});n=R().DomUtil.create("div","mmp-map-modal-header",i);R().DomUtil.create("p","mmp-map-modal-title",n).innerHTML=t;i=R().DomUtil.create("div","mmp-map-modal-body",i);"string"==typeof e?R().DomUtil.create("p","mmp-map-modal-message",i).innerHTML=e:i.appendChild(e),f.containers.map.appendChild(f.containers.mapModal)},this.getDirectionsLink=function(t,e,i,n){var r=f.settings,o="";switch(t){case"googlemaps":o="https://www.google.com/maps?daddr="+(n||e+","+i),o+="&t="+r.directionsGoogleType,o+="&layer="+(r.directionsGoogleTraffic?"1":"0"),o+="&doflg="+r.directionsGoogleUnits,r.directionsGoogleAvoidHighways&&(o+="&dirflg=h"),r.directionsGoogleAvoidTolls&&(o+="&dirflg=t"),r.directionsGooglePublicTransport&&(o+="&dirflg=r"),r.directionsGoogleWalking&&(o+="&dirflg=w"),r.directionsGoogleLanguage&&(o+="&hl="+r.directionsGoogleLanguage),o+="&om="+(r.directionsGoogleOverview?"1":"0");break;case"ors":o="https://classic-maps.openrouteservice.org/directions?a=null,null,"+e+","+i,o+="&b="+("Bicycle"===r.directionsOrsType?"1a":"Pedestrian"===r.directionsOrsType?"2":"HeavyVehicle"===r.directionsOrsType?"4a":"0"),o+="&c="+("Shortest"===r.directionsOrsRoute?"1":"0");break;case"bingmaps":o="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+e+"_"+i+(n?"_"+n:"")}return o},this.getApiLink=function(t,e,i){i=i||{};var n=f.settings,r=mmpVars.apiUrl;switch(!n.language||"geojson"!==t&&"kml"!==t&&"georss"!==t||(i.lang=n.language),t){case"editMap":r=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e;break;case"editMarker":r=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e;break;case"fs":r+="fullscreen/"+e+"/";break;case"gpx":r=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+n.gpxUrl;break;case"geojson":r+="export/geojson/"+e+"/";break;case"kml":r+="export/kml/"+e+"/";break;case"georss":r+="export/georss/"+e+"/"}return Object.keys(i).length&&(r+="?",Object.keys(i).forEach(function(t){r+=t+"="+i[t]+"&"}),r=r.slice(0,-1)),r},this.addApiLink=function(t,e,i,n){n=R().DomUtil.create("a","mmp-api-icon "+i,n);n.href=t,n.rel="nofollow",n.target="_blank",n.title=e},this.addShareLink=function(t,e){e=R().DomUtil.create("i","mmp-api-icon mmp-api-icon-share",e);e.title=mmpL10n.api.share,e.addEventListener("click",function(){f.containers.main.scrollIntoView(),f.openShareModal(t)})},this.openShareModal=function(t){var e=f.settings,i=e.apiFullscreen&&"fs"===e.shareUrl?f.getApiLink("fs",f.id,{marker:t}):f.page+"?markerid="+t,t=R().DomUtil.create("div",null);e.shareFacebook&&t.appendChild(f.getShareLink("facebook",i,e.shareText)),e.shareTwitter&&t.appendChild(f.getShareLink("twitter",i,e.shareText)),e.shareLinkedIn&&t.appendChild(f.getShareLink("linkedin",i,e.shareText)),e.shareWhatsApp&&t.appendChild(f.getShareLink("whatsapp",i,e.shareText)),e.shareEmail&&t.appendChild(f.getShareLink("email",i,e.shareText));e=R().DomUtil.create("div","mmp-share-modal-url",t),e=R().DomUtil.create("input",null,e);e.setAttribute("type","text"),e.setAttribute("value",i),e.addEventListener("click",function(){this.select()}),f.showMapModal(mmpL10n.api.share,t)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=R().DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var r=R().DomUtil.create("div","mmp-share-button",n),o=R().DomUtil.create("div","mmp-share-button-icon",r),a=R().SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),o.appendChild(a);var s=R().SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),R().DomUtil.addClass(r,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),R().DomUtil.addClass(r,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),R().DomUtil.addClass(r,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":R().Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),R().DomUtil.addClass(r,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),R().DomUtil.addClass(r,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.getActiveMarkers=function(){var i=[];return Object.keys(f.groups).forEach(function(e){f.groups[e].active&&Object.keys(f.groups[e].markers).forEach(function(t){-1===i.indexOf(f.groups[e].markers[t])&&i.push(f.groups[e].markers[t])})}),i},this.checkPopupSize=function(t){var e=f.settings;f.containers.map.offsetWidth<e.popupMaxWidth?(t.options.minWidth=f.containers.map.offsetWidth-50,t.options.maxWidth=f.containers.map.offsetWidth-50):(t.options.minWidth=e.popupMinWidth,t.options.maxWidth=e.popupMaxWidth),f.containers.map.offsetHeight<e.popupMaxHeight?t.options.maxHeight=f.containers.map.offsetHeight-50:t.options.maxHeight=e.popupMaxHeight,t.update()},this.loadPopup=function(o,a){return new Promise(function(e,t){var i,n,r=o.getPopup();void 0!==r?a||!r.getContent()?(i=R().DomUtil.create("div","mmp-popup"),R().DomUtil.create("img","mmp-popup-loading",i).src=mmpVars.pluginUrl+"images/paging-ajax-loader.gif",r.setContent(i),n="",new Promise(function(t,e){o instanceof R().Marker?o.popup?(n=f.getMarkerPopup(o),t()):f.getPopups(o.id).then(function(){n=f.getMarkerPopup(o),t()}).catch(function(){e()}):o instanceof R().Path?(n=f.getGeoJsonPopup(o),t()):e()}).then(function(){var t=n.getElementsByTagName("img"),t=Array.prototype.slice.call(t);Promise.all(t.map(f.imgLoaded)).then(function(){r.setContent(n),e(r)})}).catch(function(){t()})):e(r):t()})},this.getMarkerPopup=function(t){var e,i,n=f.settings,r=R().DomUtil.create("div","mmp-popup");return r.id="mmp-popup-"+t.id,n.popupMarkername&&t.name&&((e=R().DomUtil.create("div","mmp-popup-name",r)).innerHTML=t.name,e.style.borderBottom="1px solid #f0f0e7"),t.popup&&(R().DomUtil.create("div","mmp-popup-text",r).innerHTML=t.popup),(t.address&&n.popupAddress||n.popupCoordinates||n.popupDirections||n.popupShare)&&((i=R().DomUtil.create("div","mmp-popup-location",r)).style.borderTop="1px solid #f0f0e7",n.popupShare&&f.addShareLink(t.id,i),t.address&&n.popupAddress&&(R().DomUtil.create("span","mmp-popup-location-address",i).innerHTML+=t.address),n.popupCoordinates&&(e=R().DomUtil.create("span","mmp-popup-location-coordinates",i),t.address&&n.popupAddress?e.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":e.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng),n.popupDirections&&(i=R().DomUtil.create("span","mmp-popup-location-directions",i),(t.address&&n.popupAddress||n.popupCoordinates)&&(i.innerHTML+=" "),(i=R().DomUtil.create("a",null,i)).href=f.getDirectionsLink(n.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,t.address),i.target="_blank",i.title=mmpL10n.api.dir,i.innerHTML="("+mmpL10n.popup.directions+")")),r},this.getGeoJsonPopup=function(t){var e=f.settings,i=R().DomUtil.create("div","mmp-popup");return e.popupMarkername&&t.options.name&&((e=R().DomUtil.create("div","mmp-popup-name",i)).innerHTML=t.options.name,e.style.borderBottom="1px solid #f0f0e7"),t.options.popup&&(R().DomUtil.create("div","mmp-popup-text",i).innerHTML=t.options.popup),i},this.imgLoaded=function(e){return new Promise(function(t){e.addEventListener("load",t),e.addEventListener("error",t),e.loading&&"lazy"===e.loading&&(e.loading="eager")})},this.updatePopups=function(){var i=f.settings;Object.keys(f.markers).forEach(function(t){var e=f.markers[t],t=e.getPopup();void 0!==t&&(t.setContent(""),t.options.minWidth=i.popupMinWidth,t.options.maxWidth=i.popupMaxWidth,t.options.maxHeight=i.popupMaxHeight,t.isOpen()&&f.updatePopup(e))})},this.updatePopup=function(t,e){var i=f.settings,n=t.getPopup();!n&&t.popup?t.bindPopup("",f.popup):n&&!t.popup&&(t.closePopup(),t.unbindPopup()),f.loadPopup(t,e).then(function(t){f.checkPopupSize(t),i.popupCenterOnMap&&f.centerPopup(t)}).catch(function(){})},this.centerPopup=function(t){var e;t.isOpen()&&(e=t.getLatLng(),e=f.map.project(e),t=t._container.clientHeight,e.y-=t/2,e=f.map.unproject(e),f.map.panTo(e,{animate:!0}))},this.highlightMarker=function(t,e,i){var n;t.link?f.openLink(t.link,t.blank):(e&&f.containers.main.scrollIntoView(),n=function(t,e){e?t.isPopupOpen()?f.updatePopup(t):t.openPopup():(t=t.getLatLng(),f.map.setView(t))},f.settings.clustering?f.markerGroup.zoomToShowLayer(t,function(){n(t,i)}):n(t,i))},this.openLink=function(t,e){e="1"===e?"_blank":"_self";window.open(t,e)},this.editMarker=function(t){void 0!==t.relatedTarget.id&&(t=f.getApiLink("editMarker",t.relatedTarget.id),f.openLink(t,"1"))},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.xhr=function(r){return new Promise(function(t,e){var i,n=new XMLHttpRequest;n.open(r.type,r.url,!0),n.onload=function(){200===n.status?t(n.responseText):e(n.status+" "+n.statusText)},n.onerror=function(){e("AJAX request failed")},r.data?(i=new FormData,Object.keys(r.data).forEach(function(t){i.append(t,r.data[t])}),n.send(i)):n.send(null)})},this.main=function(){(mapsMarkerPro[f.uid]=f).containers.main=document.getElementById("maps-marker-pro-"+f.uid),f.containers.main?f.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(f.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(f.containers.main):f.lazyLoadHandlerFallback():f.load():"function"==typeof MutationObserver?new MutationObserver(f.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):f.logError("Unable to find map container")},this.load=function(){var t,e;f.addLoading(f.containers.main),"function"==typeof URL&&(e=new URL(window.location.href),t=parseInt(e.searchParams.get("marker")),isNaN(t)||(f.urlHighlight=t),e=parseInt(e.searchParams.get("markerid")),isNaN(e)||(f.urlHighlight=e));for(var i=document.getElementsByClassName("mmp-highlight"),n=0;n<i.length;n++){var r=i[n].dataset;r.uid&&r.uid!==f.uid||r.map&&r.map!==f.id||i[n].addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,i=e.marker||null,t=!e.scroll||"false"!==e.scroll,e=!e.open||"false"!==e.open;i&&void 0!==f.markers[i]&&f.highlightMarker(f.markers[i],t,e)})}for(n=0;n<mapsMarkerPro.callbacks.length;n++){var o=mapsMarkerPro.callbacks[n];"function"==typeof o&&o(f)}f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_settings",type:f.type,id:f.id,lang:f.language}}).then(function(t){if(!(t=JSON.parse(t)).success)return f.containers.main.innerHTML=t.response,void R().DomUtil.addClass(f.containers.main,"mmp-map-error");var e=t.response;Object.keys(f.settings).forEach(function(t){e[t]=f.settings[t]}),(f.settings=e).callback&&"function"==typeof window[e.callback]&&window[e.callback](f),f.fire("settingsloaded",f.settings),f.init()}).catch(function(t){f.containers.main.innerHTML="Error: the map with ID "+f.id+" could not be loaded. Please contact the site owner.",R().DomUtil.addClass(f.containers.main,"mmp-map-error"),f.logError("Error loading settings ("+t+")")})},this.init=function(){f.containers.mapWrap=document.getElementById("mmp-map-wrap-"+f.uid),f.containers.mapWrap||(f.containers.mapWrap=R().DomUtil.create("div","mmp-map-wrap",f.containers.main),f.containers.mapWrap.id="mmp-map-wrap-"+f.uid),f.loadPanel(),f.loadMap(),f.loadChart(),f.loadList(),f.setLayout(),window.addEventListener("resize",f.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(f.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(f.containers.main):f.visibilityDetectionHandlerFallback(),f.loadBasemaps(),f.loadOverlays(),f.loadResources().then(function(){f.removeLoading(f.containers.main),f.loadControls(),f.urlHighlight&&void 0!==f.markers[f.urlHighlight]?f.highlightMarker(f.markers[f.urlHighlight],!0,!0):f.highlight&&void 0!==f.markers[f.highlight]&&f.highlightMarker(f.markers[f.highlight],!1,!0)}).catch(function(t){f.logError("Error loading map ("+t+")")})},this.setLayout=function(){var t=f.settings;f.fullscreen?R().DomUtil.addClass(f.containers.main,"mmp-fullscreen"):R().DomUtil.removeClass(f.containers.main,"mmp-fullscreen"),f.containers.main.style.width=t.width+t.widthUnit,f.containers.map.style.height=t.height+t.heightUnit,t.responsive&&"px"===t.widthUnit&&("100%"!==f.containers.main.style.width&&f.containers.main.parentNode.offsetWidth<t.width?f.containers.main.style.width="100%":"100%"===f.containers.main.style.width&&f.containers.main.parentNode.offsetWidth>t.width&&(f.containers.main.style.width=t.width+"px")),void 0!==f.containers.list&&(0<t.list?1===t.list||-1===f.containers.main.style.width.indexOf("px")&&f.containers.main.offsetWidth<t.listWidth+t.listBreakpoint?(R().DomUtil.removeClass(f.containers.main,"mmp-list-right"),R().DomUtil.removeClass(f.containers.main,"mmp-list-left"),R().DomUtil.addClass(f.containers.main,"mmp-list-below")):(R().DomUtil.removeClass(f.containers.main,"mmp-list-below"),2===t.list?(R().DomUtil.removeClass(f.containers.main,"mmp-list-left"),R().DomUtil.addClass(f.containers.main,"mmp-list-right")):3===t.list&&(R().DomUtil.removeClass(f.containers.main,"mmp-list-right"),R().DomUtil.addClass(f.containers.main,"mmp-list-left"))):(R().DomUtil.removeClass(f.containers.main,"mmp-list-below"),R().DomUtil.removeClass(f.containers.main,"mmp-list-right"),R().DomUtil.removeClass(f.containers.main,"mmp-list-left"))),f.map.invalidateSize()},this.setLayoutThrottled=R().Util.throttle(f.setLayout,200,this),this.loadPanel=function(){var t,e,i=f.settings;f.containers.panel=document.getElementById("mmp-panel-"+f.uid),i.panel?((t=R().DomUtil.create("div","mmp-panel")).id="mmp-panel-"+f.uid,t.style.backgroundColor=i.panelColor,R().DomUtil.create("div","mmp-panel-text",t).innerHTML=i.name,e=R().DomUtil.create("div","mmp-panel-api",t),"map"===f.type&&(i.panelEdit&&f.addApiLink(f.getApiLink("editMap",f.id),mmpL10n.api.editMap,"mmp-api-icon-edit",e),i.apiFullscreen&&i.panelFs&&f.addApiLink(f.getApiLink("fs",f.id),mmpL10n.api.fs,"mmp-api-icon-fullscreen",e),i.panelGpx&&i.gpxUrl&&f.addApiLink(f.getApiLink("gpx",f.id),mmpL10n.gpx.metaDownload,"mmp-api-icon-gpx",e),i.apiExport&&i.panelGeoJson&&f.addApiLink(f.getApiLink("geojson",f.id),mmpL10n.api.geoJson,"mmp-api-icon-geojson",e),i.apiExport&&i.panelKml&&f.addApiLink(f.getApiLink("kml",f.id),mmpL10n.api.kml,"mmp-api-icon-kml",e),i.apiExport&&i.panelGeoRss&&f.addApiLink(f.getApiLink("georss",f.id),mmpL10n.api.geoRss,"mmp-api-icon-georss",e)),f.containers.panel?f.containers.panel.parentNode.replaceChild(t,f.containers.panel):f.containers.mapWrap.insertBefore(t,f.containers.map),f.containers.panel=t,f.fire("panelloaded",f.map)):f.containers.panel&&(f.containers.panel.remove(),f.containers.panel=null)},this.loadMap=function(){var t=f.settings;"function"==typeof f.map.remove&&f.map.remove(),f.map={};var e=R().DomUtil.create("div","mmp-map");e.id="mmp-map-"+f.uid,e.style.height=t.height+t.heightUnit,f.containers.map=document.getElementById("mmp-map-"+f.uid),f.containers.map?f.containers.map.parentNode.replaceChild(e,f.containers.map):f.containers.mapWrap.insertBefore(e,f.containers.chartWrap),f.containers.map=e,f.map=R().map(f.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:f.strToBounds(t.maxBounds),maxBoundsViscosity:1,gestureHandling:!f.fullscreen&&t.gestureHandling,dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose,contextmenu:!0}),f.map._activeTrack=0,f.fire("maploaded",f.map)},this.loadChart=function(){var t,e=f.settings;"function"==typeof f.gpxChart.destroy&&f.gpxChart.destroy(),f.gpxChart={},f.containers.chartWrap=document.getElementById("mmp-chart-wrap-"+f.uid),e.gpxUrl&&e.gpxChart?((t=R().DomUtil.create("div","mmp-gpx-chart-wrap")).id="mmp-chart-wrap-"+f.uid,t.style.height=e.gpxChartHeight+"px",t.style.position="relative",t.style.minWidth=0,(e=R().DomUtil.create("canvas","mmp-gpx-chart",t)).id="mmp-gpx-chart-"+f.uid,f.containers.chartWrap?f.containers.chartWrap.parentNode.replaceChild(t,f.containers.chartWrap):f.containers.mapWrap.appendChild(t),f.containers.chartWrap=t,f.containers.chart=e,f.fire("chartloaded",f.gpxChart)):f.containers.chartWrap&&(f.containers.chartWrap.remove(),f.containers.chartWrap=null,f.containers.chart=null)},this.loadList=function(){var t=f.settings;if(f.containers.list=document.getElementById("mmp-list-"+f.uid),"map"===f.type&&t.list){var e=R().DomUtil.create("div","mmp-list");if(e.id="mmp-list-"+f.uid,e.style.flexBasis=t.listWidth+"px",t.listSearch){var i=R().DomUtil.create("div","mmp-list-header",e),n=R().DomUtil.create("div","mmp-list-header-left",i),r=R().DomUtil.create("div","mmp-list-search-wrap",n),n=R().DomUtil.create("input","mmp-list-search",r);n.id="list-search-"+f.uid,n.type="text",n.placeholder=mmpL10n.list.search;var o=R().DomUtil.create("div","mmp-list-search-clear",r);o.style.display="none",o.addEventListener("click",function(t){var e=document.getElementById("list-search-"+f.uid);e&&(e.value=""),this.style.display="none",f.getList({page:1,term:null})});var r=R().DomUtil.create("div","mmp-list-header-right",i),a=R().DomUtil.create("select","mmp-list-sort",r),s=[];t.listOrderById&&s.push("id"),t.listOrderByName&&s.push("name"),t.listOrderByAddress&&s.push("address"),t.listOrderByDistance&&s.push("distance"),t.listOrderByIcon&&s.push("icon"),t.listOrderByCreated&&s.push("created"),t.listOrderByUpdated&&s.push("updated");for(var l=0;l<s.length;l++){var c=R().DomUtil.create("option",null,a);c.value=s[l],s[l]===t.listOrderBy&&(c.defaultSelected=!0),c.innerHTML=mmpL10n.list[s[l]]}n.addEventListener("keyup",function(t){this.value?o.style.display="inline-block":o.style.display="none",13===t.which&&f.getList({page:1,term:this.value})}),a.addEventListener("change",function(){f.getList({page:1,sort:this.value})}),f.list.sort=t.listOrderBy,R().DomUtil.create("i","mmp-list-order mmp-"+t.listSortOrder,r).addEventListener("click",function(t){var e=R().DomUtil.hasClass(this,"mmp-desc")?"asc":"desc";R().DomUtil.removeClass(this,"mmp-asc"),R().DomUtil.removeClass(this,"mmp-desc"),R().DomUtil.addClass(this,"mmp-"+e),f.getList({page:1,order:e})}),f.list.order=t.listSortOrder}if(t.listLocation){i=R().DomUtil.create("div","mmp-list-header",e),n=R().DomUtil.create("div","mmp-list-header-left",i),r=R().DomUtil.create("div","mmp-list-search-wrap",n),n=R().DomUtil.create("input","mmp-list-location",r);n.id="list-address-"+f.uid,n.type="text",n.placeholder=mmpL10n.list.location,n.addEventListener("keyup",function(t){this.value?u.style.display="inline-block":u.style.display="none"});var u=R().DomUtil.create("div","mmp-list-location-clear",r);u.style.display="none",u.addEventListener("click",function(t){var e=document.getElementById("list-address-"+f.uid);e&&(R().DomUtil.removeClass(e,"results-loading"),R().DomUtil.removeClass(e,"results-error"),e.value=""),this.style.display="none",f.list.located||f.getList({page:1,lat:null,lng:null})});for(var i=R().DomUtil.create("div","mmp-list-header-right",i),h=R().DomUtil.create("select","mmp-list-radius",i),p=[0,5,10,15,20,25,50,100,200,500],l=0;l<p.length;l++){var d=R().DomUtil.create("option",null,h);d.value=p[l],p[l]<=0?d.innerHTML=mmpL10n.list.noLimit:"imperial"===t.listDistanceUnit?d.innerHTML=p[l]+" mi":"metric-imperial"===t.listDistanceUnit?d.innerHTML=p[l]+" km ("+(p[l]/1.609344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?d.innerHTML=p[l]+" mi ("+(1.609344*p[l]).toFixed(t.listDistancePrecision)+" km)":d.innerHTML=p[l]+" km"}h.addEventListener("change",function(){f.getList({page:1,radius:h.value})})}f.containers.listBody=R().DomUtil.create("div","mmp-list-body",e),f.containers.listFooter=R().DomUtil.create("div","mmp-list-footer",e),f.containers.list?f.containers.list.parentNode.replaceChild(e,f.containers.list):f.containers.main.appendChild(e),f.containers.list=e,f.list.geocoding=new Tt("#list-address-"+f.uid,function(t){f.showMapModal(mmpL10n.list.locationError,t)},function(t,e){void 0!==f.controls.locate&&f.controls.locate.stop(),f.getList({page:1,lat:t,lng:e})},f.settings.listGeocodingProvider,mmpGeocoding,400,3),f.list.geocoding.init()}else f.containers.list&&(f.containers.list.remove(),f.containers.list=null)},this.loadBasemaps=function(){var i=f.settings;Object.keys(f.basemaps).forEach(function(t){f.map.removeLayer(f.basemaps[t])}),f.basemaps={},f.minimaps={},Object.keys(i.basemaps).forEach(function(t){var e;void 0!==i.availableBasemaps[i.basemaps[t]]&&(1==(e=i.availableBasemaps[i.basemaps[t]]).type?(e.options.bounds&&"string"==typeof e.options.bounds&&(t=f.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[f.map.unproject(R().point(t[0][1],t[0][0]),e.options.maxNativeZoom),f.map.unproject(R().point(t[1][1],t[1][0]),e.options.maxNativeZoom)]:e.options.bounds=t),e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles&&i.errorTiles||e.options.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,e.wms?(f.basemaps[e.name]=R().tileLayer.wms(e.url,e.options),f.minimaps[e.name]=R().tileLayer.wms(e.url,e.options)):(f.basemaps[e.name]=R().tileLayer(e.url,e.options),f.minimaps[e.name]=R().tileLayer(e.url,e.options))):2==e.type&&i.googleApiKey?(e.options.styles=i.basemapGoogleStyles,e.options.edgeBufferTiles=0,f.basemaps[e.name]=new(R().gridLayer.googleMutant)(e.options),f.minimaps[e.name]=new(R().gridLayer.googleMutant)(e.options)):3==e.type&&i.bingApiKey?(e.options.bingMapsKey=i.bingApiKey,e.options.culture=i.basemapBingCulture,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=R().tileLayer.bing(e.options),f.minimaps[e.name]=R().tileLayer.bing(e.options)):4==e.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(e.options.apiKey=i.hereApiKey,e.options.appId=i.hereAppId,e.options.appCode=i.hereAppCode,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=R().tileLayer.here(e.options),f.minimaps[e.name]=R().tileLayer.here(e.options)):5==e.type&&i.tomApiKey?(e.options.apiKey=i.tomApiKey,e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=i.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,f.basemaps[e.name]=R().tileLayer.tomTom(e.options),f.minimaps[e.name]=R().tileLayer.tomTom(e.options)):6==e.type&&(e.options.minZoom=i.minZoom,e.options.maxZoom=i.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles&&i.errorTiles||e.options.errorTiles?i.errorTileUrl:null,e.options.edgeBufferTiles=i.basemapEdgeBufferTiles,e.labels?(f.basemaps[e.name]=R().layerGroup([mt(e.key,e.options),mt(e.labels,e.options)]),f.minimaps[e.name]=R().layerGroup([mt(e.key,e.options),mt(e.labels,e.options)])):(f.basemaps[e.name]=mt(e.key,e.options),f.minimaps[e.name]=mt(e.key,e.options))))});var t,e=Object.keys(f.basemaps);void 0!==i.availableBasemaps[i.basemapDefault]?(t=i.availableBasemaps[i.basemapDefault].name,void 0!==f.basemaps[t]?f.basemaps[t].addTo(f.map):e.length&&f.basemaps[e[0]].addTo(f.map)):e.length&&f.basemaps[e[0]].addTo(f.map),f.fire("basemapsloaded",f.basemaps)},this.loadOverlays=function(){var n=f.settings;Object.keys(f.overlays).forEach(function(t){f.map.removeLayer(f.overlays[t])}),f.overlays={},Object.keys(n.overlays).forEach(function(t){var e,i;void 0!==n.availableOverlays[n.overlays[t]]&&((e=n.availableOverlays[n.overlays[t]]).options.bounds&&"string"==typeof e.options.bounds&&(i=f.strToBounds(e.options.bounds),e.options.rasterTiles?e.options.bounds=[f.map.unproject(R().point(i[0][1],i[0][0]),e.options.maxNativeZoom),f.map.unproject(R().point(i[1][1],i[1][0]),e.options.maxNativeZoom)]:e.options.bounds=i),e.options.minZoom=n.minZoom,e.options.maxZoom=n.maxZoom,e.options.errorTileUrl=void 0===e.options.errorTiles||e.options.errorTiles?n.errorTileUrl:null,e.options.edgeBufferTiles=n.basemapEdgeBufferTiles,e.wms?f.overlays[e.name]=R().tileLayer.wms(e.url,e.options):f.overlays[e.name]=R().tileLayer(e.url,e.options),-1!==n.overlaysActive.indexOf(n.overlays[t])&&f.overlays[e.name].addTo(f.map))}),f.fire("overlaysloaded",f.overlays)},this.loadResources=function(){var e=f.settings;return f.groups={},f.groups[f.id]={active:!0,markers:{}},Object.keys(e.filtersDetails).forEach(function(t){f.groups[t]={active:e.filtersDetails[t].active,markers:{}}}),Promise.all([f.getMarkers().then(function(t){return f.addMarkers(t),"map"===f.type&&e.list?f.getList():void f.drawMarkers()}).catch(function(){return Promise.reject()}),f.getGeoJson(),f.getGpx()])},this.drawMarkers=function(t){t=t||f.getActiveMarkers();var e=f.settings;if("function"==typeof f.markerGroup.remove&&f.markerGroup.remove(),f.markerGroup={},e.clustering?f.markerGroup=R().markerClusterGroup({showCoverageOnHover:e.showCoverageOnHover,disableClusteringAtZoom:e.disableClusteringAtZoom||null,maxClusterRadius:e.maxClusterRadius,singleMarkerMode:e.singleMarkerMode,spiderfyDistanceMultiplier:e.spiderfyDistanceMultiplier,chunkedLoading:!1}):f.markerGroup=R().featureGroup(),f.markerGroup.addTo(f.map),e.clustering)f.markerGroup.addLayers(t);else for(var i=0;i<t.length;i++)f.markerGroup.hasLayer(t[i])||f.markerGroup.addLayer(t[i])},this.getMarkers=function(){var e=[];return f.settings.filtersAllMarkers||(e.push(f.id),Object.keys(f.settings.filtersDetails).forEach(function(t){e.push(t)})),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_markers",type:f.type,id:e,custom:f.customMarkers,lang:f.language}}).then(function(t){return JSON.parse(t)}).catch(function(t){return f.logError("Error loading markers ("+t+")"),Promise.reject()})},this.addMarkers=function(t){var e=f.settings;"function"==typeof f.markerGroup.remove&&f.markerGroup.remove(),f.markers={},f.markerGroup={},f.tooltip={direction:e.tooltipDirection,permanent:e.tooltipPermanent,sticky:e.tooltipSticky,opacity:e.tooltipOpacity},f.popup={minWidth:e.popupMinWidth,maxWidth:e.popupMaxWidth,maxHeight:e.popupMaxHeight,autoPan:!e.popupCenterOnMap,closeButton:e.popupCloseButton,autoClose:e.popupAutoClose};for(var i=0;i<t.length;i++){var n=t[i];if(f.markers[n.id]=R().marker([n.lat,n.lng],{pmIgnore:!0,contextmenu:e.listEdit,contextmenuItems:[{text:mmpL10n.api.editMarker,icon:mmpVars.pluginUrl+"images/icons/map-edit.png",callback:f.editMarker}],icon:R().icon({iconUrl:n.icon?mmpVars.iconsUrl+n.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,shadowUrl:e.shadowUrl,shadowSize:e.shadowSize,shadowAnchor:e.shadowAnchor,className:"mmp-marker-icon mmp-marker-icon-"+n.id}),opacity:e.markerOpacity}),f.markers[n.id].id=n.id,f.markers[n.id].name=n.name,f.markers[n.id].address=n.address,f.markers[n.id].popup=n.popup,f.markers[n.id].link=n.link,f.markers[n.id].blank=n.blank,f.markers[n.id].icon=n.icon,f.markers[n.id].created=n.created,f.markers[n.id].updated=n.updated,f.markers[n.id].edit=n.edit,n.name&&(f.tooltips[n.id]=n.name,!e.tooltip||!e.tooltipPermanent&&R().Browser.mobile||f.markers[n.id].bindTooltip(f.tooltips[n.id],f.tooltip)),n.link?(f.markers[n.id].on("click",function(){f.openLink(this.link,this.blank)}),f.markers[n.id].on("keypress",function(t){13==t.which&&f.openLink(this.link,this.blank)})):(!1!==n.popup||n.address&&e.popupAddress||e.popupCoordinates||e.popupDirections)&&f.markers[n.id].bindPopup("",f.popup),f.markers[n.id].on("popupopen",f.openPopupHandler),e.popupOpenOnHover?f.markers[n.id].on("mouseover",f.openOnHoverHandler):f.markers[n.id].off("mouseover",f.openOnHoverHandler),"map"!==f.type||e.filtersAllMarkers)f.groups[f.id].markers[n.id]=f.markers[n.id];else for(var r=0;r<n.maps.length;r++)void 0!==f.groups[n.maps[r]]&&(f.groups[n.maps[r]].markers[n.id]=f.markers[n.id])}f.fire("markersloaded",f.markers)},this.getGeoJson=function(){var e=[f.id];return!f.settings.filtersAllMarkers&&f.settings.filtersGeoJson&&Object.keys(f.settings.filtersDetails).forEach(function(t){e.push(t)}),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_geojson",type:f.type,id:e,lang:f.language}}).then(function(t){t=JSON.parse(t);f.addGeoJson(t)}).catch(function(t){f.logError("Error loading GeoJSON ("+t+")")})},this.parseGeoJson=function(t){return R().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return R().circle(e,t.properties.radius)},style:function(e){if(!e.properties)return{};var i={};return Object.keys(e.properties).forEach(function(t){switch(t){case"weight":i[t]=parseInt(e.properties[t]);break;case"opacity":case"fillOpacity":i[t]=parseFloat(e.properties[t]);break;default:i[t]=e.properties[t]}}),i},onEachFeature:function(t,e){e.options.popup&&e.bindPopup("",f.popup),e.on("popupopen",f.openPopupHandler)}})},this.addGeoJson=function(e){"function"==typeof f.geoJsonGroup.remove&&f.geoJsonGroup.remove(),f.geoJson={},f.geoJsonGroup={},f.geoJson[f.id]=R().geoJSON(),e&&(Object.keys(e).forEach(function(t){void 0===e[t].features?f.geoJson[t]=R().geoJSON():f.geoJson[t]=f.parseGeoJson(e[t])}),f.drawGeoJson(),f.fire("geojsonloaded",f.geoJson))},this.drawGeoJson=function(){"function"==typeof f.geoJsonGroup.remove&&f.geoJsonGroup.remove(),f.geoJsonGroup=R().featureGroup(),f.geoJsonGroup.addTo(f.map),Object.keys(f.groups).forEach(function(t){f.groups[t].active&&void 0!==f.geoJson[t]&&f.geoJsonGroup.addLayer(f.geoJson[t])})},this.getPopups=function(t){return f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_marker_popups",id:t,lang:f.language}}).then(function(t){for(var t=JSON.parse(t),e=0;e<t.length;e++){var i=t[e];f.markers[i.id].popup=i.popup}}).catch(function(t){f.logError("Error retrieving popups ("+t+")")})},this.getList=function(t){t=t||{};var e=f.settings;if("map"===f.type&&e.list){for(var i=["page","term","sort","order","lat","lng","radius"],n=0;n<i.length;n++){var r=i[n];void 0!==t[r]&&(f.list[r]=t[r])}var o=[];return e.filtersAllMarkers||Object.keys(f.groups).forEach(function(t){f.groups[t].active&&o.push(t)}),f.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_marker_list",id:o,page:f.list.page,term:f.list.term||"",sort:f.list.sort,order:f.list.order,lat:f.list.lat||"",lng:f.list.lng||"",radius:"imperial"===e.listDistanceUnit||"imperial-metric"===e.listDistanceUnit?1609.344*f.list.radius:1e3*f.list.radius}}).then(function(t){for(var t=JSON.parse(t),e=[],i=0;i<t.length;i++)void 0!==f.markers[t[i]]&&e.push(f.markers[t[i]]);f.updateCircle(),f.showList(e),f.drawMarkers(e)}).catch(function(t){return f.logError("Error retrieving marker list ("+t+")"),Promise.reject()})}},this.showList=function(t){var e=f.settings,i=t.length>e.listLimit?e.listLimit:t.length,e=Math.ceil(t.length/e.listLimit);f.list.page=f.list.page>e?e:f.list.page,f.list.page<=0&&(f.list.page=1);for(var n=f.list.page===e?t.length:i*f.list.page,r=[],o=(f.list.page-1)*i;o<n;o++)null===t[o].popup&&r.push(t[o].id);r.length?f.getPopups(r).then(function(){f.renderList(t)}).catch(function(){}):f.renderList(t)},this.renderList=function(n){var t=f.settings;f.containers.listBody.innerHTML="";var e=n.length>t.listLimit?t.listLimit:n.length,i=Math.ceil(n.length/t.listLimit);f.list.page=f.list.page>i?i:f.list.page,f.list.page<=0&&(f.list.page=1);for(var r=f.list.page===i?n.length:e*f.list.page,o=(f.list.page-1)*e;o<r;o++){var a=R().DomUtil.create("div","mmp-list-row",f.containers.listBody);t.listIcon&&(l=R().DomUtil.create("div","mmp-list-row-icon",a),l=R().DomUtil.create("div","mmp-list-icon",l),l=R().DomUtil.create("img",null,l),n[o].icon?l.src=mmpVars.iconsUrl+n[o].icon:l.src=mmpVars.pluginUrl+"images/leaflet/marker.png");var s,l=R().DomUtil.create("div","mmp-list-row-info",a),a=R().DomUtil.create("div","mmp-list-row-header",l);t.listName&&((s=R().DomUtil.create("div","mmp-list-name",a)).innerHTML=n[o].name,"none"!==t.listAction&&(s.tabIndex=0,function(e){var i="popup"===t.listAction;R().DomEvent.on(s,"click",function(){f.highlightMarker(n[e],f.containers.main.getBoundingClientRect().top<0,i)}),R().DomEvent.on(s,"keypress",function(t){13===t.which&&f.highlightMarker(n[e],f.containers.main.getBoundingClientRect().top<0,i)})}(o)));var c,a=R().DomUtil.create("div","mmp-list-api",a);n[o].edit&&f.addApiLink(f.getApiLink("editMarker",n[o].id),mmpL10n.api.editMarker,"mmp-api-icon-edit",a),t.listDir&&(u=f.getDirectionsLink(t.directionsProvider,n[o].getLatLng().lat,n[o].getLatLng().lng,n[o].address),"googlemaps"===t.directionsProvider?c=t.directionsGoogleWalking?"walk":"car":"ors"===t.directionsProvider?c="Bicycle"===t.directionsOrsType?"bicycle":"Pedestrian"===t.directionsOrsType?"walk":"car":"bingmaps"===t.directionsProvider&&(c="car"),f.addApiLink(u,mmpL10n.api.dir,"mmp-api-icon-"+c,a)),t.apiFullscreen&&t.listFs&&f.addApiLink(f.getApiLink("fs",f.id,{marker:n[o].id}),mmpL10n.api.fs,"mmp-api-icon-fullscreen",a),t.listShare&&f.addShareLink(n[o].id,a);var u=R().DomUtil.create("div","mmp-list-row-body",l);t.listPopup&&n[o].popup&&(R().DomUtil.create("div","mmp-list-popup",u).innerHTML=n[o].popup);u=R().DomUtil.create("div","mmp-list-row-footer",l);t.listAddress&&n[o].address&&(R().DomUtil.create("div","mmp-list-address",u).innerHTML=n[o].address),t.listDistance&&null!==f.list.lat&&null!==f.list.lng&&(l=R().latLng(f.list.lat,f.list.lng),u=n[o].getLatLng(),u=R().latLng(l).distanceTo(u),a=R().DomUtil.create("div","mmp-list-distance",a),"imperial"===t.listDistanceUnit?a.innerHTML=(u/1609.344).toFixed(t.listDistancePrecision)+" mi":"metric-imperial"===t.listDistanceUnit?a.innerHTML=(u/1e3).toFixed(t.listDistancePrecision)+" km ("+(u/1609.344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?a.innerHTML=(u/1609.344).toFixed(t.listDistancePrecision)+" mi ("+(u/1e3).toFixed(t.listDistancePrecision)+" km)":a.innerHTML=(u/1e3).toFixed(t.listDistancePrecision)+" km")}f.containers.listFooter.innerHTML="";var h,p=R().DomUtil.create("div","mmp-list-count",f.containers.listFooter);0===n.length?p.innerHTML=mmpL10n.list.noResults:1===n.length?p.innerHTML=mmpL10n.list.oneResult:p.innerHTML=n.length+" "+mmpL10n.list.results,n.length>t.listLimit&&(e=R().DomUtil.create("div","mmp-list-nav",f.containers.listFooter),(p=R().DomUtil.create("button",null,e)).innerHTML="&laquo;",p.addEventListener("click",function(){f.list.page=1,f.showList(n)}),(p=R().DomUtil.create("button",null,e)).innerHTML="&lsaquo;",p.addEventListener("click",function(){f.list.page=1===f.list.page?1:f.list.page-1,f.showList(n)}),(p=R().DomUtil.create("button",null,e)).innerHTML="&rsaquo;",p.addEventListener("click",function(){f.list.page=f.list.page===i?i:f.list.page+1,f.showList(n)}),(e=R().DomUtil.create("button",null,e)).innerHTML="&raquo;",e.addEventListener("click",function(){f.list.page=i,f.showList(n)}),e=R().DomUtil.create("div","mmp-list-page",f.containers.listFooter),(h=R().DomUtil.create("input",null,e)).type="text",h.value=f.list.page,e.appendChild(document.createTextNode(" / "+i)),e.addEventListener("keyup",function(t){13==t.which&&(f.list.page=Math.abs(parseInt(h.value)),f.showList(n))}))},this.updateCircle=function(){var t,e,i=f.settings;"function"==typeof f.list.circle.remove&&(f.list.circle.remove(),f.list.circle={}),null!==f.list.lat&&null!==f.list.lng&&(t=R().latLng([f.list.lat,f.list.lng]),f.list.radius<=0?f.map.panTo(t):(e=f.list.radius,"imperial"===i.listDistanceUnit||"imperial-metric"===i.listDistanceUnit?e*=1609.344:e*=1e3,i.listGeocodingDrawCircle&&(f.list.circle=R().circle(t,{pmIgnore:!0,interactive:!1,radius:e,stroke:i.listGeocodingStroke,color:i.listGeocodingColor,weight:i.listGeocodingWeight,fill:i.listGeocodingFill,fillColor:i.listGeocodingFillColor,fillOpacity:i.listGeocodingFillOpacity}).addTo(f.map)),f.map.fitBounds(t.toBounds(2*e))))},this.loadControls=function(){var e,t=f.settings;void 0!==f.controls.locate&&f.controls.locate.stop(),Object.keys(f.controls).forEach(function(t){f.controls[t].remove()}),f.controls={},f.controls.attribution=R().control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),f.controls.attribution._esriAttributionAdded=!0,"hidden"!=t.zoomControlPosition&&(f.controls.zoom=R().control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut})),"hidden"!=t.fullscreenPosition&&(f.controls.fullscreen=R().control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}})),"hidden"!=t.resetPosition&&(f.controls.reset=R().control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset})),"hidden"!=t.locatePosition&&(f.controls.locate=R().control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:"icon-pin",iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t,e){var i=mmpL10n.control.locateErrorUnknown;1===t.code?i=mmpL10n.control.locateErrorDenied:2===t.code?i=mmpL10n.control.locateErrorUnavailable:3===t.code&&(i=mmpL10n.control.locateErrorTimeout),f.showMapModal(mmpL10n.control.locateError,i)},onLocationOutsideMapBounds:function(t){t.stop(),f.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}})),"hidden"!=t.scalePosition&&(f.controls.scale=R().control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial})),"hidden"!=t.layersPosition&&(Object.keys(f.basemaps).length||Object.keys(f.overlays).length)&&(f.controls.layers=R().control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"===t.layersCollapsed||"collapsed-mobile"===t.layersCollapsed&&R().Browser.mobile}),Object.keys(f.basemaps).forEach(function(t){f.controls.layers.addBaseLayer(f.basemaps[t],t)}),Object.keys(f.overlays).forEach(function(t){f.controls.layers.addOverlay(f.overlays[t],t)})),"hidden"!=t.filtersPosition&&"map"===f.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(f.controls.filters=R().control.filters({mmp:f,position:t.filtersPosition,collapsed:"collapsed"===t.filtersCollapsed||"collapsed-mobile"===t.filtersCollapsed&&R().Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone})),"hidden"!=t.gpxControlPosition&&void 0!==f.gpx.tracks&&1<f.gpx.tracks.length&&(f.controls.gpx=R().control.gpx({mmp:f,collapsed:"collapsed"===t.gpxControlCollapsed||"collapsed-mobile"===t.gpxControlCollapsed&&R().Browser.mobile,position:t.gpxControlPosition})),"hidden"!=t.minimapPosition&&Object.keys(f.minimaps).length&&(e=R().tileLayer(""),Object.keys(f.basemaps).forEach(function(t){f.map.hasLayer(f.basemaps[t])&&(e=f.minimaps[t])}),f.controls.minimap=new(R().Control.MiniMap)(e,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"===t.minimapMinimized||"collapsed-mobile"===t.minimapMinimized&&R().Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}})),Object.keys(f.controls).forEach(function(t){f.controls[t].addTo(f.map)}),Object.keys(f.basemaps).forEach(function(t){t=f.basemaps[t];f.map.hasLayer(t)&&(t instanceof R().TileLayer.HERE?t._findCopyrightBBox():t instanceof R().TileLayer.TomTom?t._addAttribution():t instanceof ft&&Y._updateMapAttribution({target:f.map}))}),t.attributionCondensed&&(R().DomUtil.removeClass(f.controls.attribution.getContainer(),"leaflet-control-attribution"),R().DomUtil.addClass(f.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==f.controls.minimap?f.map.on("baselayerchange",f.updateMinimapHandler):f.map.off("baselayerchange",f.updateMinimapHandler),void 0!==f.controls.locate?(f.map.on("locationfound",f.updateLocationHandler),f.map.on("locatedeactivate",f.locateDeactivateHandler),!f.settings.locateAutostart||f.urlHighlight||f.highlight||f.controls.locate.start()):(f.map.off("locationfound",f.updateLocationHandler),f.map.off("locatedeactivate",f.locateDeactivateHandler)),f.fire("controlsloaded",f.controls)},this.getGpx=function(){var t=f.settings;return t.gpxUrl?f.xhr({type:"GET",url:t.gpxUrl}).then(function(t){if(f.gpx=new r,f.gpx.parse(t),!f.gpx.tracks.length){for(var e=0;e<f.gpx.routes.length;e++){var i=f.gpx.routes[e];i.segments=[{points:i.points,extensions:i.extensions,time:i.time,distance:i.distance,elevation:i.elevation}],f.gpx.tracks.push(i)}f.gpx.routes=[]}f.addGpx()}).catch(function(t){f.logError("Error loading GPX ("+t+")")}):Promise.resolve()},this.addGpx=function(){var t=f.settings;if(void 0!==f.gpxGroup&&"function"==typeof f.gpxGroup.remove&&f.gpxGroup.remove(),f.gpxGroup=R().featureGroup(),f.gpxTracks={},void 0!==f.gpx.tracks&&f.gpx.tracks.length){for(var e=[],i=0;i<f.gpx.tracks.length;i++)for(var n=f.gpx.tracks[i],r=0;r<n.segments.length;r++){var o=n.segments[r];e[i]=R().polyline([],{pmIgnore:!0,interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:n.extensions.color||o.extensions.color||t.gpxTrackColor,weight:parseInt(n.extensions.weight||o.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(n.extensions.opacity||o.extensions.opacity||t.gpxTrackOpacity)});for(var a=0;a<o.points.length;a++){var s=o.points[a].lat,l=o.points[a].lon;e[i].addLatLng([s,l])}e[i].addTo(f.gpxGroup)}f.gpxTracks=e}f.setTrackIcons(),f.setIntervalMarkers(),f.setTrackMeta(),f.setWaypoints(),f.gpxGroup.addTo(f.map),f.fire("gpxloaded",f.gpxTracks),f.loadChart(),f.addElevationChart()},this.getGpxName=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].name)&&f.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.start)&&new Date(f.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.end)&&new Date(f.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,e){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.total)&&Mt(f.gpx.tracks[t].time.total,e)},this.getGpxTimeMoving=function(t,e){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.moving)&&Mt(f.gpx.tracks[t].time.moving,e)},this.getGpxDistance=function(t,e){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(f.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(f.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,e,i){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].time.moving||!f.gpx.tracks[t].distance.total)return!1;switch(e){case"imperial":return Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi";case"metric-imperial":return Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km ("+Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi)";case"imperial-metric":return Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1609.344),i)+"/mi ("+Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km)";default:return Mt(f.gpx.tracks[t].time.moving/(f.gpx.tracks[t].distance.total/1e3),i)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].heartRate.avg)&&f.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,e){if(e=e||"metric",void 0===f.gpx.tracks[t]||!f.gpx.tracks[t].elevation.gain&&!f.gpx.tracks[t].elevation.loss)return!1;var i=f.gpx.tracks[t].elevation.gain-f.gpx.tracks[t].elevation.loss;switch(e){case"imperial":return"+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m (+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(f.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(f.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(i/.3048).toFixed(0)+" ft (+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m)";default:return"+"+f.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+f.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+i.toFixed(0)+" m"}},this.setTrackStyle=function(){var e=f.settings;Object.keys(f.gpxTracks).forEach(function(t){f.gpxTracks[t].setStyle({color:e.gpxTrackColor,weight:e.gpxTrackWeight,opacity:e.gpxTrackOpacity})})},this.setTrackIcons=function(){var i=f.settings;void 0!==f.gpx.tracks&&Object.keys(f.gpx.tracks).forEach(function(t){var e;void 0!==f.gpx.tracks[t].startIcon&&f.gpx.tracks[t].startIcon&&f.gpx.tracks[t].startIcon.remove(),void 0!==f.gpx.tracks[t].endIcon&&f.gpx.tracks[t].endIcon&&f.gpx.tracks[t].endIcon.remove(),i.gpxShowStartIcon&&(f.gpx.tracks[t].startIcon=R().marker([f.gpx.tracks[t].points[0].lat,f.gpx.tracks[t].points[0].lon],{pmIgnore:!0,interactive:!1,icon:R().icon({iconUrl:i.gpxStartIcon?mmpVars.iconsUrl+i.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(f.gpxGroup)),i.gpxShowEndIcon&&(e=f.gpx.tracks[t].points.length-1,f.gpx.tracks[t].endIcon=R().marker([f.gpx.tracks[t].points[e].lat,f.gpx.tracks[t].points[e].lon],{pmIgnore:!0,interactive:!1,icon:R().icon({iconUrl:i.gpxEndIcon?mmpVars.iconsUrl+i.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(f.gpxGroup))})},this.setIntervalMarkers=function(){var t=f.settings;if(void 0!==f.gpx.tracks&&(Object.keys(f.gpx.tracks).forEach(function(t){if(void 0!==f.gpx.tracks[t].intervalMarkers&&f.gpx.tracks[t].intervalMarkers.length)for(var e=f.gpx.tracks[t].intervalMarkers,i=0;i<e.length;i++)e[i].remove()}),t.gpxIntervalMarkers))for(var e="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,i=f.gpx.tracks,n=0;n<i.length;n++){i[n].intervalMarkers=[];for(var r=1,o=i[n].points,a=0;a<o.length;a++){var s=o[a];s.dist>=r*e&&(s=R().marker([s.lat,s.lon],{pmIgnore:!0,interactive:!1,icon:R().divIcon({className:"mmp-interval-marker",html:"<span>"+r+"</span>"})}).addTo(f.map),i[n].intervalMarkers.push(s),r++)}}},this.setTrackMeta=function(){var r=f.settings;Object.keys(f.gpxTracks).forEach(function(t){if(!r.gpxMeta)return f.gpxTracks[t].closePopup(),void f.gpxTracks[t].unbindPopup();for(var e=R().DomUtil.create("div","mmp-gpx-meta"),i=[{show:r.gpxMetaName,title:mmpL10n.gpx.metaName,value:f.getGpxName(t)},{show:r.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:f.getGpxStartTime(t)},{show:r.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:f.getGpxEndTime(t)},{show:r.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:f.getGpxTimeTotal(t)},{show:r.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:f.getGpxTimeMoving(t)},{show:r.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:f.getGpxDistance(t,r.gpxMetaUnits)},{show:r.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:f.getGpxPace(t,r.gpxMetaUnits)},{show:r.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:f.getGpxHeartRate(t)},{show:r.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:f.getGpxElevation(t,r.gpxMetaUnits)}],n=0;n<i.length;n++)!i[n].show||r.gpxMetaHideMissing&&!1===i[n].value||(!1===i[n].value&&(i[n].value="N/A"),e.innerHTML+="<strong>"+i[n].title+":</strong> "+i[n].value+"<br />");r.gpxMetaDownload&&(e.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+f.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),r.gpxMetaDesc&&f.gpx.tracks[t].desc&&(e.innerHTML&&(e.innerHTML+="<br />"),e.innerHTML+=f.gpx.tracks[t].desc),void 0!==f.gpxTracks[t].getPopup()&&f.gpxTracks[t].getPopup()?f.gpxTracks[t].setPopupContent(e):f.gpxTracks[t].bindPopup(e)})},this.setWaypoints=function(){for(var t=f.settings,e=0;e<f.gpxWaypoints.length;e++)f.gpxWaypoints[e].remove();if(f.gpxWaypoints=[],t.gpxWaypoints&&void 0!==f.gpx.waypoints)for(e=0;e<f.gpx.waypoints.length;e++){var i,n=R().circleMarker([f.gpx.waypoints[e].lat,f.gpx.waypoints[e].lon],{interactive:!0,radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity}).addTo(f.gpxGroup);f.gpx.waypoints[e].name&&n.bindTooltip(f.gpx.waypoints[e].name),f.gpx.waypoints[e].desc&&((i=R().DomUtil.create("div","mmp-gpx-waypoint")).innerHTML=f.gpx.waypoints[e].desc,n.bindPopup(i)),f.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=f.settings,e=0;e<f.gpxWaypoints.length;e++)f.gpxWaypoints[e].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var e,i="imperial"===f.settings.gpxChartUnits||"imperial-metric"===f.settings.gpxChartUnits?(e=1609.433,.3048):(e=1e3,1),n=isNaN(parseFloat(f.settings.gpxChartYOffset))?0:parseFloat(f.settings.gpxChartYOffset);return f.gpx.tracks[f.map._activeTrack].points.map(function(t){return{x:t.dist/e,y:t.ele/i+n}})},this.updateElevationChart=function(t){var e=f.settings;f.gpxChart instanceof s()&&(t&&(t=f.generateChartData(),f.gpxChart.data.datasets[0].data=t,f.gpxChart.options.scales.xAxes[0].ticks.max=t[t.length-1].x),f.gpxChart.data.datasets[0].borderWidth=e.gpxChartLineWidth,f.gpxChart.data.datasets[0].borderColor=e.gpxChartLineColor,f.gpxChart.data.datasets[0].fill=e.gpxChartFill,f.gpxChart.data.datasets[0].backgroundColor=e.gpxChartFillColor,f.gpxChart.options.scales.yAxes[0].gridLines.color=e.gpxChartGridLinesColor,f.gpxChart.options.scales.yAxes[0].ticks.min=isNaN(parseInt(e.gpxChartYMin))?void 0:parseInt(e.gpxChartYMin),f.gpxChart.options.scales.yAxes[0].ticks.max=isNaN(parseInt(e.gpxChartYMax))?void 0:parseInt(e.gpxChartYMax),f.gpxChart.options.scales.yAxes[0].ticks.reverse=e.gpxChartReverseY,f.gpxChart.options.scales.yAxes[0].ticks.minor.fontColor=e.gpxChartTicksFontColor,f.gpxChart.options.scales.xAxes[0].gridLines.color=e.gpxChartGridLinesColor,f.gpxChart.options.scales.xAxes[0].ticks.reverse=e.gpxChartReverseX,f.gpxChart.options.scales.xAxes[0].ticks.minor.fontColor=e.gpxChartTicksFontColor,f.gpxChart.options.chartArea.backgroundColor=e.gpxChartBgColor,f.gpxChart.options.tooltips.backgroundColor=e.gpxChartTooltipBgColor,f.gpxChart.options.tooltips.bodyFontColor=e.gpxChartTooltipFontColor,f.gpxChart.options.indicator.lineWidth=e.gpxChartIndicatorLineWidth,f.gpxChart.options.indicator.lineColor=e.gpxChartIndicatorLineColor,f.gpxChart.update())},this.updateElevationChartThrottled=R().Util.throttle(f.updateElevationChart,100,this),this.addElevationChart=function(){var t,e,a=f.settings;f.settings.gpxChart&&void 0!==f.gpx.tracks&&f.gpx.tracks.length&&(void 0===f.containers.chartWrap&&f.loadChart(),t=f.generateChartData(),e=document.getElementById("mmp-gpx-chart-"+f.uid).getContext("2d"),s().platform.disableCSSInjection=!0,s().defaults.scatterIndicator=s().defaults.scatter,s().controllers.scatterIndicator=s().controllers.scatter.extend({draw:function(t){var e,i,n,r,o;s().controllers.scatter.prototype.draw.call(this,t),this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales["y-axis-1"]?(e=this.chart.ctx,i=f.map._activeTrack,n=(o=this.chart.tooltip._active[0])._index,r=o.tooltipPosition().x,t=this.chart.scales["y-axis-1"].top,o=this.chart.scales["y-axis-1"].bottom,this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(e.save(),e.beginPath(),e.moveTo(r,t),e.lineTo(r,o),e.lineWidth=this.chart.config.options.indicator.lineWidth,e.strokeStyle=this.chart.config.options.indicator.lineColor,e.stroke(),e.restore()),a.gpxChartLocator&&void 0!==f.chartLayers.locator&&(f.chartLayers.locator.setLatLng([f.gpx.tracks[i].points[n].lat,f.gpx.tracks[i].points[n].lon]),f.map.hasLayer(f.chartLayers.locator)||f.chartLayers.locator.addTo(f.map))):void 0!==f.chartLayers.locator&&f.map.hasLayer(f.chartLayers.locator)&&f.chartLayers.locator.remove()}}),f.gpxChart=new(s())(e,{plugins:[{beforeDraw:function(t){var e,i;t.config.options.chartArea&&t.config.options.chartArea.backgroundColor&&(e=t.chart.ctx,i=t.chartArea,e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore())}},{afterDraw:function(t){var e,i,n;t.data.datasets[0].data.filter(function(t){return!isNaN(t.y)}).length||(e=t.chart.ctx,i=t.chart.width,n=t.chart.height,t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore())}}],type:"scatterIndicator",data:{datasets:[{data:t,pointRadius:0,showLine:!0,spanGaps:!0,borderCapStyle:"round",borderWidth:a.gpxChartLineWidth,borderColor:a.gpxChartLineColor,fill:a.gpxChartFill,backgroundColor:a.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{yAxes:[{gridLines:{color:a.gpxChartGridLinesColor},ticks:{callback:function(t,e,i){return f.formatGpxValue(t,"ele",a.gpxChartUnits)},min:isNaN(parseInt(a.gpxChartYMin))?void 0:parseInt(a.gpxChartYMin),max:isNaN(parseInt(a.gpxChartYMax))?void 0:parseInt(a.gpxChartYMax),reverse:a.gpxChartReverseY,fontColor:a.gpxChartTicksFontColor}}],xAxes:[{afterBuildTicks:function(t,e){var i=t.ticks.length;2<i&&(t.ticks[i-2]=null)},gridLines:{color:a.gpxChartGridLinesColor},ticks:{callback:function(t,e,i){if(null!==t)return f.formatGpxValue(t,"dist",a.gpxChartUnits)},min:0,max:t[t.length-1].x,reverse:a.gpxChartReverseX,autoSkip:!1,fontColor:a.gpxChartTicksFontColor}}]},legend:{display:!1},chartArea:{backgroundColor:a.gpxChartBgColor},tooltips:{callbacks:{label:function(t,e){var i=t.datasetIndex,n=t.index,t=e.datasets[i].data[n].y,n=e.datasets[i].data[n].x;return[mmpL10n.gpx.metaElevation+": "+f.formatGpxValue(t,"ele",a.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+f.formatGpxValue(n,"dist",a.gpxChartUnits)]}},mode:"index",intersect:!1,displayColors:!1,backgroundColor:a.gpxChartTooltipBgColor,bodyFontColor:a.gpxChartTooltipFontColor},indicator:{lineWidth:a.gpxChartIndicatorLineWidth,lineColor:a.gpxChartIndicatorLineColor},hover:{animationDuration:250}}}),void 0!==f.chartLayers&&Object.keys(f.chartLayers).forEach(function(t){f.chartLayers[t].remove()}),f.chartLayers={},f.chartLayers.locator=R().circleMarker([0,0]),f.setChartStyle())},this.setChartStyle=function(){var t=f.settings;t.gpxChart&&void 0!==f.chartLayers&&(Object.keys(f.chartLayers).forEach(function(t){f.chartLayers[t].remove()}),f.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=f.markerGroup.getBounds();t.isValid()&&f.map.fitBounds(t)},this.fitGeoJson=function(t){t=f.geoJson[f.id].getLayer(t);void 0===t||(t=t.getBounds()).isValid()&&f.map.fitBounds(t)},this.deferredLoadHandler=function(t,i){t.forEach(function(t){if("childList"===t.type&&t.addedNodes.length)for(var e=0;e<t.addedNodes.length;e++)if(t.addedNodes[e].id==="maps-marker-pro-"+f.uid)return i.disconnect(),void f.main()})},this.lazyLoadHandler=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n.target===f.containers.main&&n.isIntersecting)return e.disconnect(),void f.load()}},this.lazyLoadHandlerFallback=function(){if(!(wt(f.containers.main)&&(t=f.containers.main,e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,t=window.innerWidth||document.documentElement.clientWidth,e.left<=t&&0<=e.right&&e.top<=i&&0<=e.bottom)))return setTimeout(f.lazyLoadHandlerFallback,250);var t,e,i;f.load()},this.visibilityDetectionHandler=function(t,e){for(var i=0;i<t.length;i++)t[i].target===f.containers.main&&f.checkInvalidateSize()},this.visibilityDetectionHandlerFallback=function(){f.checkInvalidateSize(),setTimeout(f.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var e=f.settings,i=t.target.getPopup();void 0!==i&&f.loadPopup(t.target).then(function(){f.checkPopupSize(i),e.popupCenterOnMap&&f.centerPopup(i),f.fire("popupopen",i)}).catch(function(){})},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){f.getList()},this.updateMinimapHandler=function(t){f.controls.minimap.changeLayer(f.minimaps[t.name])},this.updateLocationHandler=function(t){var e;f.list.located||(f.list.located=!0,(e=document.getElementById("list-address-"+f.uid))&&(e.value="",e.dispatchEvent(new Event("keyup"))),f.getList({lat:t.latitude,lng:t.longitude}))},this.locateDeactivateHandler=function(){f.list.located&&(f.list.located=!1,f.getList({lat:null,lng:null}))},this.main()},i(5911),i(686),i(4607);var _=function(){function t(){var t=D("#advancedSettings").prop("checked");D(".mmp-advanced").each(function(){t?D(this).show():D(this).hide()})}function e(){D("#filtersAllMarkers").prop("checked")?D("#filtersWrap").hide():D("#filtersWrap").show()}function s(){var t=k();A.loadResources().then(function(){A.geoJson[A.id]=A.parseGeoJson(t),A.drawGeoJson(),A.loadControls(),w()})}function i(t){A.settings.panelColor=t,A.loadPanel()}function n(t){A.settings.listGeocodingColor=t,A.updateCircle()}function r(t){A.settings.listGeocodingFillColor=t,A.updateCircle()}function o(t){A.settings.gpxTrackColor=t,A.setTrackStyle()}function a(t){A.settings.gpxWaypointsColor=t,A.setWaypointStyle()}function l(t){A.settings.gpxWaypointsFillColor=t,A.setWaypointStyle()}function c(t){A.settings.gpxChartLocatorColor=t,A.setChartStyle()}function u(t){A.settings.gpxChartLocatorFillColor=t,A.setChartStyle()}function h(){var e=[];D(".mmp-basemap").each(function(){e.push(D(this).data("id").toString())}),D("#basemapsList option").each(function(){var t=-1!==D.inArray(D(this).val().toString(),e);D(this).prop("disabled",t)}),D("#basemapsList option").each(function(){if(!D(this).prop("disabled"))return D(this).prop("selected",!0),!1}),D("#basemapsList option:enabled").length?D("#basemapsAdd").prop("disabled",!1):D("#basemapsAdd").prop("disabled",!0)}function p(){var e=[];D("#basemapList li").each(function(t){e.push(D(this).data("id").toString())}),A.settings.basemaps=e,A.loadBasemaps(),A.loadControls()}function d(){var e=[];D(".mmp-overlay").each(function(){e.push(D(this).data("id").toString())}),D("#overlaysList option").each(function(){var t=-1!==D.inArray(D(this).val().toString(),e);D(this).prop("disabled",t)}),D("#overlaysList option").each(function(){if(!D(this).prop("disabled"))return D(this).prop("selected",!0),!1}),D("#overlaysList option:enabled").length?D("#overlaysAdd").prop("disabled",!1):D("#overlaysAdd").prop("disabled",!0)}function f(){var e=[];D("#overlayList li").each(function(t){e.push(D(this).data("id").toString())}),A.settings.overlays=e,A.loadOverlays(),A.loadControls()}function m(){A.settings.overlaysActive=[],D('input[name="overlaysActive[]"]:checked').each(function(){A.settings.overlaysActive.push(D(this).val())})}function g(t,e){var i=void 0===e.active||!!e.active,n=e.icon||"",r=e.name||"",o=D('<li class="mmp-filter" data-id="'+t+'"></li>'),a=D("<div></div>");o.append(a);e=D('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');a.append(e);i=D('<label class="mmp-align-middle"><div class="switch"><input type="checkbox" name="filtersList['+t+'][active]"'+(i?' checked="checked"':"")+' /><span class="slider"></span></div></label>');D("input",i).change(function(){var t=D(this).closest("li").data("id"),e=D(this).prop("checked");D(".mmp-control-filters-selector[value="+t+"]").prop("checked",e),void 0!==A.groups[t]&&(A.groups[t].active=e),A.drawMarkers(),A.drawGeoJson()}),a.append(" ").append(i);i=D('<input type="hidden" name="filtersList['+t+'][icon]" value="'+n+'" />');a.append(i);n=n?mmpVars.iconsUrl+n:mmpVars.pluginUrl+"images/leaflet/marker.png",n=D('<img class="mmp-filter-icon mmp-align-middle" src="'+n+'" />');n.click(function(){D("#iconTarget").val(D(this).parent().parent().data("id")),D("#icons").show()}),a.append(" ").append(n),(r=D('<input type="text" class="mmp-align-middle" name="filtersList['+t+'][name]" value="'+r+'" />')).change(function(){_(),A.loadControls()}),a.append(" ").append(r);r=D('<i class="dashicons dashicons-no mmp-remove-filter"></i>');r.click(function(){D(this).parent().parent().remove(),v(),_(),s()}),a.append(" ").append(r),D("#filterList").append(o)}function v(){var e=[];D(".mmp-filter").each(function(){e.push(D(this).data("id"))}),D("#filtersMapList option").each(function(){var t=D(this).val()==A.id||-1!==D.inArray(parseInt(D(this).val()),e);D(this).prop("disabled",t)});var t=!1;D("#filtersMapList option").each(function(){if(!D(this).prop("disabled"))return t=!0,D(this).prop("selected",!0),!1}),t?D("#filtersAdd").prop("disabled",!1):(D("#filtersAdd").prop("disabled",!0),D("#filtersMapList option").prop("selected",!1)),D("#filtersMapList").select2({width:"300px"})}function _(){var i={};D("#filterList li").each(function(t){var e=D(this).data("id");i[e]={index:t,active:D('input[name="filtersList['+e+'][active]"]').prop("checked"),name:D('input[name="filtersList['+e+'][name]"]').val(),icon:D('input[name="filtersList['+e+'][icon]"]').val()}}),A.settings.filtersDetails=i}function y(){A.settings.gpxStartIcon=D("#gpxStartIcon").val(),A.settings.gpxEndIcon=D("#gpxEndIcon").val(),A.setTrackIcons()}function b(t){void 0!==A.map.pm&&(t?(A.settings.filtersGeoJson=!1,s(),A.map.pm.addControls({position:"topleft",drawMarker:!1,drawCircleMarker:!1})):(A.settings.filtersGeoJson=D("#filtersGeoJson").prop("checked"),s(),A.map.pm.removeControls()))}function x(){void 0!==A.map.pm&&A.map.pm.setPathOptions({stroke:D("#drawStroke").prop("checked"),color:D("#drawStrokeColor").val(),weight:parseInt(D("#drawStrokeWeight").val()),opacity:parseFloat(D("#drawStrokeOpacity").val()),lineCap:D("#drawLineCap").val(),lineJoin:D("#drawLineJoin").val(),fill:D("#drawFill").prop("checked"),fillColor:D("#drawFillColor").val(),fillOpacity:parseFloat(D("#drawFillOpacity").val()),fillRule:D("#drawFillRule").val()})}function k(){var r={type:"FeatureCollection",features:[]};return A.geoJson[A.id].eachLayer(function(t){var e=t.toGeoJSON();if((!(t instanceof R().Polyline)||e.geometry.coordinates.length)&&(!(t instanceof R().Polygon)||e.geometry.coordinates.length&&e.geometry.coordinates[0].length&&null!==e.geometry.coordinates[0][0])){void 0===e.properties&&(e.properties={}),t instanceof R().Circle?e.properties.radius=t.getRadius():t instanceof R().Rectangle&&(e.properties.rectangle=!0);for(var i=["name","stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule","popup"],n=0;n<i.length;n++)void 0!==t.options[i[n]]&&(e.properties[i[n]]=t.options[i[n]]);r.features.push(e)}}),r}function w(){D("#geoJson").empty(),D("#shapesSelectAll").prop("checked",!1),A.geoJson[A.id].eachLayer(M),D('input[name="shapesSelected[]"]').length?D("#shapesList").show():D("#shapesList").hide(),D('input[name="shapesSelected[]"]').change(function(){var i=!0;D('input[name="shapesSelected[]"]').each(function(t,e){i=i&&D(e).prop("checked")}),D("#shapesSelectAll").prop("checked",i)})}function L(t){var e=!1;return t instanceof R().Circle?e="Circle":t instanceof R().Rectangle?e="Rectangle":t instanceof R().Polygon?e="Polygon":t instanceof R().Polyline&&(e="Polyline"),e}function M(t){var e=R().stamp(t),i=L(t),n=D('<li class="mmp-shape" data-id="'+e+'"></li>'),r=D("<div></div>");n.append(r);var o=D('<input type="checkbox" name="shapesSelected[]" value="'+e+'" />');r.append(o);i=D('<img class="mmp-align-middle" src="'+mmpVars.pluginUrl+"images/icons/geojson-"+i.toLowerCase()+'.png" />');r.append(i);t=D('<input type="text" class="mmp-align-middle" value="'+t.options.name+'" />');t.change(function(){var t=D(this).parent().parent().data("id"),t=A.geoJson[A.id].getLayer(t);void 0!==t&&(t.options.name=D(this).val(),A.updatePopup(t,!0))}),r.append(" ").append(t);t=D('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/jump-to.png" />');t.click(function(){A.fitGeoJson(e)}),r.append(" ").append(t);t=D('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');t.click(function(){T(),D("#shapeId").val(e);var t=A.geoJson[A.id].getLayer(D("#shapeId").val());void 0!==t&&(P(t.options),D("#shapeBackup").val(JSON.stringify(S())),D("#editShape").appendTo(D(this).parent()),D("#editShape").slideDown(500))}),r.append(" ").append(t),D("#geoJson").append(n)}function C(){var t=A.geoJson[A.id].getLayer(D("#shapeId").val());void 0!==t&&t.setStyle(S())}function S(){return{stroke:D("#editDrawStroke").prop("checked"),color:D("#editDrawStrokeColor").val(),weight:parseInt(D("#editDrawStrokeWeight").val()),opacity:parseFloat(D("#editDrawStrokeOpacity").val()),lineCap:D("#editDrawLineCap").val(),lineJoin:D("#editDrawLineJoin").val(),fill:D("#editDrawFill").prop("checked"),fillColor:D("#editDrawFillColor").val(),fillOpacity:parseFloat(D("#editDrawFillOpacity").val()),fillRule:D("#editDrawFillRule").val(),popup:D("#editDrawPopup").val()}}function P(t){D("#editDrawStroke").prop("checked",t.stroke),D("#editDrawStrokeColor").spectrum("set",t.color),D("#editDrawStrokeWeight").val(t.weight),D("#editDrawStrokeOpacity").val(t.opacity),D('#editDrawLineCap option[value="'+t.lineCap+'"]').prop("selected",!0),D('#editDrawLineJoin option[value="'+t.lineJoin+'"]').prop("selected",!0),D("#editDrawFill").prop("checked",t.fill),D("#editDrawFillColor").spectrum("set",t.fillColor),D("#editDrawFillOpacity").val(t.fillOpacity),D('#editDrawFillRule option[value="'+t.fillRule+'"]').prop("selected",!0),D("#editDrawPopup").val(t.popup)}function T(){var t=D("#shapeBackup").val();t&&(P(JSON.parse(t)),C(),D("#shapeBackup").val(""))}function E(t){void 0!==t[0]&&A.map.fitBounds(t[0].getBounds(),{padding:[10,10]})}var D,A,O,I,B;D=jQuery,A=mapsMarkerPro.admin,O=D("#mapSettings").serialize(),I=wp.media({title:mmpAdminL10n.map.chooseGpx,button:{text:mmpAdminL10n.map.choose},library:{type:["application/gpx","application/gpx+xml"]},multiple:!1}),B=new Tt("#address",function(t){D("#geocodingError").html(t)},function(t,e){mapsMarkerPro.admin.map.panTo([t,e]),D("#lat").val(t.toFixed(6)),D("#lng").val(e.toFixed(6))},D("#geocodingProvider").val(),mmpGeocoding,400,3),I.on("select",function(){var t=I.state().get("selection").first().toJSON();D("#gpxUrl").val(t.url),D("#updateGpx").click()}),A.on("settingsloaded",function(e){D("#filterList").empty(),Object.keys(e.filtersDetails).forEach(function(t){g(t,e.filtersDetails[t])}),v(),_()}),A.on("basemapsloaded",function(t){var i;D("input[name=basemapDefault]:checked").length||(D.each(t,function(t,e){if(A.map.hasLayer(e))return i=t,!1}),i&&D(".mmp-basemap").each(function(t,e){if(D("input[type=text]",e).val()===i)return D("input[type=radio]",e).prop("checked",!0),!1}))}),A.on("maploaded",function(){A.map.on("moveend",function(){D("#lat").val(A.map.getCenter().lat.toFixed(6)),D("#lng").val(A.map.getCenter().lng.toFixed(6))}),A.map.on("zoomend",function(){D("#zoom").val(A.map.getZoom().toFixed(1))}),A.on("controlsloaded",function(){O=D("#mapSettings").serialize(),D(".leaflet-control-layers-base .leaflet-control-layers-selector").change(function(){D(".mmp-basemap").each(function(t,e){var i=D("input[type=text]",e).val();if(A.map.hasLayer(A.basemaps[i]))return D("input[type=radio]",e).prop("checked",!0),!1})}),D(".leaflet-control-layers-overlays .leaflet-control-layers-selector").change(function(){D(".mmp-overlay").each(function(t,e){var i=D("input[type=text]",e).val(),i=A.map.hasLayer(A.overlays[i]);D("input[type=checkbox]",e).prop("checked",i)})}),D(".mmp-control-filters-selector").change(function(){var t=D(this).val(),e=D(this).prop("checked");D('input[name="filtersList['+t+'][active]"]').prop("checked",e)})}),A.map.on("pm:create",function(t){T(),D("#editShape").hide(),D("#editShape").appendTo(D("#mmp-tabDraw-settings"));var e=L(t.layer).toLowerCase();t.layer.options.name=mmpAdminL10n.geoJson[e],A.geoJson[A.id].addLayer(t.layer),w()}),A.map.on("pm:remove",function(t){T(),D("#editShape").hide(),D("#editShape").appendTo(D("#mmp-tabDraw-settings")),A.geoJson[A.id].removeLayer(t.layer),w()}),A.map.on("pm:cut",function(t){T(),D("#editShape").hide(),D("#editShape").appendTo(D("#mmp-tabDraw-settings")),A.geoJson[A.id].removeLayer(t.originalLayer),t.layer.options.name=t.originalLayer.options.name||"",A.geoJson[A.id].addLayer(t.layer),w()}),e(),x()}),A.on("geojsonloaded",function(){w()}),D("#chooseGpx").click(function(){I.open()}),D("#tabMap, #tabLayers, #tabControl, #tabMarker, #tabFilter, #tabList, #tabShare, #tabInteraction, #tabGpx, #tabDraw").click(function(){var t,e;t=D(this),e=D(".mmp-tablink.active").first().attr("id"),D(".mmp-tab").each(function(){D(this).hide()}),D(".mmp-tablink").each(function(){D(this).removeClass("active")}),D("#mmp-"+t.attr("id")+"-settings").show(),t.addClass("active"),(t="tabDraw"===t.attr("id"))&&"tabDraw"!==e?b(!0):t||"tabDraw"!==e||b(!1)}),D("#tabMap").trigger("click"),D("#advancedSettings").change(function(){D.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_advanced_map_settings_state",nonce:D("#nonce").val(),state:D("#advancedSettings").prop("checked")?1:0},beforeSend:t})}),D("#deleteMap").click(function(t){D.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:D("#nonce").val(),con:0,id:D("#id").val()}}).done(function(t){t.success&&confirm(t.response.message)&&D.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:D("#nonce").val(),con:1,id:t.response.id}}).done(function(t){t.success&&(O=D("#mapSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_maps")})})}),D("#panelColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(t){D(this).data("changed",!1),D("#panel").prop("checked",!0),D("#panel").trigger("change")},move:function(t){i(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),i(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?i(t.toHexString("hex3")):i(D(this).val())}}),D("#gpxTrackColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(t){D(this).data("changed",!1)},move:function(t){o(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),o(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?o(t.toHexString("hex3")):o(D(this).val())}}),D("#gpxWaypointsColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(t){D(this).data("changed",!1),D("#gpxWaypoints").prop("checked",!0),D("#gpxWaypoints").trigger("change"),D("#gpxWaypointsStroke").prop("checked",!0),D("#gpxWaypointsStroke").trigger("change")},move:function(t){a(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),a(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?a(t.toHexString("hex3")):a(D(this).val())}}),D("#gpxWaypointsFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(t){D(this).data("changed",!1),D("#gpxWaypoints").prop("checked",!0),D("#gpxWaypoints").trigger("change")},move:function(t){l(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),l(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?l(t.toHexString("hex3")):l(D(this).val())}}),D("#mapSettings").submit(function(t){t.preventDefault(),t.stopPropagation(),D.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map",settings:D("#mapSettings").serialize(),geoJson:JSON.stringify(k())},beforeSend:function(){var t;t=D("#save"),D("#save").prop("disabled",!0),D(t).addClass("mmp-button-loading")}}).done(function(t){t.success?(O=D("#mapSettings").serialize(),"new"==D("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.response.id):D('<div class="notice notice-success"><p>'+t.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){D(this).remove()})):D('<div class="notice notice-error"><p>'+t.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){D(this).remove()})}).always(function(){var t;t=D("#save"),D(t).removeClass("mmp-button-loading"),D("#save").prop("disabled",!1)})}),D("#saveDefaultsLink").click(function(t){t.preventDefault(),t.stopPropagation(),D(this).hide(),D(".mmp-save-defaults").show()}),D("#saveDefaultsConfirm").click(function(t){D.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map_defaults",settings:D("#mapSettings").serialize()},beforeSend:function(){D("#saveDefaultsConfirm").prop("disabled",!0),D("#saveDefaultsCancel").prop("disabled",!0),D(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){D(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),D(".mmp-save-defaults").fadeOut(500,function(){D("#saveDefaultsConfirm").prop("disabled",!1),D("#saveDefaultsCancel").prop("disabled",!1),D("#saveDefaultsLink").show()})})}),D("#saveDefaultsCancel").click(function(t){D(".mmp-save-defaults").hide(),D("#saveDefaultsLink").show()}),D("#fitMarkers").click(function(){A.fitVisibleMarkers()}),D("#name").change(function(){A.settings.name=D(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),A.loadPanel()}),D("#width, input[name=widthUnit], #height, input[name=heightUnit]").change(function(){D("#widthUnitPct").prop("checked")&&100<D("#width").val()&&D("#width").val(100),A.settings.width=parseInt(D("#width").val()),A.settings.widthUnit=D("input[name=widthUnit]:checked").val(),A.settings.height=parseInt(D("#height").val()),A.settings.heightUnit=D("input[name=heightUnit]:checked").val(),A.setLayout()}),D("#lat, #lng").change(function(){var t=parseFloat(D("#lat").val()),e=parseFloat(D("#lng").val());A.map.panTo([t,e])}),D("#zoom, #minZoom, #maxZoom, #zoomStep").change(function(){A.map.options.minZoom=parseFloat(D("#minZoom").val()),A.map.options.maxZoom=parseFloat(D("#maxZoom").val()),A.map.options.zoomSnap=parseFloat(D("#zoomStep").val()),A.map.options.zoomDelta=parseFloat(D("#zoomStep").val()),A.map.setZoom(parseFloat(D("#zoom").val()))}),D("#maxBounds").change(function(){A.map.setMaxBounds(A.strToBounds(D("#maxBounds").val()))}),D("#restrictView").click(function(){D("#minZoom").val(A.map.getZoom()),A.map.options.minZoom=parseFloat(D("#minZoom").val()),D("#maxBounds").val(A.boundsToStr(A.map.getBounds())),A.map.setMaxBounds(A.strToBounds(D("#maxBounds").val()))}),D("#panel").change(function(){A.settings.panel=D(this).prop("checked"),A.loadPanel()}),D("#panelFs, #panelGpx, #panelGeoJson, #panelKml, #panelGeoRss").change(function(){A.settings[D(this).attr("id")]=D(this).prop("checked"),A.loadPanel()}),D("#basemapList").sortable({handle:".mmp-handle",update:p}),D("#basemapsAdd").click(function(){!function(t,e){var i=D('<li class="mmp-basemap" data-id="'+t+'"></li>'),n=D("<div></div>");i.append(n);var r=D('<input type="hidden" name="basemaps[]" value="'+t+'" />');n.append(r),r=D('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />'),n.append(r),(t=D('<input type="radio" name="basemapDefault" value="'+t+'" />')).change(function(){A.settings.basemapDefault=D(this).val(),A.loadBasemaps(),A.loadControls()}),n.append(" ").append(t),e=D('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />'),n.append(" ").append(e),(e=D('<i class="dashicons dashicons-no mmp-remove-basemap"></i>')).click(function(){D(this).parent().parent().remove(),h(),p()}),n.append(" ").append(e),D("#basemapList").append(i)}(D("#basemapsList").val(),D("#basemapsList option:checked").text()),h(),p()}),D(".mmp-remove-basemap").click(function(){D(this).parent().parent().remove(),h(),p()}),h(),D("input[name=basemapDefault]").change(function(){A.settings.basemapDefault=D(this).val(),A.loadBasemaps(),A.loadControls()}),D("#overlayList").sortable({handle:".mmp-handle",update:f}),D("#overlaysAdd").click(function(){!function(t,e){var i=D('<li class="mmp-overlay" data-id="'+t+'"></li>'),n=D("<div></div>");i.append(n);var r=D('<input type="hidden" name="overlays[]" value="'+t+'" />');n.append(r),r=D('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />'),n.append(r),(t=D('<input type="checkbox" name="overlaysActive[]" value="'+t+'" />')).change(function(){m(),A.loadOverlays(),A.loadControls()}),n.append(" ").append(t),e=D('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />'),n.append(" ").append(e),(e=D('<i class="dashicons dashicons-no mmp-remove-overlay"></i>')).click(function(){D(this).parent().parent().remove(),d(),f()}),n.append(" ").append(e),D("#overlayList").append(i)}(D("#overlaysList").val(),D("#overlaysList option:checked").text()),d(),f()}),D(".mmp-remove-overlay").click(function(){D(this).parent().parent().remove(),d(),f()}),d(),D('input[name="overlaysActive[]"]').change(function(){m(),A.loadOverlays(),A.loadControls()}),D("input[name=attributionPosition], #attributionCondensed").change(function(){A.settings.attributionPosition=D("input[name=attributionPosition]:checked").val(),A.settings.attributionCondensed=D("#attributionCondensed").prop("checked"),A.loadControls()}),D("input[name=zoomControlPosition]").change(function(){A.settings.zoomControlPosition=D("input[name=zoomControlPosition]:checked").val(),A.loadControls()}),D("input[name=fullscreenPosition]").change(function(){A.settings.fullscreenPosition=D("input[name=fullscreenPosition]:checked").val(),A.loadControls()}),D("input[name=resetPosition], #resetOnDemand").change(function(){A.settings.resetPosition=D("input[name=resetPosition]:checked").val(),A.settings.resetOnDemand=D("#resetOnDemand").prop("checked"),A.loadControls()}),D("input[name=locatePosition]").change(function(){A.settings.locatePosition=D("input[name=locatePosition]:checked").val(),A.loadControls()}),D("input[name=scalePosition]").change(function(){A.settings.scalePosition=D("input[name=scalePosition]:checked").val(),A.loadControls()}),D("#scaleMaxWidth, #scaleMetric, #scaleImperial").change(function(){A.settings.scaleMaxWidth=D("#scaleMaxWidth").val(),A.settings.scaleMetric=D("#scaleMetric").prop("checked"),A.settings.scaleImperial=D("#scaleImperial").prop("checked"),A.loadControls()}),D("input[name=layersPosition], #layersCollapsed").change(function(){A.settings.layersPosition=D("input[name=layersPosition]:checked").val(),A.settings.layersCollapsed=D("#layersCollapsed").val(),A.loadControls()}),D("input[name=filtersPosition], #filtersCollapsed, #filtersOrderBy, #filtersSortOrder").change(function(){D("#filtersSortOrder").prop("disabled","custom"==D("#filtersOrderBy").val()),A.settings.filtersPosition=D("input[name=filtersPosition]:checked").val(),A.settings.filtersCollapsed=D("#filtersCollapsed").val(),A.settings.filtersOrderBy=D("#filtersOrderBy").val(),A.settings.filtersSortOrder=D("#filtersSortOrder").val(),A.loadControls()}),D("input[name=gpxControlPosition], #gpxControlCollapsed").change(function(){A.settings.gpxControlPosition=D("input[name=gpxControlPosition]:checked").val(),A.settings.gpxControlCollapsed=D("#gpxControlCollapsed").val(),A.loadControls()}),D("#filtersButtons, #filtersIcon, #filtersName, #filtersCount").change(function(){A.settings[D(this).attr("id")]=D(this).prop("checked"),A.loadControls()}),D("input[name=minimapPosition], #minimapWidth, #minimapHeight, #minimapCollapsedWidth, #minimapCollapsedHeight, #minimapZoomLevelOffset, #minimapZoomLevelFixed, #minimapMinimized").change(function(){A.settings.minimapPosition=D("input[name=minimapPosition]:checked").val(),A.settings.minimapWidth=D("#minimapWidth").val(),A.settings.minimapHeight=D("#minimapHeight").val(),A.settings.minimapCollapsedWidth=D("#minimapCollapsedWidth").val(),A.settings.minimapCollapsedHeight=D("#minimapCollapsedHeight").val(),A.settings.minimapZoomLevelOffset=parseFloat(D("#minimapZoomLevelOffset").val()),A.settings.minimapZoomLevelFixed=parseFloat(D("#minimapZoomLevelFixed").val())||null,A.settings.minimapMinimized=D("#minimapMinimized").val(),A.loadControls()}),D("#filtersAllMarkers").change(function(){A.settings.filtersAllMarkers=D(this).prop("checked"),e(),s()}),D("#filtersGeoJson").change(function(){A.settings.filtersGeoJson=D(this).prop("checked"),s()}),D("#filterList").sortable({handle:".mmp-handle",update:function(){_(),A.loadControls()}}),D(".mmp-gpx-start-icon").click(function(){D("#iconTarget").val("gpx-start"),D("#icons").show()}),D(".mmp-gpx-end-icon").click(function(){D("#iconTarget").val("gpx-end"),D("#icons").show()}),D("#iconsList img").click(function(){var t=D("#iconTarget").val(),e=D(this).attr("src"),i=D(this).data("icon");"gpx-start"===t?(D("#gpxStartIcon").val(i),D(".mmp-gpx-start-icon").attr("src",e),y()):"gpx-end"===t?(D("#gpxEndIcon").val(i),D(".mmp-gpx-end-icon").attr("src",e),y()):(D('input[name="filtersList['+t+'][icon]"]').val(i),D('.mmp-filter[data-id="'+t+'"] .mmp-filter-icon').attr("src",e),_(),A.loadControls()),D("#icons").hide()}),D("#filtersAdd").click(function(){var t=D("#filtersMapList option:checked").text().replace(/\[(.+)\] /,"").replace(/ \((.+)\)$/,"");g(D("#filtersMapList").val(),{name:t}),v(),_(),s()}),v(),D(".mmp-remove-filter").click(function(){D(this).parent().parent().remove(),v(),_()}),D("#markerOpacity").change(function(){Object.keys(A.markers).forEach(function(t){A.markers[t].setOpacity(parseFloat(D("#markerOpacity").val()))})}),D("#tooltip").change(function(){var e=D(this).prop("checked");Object.keys(A.markers).forEach(function(t){A.markers[t].unbindTooltip(),e&&void 0!==A.tooltips[t]&&A.markers[t].bindTooltip(A.tooltips[t],A.tooltip)})}),D("#tooltipDirection, #tooltipPermanent, #tooltipSticky, #tooltipOpacity").change(function(){A.tooltip.direction=D("#tooltipDirection").val(),A.tooltip.permanent=D("#tooltipPermanent").prop("checked"),A.tooltip.sticky=D("#tooltipSticky").prop("checked"),A.tooltip.opacity=parseFloat(D("#tooltipOpacity").val()),D("#tooltip").trigger("change")}),D("#popupCenterOnMap, #popupMarkername, #popupAddress, #popupCoordinates, #popupDirections, #popupShare, #popupMinWidth, #popupMaxWidth, #popupMaxHeight").change(function(){A.settings.popupCenterOnMap=D("#popupCenterOnMap").prop("checked"),A.settings.popupMarkername=D("#popupMarkername").prop("checked"),A.settings.popupAddress=D("#popupAddress").prop("checked"),A.settings.popupCoordinates=D("#popupCoordinates").prop("checked"),A.settings.popupDirections=D("#popupDirections").prop("checked"),A.settings.popupShare=D("#popupShare").prop("checked"),A.settings.popupMinWidth=parseInt(D("#popupMinWidth").val()),A.settings.popupMaxWidth=parseInt(D("#popupMaxWidth").val()),A.settings.popupMaxHeight=parseInt(D("#popupMaxHeight").val()),A.updatePopups()}),D("#showCoverageOnHover, #spiderfyDistanceMultiplier").change(function(){A.settings.clustering&&(A.markerGroup.remove(),A.markerGroup.options.showCoverageOnHover=D("#showCoverageOnHover").prop("checked"),A.markerGroup.options.spiderfyDistanceMultiplier=parseFloat(D("#spiderfyDistanceMultiplier").val()),A.markerGroup.addTo(A.map))}),D("#list, #listWidth, #listBreakpoint").change(function(){var t=A.settings.list,e=parseInt(D("#list").val());A.settings.list=e;var i=parseInt(D("#listWidth").val());A.settings.listWidth=i,A.containers.list&&(A.containers.list.style.flexBasis=i+"px"),A.settings.listBreakpoint=parseInt(D("#listBreakpoint").val()),A.setLayout(),(0===t&&0<e||0<t&&0===e)&&(A.loadList(),A.getList(),A.setLayout())}),D("#listSearch, #listIcon, #listName, #listPopup, #listAddress, #listDistance").change(function(){A.settings[D(this).attr("id")]=D(this).prop("checked"),A.loadList(),A.getList()}),D("#listDir, #listFs, #listShare").change(function(){A.settings.listDir=D("#listDir").prop("checked"),A.settings.listFs=D("#listFs").prop("checked"),A.settings.listShare=D("#listShare").prop("checked"),A.loadList(),A.getList()}),D("#listDistanceUnit, #listDistancePrecision, #listOrderBy, #listSortOrder, #listLimit, #listAction").change(function(){A.settings.listDistanceUnit=D("#listDistanceUnit").val(),A.settings.listDistancePrecision=parseInt(D("#listDistancePrecision").val()),A.settings.listOrderBy=D("#listOrderBy").val(),A.settings.listSortOrder=D("#listSortOrder").val(),A.settings.listLimit=parseInt(D("#listLimit").val()),A.settings.listAction=D("#listAction").val(),A.loadList(),A.getList()}),D("#listOrderById, #listOrderByName, #listOrderByAddress, #listOrderByDistance, #listOrderByIcon, #listOrderByCreated, #listOrderByUpdated").change(function(){A.settings[D(this).attr("id")]=D(this).prop("checked"),A.loadList(),A.getList()}),D("#listLocation").change(function(){A.settings.listLocation=D(this).prop("checked"),A.loadList(),A.getList()}),D("#listGeocodingProvider").change(function(){A.settings.listGeocodingProvider=D("#listGeocodingProvider").val(),A.list.geocoding.provider=D("#listGeocodingProvider").val(),"function"==typeof A.list.geocoding.reload&&A.list.geocoding.reload()}),D("#listGeocodingDrawCircle").change(function(){A.settings.listGeocodingDrawCircle=D(this).prop("checked"),A.updateCircle()}),D("#listGeocodingStroke").change(function(){A.settings.listGeocodingStroke=D(this).prop("checked"),A.updateCircle()}),D("#listGeocodingWeight").change(function(){A.settings.listGeocodingWeight=parseInt(D(this).val()),A.updateCircle()}),D("#listGeocodingColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(t){D(this).data("changed",!1)},move:function(t){n(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),n(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?n(t.toHexString("hex3")):n(D(this).val())}}),D("#listGeocodingFill").change(function(){A.settings.listGeocodingFill=D(this).prop("checked"),A.updateCircle()}),D("#listGeocodingFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){r(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),r(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?r(t.toHexString("hex3")):r(D(this).val())}}),D("#listGeocodingFillOpacity").change(function(){A.settings.listGeocodingFillOpacity=parseFloat(D(this).val()),A.updateCircle()}),D("#shareUrl, #shareText, #shareFacebook, #shareTwitter, #shareLinkedIn, #shareWhatsApp, #shareEmail").change(function(){A.settings.shareUrl=D("#shareUrl").val(),A.settings.shareText=D("#shareText").val(),A.settings.popupShare=D("#popupShare").prop("checked"),A.settings.listShare=D("#listShare").prop("checked"),A.settings.shareFacebook=D("#shareFacebook").prop("checked"),A.settings.shareTwitter=D("#shareTwitter").prop("checked"),A.settings.shareLinkedIn=D("#shareLinkedIn").prop("checked"),A.settings.shareWhatsApp=D("#shareWhatsApp").prop("checked"),A.settings.shareEmail=D("#shareEmail").prop("checked")}),D("#responsive").change(function(){A.settings.responsive=D(this).prop("checked"),A.setLayout()}),D("#boxZoom").change(function(){D(this).prop("checked")?A.map.boxZoom.enable():A.map.boxZoom.disable()}),D("#doubleClickZoom").change(function(){D(this).prop("checked")?A.map.doubleClickZoom.enable():A.map.doubleClickZoom.disable()}),D("#dragging").change(function(){D(this).prop("checked")?A.map.dragging.enable():A.map.dragging.disable()}),D("#inertia, #inertiaDeceleration, #inertiaMaxSpeed").change(function(){A.map.options.inertia=D("#inertia").prop("checked"),A.map.options.inertiaDeceleration=parseInt(D("#inertiaDeceleration").val()),A.map.options.inertiaMaxSpeed=parseInt(D("#inertiaMaxSpeed").val())}),D("#keyboard").change(function(){D(this).prop("checked")?A.map.keyboard.enable():A.map.keyboard.disable()}),D("#scrollWheelZoom").change(function(){D(this).prop("checked")?A.map.scrollWheelZoom.enable():A.map.scrollWheelZoom.disable()}),D("#touchZoom").change(function(){D(this).prop("checked")?A.map.touchZoom.enable():A.map.touchZoom.disable()}),D("#updateGpx").click(function(){var t=D("#gpxUrl").val();(A.settings.gpxUrl=t)?(A.on("gpxloaded",E),A.getGpx().then(A.loadControls)):(A.off("gpxloaded",E),A.gpx={},A.addGpx(),A.loadControls())}),D("#gpxShowStartIcon, #gpxShowEndIcon").change(function(){A.settings.gpxShowStartIcon=D("#gpxShowStartIcon").prop("checked"),A.settings.gpxShowEndIcon=D("#gpxShowEndIcon").prop("checked"),A.setTrackIcons()}),D("#gpxIntervalMarkers").change(function(){A.settings.gpxIntervalMarkers=D(this).prop("checked"),A.setIntervalMarkers()}),D("#gpxTrackWeight").change(function(){A.settings.gpxTrackWeight=parseInt(D(this).val()),A.setTrackStyle()}),D("#gpxTrackOpacity").change(function(){A.settings.gpxTrackOpacity=parseFloat(D(this).val()),A.setTrackStyle()}),D("#gpxMeta, #gpxMetaUnits, #gpxMetaHideMissing").change(function(){A.settings.gpxMeta=D("#gpxMeta").prop("checked"),A.settings.gpxMetaUnits=D("#gpxMetaUnits").val(),A.settings.gpxMetaHideMissing=D("#gpxMetaHideMissing").prop("checked"),A.setTrackMeta()}),D("#gpxMetaName, #gpxMetaDesc, #gpxMetaStart, #gpxMetaEnd, #gpxMetaTotal, #gpxMetaMoving, #gpxMetaDistance, #gpxMetaPace, #gpxMetaHeartRate, #gpxMetaElevation, #gpxMetaDownload").change(function(){A.settings[D(this).attr("id")]=D(this).prop("checked"),A.setTrackMeta()}),D("#gpxWaypoints").change(function(){A.settings.gpxWaypoints=D(this).prop("checked"),A.setWaypoints()}),D("#gpxWaypointsRadius").change(function(){A.settings.gpxWaypointsRadius=parseInt(D(this).val()),A.setWaypointStyle()}),D("#gpxWaypointsStroke").change(function(){A.settings.gpxWaypointsStroke=D(this).prop("checked"),A.setWaypointStyle()}),D("#gpxWaypointsWeight").change(function(){A.settings.gpxWaypointsWeight=parseInt(D(this).val()),A.setWaypointStyle()}),D("#gpxWaypointsFillOpacity").change(function(){A.settings.gpxWaypointsFillOpacity=parseFloat(D(this).val()),A.setWaypointStyle()}),D("#gpxChart").change(function(){A.settings.gpxChart=D(this).prop("checked"),A.loadChart(),A.addElevationChart()}),D("#gpxChartUnits, #gpxChartYOffset").change(function(){A.settings.gpxChartUnits=D(this).val(),A.settings.gpxChartYOffset=D("#gpxChartYOffset").val(),A.updateElevationChart(!0)}),D("#gpxChartHeight").change(function(){var t=parseInt(D(this).val());A.settings.gpxChartHeight=t,A.containers.chartWrap&&(A.containers.chartWrap.style.height=t+"px")}),D("#gpxChartReverseX, #gpxChartReverseY").change(function(){A.settings.gpxChartReverseX=D("#gpxChartReverseX").prop("checked"),A.settings.gpxChartReverseY=D("#gpxChartReverseY").prop("checked"),A.updateElevationChart()}),D("#gpxChartYMin, #gpxChartYMax").change(function(){A.settings.gpxChartYMin=D("#gpxChartYMin").val(),A.settings.gpxChartYMax=D("#gpxChartYMax").val(),A.updateElevationChart()}),D("#gpxChartBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartBgColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartBgColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartBgColor=t.toRgbString():A.settings.gpxChartBgColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartGridLinesColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartGridLinesColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartGridLinesColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartGridLinesColor=t.toRgbString():A.settings.gpxChartGridLinesColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartTicksFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartTicksFontColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartTicksFontColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartTicksFontColor=t.toRgbString():A.settings.gpxChartTicksFontColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartLineWidth").change(function(){A.settings.gpxChartLineWidth=parseInt(D(this).val()),A.updateElevationChartThrottled()}),D("#gpxChartLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartLineColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartLineColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartLineColor=t.toRgbString():A.settings.gpxChartLineColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartFill").change(function(){A.settings.gpxChartFill=D(this).prop("checked"),A.updateElevationChartThrottled()}),D("#gpxChartFillColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartFillColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartFillColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartFillColor=t.toRgbString():A.settings.gpxChartFillColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartTooltipBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartTooltipBgColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartTooltipBgColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartTooltipBgColor=t.toRgbString():A.settings.gpxChartTooltipBgColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartTooltipFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartTooltipFontColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartTooltipFontColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartTooltipFontColor=t.toRgbString():A.settings.gpxChartTooltipFontColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartIndicatorLineWidth").change(function(){A.settings.gpxChartIndicatorLineWidth=parseInt(D(this).val()),A.updateElevationChartThrottled()}),D("#gpxChartIndicatorLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){A.settings.gpxChartIndicatorLineColor=t.toRgbString(),A.updateElevationChartThrottled()},change:function(t){D(this).data("changed",!0),A.settings.gpxChartIndicatorLineColor=t.toRgbString(),A.updateElevationChartThrottled()},hide:function(t){D(this).data("changed")?A.settings.gpxChartIndicatorLineColor=t.toRgbString():A.settings.gpxChartIndicatorLineColor=D(this).val(),A.updateElevationChartThrottled()}}),D("#gpxChartLocator").change(function(){A.settings.gpxChartLocator=D(this).prop("checked")}),D("#gpxChartLocatorRadius").change(function(){A.settings.gpxChartLocatorRadius=parseInt(D(this).val()),A.setChartStyle()}),D("#gpxChartLocatorStroke").change(function(){A.settings.gpxChartLocatorStroke=D(this).prop("checked"),A.setChartStyle()}),D("#gpxChartLocatorColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){c(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),c(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?c(t.toHexString("hex3")):c(D(this).val())}}),D("#gpxChartLocatorWeight").change(function(){A.settings.gpxChartLocatorWeight=parseInt(D(this).val()),A.setChartStyle()}),D("#gpxChartLocatorFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D(this).data("changed",!1)},move:function(t){u(t.toHexString("hex3"))},change:function(t){D(this).data("changed",!0),u(t.toHexString("hex3"))},hide:function(t){D(this).data("changed")?u(t.toHexString("hex3")):u(D(this).val())}}),D("#gpxChartLocatorFillOpacity").change(function(){A.settings.gpxChartLocatorFillOpacity=parseFloat(D(this).val()),A.setChartStyle()}),D("#addGeoJson").click(function(){D("#geoJsonModal").slideDown(500)}),D("#geoJsonCancel").click(function(){D(".mmp-json-error").remove(),D("#geoJsonText").val(""),D("#geoJsonModal").slideUp(500)}),D("#geoJsonSave").click(function(){D(".mmp-json-error").remove();var t,e=D("#geoJsonText").val(),i=A.checkJson(e);if(!1!==i){try{t=i,R().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return R().circle(e,t.properties.radius)},style:function(t){for(var e=S(),i=["stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule"],n=0;n<i.length;n++){var r=i[n];if(void 0!==t.properties[r])switch(r){case"weight":e[r]=parseInt(t.properties[r]);break;case"opacity":case"fillOpacity":e[r]=parseFloat(t.properties[r]);break;default:e[r]=t.properties[r]}}return e},onEachFeature:function(t,e){var i=L(e);!1!==i&&(e.options.name=t.properties.name||mmpAdminL10n.geoJson[i.toLowerCase()],e.options.popup=t.properties.popup||"",e.addTo(A.map),e.addTo(A.geoJson[A.id]))}}),w()}catch(t){return void D('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidGeoJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,function(){D(this).remove()})}D("#geoJsonText").val(""),D("#geoJsonModal").slideUp(500)}else D('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,function(){D(this).remove()})}),D("#drawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D("#drawStroke").prop("checked",!0),D("#drawStroke").trigger("change")},change:function(t){D("#drawStrokeColor").val(t.toHexString("hex3")),x()}}),D("#editDrawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D("#editDrawStroke").prop("checked",!0),D("#editDrawStroke").trigger("change")},move:function(t){D("#editDrawStrokeColor").val(t.toHexString("hex3")),C()},change:function(t){D("#editDrawStrokeColor").val(t.toHexString("hex3")),C()},hide:function(t){D("#editDrawStrokeColor").val(t.toHexString("hex3")),C()}}),D("#drawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D("#drawFill").prop("checked",!0),D("#drawFill").trigger("change")},change:function(t){D("#drawFillColor").val(t.toHexString("hex3")),x()}}),D("#editDrawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){D("#editDrawFill").prop("checked",!0),D("#editDrawFill").trigger("change")},move:function(t){D("#editDrawFillColor").val(t.toHexString("hex3")),C()},change:function(t){D("#editDrawFillColor").val(t.toHexString("hex3")),C()},hide:function(t){D("#editDrawFillColor").val(t.toHexString("hex3")),C()}}),D("#drawStroke, #drawStrokeWeight, #drawStrokeOpacity, #drawLineCap, #drawLineJoin, #drawFill, #drawFillOpacity, #drawFillRule").change(function(){x()}),D("#editDrawStroke, #editDrawStrokeWeight, #editDrawStrokeOpacity, #editDrawLineCap, #editDrawLineJoin, #editDrawFill, #editDrawFillOpacity, #editDrawFillRule").change(function(){C()}),D("#editDrawCancel").click(function(){T(),D("#editShape").slideUp(500)}),D("#editDrawSave").click(function(){C();var t=A.geoJson[A.id].getLayer(D("#shapeId").val());void 0!==t&&(t.options.popup=D("#editDrawPopup").val(),A.updatePopup(t,!0)),D("#shapeBackup").val(""),D("#editShape").slideUp(500)}),D("#editDrawDelete").click(function(){T();var t=A.geoJson[A.id].getLayer(D("#shapeId").val());void 0!==t&&(D("#editShape").hide(),D("#editShape").appendTo(D("#mmp-tabDraw-settings")),A.geoJson[A.id].removeLayer(t),w())}),D("#shapesSelectAll").click(function(){D('input[name="shapesSelected[]"]').each(function(t,e){D(e).prop("checked",D("#shapesSelectAll").prop("checked"))})}),D("#shapesDeleteSelected").click(function(){T(),D("#editShape").hide(),D("#editShape").appendTo(D("#mmp-tabDraw-settings")),D('input[name="shapesSelected[]"]:checked').each(function(t,e){A.geoJson[A.id].removeLayer(D(e).val())}),w()}),D(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&D("#icons").hide()}),D("#geocodingProvider").change(function(){B.provider=D("#geocodingProvider").val(),B.reload()}),D(".mmp-shortcode").click(function(){D(this).select()}),t(),B.init(),window.onbeforeunload=function(){return O!==D("#mapSettings").serialize()?"":null},localStorage.getItem("saved")&&(D('<div class="notice notice-success"><p>'+mmpAdminL10n.map.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){D(this).remove()}),localStorage.removeItem("saved")),D("#save").prop("disabled",!1)},l=i(6192),Dt=i.n(l);dt=function(){function o(t){s("#pagination_top button, #pagination_bottom button").prop("disabled",t),s("#page_top, #page_bottom").prop("disabled",t),s("#perpage_top, #perpage_bottom").prop("disabled",t),s("#search_top, #search_bottom").prop("disabled",t)}function a(t,e,i,n,r){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_map_list",nonce:s("#mapListNonce").val(),page:t,limit:e,search:i,sort:n,order:r},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0),s("#map_list").empty(),s("#map_list").addClass("mmp-page-loading")}}).done(function(t){s("#mapcount_top, #mapcount_bottom").html(t.total),s("#previous_top, #previous_bottom").val(t.page-1),s("#next_top, #next_bottom").val(t.page+1),s("#last_top, #last_bottom").val(Math.ceil(t.total/t.limit)),s("#page_top, #page_bottom").val(t.page),s("#pagecount_top, #pagecount_bottom").html(Math.ceil(t.total/t.limit)),s("#perpage_top, #perpage_bottom").val(t.limit),s("#search_top, #search_botom").val(t.search),s("#map_list").html(t.html),s('.mmp-sortable[data-orderby="'+t.sort+'"]').addClass("mmp-sorted-"+t.order),s("#selectAll").click(function(){s('input[name="selected[]"]').each(function(t,e){s(e).prop("checked",s("#selectAll").prop("checked"))})}),s('input[name="selected[]"]').change(function(){var i=!0;s('input[name="selected[]"]').each(function(t,e){i=i&&s(e).prop("checked")}),s("#selectAll").prop("checked",i)}),s(".mmp-sortable").click(function(t){t.preventDefault(),t.stopPropagation();t=s("#sortorder").val(),t=s("#orderby").val()==s(this).data("orderby")&&"asc"==t?"desc":"asc";s("#sortorder").val(t),s("#orderby").val(s(this).data("orderby")),a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s(".mmp-table td:nth-child(3)").mouseenter(function(){s(".mmp-action",s(this)).css("visibility","visible")}),s(".mmp-table td:nth-child(3)").mouseleave(function(){s(".mmp-action",s(this)).css("visibility","hidden")}),s(".mmp-delete").click(function(t){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:0,id:s(this).data("id")},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){t.success&&confirm(t.data.message)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:1,id:t.data.id},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){t.success&&a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1),s("#bulkActionSubmit").prop("disabled",!1)})}).always(function(){o(!1),s("#bulkActionSubmit").prop("disabled",!1)})}),s(".mmp-shortcode").click(function(){s(this).select()}),s(".mmp-qrcode-link").click(function(t){t.preventDefault(),t.stopPropagation();var e=Dt()(0,"H"),i=s(this).data("url");e.addData(i),e.make();t=e.createDataURL(8,0),i=s(this).data("id"),e=s("#qrcode_"+i),t=s('<a href="'+t+'" download="qr-code-map-'+i+'.gif"><img src="'+t+'" /></a>');e.html(t),s("img",e).click()})}).always(function(){o(!1),s("input[name=bulkAction]").prop("checked",!1),s("#map_list").removeClass("mmp-page-loading")})}var s;(s=jQuery)("input[name=bulkAction]").change(function(){s("#bulkActionSubmit").prop("disabled",!1)}),s("#pagination_top button").click(function(){a(s(this).val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#pagination_bottom button").click(function(){a(s(this).val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_top, #perpage_top").change(function(){a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_bottom, #perpage_bottom").change(function(){a(s("#page_bottom").val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_top").change(function(){a(1,s("#perpage_top").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_bottom").change(function(){a(1,s("#perpage_bottom").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#mapList").submit(function(t){var e;switch(t.preventDefault(),t.stopPropagation(),s("input[name=bulkAction]:checked").val()){case"duplicate":e=mmpAdminL10n.maps.bulkDuplicate;break;case"duplicate-assign":e=mmpAdminL10n.maps.bulkDuplicateAssign;break;case"delete":e=mmpAdminL10n.maps.bulkDelete;break;case"delete-assign":e=mmpAdminL10n.maps.bulkDeleteAssign.replace("{map}",s("#assignTarget").val());break;default:return}confirm(e)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_maps",nonce:s("#bulkNonce").val(),data:s("#mapList").serialize()},beforeSend:function(){o(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1),s("input[name=bulkAction]").prop("checked",!1)})}),s("#mmp-maps-screen-options-apply").click(function(){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_maps_screen_options",nonce:s("#screenoptionnonce").val(),hiddenColumns:s(".mmp-maps-column").not(":checked").map(function(){return this.value}).get(),perPage:s("#mmp-maps-per-page").val()},beforeSend:function(){o(!0)}}).done(function(t){s("#show-settings-link").click(),a(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){o(!1)})}),a()},i(4953);a=function(){var c=this;this.currentValues,this.map,this.basemaps={},this.marker,this.icon,this.geoJson=R().geoJSON(),function(o){function t(t){t=t||mmpL10n.popup.info,"undefined"!=typeof switchEditors&&(t=switchEditors.wpautop(t)),c.marker.setPopupContent(t)}function e(){window.open(o("#link").val(),"_blank")}function a(){"popup"===o("input[name=action]:checked").val()?(o("#link").val(""),o("#link_settings").hide(),o("#editor").show(),void 0!==c.marker&&(c.marker.bindPopup("",c.popup),c.marker.openPopup(),c.marker.off("click",e),t(o("#popup").val()))):(o("#editor").hide(),o("#link_settings").show(),void 0!==c.marker&&(c.marker.closePopup(),c.marker.unbindPopup(),c.marker.on("click",e)))}function s(t){var e=t.lat,t=t.lng;e<-90?e=-90:90<e&&(e=90),t<-180?t=-180:180<t&&(t=180),c.marker.setLatLng([e,t]),c.map.panTo(c.marker.getLatLng()),o("#lat").val(c.marker.getLatLng().lat.toFixed(6)),o("#lng").val(c.marker.getLatLng().lng.toFixed(6))}function l(){o("#iconTarget").val(o("input[name=icon]:checked").val()),c.icon.options.iconUrl=o("input[name=icon]:checked+img").attr("src"),c.marker.setIcon(c.icon),o("#uploadFile").val(""),o("#iconSearch").val(""),o("#iconList .mmp-radio").show(),o("#icons").hide()}function i(i){c.currentValues=o("#markerSettings").serialize(),c.map=R().map("maps-marker-pro-marker",{center:[i.lat,i.lng],zoom:i.zoom,minZoom:0,maxZoom:23,zoomSnap:.5,zoomDelta:.5,maxBounds:[[-90,-180],[90,180]],attributionControl:!1}),c.attributionControl=R().control.attribution({prefix:i.attributionPrefix}).addTo(c.map),c.attributionControl._esriAttributionAdded=!0,o.each(i.availableBasemaps,function(t,e){1!==e.type&&3!==e.type&&4!==e.type&&5!==e.type&&6!==e.type||(e.options.minZoom=0,e.options.maxZoom=23,e.options.noWrap=!0,e.options.bounds=e.options.bounds||[[-90,-180],[90,180]]),1==e.type?e.wms?c.basemaps[t]=R().tileLayer.wms(e.url,e.options):c.basemaps[t]=R().tileLayer(e.url,e.options):2==e.type&&i.googleApiKey?c.basemaps[t]=new(R().gridLayer.googleMutant)(e.options):3==e.type&&i.bingApiKey?(e.options.bingMapsKey=i.bingApiKey,e.options.culture=i.bingCulture,c.basemaps[t]=R().tileLayer.bing(e.options)):4==e.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(e.options.apiKey=i.hereApiKey,e.options.appId=i.hereAppId,e.options.appCode=i.hereAppCode,c.basemaps[t]=R().tileLayer.here(e.options)):5==e.type&&i.tomApiKey?(e.options.apiKey=i.tomApiKey,c.basemaps[t]=R().tileLayer.tomTom(e.options)):6==e.type&&(e.labels?c.basemaps[t]=R().layerGroup([mt(e.key,e.options),mt(e.labels,e.options)]):c.basemaps[t]=mt(e.key,e.options))}),void 0!==c.basemaps[i.basemap]?c.basemaps[i.basemap].addTo(c.map):(t=Object.keys(c.basemaps)).length&&c.basemaps[t[0]].addTo(c.map),c.geoJson=R().geoJSON(null,{pointToLayer:function(t,e){return R().marker(e,{pmIgnore:!0,interactive:!1,icon:R().icon({iconUrl:t.properties.icon,iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor})})}}).addTo(c.map),c.icon=R().icon({iconUrl:i.icon?mmpVars.iconsUrl+i.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor}),c.popup={maxWidth:400,minWidth:200,maxHeight:400,className:"mmp-popup"},c.marker=R().marker([i.lat,i.lng],{icon:c.icon,draggable:!0}).addTo(c.map),a(),c.map.on("click",function(t){s(t.latlng)}),c.map.on("zoomend",function(){o("#zoom").val(c.map.getZoom().toFixed(1))}),c.marker.on("dragend",function(t){s(c.marker.getLatLng())});var t={enableTime:!0,time_24hr:!/a(?!\\)/i.test(mmpAdminL10n.global.timeFormat.replace(/\\\\/g,"")),altInput:!0,altFormat:(mmpAdminL10n.global.dateFormat+" "+mmpAdminL10n.global.timeFormat).replace(/G(?!\\)/g,"H").replace(/h(?!\\)/g,"G").replace(/g(?!\\)/g,"h").replace(/S(?!\\)/g,"J").replace(/s(?!\\)/g,"S").replace(/a(?!\\)/g,"K").replace(/A(?!\\)/g,"K"),dateFormat:"Y-m-d H:i:S"},e=o("#scheduleFrom").flatpickr(t),n=o("#scheduleUntil").flatpickr(t);o("#scheduleFromClear").click(function(){e.clear()}),o("#scheduleUntilClear").click(function(){n.clear()}),o("#basemap").change(function(){o.each(c.basemaps,function(t,e){e.remove()}),void 0!==c.basemaps[o(this).val()]&&c.basemaps[o(this).val()].addTo(c.map)}),o("#previewMap").change(function(){o.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_preview_map_markers",id:o("#previewMap").val()},beforeSend:function(){c.geoJson.clearLayers()}}).done(function(t){t.features&&(c.geoJson.addData(t),o("#previewOpacity").trigger("input"))})}),o("#previewOpacity").on("input",R().Util.throttle(function(){var e=parseFloat(o("#previewOpacity").val());c.geoJson.eachLayer(function(t){t.setOpacity(e)})},100)),o("#lat, #lng").change(function(){var t=parseFloat(o("#lat").val()),e=parseFloat(o("#lng").val());s(R().latLng(t,e))}),o("#zoom").change(function(){c.map.setZoom(parseFloat(o("#zoom").val()))}),o("input[name=icon]").change(l),o("input[name=action]").change(a),o("#markerSettings").submit(function(t){t.preventDefault(),t.stopPropagation(),o.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker",settings:o("#markerSettings").serialize()},beforeSend:function(){var t;t=o("#save"),o("#save").prop("disabled",!0),o(t).addClass("mmp-button-loading")}}).done(function(t){t.success?(c.currentValues=o("#markerSettings").serialize(),"new"==o("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+t.response.id):o('<div class="notice notice-success"><p>'+t.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){o(this).remove()})):o('<div class="notice notice-error"><p>'+t.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){o(this).remove()})}).always(function(){var t;t=o("#save"),o(t).removeClass("mmp-button-loading"),o("#save").prop("disabled",!1)})}),o("#saveDefaultsLink").click(function(t){t.preventDefault(),t.stopPropagation(),o(this).hide(),o(".mmp-save-defaults").show()}),o("#saveDefaultsConfirm").click(function(t){o.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker_defaults",settings:o("#markerSettings").serialize()},beforeSend:function(){o("#saveDefaultsConfirm").prop("disabled",!0),o("#saveDefaultsCancel").prop("disabled",!0),o(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){o(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),o(".mmp-save-defaults").fadeOut(500,function(){o("#saveDefaultsConfirm").prop("disabled",!1),o("#saveDefaultsCancel").prop("disabled",!1),o("#saveDefaultsLink").show()})})}),o("#saveDefaultsCancel").click(function(t){o(".mmp-save-defaults").hide(),o("#saveDefaultsLink").show()}),o("#assignedMaps").select2({width:"260px",placeholder:mmpAdminL10n.marker.notAssigned,templateSelection:function(t){var e=o('<a href="'+mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.id+'" target="_blank">'+mmpAdminL10n.marker.edit+"</a>");return e.click(function(t){t.stopPropagation()}),o("<span>"+t.text+"</span>").append(" (").append(e).append(")")}}),o("#changeIcon").click(function(){o("#iconUpload").hide(),o("#icons").show()}),o("#iconSearch").keyup(function(){var t=o(this).val();o('input[name="icon"]').each(function(){-1===o(this).val().toUpperCase().indexOf(t.toUpperCase())?o(this).parent().hide():o(this).parent().show()})}),o("#toggleUpload").click(function(){o("#iconUpload").toggle()}),o("#upload").click(function(){var t,e=o("#uploadFile").prop("files")[0];void 0!==e&&((t=new FormData).append("action","mmp_icon_upload"),t.append("nonce",o("#upload_nonce").val()),t.append("upload",e),o.ajax({type:"POST",url:ajaxurl,processData:!1,contentType:!1,context:this,data:t}).done(function(t){t.success&&(o("#iconList").prepend('<label class="mmp-radio"><input type="radio" name="icon" value="'+t.response.name+'" checked="checked" /><img class="mmp-icon" src="'+t.response.url+'" /></label>'),o("input[name=icon]").change(l),o("input[name=icon]").trigger("change"))}))});var r=new Tt("#address",function(t){o("#geocodingError").html(t)},function(t,e){editMarker.marker.setLatLng([t,e]),editMarker.map.panTo(editMarker.marker.getLatLng()),o("#lat").val(editMarker.marker.getLatLng().lat.toFixed(6)),o("#lng").val(editMarker.marker.getLatLng().lng.toFixed(6))},o("#geocodingProvider").val(),mmpGeocoding,400,3);r.init(),o("#geocodingProvider").change(function(){r.provider=o("#geocodingProvider").val(),r.reload()}),localStorage.getItem("saved")&&(o('<div class="notice notice-success"><p>'+mmpAdminL10n.marker.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){o(this).remove()}),localStorage.removeItem("saved")),o("#save").prop("disabled",!1)}o(".mmp-delete").click(function(t){confirm(mmpAdminL10n.marker.delete)&&o.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker_direct",nonce:o("#nonce").val(),id:o("#id").val()}}).done(function(t){c.currentValues=o("#markerSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_markers"})}),o(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&o("#icons").hide()}),o("#popup").change(function(){t(o(this).val())}),o("#maps-marker-pro-marker").css({width:"100%",height:"480px"}),"undefined"!=typeof tinymce&&tinymce.on("AddEditor",function(t){t.editor.on("Change",function(){o("#popup").val(this.getContent()).trigger("change")})}),o.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_settings",id:o("#id").val(),basemap:o("#basemap").val(),lat:o("#lat").val(),lng:o("#lng").val(),zoom:o("#zoom").val()}}).done(function(t){i(t.settings)}),window.onbeforeunload=function(){return c.currentValues!==o("#markerSettings").serialize()?"":null}}(jQuery)};_t=function(){function a(t){l("#pagination_top button, #pagination_bottom button").prop("disabled",t),l("#page_top, #page_bottom").prop("disabled",t),l("#perpage_top, #perpage_bottom").prop("disabled",t),l("#search_top, #search_bottom").prop("disabled",t),l("#map_top, #map_bottom").prop("disabled",t)}function s(t,e,i,n,r,o){l.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_list",nonce:l("#markerListNonce").val(),page:t,limit:e,search:i,map:n,sort:r,order:o},beforeSend:function(){a(!0),l("#bulkActionSubmit").prop("disabled",!0),l("#marker_list").empty(),l("#marker_list").addClass("mmp-page-loading")}}).done(function(t){l("#markercount_top, #markercount_bottom").html(t.total),l("#previous_top, #previous_bottom").val(t.page-1),l("#next_top, #next_bottom").val(t.page+1),l("#last_top, #last_bottom").val(Math.ceil(t.total/t.limit)),l("#page_top, #page_bottom").val(t.page),l("#pagecount_top, #pagecount_bottom").html(Math.ceil(t.total/t.limit)),l("#perpage_top, #perpage_bottom").val(t.limit),l("#search_top, #search_bottom").val(t.search),l("#marker_list").html(t.html),l('.mmp-sortable[data-orderby="'+t.sort+'"]').addClass("mmp-sorted-"+t.order),l("#selectAll").click(function(){l('input[name="selected[]"]').each(function(t,e){l(e).prop("checked",l("#selectAll").prop("checked"))})}),l('input[name="selected[]"]').change(function(){var i=!0;l('input[name="selected[]"]').each(function(t,e){i=i&&l(e).prop("checked")}),l("#selectAll").prop("checked",i)}),l(".mmp-sortable").click(function(t){t.preventDefault(),t.stopPropagation();t=l("#sortorder").val(),t=l("#orderby").val()==l(this).data("orderby")&&"asc"==t?"desc":"asc";l("#sortorder").val(t),l("#orderby").val(l(this).data("orderby")),s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}),l(".mmp-table td:nth-child(4)").mouseenter(function(){l(".mmp-action",l(this)).css("visibility","visible")}),l(".mmp-table td:nth-child(4)").mouseleave(function(){l(".mmp-action",l(this)).css("visibility","hidden")}),l(".mmp-delete").click(function(t){var e=l(this).data("id");confirm(mmpAdminL10n.markers.delete.replace("{marker}",e))&&l.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker",nonce:l("#markerListNonce").val(),id:e},beforeSend:function(){a(!0),l("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}).always(function(){a(!1),l("#bulkActionSubmit").prop("disabled",!1)})})}).always(function(){a(!1),l("#bulkActionSubmit").prop("disabled",!1),l("#marker_list").removeClass("mmp-page-loading")})}var l;(l=jQuery)("input[name=bulkAction]").change(function(){l("#bulkActionSubmit").prop("disabled",!1)}),l("#pagination_top button").click(function(){s(l(this).val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}),l("#pagination_bottom button").click(function(){s(l(this).val(),l("#perpage_bottom").val(),l("#search_bottom").val(),l("#map_bottom").val(),l("#orderby").val(),l("#sortorder").val())}),l("#page_top, #perpage_top").change(function(){s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}),l("#page_bottom, #perpage_bottom").change(function(){s(l("#page_bottom").val(),l("#perpage_bottom").val(),l("#search_bottom").val(),l("#map_bottom").val(),l("#orderby").val(),l("#sortorder").val())}),l("#search_top").change(function(){s(1,l("#perpage_top").val(),l(this).val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}),l("#search_bottom").change(function(){s(1,l("#perpage_bottom").val(),l(this).val(),l("#map_bottom").val(),l("#orderby").val(),l("#sortorder").val())}),l("#map_top").select2({width:"200px"}).on("select2:select",function(){l("#map_bottom").select2("val",l("#map_top").val()),s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l(this).val(),l("#orderby").val(),l("#sortorder").val())}),l("#map_bottom").select2({width:"200px"}).on("select2:select",function(){l("#map_top").select2("val",l("#map_bottom").val()),s(l("#page_bottom").val(),l("#perpage_bottom").val(),l("#search_bottom").val(),l(this).val(),l("#orderby").val(),l("#sortorder").val())}),l("#markerList").submit(function(t){var e;switch(t.preventDefault(),t.stopPropagation(),l("input[name=bulkAction]:checked").val()){case"duplicate":e=mmpAdminL10n.markers.bulkDuplicate;break;case"delete":e=mmpAdminL10n.markers.bulkDelete;break;case"assign":e=mmpAdminL10n.markers.bulkAssign.replace("{map}",l("#assignTarget").val());break;default:return}confirm(e)&&l.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_markers",nonce:l("#bulkNonce").val(),data:l("#markerList").serialize()},beforeSend:function(){a(!0),l("#bulkActionSubmit").prop("disabled",!0)}}).done(function(t){s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}).always(function(){a(!1),l("#bulkActionSubmit").prop("disabled",!1)})}),l("#mmp-markers-screen-options-apply").click(function(){l.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_markers_screen_options",nonce:l("#screenoptionnonce").val(),hiddenColumns:l(".mmp-markers-column").not(":checked").map(function(){return this.value}).get(),perPage:l("#mmp-markers-per-page").val()},beforeSend:function(){a(!0)}}).done(function(t){l("#show-settings-link").click(),s(l("#page_top").val(),l("#perpage_top").val(),l("#search_top").val(),l("#map_top").val(),l("#orderby").val(),l("#sortorder").val())}).always(function(){a(!1)})}),s()};St=function(){!function(a){var t=document.location.toString().split("#")[1],n=a("#settings").serialize(),r={},e=[];function i(t){a(".mmp-settings-tab").hide(),a(".mmp-tablink").removeClass("active"),a("#"+t+"_link").addClass("active"),a("#"+t+"_tab").show(),window.location.hash=t}function o(t){a(t).prop("disabled",!0),a(t).addClass("mmp-button-loading")}function s(t){a(t).removeClass("mmp-button-loading"),a(t).prop("disabled",!1)}function l(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_get_custom_layers",nonce:a("input[name=nonce]").val()}}).done(function(t){e=t;var r=a("<ul></ul>"),o=a("<ul></ul>");a.each(e,function(t,e){var i=a("<li></li>"),n=a('<img src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');n.css("margin","0 10px 0 0"),n.css("verticalAlign","middle"),n.css("cursor","pointer"),n.click(function(){var t;t=e.id,a("#customLayerId").val(t),c()}),i.append(n),i.append("[ID "+e.id+"] "+e.name),("1"==e.overlay?o:r).append(i)}),a("#custom-basemaps").html(r),a("#custom-overlays").html(o)})}function c(){var i=a("#customLayerId").val(),n={},r={};"0"!=i&&(a.each(e,function(t,e){if(e.id==i)return n=e,r=JSON.parse(e.options),!1}),("1"==n.overlay?a("#customLayerTypeOverlay"):a("#customLayerTypeBasemap")).prop("checked",!0),a("#customLayerWms").prop("checked","1"==n.wms),a("#customLayerTms").prop("checked",r.tms),a("#customLayerRasterTiles").prop("checked",r.rasterTiles),a("#customLayerNoWrap").prop("checked",r.noWrap),a("#customLayerErrorTiles").prop("checked",r.errorTiles),a("#customLayerName").val(n.name),a("#customLayerUrl").val(n.url),a("#customLayerSubdomains").val(r.subdomains),a("#customLayerBounds").val(r.bounds),a("#customLayerMinZoom").val(r.minNativeZoom),a("#customLayerMaxZoom").val(r.maxNativeZoom),a("#customLayerOpacity").val(r.opacity),a("#customLayerAttribution").val(r.attribution),"1"==n.wms&&(a("#custom-layer-wms").show(),a("#customLayerTransparent").prop("checked",r.transparent),a("#customLayerUppercase").prop("checked",r.uppercase),a("#customLayerLayers").val(r.layers),a("#customLayerStyles").val(r.styles),a("#customLayerFormat").val(r.format),a("#customLayerVersion").val(r.version))),a("#mmp-custom-layer-modal").show()}a(".mmp-tablink").click(function(){i(a(this).attr("id").replace("_link",""))}),a(".mmp-settings-nav ul li").each(function(){var t=a(this).closest(".mmp-settings-nav-group").find("span").html(),e=a(this).attr("id").replace("_link",""),i=a(this).html(),n=i;a("#"+e+"_tab").find("h3, p, .mmp-settings-desc, .mmp-settings-footnote").each(function(){n=n+" "+a(this).html()}),n=n.replace(/"/g,""),void 0===r[t]&&(r[t]=[]),r[t].push({value:e,search:n,title:i})}),a("#mmp-custom-layer-add").click(function(){a("#customLayerId").val("0"),c()}),a("#customLayerWms").change(function(){a(this).prop("checked")?a("#custom-layer-wms").show():a("#custom-layer-wms").hide()}),a("#settings").submit(function(t){t.preventDefault(),t.stopPropagation();var i=a("#settings").serialize();a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_settings",settings:i},beforeSend:function(){o(a("#save"))}}).done(function(t){n=i;var e=t.success?"notice-success":"notice-error";a('<div class="notice '+e+'"><p>'+t.response+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){a(this).remove()})}).fail(function(){a('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){a(this).remove()})}).always(function(){s(a("#save"))})});var u=a("<select></select>").attr("id","mmp-select-search-tabs").css("width","300px").append("<option></option>");a.each(r,function(t,e){var i=a("<optgroup></optgroup>");i.attr("label",t),a.each(e,function(t,e){e=a("<option></option>").attr("value",e.value).attr("data-search",e.search).html(e.title);i.append(e)}),u.append(i)}),u.appendTo("#top"),u.select2({placeholder:mmpAdminL10n.settings.search,allowClear:!0,matcher:function(i,t){if(""===a.trim(i.term))return t;if(void 0===t.text||void 0===t.children)return null;var n=[];if(a.each(t.children,function(t,e){-1===e.text.toUpperCase().indexOf(i.term.toUpperCase())&&-1===a(e.element).data("search").toUpperCase().indexOf(i.term.toUpperCase())||n.push(e)}),n.length){t=a.extend({},t,!0);return t.children=n,t}return null}}).change(function(){i(a(this).val())}),a(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&(a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide())}),a("#mmp-custom-layer-delete").click(function(){a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide(),function(t){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_custom_layer",nonce:a("input[name=nonce]").val(),id:t}}).done(function(t){l()})}(a("#customLayerId").val())}),a("#mmp-custom-layer-save").click(function(){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_custom_layer",nonce:a("input[name=nonce]").val(),settings:a("#mmp-custom-layer-form").serialize()},beforeSend:function(){o(a("#mmp-custom-layer-save"))}}).done(function(t){a("#mmp-custom-layer-modal").hide(),a("#mmp-custom-layer-form").trigger("reset"),a("#custom-layer-wms").hide(),l()}).always(function(){s(a("#mmp-custom-layer-save"))})}),a("#icons_list").select2({width:"300px",placeholder:mmpAdminL10n.settings.selectIcons,templateResult:function(t){return t.id?a('<span><img src="'+mmpVars.iconsUrl+t.element.value+'" class="icons-list-item" /> '+t.text+"</span>"):t.text}}),a("#delete_icons").click(function(){confirm(mmpAdminL10n.settings.confirmDelete)&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_icons",nonce:a("input[name=nonce]").val(),icons:a("#icons_list").val()}}).done(function(){a("#icons_list option:selected").remove()})}),i(void 0!==t?t:a(".mmp-tablink").first().attr("id").replace("_link","")),l(),window.onbeforeunload=function(){return n!==a("#settings").serialize()?"":null},a("#save").prop("disabled",!1)}(jQuery)};l=function(){function i(t){p(".mmp-tools-tab").hide(),p(".mmp-tablink").removeClass("active"),p("#"+t+"_tab").addClass("active"),p("#"+t+"_tab_content").show(),window.location.hash=t}function e(t){p(t).prop("disabled",!0),p(t).addClass("mmp-button-loading")}function n(t){p(t).removeClass("mmp-button-loading"),p(t).prop("disabled",!1)}function o(t){p("#backup_log").append('<span class="mmp-error">error ('+t.status+" - "+t.statusText+")</span>")}function r(t,e,i){t=t?"notice-success":"notice-error";i.after('<div class="notice '+t+'"><p>'+e+"</p></div>")}function t(e){return{type:"POST",url:ajaxurl,dataType:"json",delay:250,data:function(t){return{action:e,nonce:p(this).data("nonce"),term:t.term,page:t.page}},processResults:function(t){return{results:t.results,pagination:{more:t.more}}}}}function a(){var e=[];p(".mmp-basemap").each(function(){e.push(p(this).data("id").toString())}),p("#basemapsList option").each(function(){var t=-1!==p.inArray(p(this).val().toString(),e);p(this).prop("disabled",t)}),p("#basemapsList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#basemapsList option:enabled").length?p("#basemapsAdd").prop("disabled",!1):p("#basemapsAdd").prop("disabled",!0),p("input[name=basemapDefault]:checked").length||p("input[name=basemapDefault]").first().prop("checked",!0)}function s(){var e=[];p(".mmp-overlay").each(function(){e.push(p(this).data("id").toString())}),p("#overlaysList option").each(function(){var t=-1!==p.inArray(p(this).val().toString(),e);p(this).prop("disabled",t)}),p("#overlaysList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#overlaysList option:enabled").length?p("#overlaysAdd").prop("disabled",!1):p("#overlaysAdd").prop("disabled",!0)}function l(t){for(var e=0;e<t.log.length;e++)p("#backup_log").append(t.log[e]+"<br />");t.offset+1e3<t.total[t.table]?(h+=1e3,t.offset+=1e3):(h+=t.total[t.table]-t.offset,t.table++,t.offset=0);for(var i=0,e=0;e<t.total.length;e++)i+=t.total[e];var n=(h/i*100).toFixed(0);return p("#backup_progress").css("width",n+"%"),t}function c(t){var i=p("#move_markers_source"),n=i.val(),r=p("#move_markers_target"),o=r.val(),a=p("#remove_markers_map"),s=a.val(),l=p("#assign_markers_map"),c=l.val(),u=p("#assign_map"),h=u.val();i.empty(),r.empty(),a.empty(),l.empty(),u.empty(),p.each(t,function(t,e){i.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==n)),r.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==o)),a.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==s)),l.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==c)),u.append(p("<option></option>").attr("value",t).text(e).prop("selected",t==h))})}var p,u,h;p=jQuery,u=document.location.toString().split("#")[1],h=0,p(".mmp-tablink").click(function(){i(p(this).attr("id").replace("_tab",""))}),p(".mmp-batch-settings-tablink").click(function(){var t=p(this).data("target");p(".mmp-map-batch-settings-group").hide(),p(".mmp-batch-settings-tablink").removeClass("active"),p(this).addClass("active"),p("#"+t+"Content").show()}),p(".batch-settings-check").change(function(){p(this).prop("checked")?p(this).closest(".mmp-map-batch-setting").addClass("mmp-changed"):p(this).closest(".mmp-map-batch-setting").removeClass("mmp-changed"),p(".mmp-batch-settings-tablink").each(function(){var t=p(this).data("target");p(".batch-settings-check:checked",p("#"+t+"Content")).length?p(this).addClass("mmp-changed"):p(this).removeClass("mmp-changed")})}),p("#mapSettings input, #mapSettings select, #mapSettings textarea").change(function(){var t=p(this).attr("name");p("#"+t+"Check").prop("checked",!0).trigger("change")}),p(".mmp-gpx-start-icon").click(function(){p("#gpxIconTarget").val("gpx-start"),p("#iconsGpx").show()}),p(".mmp-gpx-end-icon").click(function(){p("#gpxIconTarget").val("gpx-end"),p("#iconsGpx").show()}),p("#iconsListGpx img").click(function(){var t=p("#gpxIconTarget").val(),e=p(this).attr("src"),i=p(this).data("icon");"gpx-start"===t?(p("#gpxStartIcon").val(i).trigger("change"),p(".mmp-gpx-start-icon").attr("src",e)):"gpx-end"===t&&(p("#gpxEndIcon").val(i).trigger("change"),p(".mmp-gpx-end-icon").attr("src",e)),p("#iconsGpx").hide()}),p("#batch_settings_maps").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#save_batch_settings").click(function(){confirm(mmpAdminL10n.tools.batchSettings)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_settings",nonce:p(this).data("nonce"),settings:p("#mapSettings").serialize()},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#batch_settings_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#batch_settings_section"))}).always(function(){n(p(this))})}),p("#basemapList").sortable({handle:".mmp-handle"}),p("#basemapsAdd").click(function(){!function(t,e){var i=p('<li class="mmp-basemap" data-id="'+t+'"></li>'),n=p("<div></div>");i.append(n);var r=p('<input type="hidden" name="basemaps[]" value="'+t+'" />');n.append(r),r=p('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />'),n.append(r),t=p('<input type="radio" name="basemapDefault" value="'+t+'" />'),n.append(" ").append(t),e=p('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />'),n.append(" ").append(e),(e=p('<i class="dashicons dashicons-no mmp-remove-basemap"></i>')).click(function(){p(this).parent().parent().remove(),a()}),n.append(" ").append(e),p("#basemapList").append(i)}(p("#basemapsList").val(),p("#basemapsList option:checked").text()),a()}),p(".mmp-remove-basemap").click(function(){p(this).parent().parent().remove(),a()}),a(),p("#overlayList").sortable({handle:".mmp-handle"}),p("#overlaysAdd").click(function(){!function(t,e){var i=p('<li class="mmp-overlay" data-id="'+t+'"></li>'),n=p("<div></div>");i.append(n);var r=p('<input type="hidden" name="overlays[]" value="'+t+'" />');n.append(r),r=p('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />'),n.append(r),t=p('<input type="checkbox" name="overlaysActive[]" value="'+t+'" />'),n.append(" ").append(t),e=p('<input type="text" class="mmp-align-middle" value="'+e+'" disabled="disabled" />'),n.append(" ").append(e),(e=p('<i class="dashicons dashicons-no mmp-remove-overlay"></i>')).click(function(){p(this).parent().parent().remove(),s()}),n.append(" ").append(e),p("#overlayList").append(i)}(p("#overlaysList").val(),p("#overlaysList option:checked").text()),s()}),p(".mmp-remove-overlay").click(function(){p(this).parent().parent().remove(),s()}),s(),p("#batch_layers_maps").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#save_batch_layers").click(function(){confirm(mmpAdminL10n.tools.batchLayers)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_layers",nonce:p(this).data("nonce"),settings:p("#mapLayers").serialize()},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#batch_layers_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#batch_layers_section"))}).always(function(){n(p(this))})}),p("#markerIconSelection").click(function(){p("#markerIcons").show()}),p("#markerIconsList img").click(function(){var t=p(this).attr("src");p("#markerIconSelection").attr("src",t),p("#markerIcon").val(t),p("#markerIcons").hide()}),p("#batch_marker_markers").select2({width:"400px",ajax:t("mmp_query_markers")}),p("#batch_marker_maps").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#save_batch_marker").click(function(){confirm(mmpAdminL10n.tools.batchMarker)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_marker",nonce:p(this).data("nonce"),settings:p("#markerSettings").serialize()},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#batch_marker_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#batch_marker_section"))}).always(function(){n(p(this))})}),p("#sourceIcon").click(function(){p("#replaceIcon").val("0"),p("#icons").show()}),p("#targetIcon").click(function(){p("#replaceIcon").val("1"),p("#icons").show()}),p("#iconsList img").click(function(){var t="0"==p("#replaceIcon").val()?"#sourceIcon":"#targetIcon",e=p(this).attr("src");p(t).attr("src",e),p("#icons").hide()}),p("#replace_icon").click(function(){confirm(mmpAdminL10n.tools.replaceIcon)&&p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_replace_icon",nonce:p(this).data("nonce"),source:p("#sourceIcon").attr("src"),target:p("#targetIcon").attr("src")},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#replace_icon_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#replace_icon_section"))}).always(function(){n(p(this))})}),p("#backup_file").change(function(){var t,e;h=0,p("#backup_log").empty(),p("#backup_progress").css("width","0"),this.files.length?(t=(this.files[0].size/1024/1024).toFixed(2)+" MiB",e=p("#backup_max_size").val()/1024/1024+" MiB",p("#backup_log").append(mmpAdminL10n.tools.maxFileSize.replace("{maxFileSize}",e)+"<br />"),e<=0||this.files[0].size<=p("#backup_max_size").val()?(p("#backup_log").append('<span style="color:green;">'+mmpAdminL10n.tools.chosenFileSizeGood.replace("{chosenFileSize}",t)+"</span><br />"),p("#backup_start").prop("disabled",!0),p("#restore_start").prop("disabled",!1)):p("#backup_log").append('<span style="color:red;">'+mmpAdminL10n.tools.chosenFileSizeBad.replace("{chosenFileSize}",t)+"</span><br />")):(p("#restore_start").prop("disabled",!0),p("#backup_start").prop("disabled",!1))}),p("#backup_start").click(function(){h=0,p("#backup_start").prop("disabled",!0),p("#restore_start").prop("disabled",!0),p("#backup_start").addClass("mmp-button-loading"),function e(t,i,n,r){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_backup",nonce:p("#backup_start").data("nonce"),table:t,offset:i,total:JSON.stringify(n),filename:r||0}}).done(function(t){3<(t=l(t)).table?(p("#backup_log").append(t.message),p("#backup_start").removeClass("mmp-button-loading"),window.location=t.url):e(t.table,t.offset,t.total,t.filename)}).fail(function(t){o(t)})}(0,0,[],!1)}),p("#restore_start").click(function(){h=0,p("#restore_start").prop("disabled",!0),p("#backup_start").prop("disabled",!0),p("#restore_start").addClass("mmp-button-loading"),function e(t,i,n){var r=new FormData;if(r.append("action","mmp_restore"),r.append("nonce",p("#restore_start").data("nonce")),r.append("table",t),r.append("offset",i),r.append("total",n),!n.length){if(void 0===(n=p("#backup_file").prop("files")[0]))return void p("#restore_start").removeClass("mmp-button-loading");r.append("upload",n)}p.ajax({type:"POST",url:ajaxurl,context:this,data:r,processData:!1,contentType:!1}).done(function(t){3<(t=l(t)).table?(c(t.maps),p("#backup_log").append(t.message),p("#restore_start").removeClass("mmp-button-loading")):e(t.table,t.offset,t.total)}).fail(function(t){o(t)})}(0,0,[])}),p("#settings").click(function(){p(this).select()}),p("#update_settings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_settings",nonce:p(this).data("nonce"),settings:p("#settings").val()},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#update_settings_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#update_settings_section"))}).always(function(){n(p(this))})}),p("#move_markers_source, #move_markers_target").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#move_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_move_markers",nonce:p(this).data("nonce"),source:p("#move_markers_source").val(),target:p("#move_markers_target").val()},beforeSend:function(){e(p(this))}}).done(function(t){t.success&&c(t.maps),r(t.success,t.message,p("#move_markers_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#move_markers_section"))}).always(function(){n(p(this))})}),p("#remove_markers_map").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#remove_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_remove_markers",nonce:p(this).data("nonce"),map:p("#remove_markers_map").val()},beforeSend:function(){e(p(this))}}).done(function(t){t.success&&c(t.maps),r(t.success,t.message,p("#remove_markers_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#remove_markers_section"))}).always(function(){n(p(this))})}),p("#delete_all_maps_confirm").change(function(){p(this).prop("checked")?p("#delete_all_maps").prop("disabled",!1):p("#delete_all_maps").prop("disabled",!0)}),p("#delete_all_maps").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_maps",nonce:p(this).data("nonce"),confirm:p("#delete_all_maps_confirm").prop("checked"),truncate:p("#delete_all_maps_reset_ids").prop("checked")},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#delete_all_maps_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#delete_all_maps_section"))}).always(function(){n(p(this))})}),p("#delete_all_markers_confirm").change(function(){p(this).prop("checked")?p("#delete_all_markers").prop("disabled",!1):p("#delete_all_markers").prop("disabled",!0)}),p("#delete_all_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_markers",nonce:p(this).data("nonce"),confirm:p("#delete_all_markers_confirm").prop("checked"),truncate:p("#delete_all_markers_reset_ids").prop("checked")},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#delete_all_markers_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#delete_all_markers_section"))}).always(function(){n(p(this))})}),p("#assign_markers_map").select2({width:"400px",ajax:t("mmp_query_maps")}),p("#assign_markers").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_assign_markers",nonce:p(this).data("nonce"),map:p("#assign_markers_map").val()},beforeSend:function(){e(p(this))}}).done(function(t){t.success&&c(t.maps),r(t.success,t.message,p("#assign_markers_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#assign_markers_section"))}).always(function(){n(p(this))})}),p("#register_strings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_strings",nonce:p(this).data("nonce")},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#register_strings_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#register_strings_section"))}).always(function(){n(p(this))})}),p("input[name=test_mode]").change(function(){"on"===p(this).val()?(p("#test_mode_wrap").attr("class","mmp-test-mode-on"),p("#test_mode_status").html(mmpAdminL10n.tools.testModeOn)):(p("#test_mode_wrap").attr("class","mmp-test-mode-off"),p("#test_mode_status").html(mmpAdminL10n.tools.testModeOff))}),p("#assign_maps").select2({width:"220px",ajax:t("mmp_query_maps")}),p("#import_file").change(function(){var t;p("#import_start").prop("disabled",!0),this.files.length?((this.files[0].size/1024/1024).toFixed(2),(t=p("#import_max_size").val())<=0||this.files[0].size<=t?(p("#import_filesize_error").hide(),p("#import_start").prop("disabled",!1)):p("#import_filesize_error").show()):p("#import_filesize_error").hide()}),p("#import_form").submit(function(t){t.preventDefault(),t.stopPropagation();t=new FormData(this);p.ajax({type:"POST",url:ajaxurl,context:this,data:t,processData:!1,contentType:!1,beforeSend:function(){e(p("#import_start")),p("#import_log").empty()}}).done(function(t){var i;t.success?(i=t.summary+"\n",p.each(t.details,function(t,e){i+="["+(t+1)+"] "+e.message+"\n"}),p("#import_log").text(i),c(t.maps)):p("#import_log").append(t.message)}).fail(function(){p("#import_log").append("Failed to send request")}).always(function(){n(p("#import_start"))})}),p("#export_include, #export_exclude").select2({width:"220px",ajax:t("mmp_query_maps")}),p("#export_form").submit(function(t){t.preventDefault(),t.stopPropagation(),p.ajax({type:"POST",url:ajaxurl,context:this,data:p(this).serialize(),beforeSend:function(){e(p("#export_start")),p("#export_log").empty()}}).done(function(t){t.success?(p("#export_log").append(t.response.message),window.location.href=t.response.url):p("#export_log").append(t.response)}).fail(function(){p("#export_log").append(mmpAdminL10n.global.ajaxError)}).always(function(){n(p("#export_start"))})}),p("#reset_database_confirm").change(function(){p(this).prop("checked")?p("#reset_database").prop("disabled",!1):p("#reset_database").prop("disabled",!0)}),p("#reset_database").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_database",nonce:p(this).data("nonce"),confirm:p("#reset_database_confirm").prop("checked")},beforeSend:function(){e(p(this))}}).done(function(t){t.success&&c(t.maps),r(t.success,t.message,p("#reset_database_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#reset_database_section"))}).always(function(){n(p(this))})}),p("#reset_settings_confirm").change(function(){p(this).prop("checked")?p("#reset_settings").prop("disabled",!1):p("#reset_settings").prop("disabled",!0)}),p("#reset_settings").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:p(this).data("nonce"),confirm:p("#reset_settings_confirm").prop("checked"),reset:{plugin:p("#reset_plugin_settings").prop("checked"),map:p("#reset_map_settings").prop("checked"),marker:p("#reset_marker_settings").prop("checked")}},beforeSend:function(){e(p(this))}}).done(function(t){r(t.success,t.message,p("#reset_settings_section"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#reset_settings_section"))}).always(function(){n(p(this))})}),p("#data_migration_check").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_check_migration",nonce:p(this).data("nonce")},beforeSend:function(){p(this).prop("disabled",!0),p(this).addClass("mmp-button-loading")}}).done(function(t){p("#migration_log").html(t.log),p(".mmp-migration-shortcode").click(function(){p(this).select()}),p("#data_migration_start").prop("disabled",!1)}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#data_migration"))}).always(function(){p(this).removeClass("mmp-button-loading")})}),p("#data_migration_start").click(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_data_migration",nonce:p(this).data("nonce")},beforeSend:function(){p(this).prop("disabled",!0),p(this).addClass("mmp-button-loading")}}).done(function(t){r(t.success,t.message,p("#data_migration"))}).fail(function(){r(!1,mmpAdminL10n.global.ajaxError,p("#data_migration"))}).always(function(){p(this).removeClass("mmp-button-loading")})}),p(".mmp-admin-modal, .mmp-admin-modal-close").click(function(t){t.target===this&&(p("#icons").hide(),p("#iconsGpx").hide(),p("#markerIcons").hide())}),p(window).on("hashchange",function(t){var e=document.location.toString().split("#")[1];void 0!==e&&i(e)}),i(void 0!==u?u:p(".mmp-tablink").first().attr("id").replace("_tab","")),p(".mmp-batch-settings-tablink").first().trigger("click")};i=function(){function t(t){n(".mmp-license-error").remove(),n(".mmp-license-section button").prop("disabled",!0),n(t).addClass("mmp-button-loading")}function e(t){n(t).removeClass("mmp-button-loading"),n(".mmp-license-section button").prop("disabled",!1)}function i(t,e){n(t).closest(".mmp-license-section").after('<div class="notice notice-error mmp-license-error"><p>'+e+"</p></div>")}var n;(n=jQuery)("#update_license").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_license",nonce:n(this).data("nonce"),key:n("#license_key").val(),multisite:n("#distribute_multisite").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():i(this,t.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})}),n("#personal_trial_submit").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_personal_trial",nonce:n(this).data("nonce"),first_name:n("#personal_trial_first_name").val(),last_name:n("#personal_trial_last_name").val(),email:n("#personal_trial_email").val(),tos:n("#personal_trial_tos").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():i(this,t.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})}),n("#anonymous_trial_show").click(function(t){t.preventDefault(),t.stopPropagation(),n(this).remove(),n("#anonymous_trial").removeClass("mmp-hidden")}),n("#anonymous_trial_submit").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_anonymous_trial",nonce:n(this).data("nonce"),tos:n("#anonymous_trial_tos").prop("checked")?1:0},beforeSend:function(){t(this)}}).done(function(t){t.success?location.reload():i(this,t.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){e(this)})})};window.mapsMarkerPro={callbacks:[]},window.MapsMarkerPro=o,window.editMapActions=_,window.listMapsActions=dt,window.editMarkerActions=a,window.listMarkersActions=_t,window.settingsActions=St,window.toolsActions=l,window.licenseActions=i},5568:function(t){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},7757:function(t,e,i){
/*!
 * Chart.js v2.9.4
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
t.exports=function(n){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){return t&&t["default"]||t}n=n&&n.hasOwnProperty("default")?n["default"]:n;var u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c=t(function(t){var s={};for(var e in u)if(u.hasOwnProperty(e))s[u[e]]=e;var l=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in l)if(l.hasOwnProperty(i)){if(!("channels"in l[i]))throw new Error("missing channels property: "+i);if(!("labels"in l[i]))throw new Error("missing channel labels property: "+i);if(l[i].labels.length!==l[i].channels)throw new Error("channel and label counts mismatch: "+i);var n=l[i].channels;var r=l[i].labels;delete l[i].channels;delete l[i].labels;Object.defineProperty(l[i],"channels",{value:n});Object.defineProperty(l[i],"labels",{value:r})}l.rgb.hsl=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r=Math.min(e,i,n);var o=Math.max(e,i,n);var a=o-r;var s;var l;var c;if(o===r)s=0;else if(e===o)s=(i-n)/a;else if(i===o)s=2+(n-e)/a;else if(n===o)s=4+(e-i)/a;s=Math.min(s*60,360);if(s<0)s+=360;c=(r+o)/2;if(o===r)l=0;else if(c<=.5)l=a/(o+r);else l=a/(2-o-r);return[s,l*100,c*100]};l.rgb.hsv=function(t){var e;var i;var n;var r;var o;var a=t[0]/255;var s=t[1]/255;var l=t[2]/255;var c=Math.max(a,s,l);var u=c-Math.min(a,s,l);var h=function(t){return(c-t)/6/u+1/2};if(u===0)r=o=0;else{o=u/c;e=h(a);i=h(s);n=h(l);if(a===c)r=n-i;else if(s===c)r=1/3+e-n;else if(l===c)r=2/3+i-e;if(r<0)r+=1;else if(r>1)r-=1}return[r*360,o*100,c*100]};l.rgb.hwb=function(t){var e=t[0];var i=t[1];var n=t[2];var r=l.rgb.hsl(t)[0];var o=1/255*Math.min(e,Math.min(i,n));n=1-1/255*Math.max(e,Math.max(i,n));return[r,o*100,n*100]};l.rgb.cmyk=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r;var o;var a;var s;s=Math.min(1-e,1-i,1-n);r=(1-e-s)/(1-s)||0;o=(1-i-s)/(1-s)||0;a=(1-n-s)/(1-s)||0;return[r*100,o*100,a*100,s*100]};function c(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}l.rgb.keyword=function(t){var e=s[t];if(e)return e;var i=Infinity;var n;for(var r in u)if(u.hasOwnProperty(r)){var o=u[r];var a=c(t,o);if(a<i){i=a;n=r}}return n};l.keyword.rgb=function(t){return u[t]};l.rgb.xyz=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var r=e*.4124+i*.3576+n*.1805;var o=e*.2126+i*.7152+n*.0722;var a=e*.0193+i*.1192+n*.9505;return[r*100,o*100,a*100]};l.rgb.lab=function(t){var e=l.rgb.xyz(t);var i=e[0];var n=e[1];var r=e[2];var o;var a;var s;i/=95.047;n/=100;r/=108.883;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;o=116*n-16;a=500*(i-n);s=200*(n-r);return[o,a,s]};l.hsl.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var r;var o;var a;var s;var l;if(i===0){l=n*255;return[l,l,l]}if(n<.5)o=n*(1+i);else o=n+i-n*i;r=2*n-o;s=[0,0,0];for(var c=0;c<3;c++){a=e+1/3*-(c-1);if(a<0)a++;if(a>1)a--;if(6*a<1)l=r+(o-r)*6*a;else if(2*a<1)l=o;else if(3*a<2)l=r+(o-r)*(2/3-a)*6;else l=r;s[c]=l*255}return s};l.hsl.hsv=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var r=i;var o=Math.max(n,.01);var a;var s;n*=2;i*=n<=1?n:2-n;r*=o<=1?o:2-o;s=(n+i)/2;a=n===0?2*r/(o+r):2*i/(n+i);return[e,a*100,s*100]};l.hsv.rgb=function(t){var e=t[0]/60;var i=t[1]/100;var n=t[2]/100;var r=Math.floor(e)%6;var o=e-Math.floor(e);var a=255*n*(1-i);var s=255*n*(1-i*o);var l=255*n*(1-i*(1-o));n*=255;switch(r){case 0:return[n,l,a];case 1:return[s,n,a];case 2:return[a,n,l];case 3:return[a,s,n];case 4:return[l,a,n];case 5:return[n,a,s]}};l.hsv.hsl=function(t){var e=t[0];var i=t[1]/100;var n=t[2]/100;var r=Math.max(n,.01);var o;var a;var s;s=(2-i)*n;o=(2-i)*r;a=i*r;a/=o<=1?o:2-o;a=a||0;s/=2;return[e,a*100,s*100]};l.hwb.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;var r=i+n;var o;var a;var s;var l;if(r>1){i/=r;n/=r}o=Math.floor(6*e);a=1-n;s=6*e-o;if((o&1)!==0)s=1-s;l=i+s*(a-i);var c;var u;var h;switch(o){default:case 6:case 0:c=a;u=l;h=i;break;case 1:c=l;u=a;h=i;break;case 2:c=i;u=a;h=l;break;case 3:c=i;u=l;h=a;break;case 4:c=l;u=i;h=a;break;case 5:c=a;u=i;h=l;break}return[c*255,u*255,h*255]};l.cmyk.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var r=t[3]/100;var o;var a;var s;o=1-Math.min(1,e*(1-r)+r);a=1-Math.min(1,i*(1-r)+r);s=1-Math.min(1,n*(1-r)+r);return[o*255,a*255,s*255]};l.xyz.rgb=function(t){var e=t[0]/100;var i=t[1]/100;var n=t[2]/100;var r;var o;var a;r=e*3.2406+i*-1.5372+n*-.4986;o=e*-.9689+i*1.8758+n*.0415;a=e*.0557+i*-.204+n*1.057;r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92;r=Math.min(Math.max(0,r),1);o=Math.min(Math.max(0,o),1);a=Math.min(Math.max(0,a),1);return[r*255,o*255,a*255]};l.xyz.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;e/=95.047;i/=100;n/=108.883;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=116*i-16;o=500*(e-i);a=200*(i-n);return[r,o,a]};l.lab.xyz=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;o=(e+16)/116;r=i/500+o;a=o-n/200;var s=Math.pow(o,3);var l=Math.pow(r,3);var c=Math.pow(a,3);o=s>.008856?s:(o-16/116)/7.787;r=l>.008856?l:(r-16/116)/7.787;a=c>.008856?c:(a-16/116)/7.787;r*=95.047;o*=100;a*=108.883;return[r,o,a]};l.lab.lch=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;r=Math.atan2(n,i);o=r*360/2/Math.PI;if(o<0)o+=360;a=Math.sqrt(i*i+n*n);return[e,a,o]};l.lch.lab=function(t){var e=t[0];var i=t[1];var n=t[2];var r;var o;var a;a=n/360*2*Math.PI;r=i*Math.cos(a);o=i*Math.sin(a);return[e,r,o]};l.rgb.ansi16=function(t){var e=t[0];var i=t[1];var n=t[2];var r=1 in arguments?arguments[1]:l.rgb.hsv(t)[2];r=Math.round(r/50);if(r===0)return 30;var o=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(e/255));if(r===2)o+=60;return o};l.hsv.ansi16=function(t){return l.rgb.ansi16(l.hsv.rgb(t),t[2])};l.rgb.ansi256=function(t){var e=t[0];var i=t[1];var n=t[2];if(e===i&&i===n){if(e<8)return 16;if(e>248)return 231;return Math.round((e-8)/247*24)+232}var r=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5);return r};l.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7){if(t>50)e+=3.5;e=e/10.5*255;return[e,e,e]}var i=(~~(t>50)+1)*.5;var n=(e&1)*i*255;var r=(e>>1&1)*i*255;var o=(e>>2&1)*i*255;return[n,r,o]};l.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i;var n=Math.floor(t/36)/5*255;var r=Math.floor((i=t%36)/6)/5*255;var o=i%6/5*255;return[n,r,o]};l.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255);var i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};l.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];if(e[0].length===3)i=i.split("").map(function(t){return t+t}).join("");var n=parseInt(i,16);var r=n>>16&255;var o=n>>8&255;var a=n&255;return[r,o,a]};l.rgb.hcg=function(t){var e=t[0]/255;var i=t[1]/255;var n=t[2]/255;var r=Math.max(Math.max(e,i),n);var o=Math.min(Math.min(e,i),n);var a=r-o;var s;var l;if(a<1)s=o/(1-a);else s=0;if(a<=0)l=0;else if(r===e)l=(i-n)/a%6;else if(r===i)l=2+(n-e)/a;else l=4+(e-i)/a+4;l/=6;l%=1;return[l*360,a*100,s*100]};l.hsl.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1;var r=0;if(i<.5)n=2*e*i;else n=2*e*(1-i);if(n<1)r=(i-.5*n)/(1-n);return[t[0],n*100,r*100]};l.hsv.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=e*i;var r=0;if(n<1)r=(i-n)/(1-n);return[t[0],n*100,r*100]};l.hcg.rgb=function(t){var e=t[0]/360;var i=t[1]/100;var n=t[2]/100;if(i===0)return[n*255,n*255,n*255];var r=[0,0,0];var o=e%1*6;var a=o%1;var s=1-a;var l=0;switch(Math.floor(o)){case 0:r[0]=1;r[1]=a;r[2]=0;break;case 1:r[0]=s;r[1]=1;r[2]=0;break;case 2:r[0]=0;r[1]=1;r[2]=a;break;case 3:r[0]=0;r[1]=s;r[2]=1;break;case 4:r[0]=a;r[1]=0;r[2]=1;break;default:r[0]=1;r[1]=0;r[2]=s}l=(1-i)*n;return[(i*r[0]+l)*255,(i*r[1]+l)*255,(i*r[2]+l)*255]};l.hcg.hsv=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);var r=0;if(n>0)r=e/n;return[t[0],r*100,n*100]};l.hcg.hsl=function(t){var e=t[1]/100;var i=t[2]/100;var n=i*(1-e)+.5*e;var r=0;if(n>0&&n<.5)r=e/(2*n);else if(n>=.5&&n<1)r=e/(2*(1-n));return[t[0],r*100,n*100]};l.hcg.hwb=function(t){var e=t[1]/100;var i=t[2]/100;var n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};l.hwb.hcg=function(t){var e=t[1]/100;var i=t[2]/100;var n=1-i;var r=n-e;var o=0;if(r<1)o=(n-r)/(1-r);return[t[0],r*100,o*100]};l.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};l.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};l.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};l.gray.hsl=l.gray.hsv=function(t){return[0,0,t[0]]};l.gray.hwb=function(t){return[0,100,t[0]]};l.gray.cmyk=function(t){return[0,0,0,t[0]]};l.gray.lab=function(t){return[t[0],0,0]};l.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255;var i=(e<<16)+(e<<8)+e;var n=i.toString(16).toUpperCase();return"000000".substring(n.length)+n};l.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}}),i=c.rgb,r=c.hsl,o=c.hsv,a=c.hwb,s=c.cmyk,l=c.xyz,h=c.lab,p=c.lch,d=c.hex,f=c.keyword,m=c.ansi16,g=c.ansi256,v=c.hcg,_=c.apple,y=c.gray;function b(){var t={};var e=Object.keys(c);for(var i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}function x(t){var e=b();var i=[t];e[t].distance=0;while(i.length){var n=i.pop();var r=Object.keys(c[n]);for(var o=r.length,a=0;a<o;a++){var s=r[a];var l=e[s];if(l.distance===-1){l.distance=e[n].distance+1;l.parent=n;i.unshift(s)}}}return e}function k(e,i){return function(t){return i(e(t))}}function w(t,e){var i=[e[t].parent,t];var n=c[e[t].parent][t];var r=e[t].parent;while(e[r].parent){i.unshift(e[r].parent);n=k(c[e[r].parent][r],n);r=e[r].parent}n.conversion=i;return n}var L=function(t){var e=x(t);var i={};var n=Object.keys(e);for(var r=n.length,o=0;o<r;o++){var a=n[o];var s=e[a];if(s.parent===null)continue;i[a]=w(a,e)}return i},M={},C;function S(e){var t=function(t){if(t===undefined||t===null)return t;if(arguments.length>1)t=Array.prototype.slice.call(arguments);return e(t)};if("conversion"in e)t.conversion=e.conversion;return t}function P(r){var t=function(t){if(t===undefined||t===null)return t;if(arguments.length>1)t=Array.prototype.slice.call(arguments);var e=r(t);if(typeof e==="object")for(var i=e.length,n=0;n<i;n++)e[n]=Math.round(e[n]);return e};if("conversion"in r)t.conversion=r.conversion;return t}Object.keys(c).forEach(function(i){M[i]={};Object.defineProperty(M[i],"channels",{value:c[i].channels});Object.defineProperty(M[i],"labels",{value:c[i].labels});var n=L(i);var t=Object.keys(n);t.forEach(function(t){var e=n[t];M[i][t]=P(e);M[i][t].raw=S(e)})});var T=M,E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},D={getRgba:A,getHsla:O,getRgb:B,getHsl:R,getHwb:I,getAlpha:z,hexString:F,rgbString:N,rgbaString:j,percentString:U,percentaString:H,hslString:G,hslaString:Z,hwbString:W,keyword:V};function A(t){if(!t)return;var e=/^#([a-fA-F0-9]{3,4})$/i,i=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/;var a=[0,0,0],s=1,l=t.match(e),c="";if(l){l=l[1];c=l[3];for(var u=0;u<a.length;u++)a[u]=parseInt(l[u]+l[u],16);if(c)s=Math.round(parseInt(c+c,16)/255*100)/100}else if(l=t.match(i)){c=l[2];l=l[1];for(var u=0;u<a.length;u++)a[u]=parseInt(l.slice(u*2,u*2+2),16);if(c)s=Math.round(parseInt(c,16)/255*100)/100}else if(l=t.match(n)){for(var u=0;u<a.length;u++)a[u]=parseInt(l[u+1]);s=parseFloat(l[4])}else if(l=t.match(r)){for(var u=0;u<a.length;u++)a[u]=Math.round(parseFloat(l[u+1])*2.55);s=parseFloat(l[4])}else if(l=t.match(o)){if(l[1]=="transparent")return[0,0,0,0];a=E[l[1]];if(!a)return}for(var u=0;u<a.length;u++)a[u]=q(a[u],0,255);if(!s&&s!=0)s=1;else s=q(s,0,1);a[3]=s;return a}function O(t){if(!t)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var r=q(parseInt(i[1]),0,360),o=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[r,o,a,s]}}function I(t){if(!t)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var i=t.match(e);if(i){var n=parseFloat(i[4]);var r=q(parseInt(i[1]),0,360),o=q(parseFloat(i[2]),0,100),a=q(parseFloat(i[3]),0,100),s=q(isNaN(n)?1:n,0,1);return[r,o,a,s]}}function B(t){var e=A(t);return e&&e.slice(0,3)}function R(t){var e=O(t);return e&&e.slice(0,3)}function z(t){var e=A(t);if(e)return e[3];else if(e=O(t))return e[3];else if(e=I(t))return e[3]}function F(t,e){var e=e!==undefined&&t.length===3?e:t[3];return"#"+$(t[0])+$(t[1])+$(t[2])+(e>=0&&e<1?$(Math.round(e*255)):"")}function N(t,e){if(e<1||t[3]&&t[3]<1)return j(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function j(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function U(t,e){if(e<1||t[3]&&t[3]<1)return H(t,e);var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+r+"%)"}function H(t,e){var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return"rgba("+i+"%, "+n+"%, "+r+"%, "+(e||t[3]||1)+")"}function G(t,e){if(e<1||t[3]&&t[3]<1)return Z(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function Z(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function W(t,e){if(e===undefined)e=t[3]!==undefined?t[3]:1;return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(e!==undefined&&e!==1?", "+e:"")+")"}function V(t){return Y[t.slice(0,3)]}function q(t,e,i){return Math.min(Math.max(e,t),i)}function $(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var Y={},J;for(J in E)Y[E[J]]=J;var K=function(t){if(t instanceof K)return t;if(!(this instanceof K))return new K(t);this.valid=false;this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if(typeof t==="string"){e=D.getRgba(t);if(e)this.setValues("rgb",e);else if(e=D.getHsla(t))this.setValues("hsl",e);else if(e=D.getHwb(t))this.setValues("hwb",e)}else if(typeof t==="object"){e=t;if(e.r!==undefined||e.red!==undefined)this.setValues("rgb",e);else if(e.l!==undefined||e.lightness!==undefined)this.setValues("hsl",e);else if(e.v!==undefined||e.value!==undefined)this.setValues("hsv",e);else if(e.w!==undefined||e.whiteness!==undefined)this.setValues("hwb",e);else if(e.c!==undefined||e.cyan!==undefined)this.setValues("cmyk",e)}};if(K.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;if(t.alpha!==1)return t.hwb.concat([t.alpha]);return t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){if(t===undefined)return this.values.alpha;this.setValues("alpha",t);return this},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){if(t){t%=360;t=t<0?360+t:t}return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return D.hexString(this.values.rgb)},rgbString:function(){return D.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return D.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return D.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return D.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return D.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return D.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return D.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){var t=this.values.rgb;var e=[];for(var i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity();var i=t.luminosity();if(e>i)return(e+.05)/(i+.05);return(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);if(e>=7.1)return"AAA";return e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){var t=[];for(var e=0;e<3;e++)t[e]=255-this.values.rgb[e];this.setValues("rgb",t);return this},lighten:function(t){var e=this.values.hsl;e[2]+=e[2]*t;this.setValues("hsl",e);return this},darken:function(t){var e=this.values.hsl;e[2]-=e[2]*t;this.setValues("hsl",e);return this},saturate:function(t){var e=this.values.hsl;e[1]+=e[1]*t;this.setValues("hsl",e);return this},desaturate:function(t){var e=this.values.hsl;e[1]-=e[1]*t;this.setValues("hsl",e);return this},whiten:function(t){var e=this.values.hwb;e[1]+=e[1]*t;this.setValues("hwb",e);return this},blacken:function(t){var e=this.values.hwb;e[2]+=e[2]*t;this.setValues("hwb",e);return this},greyscale:function(){var t=this.values.rgb;var e=t[0]*.3+t[1]*.59+t[2]*.11;this.setValues("rgb",[e,e,e]);return this},clearer:function(t){var e=this.values.alpha;this.setValues("alpha",e-e*t);return this},opaquer:function(t){var e=this.values.alpha;this.setValues("alpha",e+e*t);return this},rotate:function(t){var e=this.values.hsl;var i=(e[0]+t)%360;e[0]=i<0?360+i:i;this.setValues("hsl",e);return this},mix:function(t,e){var i=this;var n=t;var r=e===undefined?.5:e;var o=2*r-1;var a=i.alpha()-n.alpha();var s=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;var l=1-s;return this.rgb(s*i.red()+l*n.red(),s*i.green()+l*n.green(),s*i.blue()+l*n.blue()).alpha(i.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var t=new K;var e=this.values;var i=t.values;var n,r;for(var o in e)if(e.hasOwnProperty(o)){n=e[o];r={}.toString.call(n);if(r==="[object Array]")i[o]=n.slice(0);else if(r==="[object Number]")i[o]=n;else console.error("unexpected color value:",n)}return t}},K.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},K.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},K.prototype.getValues=function(t){var e=this.values;var i={};for(var n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];if(e.alpha!==1)i.a=e.alpha;return i},K.prototype.setValues=function(t,e){var i=this.values;var n=this.spaces;var r=this.maxes;var o=1;var a;this.valid=true;if(t==="alpha")o=e;else if(e.length){i[t]=e.slice(0,t.length);o=e[t.length]}else if(e[t.charAt(0)]!==undefined){for(a=0;a<t.length;a++)i[t][a]=e[t.charAt(a)];o=e.a}else if(e[n[t][0]]!==undefined){var s=n[t];for(a=0;a<t.length;a++)i[t][a]=e[s[a]];o=e.alpha}i.alpha=Math.max(0,Math.min(1,o===undefined?i.alpha:o));if(t==="alpha")return false;var l;for(a=0;a<t.length;a++){l=Math.max(0,Math.min(r[t][a],i[t][a]));i[t][a]=Math.round(l)}for(var c in n)if(c!==t)i[c]=T[t][c](i[t]);return true},K.prototype.setSpace=function(t,e){var i=e[0];if(i===undefined)return this.getValues(t);if(typeof i==="number")i=Array.prototype.slice.call(e);this.setValues(t,i);return this},K.prototype.setChannel=function(t,e,i){var n=this.values[t];if(i===undefined)return n[e];else if(i===n[e])return this;n[e]=i;this.setValues(t,n);return this},typeof window!=="undefined")window.Color=K;var X=K;function Q(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}var tt={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return t===null||typeof t==="undefined"},isArray:function(t){if(Array.isArray&&Array.isArray(t))return true;var e=Object.prototype.toString.call(t);if(e.substr(0,7)==="[object"&&e.substr(-6)==="Array]")return true;return false},isObject:function(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"},isFinite:function(t){return(typeof t==="number"||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return typeof t==="undefined"?e:t},valueAtIndexOrDefault:function(t,e,i){return tt.valueOrDefault(tt.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&typeof t.call==="function")return t.apply(i,e)},each:function(t,e,i,n){var r,o,a;if(tt.isArray(t)){o=t.length;if(n)for(r=o-1;r>=0;r--)e.call(i,t[r],r);else for(r=0;r<o;r++)e.call(i,t[r],r)}else if(tt.isObject(t)){a=Object.keys(t);o=a.length;for(r=0;r<o;r++)e.call(i,t[a[r]],a[r])}},arrayEquals:function(t,e){var i,n,r,o;if(!t||!e||t.length!==e.length)return false;for(i=0,n=t.length;i<n;++i){r=t[i];o=e[i];if(r instanceof Array&&o instanceof Array){if(!tt.arrayEquals(r,o))return false}else if(r!==o)return false}return true},clone:function(t){if(tt.isArray(t))return t.map(tt.clone);if(tt.isObject(t)){var e=Object.create(t);var i=Object.keys(t);var n=i.length;var r=0;for(;r<n;++r)e[i[r]]=tt.clone(t[i[r]]);return e}return t},_merger:function(t,e,i,n){if(!Q(t))return;var r=e[t];var o=i[t];if(tt.isObject(r)&&tt.isObject(o))tt.merge(r,o,n);else e[t]=tt.clone(o)},_mergerIf:function(t,e,i){if(!Q(t))return;var n=e[t];var r=i[t];if(tt.isObject(n)&&tt.isObject(r))tt.mergeIf(n,r);else if(!e.hasOwnProperty(t))e[t]=tt.clone(r)},merge:function(t,e,i){var n=tt.isArray(e)?e:[e];var r=n.length;var o,a,s,l,c;if(!tt.isObject(t))return t;i=i||{};o=i.merger||tt._merger;for(a=0;a<r;++a){e=n[a];if(!tt.isObject(e))continue;s=Object.keys(e);for(c=0,l=s.length;c<l;++c)o(s[c],t,e,i)}return t},mergeIf:function(t,e){return tt.merge(t,e,{merger:tt._mergerIf})},extend:Object.assign||function(t){return tt.merge(t,[].slice.call(arguments,1),{merger:function(t,e,i){e[t]=i[t]}})},inherits:function(t){var e=this;var i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)};var n=function(){this.constructor=i};n.prototype=e.prototype;i.prototype=new n;i.extend=tt.inherits;if(t)tt.extend(i.prototype,t);i.__super__=e.prototype;return i},_deprecated:function(t,e,i,n){if(e!==undefined)console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')}},et=tt;tt.callCallback=tt.callback,tt.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},tt.getValueOrDefault=tt.valueOrDefault,tt.getValueAtIndexOrDefault=tt.valueAtIndexOrDefault;var it={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1)return.5*t*t;return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t=t-1)*t*t+1},easeInOutCubic:function(t){if((t/=.5)<1)return.5*t*t*t;return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t=t-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1)return.5*t*t*t*t;return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t=t-1)*t*t*t*t+1},easeInOutQuint:function(t){if((t/=.5)<1)return.5*t*t*t*t*t;return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return t===0?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return t===1?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){if(t===0)return 0;if(t===1)return 1;if((t/=.5)<1)return.5*Math.pow(2,10*(t-1));return.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1)return-.5*(Math.sqrt(1-t*t)-1);return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!i)i=.3;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if(t===1)return 1;if(!i)i=.3;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},easeInOutElastic:function(t){var e=1.70158;var i=0;var n=1;if(t===0)return 0;if((t/=.5)===2)return 1;if(!i)i=.45;if(n<1){n=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/n);if(t<1)return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i));return n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1)return.5*(t*t*(((e*=1.525)+1)*t-e));return.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-it.easeOutBounce(1-t)},easeOutBounce:function(t){if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75)return 7.5625*(t-=1.5/2.75)*t+.75;if(t<2.5/2.75)return 7.5625*(t-=2.25/2.75)*t+.9375;return 7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){if(t<.5)return it.easeInBounce(t*2)*.5;return it.easeOutBounce(t*2-1)*.5+.5}},nt={effects:it};et.easingEffects=it;var rt=Math.PI,ot=rt/180,at=rt*2,st=rt/2,lt=rt/4,ct=rt*2/3,ut={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,r,o){if(o){var a=Math.min(o,r/2,n/2);var s=e+a;var l=i+a;var c=e+n-a;var u=i+r-a;t.moveTo(e,l);if(s<c&&l<u){t.arc(s,l,a,-rt,-st);t.arc(c,l,a,-st,0);t.arc(c,u,a,0,st);t.arc(s,u,a,st,rt)}else if(s<c){t.moveTo(s,i);t.arc(c,l,a,-st,st);t.arc(s,l,a,st,rt+st)}else if(l<u){t.arc(s,l,a,-rt,0);t.arc(s,u,a,0,rt)}else t.arc(s,l,a,-rt,rt);t.closePath();t.moveTo(e,i)}else t.rect(e,i,n,r)},drawPoint:function(t,e,i,n,r,o){var a,s,l,c,u;var h=(o||0)*ot;if(e&&typeof e==="object"){a=e.toString();if(a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]"){t.save();t.translate(n,r);t.rotate(h);t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height);t.restore();return}}if(isNaN(i)||i<=0)return;t.beginPath();switch(e){default:t.arc(n,r,i,0,at);t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*i,r-Math.cos(h)*i);h+=ct;t.lineTo(n+Math.sin(h)*i,r-Math.cos(h)*i);h+=ct;t.lineTo(n+Math.sin(h)*i,r-Math.cos(h)*i);t.closePath();break;case"rectRounded":u=i*.516;c=i-u;s=Math.cos(h+lt)*c;l=Math.sin(h+lt)*c;t.arc(n-s,r-l,u,h-rt,h-st);t.arc(n+l,r-s,u,h-st,h);t.arc(n+s,r+l,u,h,h+st);t.arc(n-l,r+s,u,h+st,h+rt);t.closePath();break;case"rect":if(!o){c=Math.SQRT1_2*i;t.rect(n-c,r-c,2*c,2*c);break}h+=lt;case"rectRot":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+l,r-s);t.lineTo(n+s,r+l);t.lineTo(n-l,r+s);t.closePath();break;case"crossRot":h+=lt;case"cross":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);break;case"star":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);h+=lt;s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);t.moveTo(n+l,r-s);t.lineTo(n-l,r+s);break;case"line":s=Math.cos(h)*i;l=Math.sin(h)*i;t.moveTo(n-s,r-l);t.lineTo(n+s,r+l);break;case"dash":t.moveTo(n,r);t.lineTo(n+Math.cos(h)*i,r+Math.sin(h)*i);break}t.fill();t.stroke()},_isPointInArea:function(t,e){var i=1e-6;return t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i},clipArea:function(t,e){t.save();t.beginPath();t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top);t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){var r=i.steppedLine;if(r){if(r==="middle"){var o=(e.x+i.x)/2;t.lineTo(o,n?i.y:e.y);t.lineTo(o,n?e.y:i.y)}else if(r==="after"&&!n||r!=="after"&&n)t.lineTo(e.x,i.y);else t.lineTo(i.x,e.y);t.lineTo(i.x,i.y);return}if(!i.tension){t.lineTo(i.x,i.y);return}t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y)}},ht=ut;et.clear=ut.clear,et.drawRoundedRectangle=function(t){t.beginPath();ut.roundedRect.apply(ut,arguments)};var pt={_set:function(t,e){return et.merge(this[t]||(this[t]={}),e)}};pt._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:true});var dt=pt,ft=et.valueOrDefault;function mt(t){if(!t||et.isNullOrUndef(t.size)||et.isNullOrUndef(t.family))return null;return(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var gt={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||i[1]==="normal")return e*1.2;t=+i[2];switch(i[3]){case"px":return t;case"%":t/=100;break}return e*t},toPadding:function(t){var e,i,n,r;if(et.isObject(t)){e=+t.top||0;i=+t.right||0;n=+t.bottom||0;r=+t.left||0}else e=i=n=r=+t||0;return{top:e,right:i,bottom:n,left:r,height:e+n,width:r+i}},_parseFont:function(t){var e=dt.global;var i=ft(t.fontSize,e.defaultFontSize);var n={family:ft(t.fontFamily,e.defaultFontFamily),lineHeight:et.options.toLineHeight(ft(t.lineHeight,e.defaultLineHeight),i),size:i,style:ft(t.fontStyle,e.defaultFontStyle),weight:null,string:""};n.string=mt(n);return n},resolve:function(t,e,i,n){var r=true;var o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];if(s===undefined)continue;if(e!==undefined&&typeof s==="function"){s=s(e);r=false}if(i!==undefined&&et.isArray(s)){s=s[i];r=false}if(s!==undefined){if(n&&!r)n.cacheable=false;return s}}}},vt={_factorize:function(t){var e=[];var i=Math.sqrt(t);var n;for(n=1;n<i;n++)if(t%n===0){e.push(n);e.push(t/n)}if(i===(i|0))e.push(i);e.sort(function(t,e){return t-e}).pop();return e},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E;var i=Math.round(e);var n=t===Math.pow(10,i);return n?i:e}},_t=vt;et.log10=vt.log10;var yt=function(e,i){return{x:function(t){return e+e+i-t},setWidth:function(t){i=t},textAlign:function(t){if(t==="center")return t;return t==="right"?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},bt=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},xt,kt,wt,Lt,Mt=et,Ct,St=ht,Pt=gt,Tt=_t,Et={getRtlAdapter:function(t,e,i){return t?yt(e,i):bt()},overrideTextDirection:function(t,e){var i,n;if(e==="ltr"||e==="rtl"){i=t.canvas.style;n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")];i.setProperty("direction",e,"important");t.prevTextDirection=n}},restoreTextDirection:function(t){var e=t.prevTextDirection;if(e!==undefined){delete t.prevTextDirection;t.canvas.style.setProperty("direction",e[0],e[1])}}};function Dt(t,e,i,n){var r=Object.keys(i);var o,a,s,l,c,u,h,p,d;for(o=0,a=r.length;o<a;++o){s=r[o];u=i[s];if(!e.hasOwnProperty(s))e[s]=u;l=e[s];if(l===u||s[0]==="_")continue;if(!t.hasOwnProperty(s))t[s]=l;c=t[s];h=typeof u;if(h===typeof c)if(h==="string"){p=X(c);if(p.valid){d=X(u);if(d.valid){e[s]=d.mix(p,n).rgbString();continue}}}else if(Mt.isFinite(c)&&Mt.isFinite(u)){e[s]=c+(u-c)*n;continue}e[s]=u}}Mt.easing=nt,Mt.canvas=St,Mt.options=Pt,Mt.math=Tt,Mt.rtl=Et;var At=function(t){Mt.extend(this,t);this.initialize.apply(this,arguments)};Mt.extend(At.prototype,{_type:undefined,initialize:function(){this.hidden=false},pivot:function(){var t=this;if(!t._view)t._view=Mt.extend({},t._model);t._start={};return t},transition:function(t){var e=this;var i=e._model;var n=e._start;var r=e._view;if(!i||t===1){e._view=Mt.extend({},i);e._start=null;return e}if(!r)r=e._view={};if(!n)n=e._start={};Dt(n,r,i,t);return e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return Mt.isNumber(this._model.x)&&Mt.isNumber(this._model.y)}}),At.extend=Mt.inherits;var Ot=At,It=Ot.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Bt=It;Object.defineProperty(It.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(It.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),dt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:Mt.noop,onComplete:Mt.noop}});var Rt={animations:[],request:null,addAnimation:function(t,e,i,n){var r=this.animations;var o,a;e.chart=t;e.startTime=Date.now();e.duration=i;if(!n)t.animating=true;for(o=0,a=r.length;o<a;++o)if(r[o].chart===t){r[o]=e;return}r.push(e);if(r.length===1)this.requestAnimationFrame()},cancelAnimation:function(e){var t=Mt.findIndex(this.animations,function(t){return t.chart===e});if(t!==-1){this.animations.splice(t,1);e.animating=false}},requestAnimationFrame:function(){var t=this;if(t.request===null)t.request=Mt.requestAnimFrame.call(window,function(){t.request=null;t.startDigest()})},startDigest:function(){var t=this;t.advance();if(t.animations.length>0)t.requestAnimationFrame()},advance:function(){var t=this.animations;var e,i,n,r;var o=0;while(o<t.length){e=t[o];i=e.chart;n=e.numSteps;r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1;e.currentStep=Math.min(r,n);Mt.callback(e.render,[i,e],i);Mt.callback(e.onAnimationProgress,[e],i);if(e.currentStep>=n){Mt.callback(e.onAnimationComplete,[e],i);i.animating=false;t.splice(o,1)}else++o}}},zt=Mt.options.resolve,Ft=["push","pop","shift","splice","unshift"];function Nt(r,t){if(r._chartjs){r._chartjs.listeners.push(t);return}Object.defineProperty(r,"_chartjs",{configurable:true,enumerable:false,value:{listeners:[t]}});Ft.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1);var n=r[t];Object.defineProperty(r,t,{configurable:true,enumerable:false,value:function(){var e=Array.prototype.slice.call(arguments);var t=n.apply(this,e);Mt.each(r._chartjs.listeners,function(t){if(typeof t[i]==="function")t[i].apply(t,e)});return t}})})}function jt(e,t){var i=e._chartjs;if(!i)return;var n=i.listeners;var r=n.indexOf(t);if(r!==-1)n.splice(r,1);if(n.length>0)return;Ft.forEach(function(t){delete e[t]});delete e._chartjs}var Ut=function(t,e){this.initialize(t,e)};Mt.extend(Ut.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var i=this;i.chart=t;i.index=e;i.linkScales();i.addElements();i._type=i.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this;var e=t.getMeta();var i=t.chart;var n=i.scales;var r=t.getDataset();var o=i.options.scales;if(e.xAxisID===null||!(e.xAxisID in n)||r.xAxisID)e.xAxisID=r.xAxisID||o.xAxes[0].id;if(e.yAxisID===null||!(e.yAxisID in n)||r.yAxisID)e.yAxisID=r.yAxisID||o.yAxes[0].id},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(true)},destroy:function(){if(this._data)jt(this._data,this)},createMetaDataset:function(){var t=this;var e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this;var i=e.dataElementType;return i&&new i({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data||[];var n=e.data;var r,o;for(r=0,o=i.length;r<o;++r)n[r]=n[r]||t.createMetaData(r);e.dataset=e.dataset||t.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e);this.updateElement(e,t,true)},buildOrUpdateElements:function(){var t=this;var e=t.getDataset();var i=e.data||(e.data=[]);if(t._data!==i){if(t._data)jt(t._data,t);if(i&&Object.isExtensible(i))Nt(i,t);t._data=i}t.resyncElements()},_configure:function(){var t=this;t._config=Mt.merge(Object.create(null),[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,i){if(t!=="_meta"&&t!=="data")Mt._merger(t,e,i)}})},_update:function(t){var e=this;e._configure();e._cachedDataOpts=null;e.update(t)},update:Mt.noop,transition:function(t){var e=this.getMeta();var i=e.data||[];var n=i.length;var r=0;for(;r<n;++r)i[r].transition(t);if(e.dataset)e.dataset.transition(t)},draw:function(){var t=this.getMeta();var e=t.data||[];var i=e.length;var n=0;if(t.dataset)t.dataset.draw();for(;n<i;++n)e[n].draw()},getStyle:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r;e._configure();if(n&&t===undefined)r=e._resolveDatasetElementOptions(n||{});else{t=t||0;r=e._resolveDataElementOptions(i.data[t]||{},t)}if(r.fill===false||r.fill===null)r.backgroundColor=r.borderColor;return r},_resolveDatasetElementOptions:function(t,e){var i=this;var n=i.chart;var r=i._config;var o=t.custom||{};var a=n.options.elements[i.datasetElementType.prototype._type]||{};var s=i._datasetElementOptions;var l={};var c,u,h,p;var d={chart:n,dataset:i.getDataset(),datasetIndex:i.index,hover:e};for(c=0,u=s.length;c<u;++c){h=s[c];p=e?"hover"+h.charAt(0).toUpperCase()+h.slice(1):h;l[h]=zt([o[p],r[p],a[p]],d)}return l},_resolveDataElementOptions:function(t,e){var i=this;var n=t&&t.custom;var r=i._cachedDataOpts;if(r&&!n)return r;var o=i.chart;var a=i._config;var s=o.options.elements[i.dataElementType.prototype._type]||{};var l=i._dataElementOptions;var c={};var u={chart:o,dataIndex:e,dataset:i.getDataset(),datasetIndex:i.index};var h={cacheable:!n};var p,d,f,m;n=n||{};if(Mt.isArray(l))for(d=0,f=l.length;d<f;++d){m=l[d];c[m]=zt([n[m],a[m],s[m]],u,e,h)}else{p=Object.keys(l);for(d=0,f=p.length;d<f;++d){m=p[d];c[m]=zt([n[m],a[l[m]],a[m],s[m]],u,e,h)}}if(h.cacheable)i._cachedDataOpts=Object.freeze(c);return c},removeHoverStyle:function(t){Mt.merge(t._model,t.$previousStyle||{});delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex];var i=t._index;var n=t.custom||{};var r=t._model;var o=Mt.getHoverColor;t.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth};r.backgroundColor=zt([n.hoverBackgroundColor,e.hoverBackgroundColor,o(r.backgroundColor)],undefined,i);r.borderColor=zt([n.hoverBorderColor,e.hoverBorderColor,o(r.borderColor)],undefined,i);r.borderWidth=zt([n.hoverBorderWidth,e.hoverBorderWidth,r.borderWidth],undefined,i)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;if(t)this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t=this.getMeta().dataset;var e={};var i,n,r,o,a,s;if(!t)return;s=t._model;a=this._resolveDatasetElementOptions(t,true);o=Object.keys(a);for(i=0,n=o.length;i<n;++i){r=o[i];e[r]=s[r];s[r]=a[r]}t.$previousStyle=e},resyncElements:function(){var t=this;var e=t.getMeta();var i=t.getDataset().data;var n=e.data.length;var r=i.length;if(r<n)e.data.splice(r,n-r);else if(r>n)t.insertElements(n,r-n)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e);this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ut.extend=Mt.inherits;var Ht=Ut,Gt=Math.PI*2;function Zt(t,e){var i=e.startAngle;var n=e.endAngle;var r=e.pixelMargin;var o=r/e.outerRadius;var a=e.x;var s=e.y;t.beginPath();t.arc(a,s,e.outerRadius,i-o,n+o);if(e.innerRadius>r){o=r/e.innerRadius;t.arc(a,s,e.innerRadius-r,n+o,i-o,true)}else t.arc(a,s,r,n+Math.PI/2,i-Math.PI/2);t.closePath();t.clip()}function Wt(t,e,i,n){var r=i.endAngle;var o;if(n){i.endAngle=i.startAngle+Gt;Zt(t,i);i.endAngle=r;if(i.endAngle===i.startAngle&&i.fullCircles){i.endAngle+=Gt;i.fullCircles--}}t.beginPath();t.arc(i.x,i.y,i.innerRadius,i.startAngle+Gt,i.startAngle,true);for(o=0;o<i.fullCircles;++o)t.stroke();t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.startAngle+Gt);for(o=0;o<i.fullCircles;++o)t.stroke()}function Vt(t,e,i){var n=e.borderAlign==="inner";if(n){t.lineWidth=e.borderWidth*2;t.lineJoin="round"}else{t.lineWidth=e.borderWidth;t.lineJoin="bevel"}if(i.fullCircles)Wt(t,e,i,n);if(n)Zt(t,i);t.beginPath();t.arc(i.x,i.y,e.outerRadius,i.startAngle,i.endAngle);t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,true);t.closePath();t.stroke()}dt._set("global",{elements:{arc:{backgroundColor:dt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var qt=Ot.extend({_type:"arc",inLabelRange:function(t){var e=this._view;if(e)return Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2);return false},inRange:function(t,e){var i=this._view;if(i){var n=Mt.getAngleFromPoint(i,{x:t,y:e});var r=n.angle;var o=n.distance;var a=i.startAngle;var s=i.endAngle;while(s<a)s+=Gt;while(r>s)r-=Gt;while(r<a)r+=Gt;var l=r>=a&&r<=s;var c=o>=i.innerRadius&&o<=i.outerRadius;return l&&c}return false},getCenterPoint:function(){var t=this._view;var e=(t.startAngle+t.endAngle)/2;var i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view;var e=t.startAngle+(t.endAngle-t.startAngle)/2;var i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t=this._chart.ctx;var e=this._view;var i=e.borderAlign==="inner"?.33:0;var n={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-i,0),pixelMargin:i,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Gt)};var r;t.save();t.fillStyle=e.backgroundColor;t.strokeStyle=e.borderColor;if(n.fullCircles){n.endAngle=n.startAngle+Gt;t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();for(r=0;r<n.fullCircles;++r)t.fill();n.endAngle=n.startAngle+e.circumference%Gt}t.beginPath();t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle);t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,true);t.closePath();t.fill();if(e.borderWidth)Vt(t,e,n);t.restore()}}),$t=Mt.valueOrDefault,Yt=dt.global.defaultColor;dt._set("global",{elements:{line:{tension:.4,backgroundColor:Yt,borderWidth:3,borderColor:Yt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:true,fill:true}}});var Jt=Ot.extend({_type:"line",draw:function(){var t=this;var e=t._view;var i=t._chart.ctx;var n=e.spanGaps;var r=t._children.slice();var o=dt.global;var a=o.elements.line;var s=-1;var l=t._loop;var c,u,h;if(!r.length)return;if(t._loop){for(c=0;c<r.length;++c){u=Mt.previousItem(r,c);if(!r[c]._view.skip&&u._view.skip){r=r.slice(c).concat(r.slice(0,c));l=n;break}}if(l)r.push(r[0])}i.save();i.lineCap=e.borderCapStyle||a.borderCapStyle;if(i.setLineDash)i.setLineDash(e.borderDash||a.borderDash);i.lineDashOffset=$t(e.borderDashOffset,a.borderDashOffset);i.lineJoin=e.borderJoinStyle||a.borderJoinStyle;i.lineWidth=$t(e.borderWidth,a.borderWidth);i.strokeStyle=e.borderColor||o.defaultColor;i.beginPath();h=r[0]._view;if(!h.skip){i.moveTo(h.x,h.y);s=0}for(c=1;c<r.length;++c){h=r[c]._view;u=s===-1?Mt.previousItem(r,c):r[s];if(!h.skip){if(s!==c-1&&!n||s===-1)i.moveTo(h.x,h.y);else Mt.canvas.lineTo(i,u._view,h);s=c}}if(l)i.closePath();i.stroke();i.restore()}}),Kt=Mt.valueOrDefault,Xt=dt.global.defaultColor;function Qt(t){var e=this._view;return e?Math.abs(t-e.x)<e.radius+e.hitRadius:false}function te(t){var e=this._view;return e?Math.abs(t-e.y)<e.radius+e.hitRadius:false}dt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Xt,borderColor:Xt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ee=Ot.extend({_type:"point",inRange:function(t,e){var i=this._view;return i?Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2):false},inLabelRange:Qt,inXRange:Qt,inYRange:te,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view;var i=this._chart.ctx;var n=e.pointStyle;var r=e.rotation;var o=e.radius;var a=e.x;var s=e.y;var l=dt.global;var c=l.defaultColor;if(e.skip)return;if(t===undefined||Mt.canvas._isPointInArea(e,t)){i.strokeStyle=e.borderColor||c;i.lineWidth=Kt(e.borderWidth,l.elements.point.borderWidth);i.fillStyle=e.backgroundColor||c;Mt.canvas.drawPoint(i,n,o,a,s,r)}}}),ie=dt.global.defaultColor;function ne(t){return t&&t.width!==undefined}function re(t){var e,i,n,r,o;if(ne(t)){o=t.width/2;e=t.x-o;i=t.x+o;n=Math.min(t.y,t.base);r=Math.max(t.y,t.base)}else{o=t.height/2;e=Math.min(t.x,t.base);i=Math.max(t.x,t.base);n=t.y-o;r=t.y+o}return{left:e,top:n,right:i,bottom:r}}function oe(t,e,i){return t===e?i:t===i?e:t}function ae(t){var e=t.borderSkipped;var i={};if(!e)return i;if(t.horizontal){if(t.base>t.x)e=oe(e,"left","right")}else if(t.base<t.y)e=oe(e,"bottom","top");i[e]=true;return i}function se(t,e,i){var n=t.borderWidth;var r=ae(t);var o,a,s,l;if(Mt.isObject(n)){o=+n.top||0;a=+n.right||0;s=+n.bottom||0;l=+n.left||0}else o=a=s=l=+n||0;return{t:r.top||o<0?0:o>i?i:o,r:r.right||a<0?0:a>e?e:a,b:r.bottom||s<0?0:s>i?i:s,l:r.left||l<0?0:l>e?e:l}}function le(t){var e=re(t);var i=e.right-e.left;var n=e.bottom-e.top;var r=se(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n},inner:{x:e.left+r.l,y:e.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b}}}function ce(t,e,i){var n=e===null;var r=i===null;var o=!t||n&&r?false:re(t);return o&&(n||e>=o.left&&e<=o.right)&&(r||i>=o.top&&i<=o.bottom)}dt._set("global",{elements:{rectangle:{backgroundColor:ie,borderColor:ie,borderSkipped:"bottom",borderWidth:0}}});var ue=Ot.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx;var e=this._view;var i=le(e);var n=i.outer;var r=i.inner;t.fillStyle=e.backgroundColor;t.fillRect(n.x,n.y,n.w,n.h);if(n.w===r.w&&n.h===r.h)return;t.save();t.beginPath();t.rect(n.x,n.y,n.w,n.h);t.clip();t.fillStyle=e.borderColor;t.rect(r.x,r.y,r.w,r.h);t.fill("evenodd");t.restore()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return ce(this._view,t,e)},inLabelRange:function(t,e){var i=this._view;return ne(i)?ce(i,t,null):ce(i,null,e)},inXRange:function(t){return ce(this._view,t,null)},inYRange:function(t){return ce(this._view,null,t)},getCenterPoint:function(){var t=this._view;var e,i;if(ne(t)){e=t.x;i=(t.y+t.base)/2}else{e=(t.x+t.base)/2;i=t.y}return{x:e,y:i}},getArea:function(){var t=this._view;return ne(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),he={},pe,de=Jt,fe=ee,me=ue;he.Arc=qt,he.Line=de,he.Point=fe,he.Rectangle=me;var ge=Mt._deprecated,ve=Mt.valueOrDefault;function _e(t,e){var i=t._length;var n,r,o,a;for(o=1,a=e.length;o<a;++o)i=Math.min(i,Math.abs(e[o]-e[o-1]));for(o=0,a=t.getTicks().length;o<a;++o){r=t.getPixelForTick(o);i=o>0?Math.min(i,Math.abs(r-n)):i;n=r}return i}function ye(t,e,i){var n=i.barThickness;var r=e.stackCount;var o=e.pixels[t];var a=Mt.isNullOrUndef(n)?_e(e.scale,e.pixels):-1;var s,l;if(Mt.isNullOrUndef(n)){s=a*i.categoryPercentage;l=i.barPercentage}else{s=n*r;l=1}return{chunk:s/r,ratio:l,start:o-s/2}}function be(t,e,i){var n=e.pixels;var r=n[t];var o=t>0?n[t-1]:null;var a=t<n.length-1?n[t+1]:null;var s=i.categoryPercentage;var l,c;if(o===null)o=r-(a===null?e.end-e.start:a-r);if(a===null)a=r+r-o;l=r-(r-Math.min(o,a))/2*s;c=Math.abs(a-o)/2*s;return{chunk:c/e.stackCount,ratio:i.barPercentage,start:l}}dt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:true,gridLines:{offsetGridLines:true}}],yAxes:[{type:"linear"}]}}),dt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var xe=Ht.extend({dataElementType:he.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t=this;var e,i;Ht.prototype.initialize.apply(t,arguments);e=t.getMeta();e.stack=t.getDataset().stack;e.bar=true;i=t._getIndexScale().options;ge("bar chart",i.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage");ge("bar chart",i.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness");ge("bar chart",i.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage");ge("bar chart",t._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength");ge("bar chart",i.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e=this;var i=e.getMeta().data;var n,r;e._ruler=e.getRuler();for(n=0,r=i.length;n<r;++n)e.updateElement(i[n],n,t)},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=n.getDataset();var a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(r.xAxisID);t._yScale=n.getScaleForId(r.yAxisID);t._datasetIndex=n.index;t._index=e;t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:o.label,label:n.chart.data.labels[e]};if(Mt.isArray(o.data[e]))t._model.borderSkipped=null;n._updateElementGeometry(t,e,i,a);t.pivot()},_updateElementGeometry:function(t,e,i,n){var r=this;var o=t._model;var a=r._getValueScale();var s=a.getBasePixel();var l=a.isHorizontal();var c=r._ruler||r.getRuler();var u=r.calculateBarValuePixels(r.index,e,n);var h=r.calculateBarIndexPixels(r.index,e,c,n);o.horizontal=l;o.base=i?s:u.base;o.x=l?i?s:u.head:h.center;o.y=l?h.center:i?s:u.head;o.height=l?h.size:undefined;o.width=l?undefined:h.size},_getStacks:function(t){var e=this;var i=e._getIndexScale();var n=i._getMatchingVisibleMetas(e._type);var r=i.options.stacked;var o=n.length;var a=[];var s,l;for(s=0;s<o;++s){l=n[s];if(r===false||a.indexOf(l.stack)===-1||r===undefined&&l.stack===undefined)a.push(l.stack);if(l.index===t)break}return a},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t);var n=e!==undefined?i.indexOf(e):-1;return n===-1?i.length-1:n},getRuler:function(){var t=this;var e=t._getIndexScale();var i=[];var n,r;for(n=0,r=t.getMeta().data.length;n<r;++n)i.push(e.getPixelForValue(null,n,t.index));return{pixels:i,start:e._startPixel,end:e._endPixel,stackCount:t.getStackCount(),scale:e}},calculateBarValuePixels:function(t,e,i){var n=this;var r=n.chart;var o=n._getValueScale();var a=o.isHorizontal();var s=r.data.datasets;var l=o._getMatchingVisibleMetas(n._type);var c=o._parseValue(s[t].data[e]);var u=i.minBarLength;var h=o.options.stacked;var p=n.getMeta().stack;var d=c.start===undefined?0:c.max>=0&&c.min>=0?c.min:c.max;var f=c.start===undefined?c.end:c.max>=0&&c.min>=0?c.max-c.min:c.min-c.max;var m=l.length;var g,v,_,y,b,x,k;if(h||h===undefined&&p!==undefined)for(g=0;g<m;++g){v=l[g];if(v.index===t)break;if(v.stack===p){k=o._parseValue(s[v.index].data[e]);_=k.start===undefined?k.end:k.min>=0&&k.max>=0?k.max:k.min;if(c.min<0&&_<0||c.max>=0&&_>0)d+=_}}y=o.getPixelForValue(d);b=o.getPixelForValue(d+f);x=b-y;if(u!==undefined&&Math.abs(x)<u){x=u;if(f>=0&&!a||f<0&&a)b=y-u;else b=y+u}return{size:x,base:y,head:b,center:b+x/2}},calculateBarIndexPixels:function(t,e,i,n){var r=this;var o=n.barThickness==="flex"?be(e,i,n):ye(e,i,n);var a=r.getStackIndex(t,r.getMeta().stack);var s=o.start+o.chunk*a+o.chunk/2;var l=Math.min(ve(n.maxBarThickness,Infinity),o.chunk*o.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var t=this;var e=t.chart;var i=t._getValueScale();var n=t.getMeta().data;var r=t.getDataset();var o=n.length;var a=0;Mt.canvas.clipArea(e.ctx,e.chartArea);for(;a<o;++a){var s=i._parseValue(r.data[a]);if(!isNaN(s.min)&&!isNaN(s.max))n[a].draw()}Mt.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this;var e=Mt.extend({},Ht.prototype._resolveDataElementOptions.apply(t,arguments));var i=t._getIndexScale().options;var n=t._getValueScale().options;e.barPercentage=ve(i.barPercentage,e.barPercentage);e.barThickness=ve(i.barThickness,e.barThickness);e.categoryPercentage=ve(i.categoryPercentage,e.categoryPercentage);e.maxBarThickness=ve(i.maxBarThickness,e.maxBarThickness);e.minBarLength=ve(n.minBarLength,e.minBarLength);return e}}),ke=Mt.valueOrDefault,we=Mt.options.resolve;dt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";var n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var Le=Ht.extend({dataElementType:he.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(i){var n=this;var t=n.getMeta();var e=t.data;Mt.each(e,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=t.custom||{};var a=n.getScaleForId(r.xAxisID);var s=n.getScaleForId(r.yAxisID);var l=n._resolveDataElementOptions(t,e);var c=n.getDataset().data[e];var u=n.index;var h=i?a.getPixelForDecimal(.5):a.getPixelForValue(typeof c==="object"?c:NaN,e,u);var p=i?s.getBasePixel():s.getPixelForValue(c,e,u);t._xScale=a;t._yScale=s;t._options=l;t._datasetIndex=u;t._index=e;t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:o.skip||isNaN(h)||isNaN(p),x:h,y:p};t.pivot()},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Mt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=ke(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=ke(i.hoverBorderColor,n(i.borderColor));e.borderWidth=ke(i.hoverBorderWidth,i.borderWidth);e.radius=i.radius+i.hoverRadius},_resolveDataElementOptions:function(t,e){var i=this;var n=i.chart;var r=i.getDataset();var o=t.custom||{};var a=r.data[e]||{};var s=Ht.prototype._resolveDataElementOptions.apply(i,arguments);var l={chart:n,dataIndex:e,dataset:r,datasetIndex:i.index};if(i._cachedDataOpts===s)s=Mt.extend({},s);s.radius=we([o.radius,a.r,i._config.radius,n.options.elements.point.radius],l,e);return s}}),Me=Mt.valueOrDefault,Ce=Math.PI,Se=Ce*2,Pe=Ce/2;dt._set("doughnut",{animation:{animateRotate:true,animateScale:false},hover:{mode:"single"},legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var r=i.labels;var o,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length)for(o=0,a=n[0].data.length;o<a;++o){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[o];if(r[o])s.appendChild(document.createTextNode(r[o]))}return e.outerHTML},legend:{labels:{generateLabels:function(r){var o=r.data;if(o.labels.length&&o.datasets.length)return o.labels.map(function(t,e){var i=r.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(o.datasets[0].data[e])||i.data[e].hidden,index:e}});return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var r,o,a;for(r=0,o=(n.data.datasets||[]).length;r<o;++r){a=n.getDatasetMeta(r);if(a.data[i])a.data[i].hidden=!a.data[i].hidden}n.update()}},cutoutPercentage:50,rotation:-Pe,circumference:Se,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index];var n=": "+e.datasets[t.datasetIndex].data[t.index];if(Mt.isArray(i)){i=i.slice();i[0]+=n}else i+=n;return i}}}});var Te=Ht.extend({dataElementType:he.Arc,linkScales:Mt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){var e=0;for(var i=0;i<t;++i)if(this.chart.isDatasetVisible(i))++e;return e},update:function(t){var e=this;var i=e.chart;var n=i.chartArea;var r=i.options;var o=1;var a=1;var s=0;var l=0;var c=e.getMeta();var u=c.data;var h=r.cutoutPercentage/100||0;var p=r.circumference;var d=e._getRingWeight(e.index);var f,m,g,v;if(p<Se){var _=r.rotation%Se;_+=_>=Ce?-Se:_<-Ce?Se:0;var y=_+p;var b=Math.cos(_);var x=Math.sin(_);var k=Math.cos(y);var w=Math.sin(y);var L=_<=0&&y>=0||y>=Se;var M=_<=Pe&&y>=Pe||y>=Se+Pe;var C=_===-Ce||y>=Ce;var S=_<=-Pe&&y>=-Pe||y>=Ce+Pe;var P=C?-1:Math.min(b,b*h,k,k*h);var T=S?-1:Math.min(x,x*h,w,w*h);var E=L?1:Math.max(b,b*h,k,k*h);var D=M?1:Math.max(x,x*h,w,w*h);o=(E-P)/2;a=(D-T)/2;s=-(E+P)/2;l=-(D+T)/2}for(g=0,v=u.length;g<v;++g)u[g]._options=e._resolveDataElementOptions(u[g],g);i.borderWidth=e.getMaxBorderWidth();f=(n.right-n.left-i.borderWidth)/o;m=(n.bottom-n.top-i.borderWidth)/a;i.outerRadius=Math.max(Math.min(f,m)/2,0);i.innerRadius=Math.max(i.outerRadius*h,0);i.radiusLength=(i.outerRadius-i.innerRadius)/(e._getVisibleDatasetWeightTotal()||1);i.offsetX=s*i.outerRadius;i.offsetY=l*i.outerRadius;c.total=e.calculateTotal();e.outerRadius=i.outerRadius-i.radiusLength*e._getRingWeightOffset(e.index);e.innerRadius=Math.max(e.outerRadius-i.radiusLength*d,0);for(g=0,v=u.length;g<v;++g)e.updateElement(u[g],g,t)},updateElement:function(t,e,i){var n=this;var r=n.chart;var o=r.chartArea;var a=r.options;var s=a.animation;var l=(o.left+o.right)/2;var c=(o.top+o.bottom)/2;var u=a.rotation;var h=a.rotation;var p=n.getDataset();var d=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(p.data[e])*(a.circumference/Se);var f=i&&s.animateScale?0:n.innerRadius;var m=i&&s.animateScale?0:n.outerRadius;var g=t._options||{};Mt.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+r.offsetX,y:c+r.offsetY,startAngle:u,endAngle:h,circumference:d,outerRadius:m,innerRadius:f,label:Mt.valueAtIndexOrDefault(p.label,e,r.data.labels[e])}});var v=t._model;if(!i||!s.animateRotate){if(e===0)v.startAngle=a.rotation;else v.startAngle=n.getMeta().data[e-1]._model.endAngle;v.endAngle=v.startAngle+v.circumference}t.pivot()},calculateTotal:function(){var i=this.getDataset();var t=this.getMeta();var n=0;var r;Mt.each(t.data,function(t,e){r=i.data[e];if(!isNaN(r)&&!t.hidden)n+=Math.abs(r)});return n},calculateCircumference:function(t){var e=this.getMeta().total;if(e>0&&!isNaN(t))return Se*(Math.abs(t)/e);return 0},getMaxBorderWidth:function(t){var e=this;var i=0;var n=e.chart;var r,o,a,s,l,c,u,h;if(!t)for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r);t=a.data;if(r!==e.index)l=a.controller;break}if(!t)return 0;for(r=0,o=t.length;r<o;++r){s=t[r];if(l){l._configure();c=l._resolveDataElementOptions(s,r)}else c=s._options;if(c.borderAlign!=="inner"){u=c.borderWidth;h=c.hoverBorderWidth;i=u>i?u:i;i=h>i?h:i}}return i},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Mt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=Me(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Me(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Me(i.hoverBorderWidth,i.borderWidth)},_getRingWeightOffset:function(t){var e=0;for(var i=0;i<t;++i)if(this.chart.isDatasetVisible(i))e+=this._getRingWeight(i);return e},_getRingWeight:function(t){return Math.max(Me(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});dt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:true,gridLines:{offsetGridLines:true}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),dt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Ee=xe.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),De=Mt.valueOrDefault,Ae=Mt.options.resolve,Oe=Mt.canvas._isPointInArea;function Ie(t,e){var i=t&&t.options.ticks||{};var n=i.reverse;var r=i.min===undefined?e:0;var o=i.max===undefined?e:0;return{start:n?o:r,end:n?r:o}}function Be(t,e,i){var n=i/2;var r=Ie(t,n);var o=Ie(e,n);return{top:o.end,right:r.end,bottom:o.start,left:r.start}}function Re(t){var e,i,n,r;if(Mt.isObject(t)){e=t.top;i=t.right;n=t.bottom;r=t.left}else e=i=n=r=t;return{top:e,right:i,bottom:n,left:r}}dt._set("line",{showLines:true,spanGaps:false,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ze=Ht.extend({datasetElementType:he.Line,dataElementType:he.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r=i.data||[];var o=e.chart.options;var a=e._config;var s=e._showLine=De(a.showLine,o.showLines);var l,c;e._xScale=e.getScaleForId(i.xAxisID);e._yScale=e.getScaleForId(i.yAxisID);if(s){if(a.tension!==undefined&&a.lineTension===undefined)a.lineTension=a.tension;n._scale=e._yScale;n._datasetIndex=e.index;n._children=r;n._model=e._resolveDatasetElementOptions(n);n.pivot()}for(l=0,c=r.length;l<c;++l)e.updateElement(r[l],l,t);if(s&&n._model.tension!==0)e.updateBezierControlPoints();for(l=0,c=r.length;l<c;++l)r[l].pivot()},updateElement:function(t,e,i){var n=this;var r=n.getMeta();var o=t.custom||{};var a=n.getDataset();var s=n.index;var l=a.data[e];var c=n._xScale;var u=n._yScale;var h=r.dataset._model;var p,d;var f=n._resolveDataElementOptions(t,e);p=c.getPixelForValue(typeof l==="object"?l:NaN,e,s);d=i?u.getBasePixel():n.calculatePointY(l,e,s);t._xScale=c;t._yScale=u;t._options=f;t._datasetIndex=s;t._index=e;t._model={x:p,y:d,skip:o.skip||isNaN(p)||isNaN(d),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:De(o.tension,h?h.tension:0),steppedLine:h?h.steppedLine:false,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this;var i=e._config;var n=t.custom||{};var r=e.chart.options;var o=r.elements.line;var a=Ht.prototype._resolveDatasetElementOptions.apply(e,arguments);a.spanGaps=De(i.spanGaps,r.spanGaps);a.tension=De(i.lineTension,o.tension);a.steppedLine=Ae([n.steppedLine,i.steppedLine,o.stepped]);a.clip=Re(De(i.clip,Be(e._xScale,e._yScale,a.borderWidth)));return a},calculatePointY:function(t,e,i){var n=this;var r=n.chart;var o=n._yScale;var a=0;var s=0;var l,c,u,h,p,d,f;if(o.options.stacked){p=+o.getRightValue(t);d=r._getSortedVisibleDatasetMetas();f=d.length;for(l=0;l<f;++l){u=d[l];if(u.index===i)break;c=r.data.datasets[u.index];if(u.type==="line"&&u.yAxisID===o.id){h=+o.getRightValue(c.data[e]);if(h<0)s+=h||0;else a+=h||0}}if(p<0)return o.getPixelForValue(s+p);return o.getPixelForValue(a+p)}return o.getPixelForValue(t)},updateBezierControlPoints:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.dataset._model;var r=e.chartArea;var o=i.data||[];var a,s,l,c;if(n.spanGaps)o=o.filter(function(t){return!t._model.skip});function u(t,e,i){return Math.max(Math.min(t,i),e)}if(n.cubicInterpolationMode==="monotone")Mt.splineCurveMonotone(o);else for(a=0,s=o.length;a<s;++a){l=o[a]._model;c=Mt.splineCurve(Mt.previousItem(o,a)._model,l,Mt.nextItem(o,a)._model,n.tension);l.controlPointPreviousX=c.previous.x;l.controlPointPreviousY=c.previous.y;l.controlPointNextX=c.next.x;l.controlPointNextY=c.next.y}if(e.options.elements.line.capBezierPoints)for(a=0,s=o.length;a<s;++a){l=o[a]._model;if(Oe(l,r)){if(a>0&&Oe(o[a-1]._model,r)){l.controlPointPreviousX=u(l.controlPointPreviousX,r.left,r.right);l.controlPointPreviousY=u(l.controlPointPreviousY,r.top,r.bottom)}if(a<o.length-1&&Oe(o[a+1]._model,r)){l.controlPointNextX=u(l.controlPointNextX,r.left,r.right);l.controlPointNextY=u(l.controlPointNextY,r.top,r.bottom)}}}},draw:function(){var t=this;var e=t.chart;var i=t.getMeta();var n=i.data||[];var r=e.chartArea;var o=e.canvas;var a=0;var s=n.length;var l;if(t._showLine){l=i.dataset._model.clip;Mt.canvas.clipArea(e.ctx,{left:l.left===false?0:r.left-l.left,right:l.right===false?o.width:r.right+l.right,top:l.top===false?0:r.top-l.top,bottom:l.bottom===false?o.height:r.bottom+l.bottom});i.dataset.draw();Mt.canvas.unclipArea(e.ctx)}for(;a<s;++a)n[a].draw(r)},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Mt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=De(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=De(i.hoverBorderColor,n(i.borderColor));e.borderWidth=De(i.hoverBorderWidth,i.borderWidth);e.radius=De(i.hoverRadius,i.radius)}}),Fe=Mt.options.resolve;dt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:false},gridLines:{circular:true},pointLabels:{display:false},ticks:{beginAtZero:true}},animation:{animateRotate:true,animateScale:true},startAngle:-.5*Math.PI,legendCallback:function(t){var e=document.createElement("ul");var i=t.data;var n=i.datasets;var r=i.labels;var o,a,s,l;e.setAttribute("class",t.id+"-legend");if(n.length)for(o=0,a=n[0].data.length;o<a;++o){s=e.appendChild(document.createElement("li"));l=s.appendChild(document.createElement("span"));l.style.backgroundColor=n[0].backgroundColor[o];if(r[o])s.appendChild(document.createTextNode(r[o]))}return e.outerHTML},legend:{labels:{generateLabels:function(r){var o=r.data;if(o.labels.length&&o.datasets.length)return o.labels.map(function(t,e){var i=r.getDatasetMeta(0);var n=i.controller.getStyle(e);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,hidden:isNaN(o.datasets[0].data[e])||i.data[e].hidden,index:e}});return[]}},onClick:function(t,e){var i=e.index;var n=this.chart;var r,o,a;for(r=0,o=(n.data.datasets||[]).length;r<o;++r){a=n.getDatasetMeta(r);a.data[i].hidden=!a.data[i].hidden}n.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Ne=Ht.extend({dataElementType:he.Arc,linkScales:Mt.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getDataset();var n=e.getMeta();var r=e.chart.options.startAngle||0;var o=e._starts=[];var a=e._angles=[];var s=n.data;var l,c,u;e._updateRadius();n.count=e.countVisibleElements();for(l=0,c=i.data.length;l<c;l++){o[l]=r;u=e._computeAngle(l);a[l]=u;r+=u}for(l=0,c=s.length;l<c;++l){s[l]._options=e._resolveDataElementOptions(s[l],l);e.updateElement(s[l],l,t)}},_updateRadius:function(){var t=this;var e=t.chart;var i=e.chartArea;var n=e.options;var r=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max(r/2,0);e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0);e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount();t.outerRadius=e.outerRadius-e.radiusLength*t.index;t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this;var r=n.chart;var o=n.getDataset();var a=r.options;var s=a.animation;var l=r.scale;var c=r.data.labels;var u=l.xCenter;var h=l.yCenter;var p=a.startAngle;var d=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]);var f=n._starts[e];var m=f+(t.hidden?0:n._angles[e]);var g=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]);var v=t._options||{};Mt.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:h,innerRadius:0,outerRadius:i?g:d,startAngle:i&&s.animateRotate?p:f,endAngle:i&&s.animateRotate?p:m,label:Mt.valueAtIndexOrDefault(c,e,c[e])}});t.pivot()},countVisibleElements:function(){var i=this.getDataset();var t=this.getMeta();var n=0;Mt.each(t.data,function(t,e){if(!isNaN(i.data[e])&&!t.hidden)n++});return n},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Mt.getHoverColor;var r=Mt.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth};e.backgroundColor=r(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=r(i.hoverBorderColor,n(i.borderColor));e.borderWidth=r(i.hoverBorderWidth,i.borderWidth)},_computeAngle:function(t){var e=this;var i=this.getMeta().count;var n=e.getDataset();var r=e.getMeta();if(isNaN(n.data[t])||r.data[t].hidden)return 0;var o={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return Fe([e.chart.options.elements.arc.angle,2*Math.PI/i],o,t)}});dt._set("pie",Mt.clone(dt.doughnut)),dt._set("pie",{cutoutPercentage:0});var je=Te,Ue=Mt.valueOrDefault;dt._set("radar",{spanGaps:false,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var He=Ht.extend({datasetElementType:he.Line,dataElementType:he.Point,linkScales:Mt.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e=this;var i=e.getMeta();var n=i.dataset;var r=i.data||[];var o=e.chart.scale;var a=e._config;var s,l;if(a.tension!==undefined&&a.lineTension===undefined)a.lineTension=a.tension;n._scale=o;n._datasetIndex=e.index;n._children=r;n._loop=true;n._model=e._resolveDatasetElementOptions(n);n.pivot();for(s=0,l=r.length;s<l;++s)e.updateElement(r[s],s,t);e.updateBezierControlPoints();for(s=0,l=r.length;s<l;++s)r[s].pivot()},updateElement:function(t,e,i){var n=this;var r=t.custom||{};var o=n.getDataset();var a=n.chart.scale;var s=a.getPointPositionForValue(e,o.data[e]);var l=n._resolveDataElementOptions(t,e);var c=n.getMeta().dataset._model;var u=i?a.xCenter:s.x;var h=i?a.yCenter:s.y;t._scale=a;t._options=l;t._datasetIndex=n.index;t._index=e;t._model={x:u,y:h,skip:r.skip||isNaN(u)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ue(r.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this;var e=t._config;var i=t.chart.options;var n=Ht.prototype._resolveDatasetElementOptions.apply(t,arguments);n.spanGaps=Ue(e.spanGaps,i.spanGaps);n.tension=Ue(e.lineTension,i.elements.line.tension);return n},updateBezierControlPoints:function(){var t=this;var e=t.getMeta();var i=t.chart.chartArea;var n=e.data||[];var r,o,a,s;if(e.dataset._model.spanGaps)n=n.filter(function(t){return!t._model.skip});function l(t,e,i){return Math.max(Math.min(t,i),e)}for(r=0,o=n.length;r<o;++r){a=n[r]._model;s=Mt.splineCurve(Mt.previousItem(n,r,true)._model,a,Mt.nextItem(n,r,true)._model,a.tension);a.controlPointPreviousX=l(s.previous.x,i.left,i.right);a.controlPointPreviousY=l(s.previous.y,i.top,i.bottom);a.controlPointNextX=l(s.next.x,i.left,i.right);a.controlPointNextY=l(s.next.y,i.top,i.bottom)}},setHoverStyle:function(t){var e=t._model;var i=t._options;var n=Mt.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius};e.backgroundColor=Ue(i.hoverBackgroundColor,n(i.backgroundColor));e.borderColor=Ue(i.hoverBorderColor,n(i.borderColor));e.borderWidth=Ue(i.hoverBorderWidth,i.borderWidth);e.radius=Ue(i.hoverRadius,i.radius)}});dt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),dt._set("global",{datasets:{scatter:{showLine:false}}});var Ge,Ze={bar:xe,bubble:Le,doughnut:Te,horizontalBar:Ee,line:ze,polarArea:Ne,pie:je,radar:He,scatter:ze};function We(t,e){if(t.native)return{x:t.x,y:t.y};return Mt.getRelativePosition(t,e)}function Ve(t,e){var i=t._getSortedVisibleDatasetMetas();var n,r,o,a,s,l;for(r=0,a=i.length;r<a;++r){n=i[r].data;for(o=0,s=n.length;o<s;++o){l=n[o];if(!l._view.skip)e(l)}}}function qe(t,e){var i=[];Ve(t,function(t){if(t.inRange(e.x,e.y))i.push(t)});return i}function $e(t,n,r,o){var a=Number.POSITIVE_INFINITY;var s=[];Ve(t,function(t){if(r&&!t.inRange(n.x,n.y))return;var e=t.getCenterPoint();var i=o(n,e);if(i<a){s=[t];a=i}else if(i===a)s.push(t)});return s}function Ye(t){var r=t.indexOf("x")!==-1;var o=t.indexOf("y")!==-1;return function(t,e){var i=r?Math.abs(t.x-e.x):0;var n=o?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}function Je(t,e,i){var n=We(e,t);i.axis=i.axis||"x";var r=Ye(i.axis);var o=i.intersect?qe(t,n):$e(t,n,false,r);var a=[];if(!o.length)return[];t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[o[0]._index];if(e&&!e._view.skip)a.push(e)});return a}var Ke={modes:{single:function(t,e){var i=We(e,t);var n=[];Ve(t,function(t){if(t.inRange(i.x,i.y)){n.push(t);return n}});return n.slice(0,1)},label:Je,index:Je,dataset:function(t,e,i){var n=We(e,t);i.axis=i.axis||"xy";var r=Ye(i.axis);var o=i.intersect?qe(t,n):$e(t,n,false,r);if(o.length>0)o=t.getDatasetMeta(o[0]._datasetIndex).data;return o},"x-axis":function(t,e){return Je(t,e,{intersect:false})},point:function(t,e){var i=We(e,t);return qe(t,i)},nearest:function(t,e,i){var n=We(e,t);i.axis=i.axis||"xy";var r=Ye(i.axis);return $e(t,n,i.intersect,r)},x:function(t,e,i){var n=We(e,t);var r=[];var o=false;Ve(t,function(t){if(t.inXRange(n.x))r.push(t);if(t.inRange(n.x,n.y))o=true});if(i.intersect&&!o)r=[];return r},y:function(t,e,i){var n=We(e,t);var r=[];var o=false;Ve(t,function(t){if(t.inYRange(n.y))r.push(t);if(t.inRange(n.x,n.y))o=true});if(i.intersect&&!o)r=[];return r}}},Xe=Mt.extend;function Qe(t,e){return Mt.where(t,function(t){return t.pos===e})}function ti(t,r){return t.sort(function(t,e){var i=r?e:t;var n=r?t:e;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function ei(t){var e=[];var i,n,r;for(i=0,n=(t||[]).length;i<n;++i){r=t[i];e.push({index:i,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight})}return e}function ii(t,e){var i,n,r;for(i=0,n=t.length;i<n;++i){r=t[i];r.width=r.horizontal?r.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth;r.height=r.horizontal&&e.hBoxMaxHeight}}function ni(t){var e=ei(t);var i=ti(Qe(e,"left"),true);var n=ti(Qe(e,"right"));var r=ti(Qe(e,"top"),true);var o=ti(Qe(e,"bottom"));return{leftAndTop:i.concat(r),rightAndBottom:n.concat(o),chartArea:Qe(e,"chartArea"),vertical:i.concat(n),horizontal:r.concat(o)}}function ri(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function oi(t,e,i){var n=i.box;var r=t.maxPadding;var o,a;if(i.size)t[i.pos]-=i.size;i.size=i.horizontal?n.height:n.width;t[i.pos]+=i.size;if(n.getPadding){var s=n.getPadding();r.top=Math.max(r.top,s.top);r.left=Math.max(r.left,s.left);r.bottom=Math.max(r.bottom,s.bottom);r.right=Math.max(r.right,s.right)}o=e.outerWidth-ri(r,t,"left","right");a=e.outerHeight-ri(r,t,"top","bottom");if(o!==t.w||a!==t.h){t.w=o;t.h=a;var l=i.horizontal?[o,t.w]:[a,t.h];return l[0]!==l[1]&&(!isNaN(l[0])||!isNaN(l[1]))}}function ai(i){var n=i.maxPadding;function t(t){var e=Math.max(n[t]-i[t],0);i[t]+=e;return e}i.y+=t("top");i.x+=t("left");t("right");t("bottom")}function si(t,i){var n=i.maxPadding;function e(t){var e={left:0,top:0,right:0,bottom:0};t.forEach(function(t){e[t]=Math.max(i[t],n[t])});return e}return t?e(["left","right"]):e(["top","bottom"])}function li(t,e,i){var n=[];var r,o,a,s,l,c;for(r=0,o=t.length;r<o;++r){a=t[r];s=a.box;s.update(a.width||e.w,a.height||e.h,si(a.horizontal,e));if(oi(e,i,a)){c=true;if(n.length)l=true}if(!s.fullWidth)n.push(a)}return l?li(n,e,i)||c:c}function ci(t,e,i){var n=i.padding;var r=e.x;var o=e.y;var a,s,l,c;for(a=0,s=t.length;a<s;++a){l=t[a];c=l.box;if(l.horizontal){c.left=c.fullWidth?n.left:e.left;c.right=c.fullWidth?i.outerWidth-n.right:e.left+e.w;c.top=o;c.bottom=o+c.height;c.width=c.right-c.left;o=c.bottom}else{c.left=r;c.right=r+c.width;c.top=e.top;c.bottom=e.top+e.h;c.height=c.bottom-c.top;r=c.right}}e.x=r;e.y=o}dt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ui={defaults:{},addBox:function(t,e){if(!t.boxes)t.boxes=[];e.fullWidth=e.fullWidth||false;e.position=e.position||"top";e.weight=e.weight||0;e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]};t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;if(i!==-1)t.boxes.splice(i,1)},configure:function(t,e,i){var n=["fullWidth","position","weight"];var r=n.length;var o=0;var a;for(;o<r;++o){a=n[o];if(i.hasOwnProperty(a))e[a]=i[a]}},update:function(i,t,e){if(!i)return;var n=i.options.layout||{};var r=Mt.options.toPadding(n.padding);var o=t-r.width;var a=e-r.height;var s=ni(i.boxes);var l=s.vertical;var c=s.horizontal;var u=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,vBoxMaxWidth:o/2/l.length,hBoxMaxHeight:a/2});var h=Xe({maxPadding:Xe({},r),w:o,h:a,x:r.left,y:r.top},r);ii(l.concat(c),u);li(l,h,u);if(li(c,h,u))li(l,h,u);ai(h);ci(s.leftAndTop,h,u);h.x+=h.w;h.y+=h.h;ci(s.rightAndBottom,h,u);i.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h};Mt.each(s.chartArea,function(t){var e=t.box;Xe(e,i.chartArea);e.update(h.w,h.h)})}},hi={acquireContext:function(t){if(t&&t.canvas)t=t.canvas;return t&&t.getContext("2d")||null}},pi="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",di,fi=e(Object.freeze({__proto__:null,default:pi})),mi="$chartjs",gi="chartjs-",vi=gi+"size-monitor",_i=gi+"render-monitor",yi=gi+"render-animation",bi=["animationstart","webkitAnimationStart"],xi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ki(t,e){var i=Mt.getStyle(t,e);var n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):undefined}function wi(t,e){var i=t.style;var n=t.getAttribute("height");var r=t.getAttribute("width");t[mi]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}};i.display=i.display||"block";if(r===null||r===""){var o=ki(t,"width");if(o!==undefined)t.width=o}if(n===null||n==="")if(t.style.height==="")t.height=t.width/(e.options.aspectRatio||2);else{var a=ki(t,"height");if(o!==undefined)t.height=a}return t}var Li,Mi=function(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("e",null,e)}catch(t){}return t}()?{passive:true}:false;function Ci(t,e,i){t.addEventListener(e,i,Mi)}function Si(t,e,i){t.removeEventListener(e,i,Mi)}function Pi(t,e,i,n,r){return{type:t,chart:e,native:r||null,x:i!==undefined?i:null,y:n!==undefined?n:null}}function Ti(t,e){var i=xi[t.type]||t.type;var n=Mt.getRelativePosition(t,e);return Pi(i,e,n.x,n.y,t)}function Ei(t,e){var i=false;var n=[];return function(){n=Array.prototype.slice.call(arguments);e=e||this;if(!i){i=true;Mt.requestAnimFrame.call(window,function(){i=false;t.apply(e,n)})}}}function Di(t){var e=document.createElement("div");e.className=t||"";return e}function Ai(t){var e=1e6;var i=Di(vi);var n=Di(vi+"-expand");var r=Di(vi+"-shrink");n.appendChild(Di());r.appendChild(Di());i.appendChild(n);i.appendChild(r);i._reset=function(){n.scrollLeft=e;n.scrollTop=e;r.scrollLeft=e;r.scrollTop=e};var o=function(){i._reset();t()};Ci(n,"scroll",o.bind(n,"expand"));Ci(r,"scroll",o.bind(r,"shrink"));return i}function Oi(e,i){var t=e[mi]||(e[mi]={});var n=t.renderProxy=function(t){if(t.animationName===yi)i()};Mt.each(bi,function(t){Ci(e,t,n)});t.reflow=!!e.offsetParent;e.classList.add(_i)}function Ii(e){var t=e[mi]||{};var i=t.renderProxy;if(i){Mt.each(bi,function(t){Si(e,t,i)});delete t.renderProxy}e.classList.remove(_i)}function Bi(i,n,r){var o=i[mi]||(i[mi]={});var e=o.resizer=Ai(Ei(function(){if(o.resizer){var t=r.options.maintainAspectRatio&&i.parentNode;var e=t?t.clientWidth:0;n(Pi("resize",r));if(t&&t.clientWidth<e&&r.canvas)n(Pi("resize",r))}}));Oi(i,function(){if(o.resizer){var t=i.parentNode;if(t&&t!==e.parentNode)t.insertBefore(e,t.firstChild);e._reset()}})}function Ri(t){var e=t[mi]||{};var i=e.resizer;delete e.resizer;Ii(t);if(i&&i.parentNode)i.parentNode.removeChild(i)}function zi(t,e){var i=t[mi]||(t[mi]={});if(!i.containsStyles){i.containsStyles=true;e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css");n.appendChild(document.createTextNode(e));t.appendChild(n)}}var Fi={disableCSSInjection:false,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;var i=e.host?e:document.head;zi(i,fi)}},acquireContext:function(t,e){if(typeof t==="string")t=document.getElementById(t);else if(t.length)t=t[0];if(t&&t.canvas)t=t.canvas;var i=t&&t.getContext&&t.getContext("2d");if(i&&i.canvas===t){this._ensureLoaded(t);wi(t,e);return i}return null},releaseContext:function(t){var i=t.canvas;if(!i[mi])return;var n=i[mi].initial;["height","width"].forEach(function(t){var e=n[t];if(Mt.isNullOrUndef(e))i.removeAttribute(t);else i.setAttribute(t,e)});Mt.each(n.style||{},function(t,e){i.style[e]=t});i.width=i.width;delete i[mi]},addEventListener:function(e,t,i){var n=e.canvas;if(t==="resize"){Bi(n,i,e);return}var r=i[mi]||(i[mi]={});var o=r.proxies||(r.proxies={});var a=o[e.id+"_"+t]=function(t){i(Ti(t,e))};Ci(n,t,a)},removeEventListener:function(t,e,i){var n=t.canvas;if(e==="resize"){Ri(n);return}var r=i[mi]||{};var o=r.proxies||{};var a=o[t.id+"_"+e];if(!a)return;Si(n,e,a)}};Mt.addEvent=Ci,Mt.removeEvent=Si;var Ni=Fi._enabled?Fi:hi,ji=Mt.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ni);dt._set("global",{plugins:{}});var Ui={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){if(e.indexOf(t)===-1)e.push(t)});this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach(function(t){var e=i.indexOf(t);if(e!==-1)i.splice(e,1)});this._cacheId++},clear:function(){this._plugins=[];this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n=this.descriptors(t);var r=n.length;var o,a,s,l,c;for(o=0;o<r;++o){a=n[o];s=a.plugin;c=s[e];if(typeof c==="function"){l=[t].concat(i||[]);l.push(a.options);if(c.apply(s,l)===false)return false}}return true},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var r=[];var o=[];var i=t&&t.config||{};var a=i.options&&i.options.plugins||{};this._plugins.concat(i.plugins||[]).forEach(function(t){var e=r.indexOf(t);if(e!==-1)return;var i=t.id;var n=a[i];if(n===false)return;if(n===true)n=Mt.clone(dt.global.plugins[i]);r.push(t);o.push({plugin:t,options:n||{}})});e.descriptors=o;e.id=this._cacheId;return o},_invalidate:function(t){delete t.$plugins}},Hi={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e;this.defaults[t]=Mt.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:undefined},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?Mt.merge(Object.create(null),[dt.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var i=this;if(i.defaults.hasOwnProperty(t))i.defaults[t]=Mt.extend(i.defaults[t],e)},addScalesToLayout:function(e){Mt.each(e.scales,function(t){t.fullWidth=t.options.fullWidth;t.position=t.options.position;t.weight=t.options.weight;ui.addBox(e,t)})}},Gi=Mt.valueOrDefault,Zi=Mt.rtl.getRtlAdapter;dt._set("global",{tooltips:{enabled:true,custom:null,mode:"nearest",position:"average",intersect:true,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:true,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:Mt.noop,title:function(t,e){var i="";var n=e.labels;var r=n?n.length:0;if(t.length>0){var o=t[0];if(o.label)i=o.label;else if(o.xLabel)i=o.xLabel;else if(r>0&&o.index<r)i=n[o.index]}return i},afterTitle:Mt.noop,beforeBody:Mt.noop,beforeLabel:Mt.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";if(i)i+=": ";if(!Mt.isNullOrUndef(t.value))i+=t.value;else i+=t.yLabel;return i},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex);var n=i.data[t.index];var r=n._view;return{borderColor:r.borderColor,backgroundColor:r.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:Mt.noop,afterBody:Mt.noop,beforeFooter:Mt.noop,footer:Mt.noop,afterFooter:Mt.noop}}});var Wi={average:function(t){if(!t.length)return false;var e,i;var n=0;var r=0;var o=0;for(e=0,i=t.length;e<i;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x;r+=s.y;++o}}return{x:n/o,y:r/o}},nearest:function(t,e){var i=e.x;var n=e.y;var r=Number.POSITIVE_INFINITY;var o,a,s;for(o=0,a=t.length;o<a;++o){var l=t[o];if(l&&l.hasValue()){var c=l.getCenterPoint();var u=Mt.distanceBetweenPoints(e,c);if(u<r){r=u;s=l}}}if(s){var h=s.tooltipPosition();i=h.x;n=h.y}return{x:i,y:n}}};function Vi(t,e){if(e)if(Mt.isArray(e))Array.prototype.push.apply(t,e);else t.push(e);return t}function qi(t){if((typeof t==="string"||t instanceof String)&&t.indexOf("\n")>-1)return t.split("\n");return t}function $i(t){var e=t._xScale;var i=t._yScale||t._scale;var n=t._index;var r=t._datasetIndex;var o=t._chart.getDatasetMeta(r).controller;var a=o._getIndexScale();var s=o._getValueScale();return{xLabel:e?e.getLabelForIndex(n,r):"",yLabel:i?i.getLabelForIndex(n,r):"",label:a?""+a.getLabelForIndex(n,r):"",value:s?""+s.getLabelForIndex(n,r):"",index:n,datasetIndex:r,x:t._model.x,y:t._model.y}}function Yi(t){var e=dt.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Gi(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Gi(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Gi(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Gi(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Gi(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Gi(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Gi(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Gi(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Gi(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Ji(t,e){var i=t._chart.ctx;var n=e.yPadding*2;var r=0;var o=e.body;var a=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length;var l=e.footer.length;var c=e.titleFontSize;var u=e.bodyFontSize;var h=e.footerFontSize;n+=s*c;n+=s?(s-1)*e.titleSpacing:0;n+=s?e.titleMarginBottom:0;n+=a*u;n+=a?(a-1)*e.bodySpacing:0;n+=l?e.footerMarginTop:0;n+=l*h;n+=l?(l-1)*e.footerSpacing:0;var p=0;var d=function(t){r=Math.max(r,i.measureText(t).width+p)};i.font=Mt.fontString(c,e._titleFontStyle,e._titleFontFamily);Mt.each(e.title,d);i.font=Mt.fontString(u,e._bodyFontStyle,e._bodyFontFamily);Mt.each(e.beforeBody.concat(e.afterBody),d);p=e.displayColors?u+2:0;Mt.each(o,function(t){Mt.each(t.before,d);Mt.each(t.lines,d);Mt.each(t.after,d)});p=0;i.font=Mt.fontString(h,e._footerFontStyle,e._footerFontFamily);Mt.each(e.footer,d);r+=2*e.xPadding;return{width:r,height:n}}function Ki(t,e){var i=t._model;var n=t._chart;var r=t._chart.chartArea;var o="center";var a="center";if(i.y<e.height)a="top";else if(i.y>n.height-e.height)a="bottom";var s,l;var c,u;var h;var p=(r.left+r.right)/2;var d=(r.top+r.bottom)/2;if(a==="center"){s=function(t){return t<=p};l=function(t){return t>p}}else{s=function(t){return t<=e.width/2};l=function(t){return t>=n.width-e.width/2}}c=function(t){return t+e.width+i.caretSize+i.caretPadding>n.width};u=function(t){return t-e.width-i.caretSize-i.caretPadding<0};h=function(t){return t<=d?"top":"bottom"};if(s(i.x)){o="left";if(c(i.x)){o="center";a=h(i.y)}}else if(l(i.x)){o="right";if(u(i.x)){o="center";a=h(i.y)}}var f=t._options;return{xAlign:f.xAlign?f.xAlign:o,yAlign:f.yAlign?f.yAlign:a}}function Xi(t,e,i,n){var r=t.x;var o=t.y;var a=t.caretSize;var s=t.caretPadding;var l=t.cornerRadius;var c=i.xAlign;var u=i.yAlign;var h=a+s;var p=l+s;if(c==="right")r-=e.width;else if(c==="center"){r-=e.width/2;if(r+e.width>n.width)r=n.width-e.width;if(r<0)r=0}if(u==="top")o+=h;else if(u==="bottom")o-=e.height+h;else o-=e.height/2;if(u==="center"){if(c==="left")r+=h;else if(c==="right")r-=h}else if(c==="left")r-=p;else if(c==="right")r+=p;return{x:r,y:o}}function Qi(t,e){return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-t.xPadding:t.x+t.xPadding}function tn(t){return Vi([],qi(t))}var en,nn,rn=Ot.extend({initialize:function(){this._model=Yi(this._options);this._lastActive=[]},getTitle:function(){var t=this;var e=t._options;var i=e.callbacks;var n=i.beforeTitle.apply(t,arguments);var r=i.title.apply(t,arguments);var o=i.afterTitle.apply(t,arguments);var a=[];a=Vi(a,qi(n));a=Vi(a,qi(r));a=Vi(a,qi(o));return a},getBeforeBody:function(){return tn(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var n=this;var r=n._options.callbacks;var o=[];Mt.each(t,function(t){var e={before:[],lines:[],after:[]};Vi(e.before,qi(r.beforeLabel.call(n,t,i)));Vi(e.lines,r.label.call(n,t,i));Vi(e.after,qi(r.afterLabel.call(n,t,i)));o.push(e)});return o},getAfterBody:function(){return tn(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this;var e=t._options.callbacks;var i=e.beforeFooter.apply(t,arguments);var n=e.footer.apply(t,arguments);var r=e.afterFooter.apply(t,arguments);var o=[];o=Vi(o,qi(i));o=Vi(o,qi(n));o=Vi(o,qi(r));return o},update:function(t){var e=this;var i=e._options;var n=e._model;var r=e._model=Yi(i);var o=e._active;var a=e._data;var s={xAlign:n.xAlign,yAlign:n.yAlign};var l={x:n.x,y:n.y};var c={width:n.width,height:n.height};var u={x:n.caretX,y:n.caretY};var h,p;if(o.length){r.opacity=1;var d=[];var f=[];u=Wi[i.position].call(e,o,e._eventPosition);var m=[];for(h=0,p=o.length;h<p;++h)m.push($i(o[h]));if(i.filter)m=m.filter(function(t){return i.filter(t,a)});if(i.itemSort)m=m.sort(function(t,e){return i.itemSort(t,e,a)});Mt.each(m,function(t){d.push(i.callbacks.labelColor.call(e,t,e._chart));f.push(i.callbacks.labelTextColor.call(e,t,e._chart))});r.title=e.getTitle(m,a);r.beforeBody=e.getBeforeBody(m,a);r.body=e.getBody(m,a);r.afterBody=e.getAfterBody(m,a);r.footer=e.getFooter(m,a);r.x=u.x;r.y=u.y;r.caretPadding=i.caretPadding;r.labelColors=d;r.labelTextColors=f;r.dataPoints=m;c=Ji(this,r);s=Ki(this,c);l=Xi(r,c,s,e._chart)}else r.opacity=0;r.xAlign=s.xAlign;r.yAlign=s.yAlign;r.x=l.x;r.y=l.y;r.width=c.width;r.height=c.height;r.caretX=u.x;r.caretY=u.y;e._model=r;if(t&&i.custom)i.custom.call(e,r);return e},drawCaret:function(t,e){var i=this._chart.ctx;var n=this._view;var r=this.getCaretPosition(t,e,n);i.lineTo(r.x1,r.y1);i.lineTo(r.x2,r.y2);i.lineTo(r.x3,r.y3)},getCaretPosition:function(t,e,i){var n,r,o,a,s,l;var c=i.caretSize;var u=i.cornerRadius;var h=i.xAlign;var p=i.yAlign;var d=t.x;var f=t.y;var m=e.width;var g=e.height;if(p==="center"){s=f+g/2;if(h==="left"){n=d;r=n-c;o=n;a=s+c;l=s-c}else{n=d+m;r=n+c;o=n;a=s-c;l=s+c}}else{if(h==="left"){r=d+u+c;n=r-c;o=r+c}else if(h==="right"){r=d+m-u-c;n=r-c;o=r+c}else{r=i.caretX;n=r-c;o=r+c}if(p==="top"){a=f;s=a-c;l=a}else{a=f+g;s=a+c;l=a;var v=o;o=n;n=v}}return{x1:n,x2:r,x3:o,y1:a,y2:s,y3:l}},drawTitle:function(t,e,i){var n=e.title;var r=n.length;var o,a,s;if(r){var l=Zi(e.rtl,e.x,e.width);t.x=Qi(e,e._titleAlign);i.textAlign=l.textAlign(e._titleAlign);i.textBaseline="middle";o=e.titleFontSize;a=e.titleSpacing;i.fillStyle=e.titleFontColor;i.font=Mt.fontString(o,e._titleFontStyle,e._titleFontFamily);for(s=0;s<r;++s){i.fillText(n[s],l.x(t.x),t.y+o/2);t.y+=o+a;if(s+1===r)t.y+=e.titleMarginBottom-a}}},drawBody:function(e,t,i){var n=t.bodyFontSize;var r=t.bodySpacing;var o=t._bodyAlign;var a=t.body;var s=t.displayColors;var l=0;var c=s?Qi(t,"left"):0;var u=Zi(t.rtl,t.x,t.width);var h=function(t){i.fillText(t,u.x(e.x+l),e.y+n/2);e.y+=n+r};var p,d,f,m,g,v,_,y;var b=u.textAlign(o);i.textAlign=o;i.textBaseline="middle";i.font=Mt.fontString(n,t._bodyFontStyle,t._bodyFontFamily);e.x=Qi(t,b);i.fillStyle=t.bodyFontColor;Mt.each(t.beforeBody,h);l=s&&b!=="right"?o==="center"?n/2+1:n+2:0;for(g=0,_=a.length;g<_;++g){p=a[g];d=t.labelTextColors[g];f=t.labelColors[g];i.fillStyle=d;Mt.each(p.before,h);m=p.lines;for(v=0,y=m.length;v<y;++v){if(s){var x=u.x(c);i.fillStyle=t.legendColorBackground;i.fillRect(u.leftForLtr(x,n),e.y,n,n);i.lineWidth=1;i.strokeStyle=f.borderColor;i.strokeRect(u.leftForLtr(x,n),e.y,n,n);i.fillStyle=f.backgroundColor;i.fillRect(u.leftForLtr(u.xPlus(x,1),n-2),e.y+1,n-2,n-2);i.fillStyle=d}h(m[v])}Mt.each(p.after,h)}l=0;Mt.each(t.afterBody,h);e.y-=r},drawFooter:function(t,e,i){var n=e.footer;var r=n.length;var o,a;if(r){var s=Zi(e.rtl,e.x,e.width);t.x=Qi(e,e._footerAlign);t.y+=e.footerMarginTop;i.textAlign=s.textAlign(e._footerAlign);i.textBaseline="middle";o=e.footerFontSize;i.fillStyle=e.footerFontColor;i.font=Mt.fontString(o,e._footerFontStyle,e._footerFontFamily);for(a=0;a<r;++a){i.fillText(n[a],s.x(t.x),t.y+o/2);t.y+=o+e.footerSpacing}}},drawBackground:function(t,e,i,n){i.fillStyle=e.backgroundColor;i.strokeStyle=e.borderColor;i.lineWidth=e.borderWidth;var r=e.xAlign;var o=e.yAlign;var a=t.x;var s=t.y;var l=n.width;var c=n.height;var u=e.cornerRadius;i.beginPath();i.moveTo(a+u,s);if(o==="top")this.drawCaret(t,n);i.lineTo(a+l-u,s);i.quadraticCurveTo(a+l,s,a+l,s+u);if(o==="center"&&r==="right")this.drawCaret(t,n);i.lineTo(a+l,s+c-u);i.quadraticCurveTo(a+l,s+c,a+l-u,s+c);if(o==="bottom")this.drawCaret(t,n);i.lineTo(a+u,s+c);i.quadraticCurveTo(a,s+c,a,s+c-u);if(o==="center"&&r==="left")this.drawCaret(t,n);i.lineTo(a,s+u);i.quadraticCurveTo(a,s,a+u,s);i.closePath();i.fill();if(e.borderWidth>0)i.stroke()},draw:function(){var t=this._chart.ctx;var e=this._view;if(e.opacity===0)return;var i={width:e.width,height:e.height};var n={x:e.x,y:e.y};var r=Math.abs(e.opacity<.001)?0:e.opacity;var o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;if(this._options.enabled&&o){t.save();t.globalAlpha=r;this.drawBackground(n,e,t,i);n.y+=e.yPadding;Mt.rtl.overrideTextDirection(t,e.textDirection);this.drawTitle(n,e,t);this.drawBody(n,e,t);this.drawFooter(n,e,t);Mt.rtl.restoreTextDirection(t,e.textDirection);t.restore()}},handleEvent:function(t){var e=this;var i=e._options;var n=false;e._lastActive=e._lastActive||[];if(t.type==="mouseout")e._active=[];else{e._active=e._chart.getElementsAtEventForMode(t,i.mode,i);if(i.reverse)e._active.reverse()}n=!Mt.arrayEquals(e._active,e._lastActive);if(n){e._lastActive=e._active;if(i.enabled||i.custom){e._eventPosition={x:t.x,y:t.y};e.update(true);e.pivot()}}return n}});rn.positioners=Wi;var on=Mt.valueOrDefault;function an(){return Mt.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,i,n){if(t==="xAxes"||t==="yAxes"){var r=i[t].length;var o,a,s;if(!e[t])e[t]=[];for(o=0;o<r;++o){s=i[t][o];a=on(s.type,t==="xAxes"?"category":"linear");if(o>=e[t].length)e[t].push({});if(!e[t][o].type||s.type&&s.type!==e[t][o].type)Mt.merge(e[t][o],[Hi.getScaleDefaults(a),s]);else Mt.merge(e[t][o],s)}}else Mt._merger(t,e,i,n)}})}function sn(){return Mt.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,i,n){var r=e[t]||Object.create(null);var o=i[t];if(t==="scales")e[t]=an(r,o);else if(t==="scale")e[t]=Mt.merge(r,[Hi.getScaleDefaults(o.type),o]);else Mt._merger(t,e,i,n)}})}function ln(t){t=t||Object.create(null);var e=t.data=t.data||{};e.datasets=e.datasets||[];e.labels=e.labels||[];t.options=sn(dt.global,dt[t.type],t.options||{});return t}function cn(e){var t=e.options;Mt.each(e.scales,function(t){ui.removeBox(e,t)});t=sn(dt.global,dt[e.config.type],t);e.options=e.config.options=t;e.ensureScalesHaveIDs();e.buildOrUpdateScales();e.tooltip._options=t.tooltips;e.tooltip.initialize()}function un(t,e,i){var n;var r=function(t){return t.id===n};do{n=e+i++}while(Mt.findIndex(t,r)>=0);return n}function hn(t){return t==="top"||t==="bottom"}function pn(i,n){return function(t,e){return t[i]===e[i]?t[n]-e[n]:t[i]-e[i]}}dt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:true,animationDuration:400},onClick:null,maintainAspectRatio:true,responsive:true,responsiveAnimationDuration:0});var dn=function(t,e){this.construct(t,e);return this};Mt.extend(dn.prototype,{construct:function(t,e){var i=this;e=ln(e);var n=ji.acquireContext(t,e);var r=n&&n.canvas;var o=r&&r.height;var a=r&&r.width;i.id=Mt.uid();i.ctx=n;i.canvas=r;i.config=e;i.width=a;i.height=o;i.aspectRatio=o?a/o:null;i.options=e.options;i._bufferedRender=false;i._layers=[];i.chart=i;i.controller=i;dn.instances[i.id]=i;Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(t){i.config.data=t}});if(!n||!r){console.error("Failed to create chart: can't acquire context from the given item");return}i.initialize();i.update()},initialize:function(){var t=this;Ui.notify(t,"beforeInit");Mt.retinaScale(t,t.options.devicePixelRatio);t.bindEvents();if(t.options.responsive)t.resize(true);t.initToolTip();Ui.notify(t,"afterInit");return t},clear:function(){Mt.canvas.clear(this);return this},stop:function(){Rt.cancelAnimation(this);return this},resize:function(t){var e=this;var i=e.options;var n=e.canvas;var r=i.maintainAspectRatio&&e.aspectRatio||null;var o=Math.max(0,Math.floor(Mt.getMaximumWidth(n)));var a=Math.max(0,Math.floor(r?o/r:Mt.getMaximumHeight(n)));if(e.width===o&&e.height===a)return;n.width=e.width=o;n.height=e.height=a;n.style.width=o+"px";n.style.height=a+"px";Mt.retinaScale(e,i.devicePixelRatio);if(!t){var s={width:o,height:a};Ui.notify(e,"resize",[s]);if(i.onResize)i.onResize(e,s);e.stop();e.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options;var i=t.scales||{};var e=t.scale;Mt.each(i.xAxes,function(t,e){if(!t.id)t.id=un(i.xAxes,"x-axis-",e)});Mt.each(i.yAxes,function(t,e){if(!t.id)t.id=un(i.yAxes,"y-axis-",e)});if(e)e.id=e.id||"scale"},buildOrUpdateScales:function(){var a=this;var t=a.options;var s=a.scales||{};var e=[];var l=Object.keys(s).reduce(function(t,e){t[e]=false;return t},{});if(t.scales)e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}));if(t.scale)e.push({options:t.scale,dtype:"radialLinear",isDefault:true,dposition:"chartArea"});Mt.each(e,function(t){var e=t.options;var i=e.id;var n=on(e.type,t.dtype);if(hn(e.position)!==hn(t.dposition))e.position=t.dposition;l[i]=true;var r=null;if(i in s&&s[i].type===n){r=s[i];r.options=e;r.ctx=a.ctx;r.chart=a}else{var o=Hi.getScaleConstructor(n);if(!o)return;r=new o({id:i,type:n,options:e,ctx:a.ctx,chart:a});s[r.id]=r}r.mergeTicksOptions();if(t.isDefault)a.scale=r});Mt.each(l,function(t,e){if(!t)delete s[e]});a.scales=s;Hi.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this;var e=[];var i=t.data.datasets;var n,r;for(n=0,r=i.length;n<r;n++){var o=i[n];var a=t.getDatasetMeta(n);var s=o.type||t.config.type;if(a.type&&a.type!==s){t.destroyDatasetMeta(n);a=t.getDatasetMeta(n)}a.type=s;a.order=o.order||0;a.index=n;if(a.controller){a.controller.updateIndex(n);a.controller.linkScales()}else{var l=Ze[a.type];if(l===undefined)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(t,n);e.push(a.controller)}}return e},resetElements:function(){var i=this;Mt.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.reset()},i)},reset:function(){this.resetElements();this.tooltip.initialize()},update:function(t){var e=this;var i,n;if(!t||typeof t!=="object")t={duration:t,lazy:arguments[1]};cn(e);Ui._invalidate(e);if(Ui.notify(e,"beforeUpdate")===false)return;e.tooltip._data=e.data;var r=e.buildOrUpdateControllers();for(i=0,n=e.data.datasets.length;i<n;i++)e.getDatasetMeta(i).controller.buildOrUpdateElements();e.updateLayout();if(e.options.animation&&e.options.animation.duration)Mt.each(r,function(t){t.reset()});e.updateDatasets();e.tooltip.initialize();e.lastActive=[];Ui.notify(e,"afterUpdate");e._layers.sort(pn("z","_idx"));if(e._bufferedRender)e._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy};else e.render(t)},updateLayout:function(){var e=this;if(Ui.notify(e,"beforeLayout")===false)return;ui.update(this,this.width,this.height);e._layers=[];Mt.each(e.boxes,function(t){if(t._configure)t._configure();e._layers.push.apply(e._layers,t._layers())},e);e._layers.forEach(function(t,e){t._idx=e});Ui.notify(e,"afterScaleUpdate");Ui.notify(e,"afterLayout")},updateDatasets:function(){var t=this;if(Ui.notify(t,"beforeDatasetsUpdate")===false)return;for(var e=0,i=t.data.datasets.length;e<i;++e)t.updateDataset(e);Ui.notify(t,"afterDatasetsUpdate")},updateDataset:function(t){var e=this;var i=e.getDatasetMeta(t);var n={meta:i,index:t};if(Ui.notify(e,"beforeDatasetUpdate",[n])===false)return;i.controller._update();Ui.notify(e,"afterDatasetUpdate",[n])},render:function(t){var e=this;if(!t||typeof t!=="object")t={duration:t,lazy:arguments[1]};var i=e.options.animation;var n=on(t.duration,i&&i.duration);var r=t.lazy;if(Ui.notify(e,"beforeRender")===false)return;var o=function(t){Ui.notify(e,"afterRender");Mt.callback(i&&i.onComplete,[t],e)};if(i&&n){var a=new Bt({numSteps:n/16.66,easing:t.easing||i.easing,render:function(t,e){var i=Mt.easing.effects[e.easing];var n=e.currentStep;var r=n/e.numSteps;t.draw(i(r),r,n)},onAnimationProgress:i.onProgress,onAnimationComplete:o});Rt.addAnimation(e,a,n,r)}else{e.draw();o(new Bt({numSteps:0,chart:e}))}return e},draw:function(t){var e=this;var i,n;e.clear();if(Mt.isNullOrUndef(t))t=1;e.transition(t);if(e.width<=0||e.height<=0)return;if(Ui.notify(e,"beforeDraw",[t])===false)return;n=e._layers;for(i=0;i<n.length&&n[i].z<=0;++i)n[i].draw(e.chartArea);e.drawDatasets(t);for(;i<n.length;++i)n[i].draw(e.chartArea);e._drawTooltip(t);Ui.notify(e,"afterDraw",[t])},transition:function(t){var e=this;for(var i=0,n=(e.data.datasets||[]).length;i<n;++i)if(e.isDatasetVisible(i))e.getDatasetMeta(i).controller.transition(t);e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e=this;var i=e.data.datasets||[];var n=[];var r,o;for(r=0,o=i.length;r<o;++r)if(!t||e.isDatasetVisible(r))n.push(e.getDatasetMeta(r));n.sort(pn("order","index"));return n},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(true)},drawDatasets:function(t){var e=this;var i,n;if(Ui.notify(e,"beforeDatasetsDraw",[t])===false)return;i=e._getSortedVisibleDatasetMetas();for(n=i.length-1;n>=0;--n)e.drawDataset(i[n],t);Ui.notify(e,"afterDatasetsDraw",[t])},drawDataset:function(t,e){var i=this;var n={meta:t,index:t.index,easingValue:e};if(Ui.notify(i,"beforeDatasetDraw",[n])===false)return;t.controller.draw(e);Ui.notify(i,"afterDatasetDraw",[n])},_drawTooltip:function(t){var e=this;var i=e.tooltip;var n={tooltip:i,easingValue:t};if(Ui.notify(e,"beforeTooltipDraw",[n])===false)return;i.draw();Ui.notify(e,"afterTooltipDraw",[n])},getElementAtEvent:function(t){return Ke.modes.single(this,t)},getElementsAtEvent:function(t){return Ke.modes.label(this,t,{intersect:true})},getElementsAtXAxis:function(t){return Ke.modes["x-axis"](this,t,{intersect:true})},getElementsAtEventForMode:function(t,e,i){var n=Ke.modes[e];if(typeof n==="function")return n(this,t,i);return[]},getDatasetAtEvent:function(t){return Ke.modes.dataset(this,t,{intersect:true})},getDatasetMeta:function(t){var e=this;var i=e.data.datasets[t];if(!i._meta)i._meta={};var n=i._meta[e.id];if(!n)n=i._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i.order||0,index:t};return n},getVisibleDatasetCount:function(){var t=0;for(var e=0,i=this.data.datasets.length;e<i;++e)if(this.isDatasetVisible(e))t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id;var i=this.data.datasets[t];var n=i._meta&&i._meta[e];if(n){n.controller.destroy();delete i._meta[e]}},destroy:function(){var t=this;var e=t.canvas;var i,n;t.stop();for(i=0,n=t.data.datasets.length;i<n;++i)t.destroyDatasetMeta(i);if(e){t.unbindEvents();Mt.canvas.clear(t);ji.releaseContext(t.ctx);t.canvas=null;t.ctx=null}Ui.notify(t,"destroy");delete dn.instances[t.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new rn({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;var i=e._listeners={};var n=function(){e.eventHandler.apply(e,arguments)};Mt.each(e.options.events,function(t){ji.addEventListener(e,t,n);i[t]=n});if(e.options.responsive){n=function(){e.resize()};ji.addEventListener(e,"resize",n);i.resize=n}},unbindEvents:function(){var i=this;var t=i._listeners;if(!t)return;delete i._listeners;Mt.each(t,function(t,e){ji.removeEventListener(i,e,t)})},updateHoverStyle:function(t,e,i){var n=i?"set":"remove";var r,o,a;for(o=0,a=t.length;o<a;++o){r=t[o];if(r)this.getDatasetMeta(r._datasetIndex).controller[n+"HoverStyle"](r)}if(e==="dataset")this.getDatasetMeta(t[0]._datasetIndex).controller["_"+n+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this;var i=e.tooltip;if(Ui.notify(e,"beforeEvent",[t])===false)return;e._bufferedRender=true;e._bufferedRequest=null;var n=e.handleEvent(t);if(i)n=i._start?i.handleEvent(t):n|i.handleEvent(t);Ui.notify(e,"afterEvent",[t]);var r=e._bufferedRequest;if(r)e.render(r);else if(n&&!e.animating){e.stop();e.render({duration:e.options.hover.animationDuration,lazy:true})}e._bufferedRender=false;e._bufferedRequest=null;return e},handleEvent:function(t){var e=this;var i=e.options||{};var n=i.hover;var r=false;e.lastActive=e.lastActive||[];if(t.type==="mouseout")e.active=[];else e.active=e.getElementsAtEventForMode(t,n.mode,n);Mt.callback(i.onHover||i.hover.onHover,[t.native,e.active],e);if(t.type==="mouseup"||t.type==="click")if(i.onClick)i.onClick.call(e,t.native,e.active);if(e.lastActive.length)e.updateHoverStyle(e.lastActive,n.mode,false);if(e.active.length&&n.mode)e.updateHoverStyle(e.active,n.mode,true);r=!Mt.arrayEquals(e.active,e.lastActive);e.lastActive=e.active;return r}}),dn.instances={};var fn=dn;(dn.Controller=dn).types={},Mt.configMerge=sn,Mt.scaleMerge=an;var mn=function(){Mt.where=function(t,e){if(Mt.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];Mt.each(t,function(t){if(e(t))i.push(t)});return i};Mt.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=i===undefined?t:i;for(var n=0,r=t.length;n<r;++n)if(e.call(i,t[n],n,t))return n;return-1};Mt.findNextWhere=function(t,e,i){if(Mt.isNullOrUndef(i))i=-1;for(var n=i+1;n<t.length;n++){var r=t[n];if(e(r))return r}};Mt.findPreviousWhere=function(t,e,i){if(Mt.isNullOrUndef(i))i=t.length;for(var n=i-1;n>=0;n--){var r=t[n];if(e(r))return r}};Mt.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};Mt.almostEquals=function(t,e,i){return Math.abs(t-e)<i};Mt.almostWhole=function(t,e){var i=Math.round(t);return i-e<=t&&i+e>=t};Mt.max=function(t){return t.reduce(function(t,e){if(!isNaN(e))return Math.max(t,e);return t},Number.NEGATIVE_INFINITY)};Mt.min=function(t){return t.reduce(function(t,e){if(!isNaN(e))return Math.min(t,e);return t},Number.POSITIVE_INFINITY)};Mt.sign=Math.sign?function(t){return Math.sign(t)}:function(t){t=+t;if(t===0||isNaN(t))return t;return t>0?1:-1};Mt.toRadians=function(t){return t*(Math.PI/180)};Mt.toDegrees=function(t){return t*(180/Math.PI)};Mt._decimalPlaces=function(t){if(!Mt.isFinite(t))return;var e=1;var i=0;while(Math.round(t*e)/e!==t){e*=10;i++}return i};Mt.getAngleFromPoint=function(t,e){var i=e.x-t.x;var n=e.y-t.y;var r=Math.sqrt(i*i+n*n);var o=Math.atan2(n,i);if(o<-.5*Math.PI)o+=2*Math.PI;return{angle:o,distance:r}};Mt.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};Mt.aliasPixel=function(t){return t%2===0?0:.5};Mt._alignPixel=function(t,e,i){var n=t.currentDevicePixelRatio;var r=i/2;return Math.round((e-r)*n)/n+r};Mt.splineCurve=function(t,e,i,n){var r=t.skip?e:t;var o=e;var a=i.skip?e:i;var s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2));var l=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2));var c=s/(s+l);var u=l/(s+l);c=isNaN(c)?0:c;u=isNaN(u)?0:u;var h=n*c;var p=n*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+p*(a.x-r.x),y:o.y+p*(a.y-r.y)}}};Mt.EPSILON=Number.EPSILON||1e-14;Mt.splineCurveMonotone=function(t){var e=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}});var i=e.length;var n,r,o,a;for(n=0;n<i;++n){o=e[n];if(o.model.skip)continue;r=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(a&&!a.model.skip){var s=a.model.x-o.model.x;o.deltaK=s!==0?(a.model.y-o.model.y)/s:0}if(!r||r.model.skip)o.mK=o.deltaK;else if(!a||a.model.skip)o.mK=r.deltaK;else if(this.sign(r.deltaK)!==this.sign(o.deltaK))o.mK=0;else o.mK=(r.deltaK+o.deltaK)/2}var l,c,u,h;for(n=0;n<i-1;++n){o=e[n];a=e[n+1];if(o.model.skip||a.model.skip)continue;if(Mt.almostEquals(o.deltaK,0,this.EPSILON)){o.mK=a.mK=0;continue}l=o.mK/o.deltaK;c=a.mK/o.deltaK;h=Math.pow(l,2)+Math.pow(c,2);if(h<=9)continue;u=3/Math.sqrt(h);o.mK=l*u*o.deltaK;a.mK=c*u*o.deltaK}var p;for(n=0;n<i;++n){o=e[n];if(o.model.skip)continue;r=n>0?e[n-1]:null;a=n<i-1?e[n+1]:null;if(r&&!r.model.skip){p=(o.model.x-r.model.x)/3;o.model.controlPointPreviousX=o.model.x-p;o.model.controlPointPreviousY=o.model.y-p*o.mK}if(a&&!a.model.skip){p=(a.model.x-o.model.x)/3;o.model.controlPointNextX=o.model.x+p;o.model.controlPointNextY=o.model.y+p*o.mK}}};Mt.nextItem=function(t,e,i){if(i)return e>=t.length-1?t[0]:t[e+1];return e>=t.length-1?t[t.length-1]:t[e+1]};Mt.previousItem=function(t,e,i){if(i)return e<=0?t[t.length-1]:t[e-1];return e<=0?t[0]:t[e-1]};Mt.niceNum=function(t,e){var i=Math.floor(Mt.log10(t));var n=t/Math.pow(10,i);var r;if(e)if(n<1.5)r=1;else if(n<3)r=2;else if(n<7)r=5;else r=10;else if(n<=1)r=1;else if(n<=2)r=2;else if(n<=5)r=5;else r=10;return r*Math.pow(10,i)};Mt.requestAnimFrame=function(){if(typeof window==="undefined")return function(t){t()};return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}();Mt.getRelativePosition=function(t,e){var i,n;var r=t.originalEvent||t;var o=t.target||t.srcElement;var a=o.getBoundingClientRect();var s=r.touches;if(s&&s.length>0){i=s[0].clientX;n=s[0].clientY}else{i=r.clientX;n=r.clientY}var l=parseFloat(Mt.getStyle(o,"padding-left"));var c=parseFloat(Mt.getStyle(o,"padding-top"));var u=parseFloat(Mt.getStyle(o,"padding-right"));var h=parseFloat(Mt.getStyle(o,"padding-bottom"));var p=a.right-a.left-l-u;var d=a.bottom-a.top-c-h;i=Math.round((i-a.left-l)/p*o.width/e.currentDevicePixelRatio);n=Math.round((n-a.top-c)/d*o.height/e.currentDevicePixelRatio);return{x:i,y:n}};function u(t,e,i){var n;if(typeof t==="string"){n=parseInt(t,10);if(t.indexOf("%")!==-1)n=n/100*e.parentNode[i]}else n=t;return n}function h(t){return t!==undefined&&t!==null&&t!=="none"}function e(t,e,i){var n=document.defaultView;var r=Mt._getParentNode(t);var o=n.getComputedStyle(t)[e];var a=n.getComputedStyle(r)[e];var s=h(o);var l=h(a);var c=Number.POSITIVE_INFINITY;if(s||l)return Math.min(s?u(o,t,i):c,l?u(a,r,i):c);return"none"}Mt.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")};Mt.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")};Mt._calculatePadding=function(t,e,i){e=Mt.getStyle(t,e);return e.indexOf("%")>-1?i*parseInt(e,10)/100:parseInt(e,10)};Mt._getParentNode=function(t){var e=t.parentNode;if(e&&e.toString()==="[object ShadowRoot]")e=e.host;return e};Mt.getMaximumWidth=function(t){var e=Mt._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth;var n=Mt._calculatePadding(e,"padding-left",i);var r=Mt._calculatePadding(e,"padding-right",i);var o=i-n-r;var a=Mt.getConstraintWidth(t);return isNaN(a)?o:Math.min(o,a)};Mt.getMaximumHeight=function(t){var e=Mt._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight;var n=Mt._calculatePadding(e,"padding-top",i);var r=Mt._calculatePadding(e,"padding-bottom",i);var o=i-n-r;var a=Mt.getConstraintHeight(t);return isNaN(a)?o:Math.min(o,a)};Mt.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};Mt.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||typeof window!=="undefined"&&window.devicePixelRatio||1;if(i===1)return;var n=t.canvas;var r=t.height;var o=t.width;n.height=r*i;n.width=o*i;t.ctx.scale(i,i);if(!n.style.height&&!n.style.width){n.style.height=r+"px";n.style.width=o+"px"}};Mt.fontString=function(t,e,i){return e+" "+t+"px "+i};Mt.longestText=function(t,e,i,n){n=n||{};var r=n.data=n.data||{};var o=n.garbageCollect=n.garbageCollect||[];if(n.font!==e){r=n.data={};o=n.garbageCollect=[];n.font=e}t.font=e;var a=0;var s=i.length;var l,c,u,h,p;for(l=0;l<s;l++){h=i[l];if(h!==undefined&&h!==null&&Mt.isArray(h)!==true)a=Mt.measureText(t,r,o,a,h);else if(Mt.isArray(h))for(c=0,u=h.length;c<u;c++){p=h[c];if(p!==undefined&&p!==null&&!Mt.isArray(p))a=Mt.measureText(t,r,o,a,p)}}var d=o.length/2;if(d>i.length){for(l=0;l<d;l++)delete r[o[l]];o.splice(0,d)}return a};Mt.measureText=function(t,e,i,n,r){var o=e[r];if(!o){o=e[r]=t.measureText(r).width;i.push(r)}if(o>n)n=o;return n};Mt.numberOfLabelLines=function(t){var e=1;Mt.each(t,function(t){if(Mt.isArray(t))if(t.length>e)e=t.length});return e};Mt.color=!X?function(t){console.error("Color.js not found!");return t}:function(t){if(t instanceof CanvasGradient)t=dt.global.defaultColor;return X(t)};Mt.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:Mt.color(t).saturate(.5).darken(.1).rgbString()}};function gn(){throw new Error("This method is not implemented: either no adapter can "+"be found or an incomplete integration was provided.")}function vn(t){this.options=t||{}}Mt.extend(vn.prototype,{formats:gn,parse:gn,format:gn,add:gn,diff:gn,startOf:gn,endOf:gn,_create:function(t){return t}}),vn.override=function(t){Mt.extend(vn.prototype,t)};var _n,yn={_date:vn},bn={formatters:{values:function(t){return Mt.isArray(t)?t:""+t},linear:function(t,e,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];if(Math.abs(n)>1)if(t!==Math.floor(t))n=t-Math.floor(t);var r=Mt.log10(Math.abs(n));var o="";if(t!==0){var a=Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]));if(a<1e-4){var s=Mt.log10(Math.abs(t));var l=Math.floor(s)-Math.floor(r);l=Math.max(Math.min(l,20),0);o=t.toExponential(l)}else{var c=-1*Math.floor(r);c=Math.max(Math.min(c,20),0);o=t.toFixed(c)}}else o="0";return o},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(Mt.log10(t)));if(t===0)return"0";else if(n===1||n===2||n===5||e===0||e===i.length-1)return t.toExponential();return""}}},xn=Mt.isArray,kn=Mt.isNullOrUndef,wn=Mt.valueOrDefault,Ln=Mt.valueAtIndexOrDefault;function Mn(t,e){var i=[];var n=t.length/e;var r=0;var o=t.length;for(;r<o;r+=n)i.push(t[Math.floor(r)]);return i}function Cn(t,e,i){var n=t.getTicks().length;var r=Math.min(e,n-1);var o=t.getPixelForTick(r);var a=t._startPixel;var s=t._endPixel;var l=1e-6;var c;if(i){if(n===1)c=Math.max(o-a,s-o);else if(e===0)c=(t.getPixelForTick(1)-o)/2;else c=(o-t.getPixelForTick(r-1))/2;o+=r<e?c:-c;if(o<a-l||o>s+l)return}return o}function Sn(t,r){Mt.each(t,function(t){var e=t.gc;var i=e.length/2;var n;if(i>r){for(n=0;n<i;++n)delete t.data[e[n]];e.splice(0,i)}})}function Pn(t,e,i,n){var r=i.length;var o=[];var a=[];var s=[];var l=0;var c=0;var u,h,p,d,f,m,g,v,_,y,b,x,k;for(u=0;u<r;++u){d=i[u].label;f=i[u].major?e.major:e.minor;t.font=m=f.string;g=n[m]=n[m]||{data:{},gc:[]};v=f.lineHeight;_=y=0;if(!kn(d)&&!xn(d)){_=Mt.measureText(t,g.data,g.gc,_,d);y=v}else if(xn(d))for(h=0,p=d.length;h<p;++h){b=d[h];if(!kn(b)&&!xn(b)){_=Mt.measureText(t,g.data,g.gc,_,b);y+=v}}o.push(_);a.push(y);s.push(v/2);l=Math.max(_,l);c=Math.max(y,c)}Sn(n,r);x=o.indexOf(l);k=a.indexOf(c);function w(t){return{width:o[t]||0,height:a[t]||0,offset:s[t]||0}}return{first:w(0),last:w(r-1),widest:w(x),highest:w(k)}}function Tn(t){return t.drawTicks?t.tickMarkLength:0}function En(t){var e,i;if(!t.display)return 0;e=Mt.options._parseFont(t);i=Mt.options.toPadding(t.padding);return e.lineHeight+i.height}function Dn(t,e){return Mt.extend(Mt.options._parseFont({fontFamily:wn(e.fontFamily,t.fontFamily),fontSize:wn(e.fontSize,t.fontSize),fontStyle:wn(e.fontStyle,t.fontStyle),lineHeight:wn(e.lineHeight,t.lineHeight)}),{color:Mt.options.resolve([e.fontColor,t.fontColor,dt.global.defaultFontColor])})}function An(t){var e=Dn(t,t.minor);var i=t.major.enabled?Dn(t,t.major):e;return{minor:e,major:i}}function On(t){var e=[];var i,n,r;for(n=0,r=t.length;n<r;++n){i=t[n];if(typeof i._index!=="undefined")e.push(i)}return e}function In(t){var e=t.length;var i,n;if(e<2)return false;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return false;return n}function Bn(t,e,i,n){var r=In(t);var o=(e.length-1)/n;var a,s,l,c;if(!r)return Math.max(o,1);a=Mt.math._factorize(r);for(l=0,c=a.length-1;l<c;l++){s=a[l];if(s>o)return s}return Math.max(o,1)}function Rn(t){var e=[];var i,n;for(i=0,n=t.length;i<n;i++)if(t[i].major)e.push(i);return e}function zn(t,e,i){var n=0;var r=e[0];var o,a;i=Math.ceil(i);for(o=0;o<t.length;o++){a=t[o];if(o===r){a._index=o;n++;r=e[n*i]}else delete a.label}}function Fn(t,e,i,n){var r=wn(i,0);var o=Math.min(wn(n,t.length),t.length);var a=0;var s,l,c,u;e=Math.ceil(e);if(n){s=n-i;e=s/Math.floor(s/e)}u=r;while(u<0){a++;u=Math.round(r+a*e)}for(l=Math.max(r,0);l<o;l++){c=t[l];if(l===u){c._index=l;a++;u=Math.round(r+a*e)}else delete c.label}}dt._set("scale",{display:true,position:"left",offset:false,gridLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:false,borderDash:[],borderDashOffset:0},scaleLabel:{display:false,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:0,reverse:false,display:true,autoSkip:true,autoSkipPadding:0,labelOffset:0,callback:bn.formatters.values,minor:{},major:{}}});var Nn=Ot.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){Mt.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n=this;var r=n.options.ticks;var o=r.sampleSize;var a,s,l,c,u;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=Mt.extend({left:0,right:0,top:0,bottom:0},i);n._ticks=null;n.ticks=null;n._labelSizes=null;n._maxLabelLines=0;n.longestLabelWidth=0;n.longestTextCache=n.longestTextCache||{};n._gridLineItems=null;n._labelItems=null;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeDataLimits();n.determineDataLimits();n.afterDataLimits();n.beforeBuildTicks();c=n.buildTicks()||[];c=n.afterBuildTicks(c)||c;if((!c||!c.length)&&n.ticks){c=[];for(a=0,s=n.ticks.length;a<s;++a)c.push({value:n.ticks[a],major:false})}n._ticks=c;u=o<c.length;l=n._convertTicksToLabels(u?Mn(c,o):c);n._configure();n.beforeCalculateTickRotation();n.calculateTickRotation();n.afterCalculateTickRotation();n.beforeFit();n.fit();n.afterFit();n._ticksToDraw=r.display&&(r.autoSkip||r.source==="auto")?n._autoSkip(c):c;if(u)l=n._convertTicksToLabels(n._ticksToDraw);n.ticks=l;n.afterUpdate();return n.minSize},_configure:function(){var t=this;var e=t.options.ticks.reverse;var i,n;if(t.isHorizontal()){i=t.left;n=t.right}else{i=t.top;n=t.bottom;e=!e}t._startPixel=i;t._endPixel=n;t._reversePixels=e;t._length=n-i},afterUpdate:function(){Mt.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){Mt.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0},afterSetDimensions:function(){Mt.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){Mt.callback(this.options.beforeDataLimits,[this])},determineDataLimits:Mt.noop,afterDataLimits:function(){Mt.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){Mt.callback(this.options.beforeBuildTicks,[this])},buildTicks:Mt.noop,afterBuildTicks:function(t){var e=this;if(xn(t)&&t.length)return Mt.callback(e.options.afterBuildTicks,[e,t]);e.ticks=Mt.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks;return t},beforeTickToLabelConversion:function(){Mt.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this;var e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){Mt.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){Mt.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTicks().length;var r=i.minRotation||0;var o=i.maxRotation;var a=r;var s,l,c,u,h,p,d;if(!t._isVisible()||!i.display||r>=o||n<=1||!t.isHorizontal()){t.labelRotation=r;return}s=t._getLabelSizes();l=s.widest.width;c=s.highest.height-s.highest.offset;u=Math.min(t.maxWidth,t.chart.width-l);h=e.offset?t.maxWidth/n:u/(n-1);if(l+6>h){h=u/(n-(e.offset?.5:1));p=t.maxHeight-Tn(e.gridLines)-i.padding-En(e.scaleLabel);d=Math.sqrt(l*l+c*c);a=Mt.toDegrees(Math.min(Math.asin(Math.min((s.highest.height+6)/h,1)),Math.asin(Math.min(p/d,1))-Math.asin(c/d)));a=Math.max(r,Math.min(o,a))}t.labelRotation=a},afterCalculateTickRotation:function(){Mt.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){Mt.callback(this.options.beforeFit,[this])},fit:function(){var t=this;var e=t.minSize={width:0,height:0};var i=t.chart;var n=t.options;var r=n.ticks;var o=n.scaleLabel;var a=n.gridLines;var s=t._isVisible();var l=n.position==="bottom";var c=t.isHorizontal();if(c)e.width=t.maxWidth;else if(s)e.width=Tn(a)+En(o);if(!c)e.height=t.maxHeight;else if(s)e.height=Tn(a)+En(o);if(r.display&&s){var u=An(r);var h=t._getLabelSizes();var p=h.first;var d=h.last;var f=h.widest;var m=h.highest;var g=u.minor.lineHeight*.4;var v=r.padding;if(c){var _=t.labelRotation!==0;var y=Mt.toRadians(t.labelRotation);var b=Math.cos(y);var x=Math.sin(y);var k=x*f.width+b*(m.height-(_?m.offset:0))+(_?0:g);e.height=Math.min(t.maxHeight,e.height+k+v);var w=t.getPixelForTick(0)-t.left;var L=t.right-t.getPixelForTick(t.getTicks().length-1);var M,C;if(_){M=l?b*p.width+x*p.offset:x*(p.height-p.offset);C=l?x*(d.height-d.offset):b*d.width+x*d.offset}else{M=p.width/2;C=d.width/2}t.paddingLeft=Math.max((M-w)*t.width/(t.width-w),0)+3;t.paddingRight=Math.max((C-L)*t.width/(t.width-L),0)+3}else{var S=r.mirror?0:f.width+v+g;e.width=Math.min(t.maxWidth,e.width+S);t.paddingTop=p.height/2;t.paddingBottom=d.height/2}}t.handleMargins();if(c){t.width=t._length=i.width-t.margins.left-t.margins.right;t.height=e.height}else{t.width=e.width;t.height=t._length=i.height-t.margins.top-t.margins.bottom}},handleMargins:function(){var t=this;if(t.margins){t.margins.left=Math.max(t.paddingLeft,t.margins.left);t.margins.top=Math.max(t.paddingTop,t.margins.top);t.margins.right=Math.max(t.paddingRight,t.margins.right);t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom)}},afterFit:function(){Mt.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(kn(t))return NaN;if((typeof t==="number"||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(t.x!==undefined)return this.getRightValue(t.x)}else if(t.y!==undefined)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e=this;var i,n,r;e.ticks=t.map(function(t){return t.value});e.beforeTickToLabelConversion();i=e.convertTicksToLabels(t)||e.ticks;e.afterTickToLabelConversion();for(n=0,r=t.length;n<r;++n)t[n].label=i[n];return i},_getLabelSizes:function(){var t=this;var e=t._labelSizes;if(!e){t._labelSizes=e=Pn(t.ctx,An(t.options.ticks),t.getTicks(),t.longestTextCache);t.longestLabelWidth=e.widest.width}return e},_parseValue:function(t){var e,i,n,r;if(xn(t)){e=+this.getRightValue(t[0]);i=+this.getRightValue(t[1]);n=Math.min(e,i);r=Math.max(e,i)}else{t=+this.getRightValue(t);e=undefined;i=t;n=t;r=t}return{min:n,max:r,start:e,end:i}},_getScaleLabel:function(t){var e=this._parseValue(t);if(e.start!==undefined)return"["+e.start+", "+e.end+"]";return+this.getRightValue(t)},getLabelForIndex:Mt.noop,getPixelForValue:Mt.noop,getValueForPixel:Mt.noop,getPixelForTick:function(t){var e=this;var i=e.options.offset;var n=e._ticks.length;var r=1/Math.max(n-(i?0:1),1);return t<0||t>n-1?null:e.getPixelForDecimal(t*r+(i?r/2:0))},getPixelForDecimal:function(t){var e=this;if(e._reversePixels)t=1-t;return e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this;var e=t.min;var i=t.max;return t.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0},_autoSkip:function(t){var e=this;var i=e.options.ticks;var n=e._length;var r=i.maxTicksLimit||n/e._tickSize()+1;var o=i.major.enabled?Rn(t):[];var a=o.length;var s=o[0];var l=o[a-1];var c,u,h,p;if(a>r){zn(t,o,a/r);return On(t)}h=Bn(o,t,n,r);if(a>0){for(c=0,u=a-1;c<u;c++)Fn(t,h,o[c],o[c+1]);p=a>1?(l-s)/(a-1):null;Fn(t,h,Mt.isNullOrUndef(p)?0:s-p,s);Fn(t,h,l,Mt.isNullOrUndef(p)?t.length:l+p);return On(t)}Fn(t,h);return On(t)},_tickSize:function(){var t=this;var e=t.options.ticks;var i=Mt.toRadians(t.labelRotation);var n=Math.abs(Math.cos(i));var r=Math.abs(Math.sin(i));var o=t._getLabelSizes();var a=e.autoSkipPadding||0;var s=o?o.widest.width+a:0;var l=o?o.highest.height+a:0;return t.isHorizontal()?l*n>s*r?s/n:l/r:l*r<s*n?l/n:s/r},_isVisible:function(){var t=this;var e=t.chart;var i=t.options.display;var n,r,o;if(i!=="auto")return!!i;for(n=0,r=e.data.datasets.length;n<r;++n)if(e.isDatasetVisible(n)){o=e.getDatasetMeta(n);if(o.xAxisID===t.id||o.yAxisID===t.id)return true}return false},_computeGridLineItems:function(t){var e=this;var i=e.chart;var n=e.options;var r=n.gridLines;var o=n.position;var a=r.offsetGridLines;var s=e.isHorizontal();var l=e._ticksToDraw;var c=l.length+(a?1:0);var u=Tn(r);var h=[];var p=r.drawBorder?Ln(r.lineWidth,0,0):0;var d=p/2;var f=Mt._alignPixel;var m=function(t){return f(i,t,p)};var g,v,_,y,b;var x,k,w,L,M,C,S,P,T,E,D,A;if(o==="top"){g=m(e.bottom);k=e.bottom-u;L=g-d;C=m(t.top)+d;P=t.bottom}else if(o==="bottom"){g=m(e.top);C=t.top;P=m(t.bottom)-d;k=g+d;L=e.top+u}else if(o==="left"){g=m(e.right);x=e.right-u;w=g-d;M=m(t.left)+d;S=t.right}else{g=m(e.left);M=t.left;S=m(t.right)-d;x=g+d;w=e.left+u}for(v=0;v<c;++v){_=l[v]||{};if(kn(_.label)&&v<l.length)continue;if(v===e.zeroLineIndex&&n.offset===a){T=r.zeroLineWidth;E=r.zeroLineColor;D=r.zeroLineBorderDash||[];A=r.zeroLineBorderDashOffset||0}else{T=Ln(r.lineWidth,v,1);E=Ln(r.color,v,"rgba(0,0,0,0.1)");D=r.borderDash||[];A=r.borderDashOffset||0}y=Cn(e,_._index||v,a);if(y===undefined)continue;b=f(i,y,T);if(s)x=w=M=S=b;else k=L=C=P=b;h.push({tx1:x,ty1:k,tx2:w,ty2:L,x1:M,y1:C,x2:S,y2:P,width:T,color:E,borderDash:D,borderDashOffset:A})}h.ticksLength=c;h.borderValue=g;return h},_computeLabelItems:function(){var t=this;var e=t.options;var i=e.ticks;var n=e.position;var r=i.mirror;var o=t.isHorizontal();var a=t._ticksToDraw;var s=An(i);var l=i.padding;var c=Tn(e.gridLines);var u=-Mt.toRadians(t.labelRotation);var h=[];var p,d,f,m,g,v,_,y,b,x,k,w;if(n==="top"){v=t.bottom-c-l;_=!u?"center":"left"}else if(n==="bottom"){v=t.top+c+l;_=!u?"center":"right"}else if(n==="left"){g=t.right-(r?0:c)-l;_=r?"left":"right"}else{g=t.left+(r?0:c)+l;_=r?"right":"left"}for(p=0,d=a.length;p<d;++p){f=a[p];m=f.label;if(kn(m))continue;y=t.getPixelForTick(f._index||p)+i.labelOffset;b=f.major?s.major:s.minor;x=b.lineHeight;k=xn(m)?m.length:1;if(o){g=y;w=n==="top"?((!u?.5:1)-k)*x:(!u?.5:0)*x}else{v=y;w=(1-k)*x/2}h.push({x:g,y:v,rotation:u,label:m,font:b,textOffset:w,textAlign:_})}return h},_drawGrid:function(t){var e=this;var i=e.options.gridLines;if(!i.display)return;var n=e.ctx;var r=e.chart;var o=Mt._alignPixel;var a=i.drawBorder?Ln(i.lineWidth,0,0):0;var s=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));var l,c,u,h,p;for(u=0,h=s.length;u<h;++u){p=s[u];l=p.width;c=p.color;if(l&&c){n.save();n.lineWidth=l;n.strokeStyle=c;if(n.setLineDash){n.setLineDash(p.borderDash);n.lineDashOffset=p.borderDashOffset}n.beginPath();if(i.drawTicks){n.moveTo(p.tx1,p.ty1);n.lineTo(p.tx2,p.ty2)}if(i.drawOnChartArea){n.moveTo(p.x1,p.y1);n.lineTo(p.x2,p.y2)}n.stroke();n.restore()}}if(a){var d=a;var f=Ln(i.lineWidth,s.ticksLength-1,1);var m=s.borderValue;var g,v,_,y;if(e.isHorizontal()){g=o(r,e.left,d)-d/2;v=o(r,e.right,f)+f/2;_=y=m}else{_=o(r,e.top,d)-d/2;y=o(r,e.bottom,f)+f/2;g=v=m}n.lineWidth=a;n.strokeStyle=Ln(i.color,0);n.beginPath();n.moveTo(g,_);n.lineTo(v,y);n.stroke()}},_drawLabels:function(){var t=this;var e=t.options.ticks;if(!e.display)return;var i=t.ctx;var n=t._labelItems||(t._labelItems=t._computeLabelItems());var r,o,a,s,l,c,u,h;for(r=0,a=n.length;r<a;++r){l=n[r];c=l.font;i.save();i.translate(l.x,l.y);i.rotate(l.rotation);i.font=c.string;i.fillStyle=c.color;i.textBaseline="middle";i.textAlign=l.textAlign;u=l.label;h=l.textOffset;if(xn(u))for(o=0,s=u.length;o<s;++o){i.fillText(""+u[o],0,h);h+=c.lineHeight}else i.fillText(u,0,h);i.restore()}},_drawTitle:function(){var t=this;var e=t.ctx;var i=t.options;var n=i.scaleLabel;if(!n.display)return;var r=wn(n.fontColor,dt.global.defaultFontColor);var o=Mt.options._parseFont(n);var a=Mt.options.toPadding(n.padding);var s=o.lineHeight/2;var l=i.position;var c=0;var u,h;if(t.isHorizontal()){u=t.left+t.width/2;h=l==="bottom"?t.bottom-s-a.bottom:t.top+s+a.top}else{var p=l==="left";u=p?t.left+s+a.top:t.right-s-a.top;h=t.top+t.height/2;c=p?-.5*Math.PI:.5*Math.PI}e.save();e.translate(u,h);e.rotate(c);e.textAlign="center";e.textBaseline="middle";e.fillStyle=r;e.font=o.string;e.fillText(n.labelString,0,0);e.restore()},draw:function(t){var e=this;if(!e._isVisible())return;e._drawGrid(t);e._drawTitle();e._drawLabels()},_layers:function(){var t=this;var e=t.options;var i=e.ticks&&e.ticks.z||0;var n=e.gridLines&&e.gridLines.z||0;if(!t._isVisible()||i===n||t.draw!==t._draw)return[{z:i,draw:function(){t.draw.apply(t,arguments)}}];return[{z:n,draw:function(){t._drawGrid.apply(t,arguments);t._drawTitle.apply(t,arguments)}},{z:i,draw:function(){t._drawLabels.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(e){var i=this;var n=i.isHorizontal();return i.chart._getSortedVisibleDatasetMetas().filter(function(t){return(!e||t.type===e)&&(n?t.xAxisID===i.id:t.yAxisID===i.id)})}});Nn.prototype._draw=Nn.prototype.draw;var jn=Nn,Un=Mt.isNullOrUndef,Hn={position:"bottom"},Gn=jn.extend({determineDataLimits:function(){var t=this;var e=t._getLabels();var i=t.options.ticks;var n=i.min;var r=i.max;var o=0;var a=e.length-1;var s;if(n!==undefined){s=e.indexOf(n);if(s>=0)o=s}if(r!==undefined){s=e.indexOf(r);if(s>=0)a=s}t.minIndex=o;t.maxIndex=a;t.min=e[o];t.max=e[a]},buildTicks:function(){var t=this;var e=t._getLabels();var i=t.minIndex;var n=t.maxIndex;t.ticks=i===0&&n===e.length-1?e:e.slice(i,n+1)},getLabelForIndex:function(t,e){var i=this;var n=i.chart;if(n.getDatasetMeta(e).controller._getValueScaleId()===i.id)return i.getRightValue(n.data.datasets[e].data[t]);return i._getLabels()[t]},_configure:function(){var t=this;var e=t.options.offset;var i=t.ticks;jn.prototype._configure.call(t);if(!t.isHorizontal())t._reversePixels=!t._reversePixels;if(!i)return;t._startValue=t.minIndex-(e?.5:0);t._valueRange=Math.max(i.length-(e?0:1),1)},getPixelForValue:function(t,e,i){var n=this;var r,o,a;if(!Un(e)&&!Un(i))t=n.chart.data.datasets[i].data[e];if(!Un(t))r=n.isHorizontal()?t.x:t.y;if(r!==undefined||t!==undefined&&isNaN(e)){o=n._getLabels();t=Mt.valueOrDefault(r,t);a=o.indexOf(t);e=a!==-1?a:e;if(isNaN(e))e=t}return n.getPixelForDecimal((e-n._startValue)/n._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this;var i=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(i,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Zn;Gn._defaults=Hn;var Wn=Mt.noop,Vn=Mt.isNullOrUndef;function qn(t,e){var i=[];var n=1e-14;var r=t.stepSize;var o=r||1;var a=t.maxTicks-1;var s=t.min;var l=t.max;var c=t.precision;var u=e.min;var h=e.max;var p=Mt.niceNum((h-u)/a/o)*o;var d,f,m,g;if(p<n&&Vn(s)&&Vn(l))return[u,h];g=Math.ceil(h/p)-Math.floor(u/p);if(g>a)p=Mt.niceNum(g*p/a/o)*o;if(r||Vn(c))d=Math.pow(10,Mt._decimalPlaces(p));else{d=Math.pow(10,c);p=Math.ceil(p*d)/d}f=Math.floor(u/p)*p;m=Math.ceil(h/p)*p;if(r){if(!Vn(s)&&Mt.almostWhole(s/p,p/1e3))f=s;if(!Vn(l)&&Mt.almostWhole(l/p,p/1e3))m=l}g=(m-f)/p;if(Mt.almostEquals(g,Math.round(g),p/1e3))g=Math.round(g);else g=Math.ceil(g);f=Math.round(f*d)/d;m=Math.round(m*d)/d;i.push(Vn(s)?f:s);for(var v=1;v<g;++v)i.push(Math.round((f+v*p)*d)/d);i.push(Vn(l)?m:l);return i}var $n=jn.extend({getRightValue:function(t){if(typeof t==="string")return+t;return jn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this;var e=t.options;var i=e.ticks;if(i.beginAtZero){var n=Mt.sign(t.min);var r=Mt.sign(t.max);if(n<0&&r<0)t.max=0;else if(n>0&&r>0)t.min=0}var o=i.min!==undefined||i.suggestedMin!==undefined;var a=i.max!==undefined||i.suggestedMax!==undefined;if(i.min!==undefined)t.min=i.min;else if(i.suggestedMin!==undefined)if(t.min===null)t.min=i.suggestedMin;else t.min=Math.min(t.min,i.suggestedMin);if(i.max!==undefined)t.max=i.max;else if(i.suggestedMax!==undefined)if(t.max===null)t.max=i.suggestedMax;else t.max=Math.max(t.max,i.suggestedMax);if(o!==a)if(t.min>=t.max)if(o)t.max=t.min+1;else t.min=t.max-1;if(t.min===t.max){t.max++;if(!i.beginAtZero)t.min--}},getTickLimit:function(){var t=this;var e=t.options.ticks;var i=e.stepSize;var n=e.maxTicksLimit;var r;if(i)r=Math.ceil(t.max/i)-Math.floor(t.min/i)+1;else{r=t._computeTickLimit();n=n||11}if(n)r=Math.min(n,r);return r},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Wn,buildTicks:function(){var t=this;var e=t.options;var i=e.ticks;var n=t.getTickLimit();n=Math.max(2,n);var r={maxTicks:n,min:i.min,max:i.max,precision:i.precision,stepSize:Mt.valueOrDefault(i.fixedStepSize,i.stepSize)};var o=t.ticks=qn(r,t);t.handleDirectionalChanges();t.max=Mt.max(o);t.min=Mt.min(o);if(i.reverse){o.reverse();t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice();t.zeroLineIndex=t.ticks.indexOf(0);jn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t=this;var e=t.getTicks();var i=t.min;var n=t.max;var r;jn.prototype._configure.call(t);if(t.options.offset&&e.length){r=(n-i)/Math.max(e.length-1,1)/2;i-=r;n+=r}t._startValue=i;t._endValue=n;t._valueRange=n-i}}),Yn={position:"left",ticks:{callback:bn.formatters.linear}},Jn=0,Kn=1;function Xn(t,e,i){var n=[i.type,e===undefined&&i.stack===undefined?i.index:"",i.stack].join(".");if(t[n]===undefined)t[n]={pos:[],neg:[]};return t[n]}function Qn(t,e,i,n){var r=t.options;var o=r.stacked;var a=Xn(e,o,i);var s=a.pos;var l=a.neg;var c=n.length;var u,h;for(u=0;u<c;++u){h=t._parseValue(n[u]);if(isNaN(h.min)||isNaN(h.max)||i.data[u].hidden)continue;s[u]=s[u]||0;l[u]=l[u]||0;if(r.relativePoints)s[u]=100;else if(h.min<0||h.max<0)l[u]+=h.min;else s[u]+=h.max}}function tr(t,e,i){var n=i.length;var r,o;for(r=0;r<n;++r){o=t._parseValue(i[r]);if(isNaN(o.min)||isNaN(o.max)||e.data[r].hidden)continue;t.min=Math.min(t.min,o.min);t.max=Math.max(t.max,o.max)}}var er=$n.extend({determineDataLimits:function(){var e=this;var t=e.options;var i=e.chart;var n=i.data.datasets;var r=e._getMatchingVisibleMetas();var o=t.stacked;var a={};var s=r.length;var l,c,u,h;e.min=Number.POSITIVE_INFINITY;e.max=Number.NEGATIVE_INFINITY;if(o===undefined)for(l=0;!o&&l<s;++l){c=r[l];o=c.stack!==undefined}for(l=0;l<s;++l){c=r[l];u=n[c.index].data;if(o)Qn(e,a,c,u);else tr(e,c,u)}Mt.each(a,function(t){h=t.pos.concat(t.neg);e.min=Math.min(e.min,Mt.min(h));e.max=Math.max(e.max,Mt.max(h))});e.min=Mt.isFinite(e.min)&&!isNaN(e.min)?e.min:Jn;e.max=Mt.isFinite(e.max)&&!isNaN(e.max)?e.max:Kn;e.handleTickRangeOptions()},_computeTickLimit:function(){var t=this;var e;if(t.isHorizontal())return Math.ceil(t.width/40);e=Mt.options._parseFont(t.options.ticks);return Math.ceil(t.height/e.lineHeight)},handleDirectionalChanges:function(){if(!this.isHorizontal())this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;if(t<0||t>e.length-1)return null;return this.getPixelForValue(e[t])}}),ir;er._defaults=Yn;var nr=Mt.valueOrDefault,rr=Mt.math.log10;function or(t,e){var i=[];var n=nr(t.min,Math.pow(10,Math.floor(rr(e.min))));var r=Math.floor(rr(e.max));var o=Math.ceil(e.max/Math.pow(10,r));var a,s;if(n===0){a=Math.floor(rr(e.minNotZero));s=Math.floor(e.minNotZero/Math.pow(10,a));i.push(n);n=s*Math.pow(10,a)}else{a=Math.floor(rr(n));s=Math.floor(n/Math.pow(10,a))}var l=a<0?Math.pow(10,Math.abs(a)):1;do{i.push(n);++s;if(s===10){s=1;++a;l=a>=0?1:l}n=Math.round(s*Math.pow(10,a)*l)/l}while(a<r||a===r&&s<o);var c=nr(t.max,n);i.push(c);return i}var ar={position:"left",ticks:{callback:bn.formatters.logarithmic}};function sr(t,e){return Mt.isFinite(t)&&t>=0?t:e}var lr=jn.extend({determineDataLimits:function(){var n=this;var t=n.options;var e=n.chart;var i=e.data.datasets;var r=n.isHorizontal();function o(t){return r?t.xAxisID===n.id:t.yAxisID===n.id}var a,s,l,c,u,h;n.min=Number.POSITIVE_INFINITY;n.max=Number.NEGATIVE_INFINITY;n.minNotZero=Number.POSITIVE_INFINITY;var p=t.stacked;if(p===undefined)for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&o(s)&&s.stack!==undefined){p=true;break}}if(t.stacked||p){var d={};for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);var f=[s.type,t.stacked===undefined&&s.stack===undefined?a:"",s.stack].join(".");if(e.isDatasetVisible(a)&&o(s)){if(d[f]===undefined)d[f]=[];c=i[a].data;for(u=0,h=c.length;u<h;u++){var m=d[f];l=n._parseValue(c[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0)continue;m[u]=m[u]||0;m[u]+=l.max}}}Mt.each(d,function(t){if(t.length>0){var e=Mt.min(t);var i=Mt.max(t);n.min=Math.min(n.min,e);n.max=Math.max(n.max,i)}})}else for(a=0;a<i.length;a++){s=e.getDatasetMeta(a);if(e.isDatasetVisible(a)&&o(s)){c=i[a].data;for(u=0,h=c.length;u<h;u++){l=n._parseValue(c[u]);if(isNaN(l.min)||isNaN(l.max)||s.data[u].hidden||l.min<0||l.max<0)continue;n.min=Math.min(l.min,n.min);n.max=Math.max(l.max,n.max);if(l.min!==0)n.minNotZero=Math.min(l.min,n.minNotZero)}}}n.min=Mt.isFinite(n.min)?n.min:null;n.max=Mt.isFinite(n.max)?n.max:null;n.minNotZero=Mt.isFinite(n.minNotZero)?n.minNotZero:null;this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this;var e=t.options.ticks;var i=1;var n=10;t.min=sr(e.min,t.min);t.max=sr(e.max,t.max);if(t.min===t.max)if(t.min!==0&&t.min!==null){t.min=Math.pow(10,Math.floor(rr(t.min))-1);t.max=Math.pow(10,Math.floor(rr(t.max))+1)}else{t.min=i;t.max=n}if(t.min===null)t.min=Math.pow(10,Math.floor(rr(t.max))-1);if(t.max===null)t.max=t.min!==0?Math.pow(10,Math.floor(rr(t.min))+1):n;if(t.minNotZero===null)if(t.min>0)t.minNotZero=t.min;else if(t.max<1)t.minNotZero=Math.pow(10,Math.floor(rr(t.max)));else t.minNotZero=i},buildTicks:function(){var t=this;var e=t.options.ticks;var i=!t.isHorizontal();var n={min:sr(e.min),max:sr(e.max)};var r=t.ticks=or(n,t);t.max=Mt.max(r);t.min=Mt.min(r);if(e.reverse){i=!i;t.start=t.max;t.end=t.min}else{t.start=t.min;t.end=t.max}if(i)r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();jn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;if(t<0||t>e.length-1)return null;return this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(rr(t));var i=Math.floor(t/Math.pow(10,e));return i*Math.pow(10,e)},_configure:function(){var t=this;var e=t.min;var i=0;jn.prototype._configure.call(t);if(e===0){e=t._getFirstTickValue(t.minNotZero);i=nr(t.options.ticks.fontSize,dt.global.defaultFontSize)/t._length}t._startValue=rr(e);t._valueOffset=i;t._valueRange=(rr(t.max)-rr(e))/(1-i)},getPixelForValue:function(t){var e=this;var i=0;t=+e.getRightValue(t);if(t>e.min&&t>0)i=(rr(t)-e._startValue)/e._valueRange+e._valueOffset;return e.getPixelForDecimal(i)},getValueForPixel:function(t){var e=this;var i=e.getDecimalForPixel(t);return i===0&&e.min===0?0:Math.pow(10,e._startValue+(i-e._valueOffset)*e._valueRange)}}),cr;lr._defaults=ar;var ur=Mt.valueOrDefault,hr=Mt.valueAtIndexOrDefault,pr=Mt.options.resolve,dr={display:true,animate:true,position:"chartArea",angleLines:{display:true,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:false},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:bn.formatters.linear},pointLabels:{display:true,fontSize:10,callback:function(t){return t}}};function fr(t){var e=t.ticks;if(e.display&&t.display)return ur(e.fontSize,dt.global.defaultFontSize)+e.backdropPaddingY*2;return 0}function mr(t,e,i){if(Mt.isArray(i))return{w:Mt.longestText(t,t.font,i),h:i.length*e};return{w:t.measureText(i).width,h:e}}function gr(t,e,i,n,r){if(t===n||t===r)return{start:e-i/2,end:e+i/2};else if(t<n||t>r)return{start:e-i,end:e};return{start:e,end:e+i}}function vr(t){var e=Mt.options._parseFont(t.options.pointLabels);var i={l:0,r:t.width,t:0,b:t.height-t.paddingTop};var n={};var r,o,a;t.ctx.font=e.string;t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(r=0;r<s;r++){a=t.getPointPosition(r,t.drawingArea+5);o=mr(t.ctx,e.lineHeight,t.pointLabels[r]);t._pointLabelSizes[r]=o;var l=t.getIndexAngle(r);var c=Mt.toDegrees(l)%360;var u=gr(c,a.x,o.w,0,180);var h=gr(c,a.y,o.h,90,270);if(u.start<i.l){i.l=u.start;n.l=l}if(u.end>i.r){i.r=u.end;n.r=l}if(h.start<i.t){i.t=h.start;n.t=l}if(h.end>i.b){i.b=h.end;n.b=l}}t.setReductions(t.drawingArea,i,n)}function _r(t){if(t===0||t===180)return"center";else if(t<180)return"left";return"right"}function yr(t,e,i,n){var r=i.y+n/2;var o,a;if(Mt.isArray(e))for(o=0,a=e.length;o<a;++o){t.fillText(e[o],i.x,r);r+=n}else t.fillText(e,i.x,r)}function br(t,e,i){if(t===90||t===270)i.y-=e.h/2;else if(t>270||t<90)i.y-=e.h}function xr(t){var e=t.ctx;var i=t.options;var n=i.pointLabels;var r=fr(i);var o=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max);var a=Mt.options._parseFont(n);e.save();e.font=a.string;e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=s===0?r/2:0;var c=t.getPointPosition(s,o+l+5);var u=hr(n.fontColor,s,dt.global.defaultFontColor);e.fillStyle=u;var h=t.getIndexAngle(s);var p=Mt.toDegrees(h);e.textAlign=_r(p);br(p,t._pointLabelSizes[s],c);yr(e,t.pointLabels[s],c,a.lineHeight)}e.restore()}function kr(t,e,i,n){var r=t.ctx;var o=e.circular;var a=t.chart.data.labels.length;var s=hr(e.color,n-1);var l=hr(e.lineWidth,n-1);var c;if(!o&&!a||!s||!l)return;r.save();r.strokeStyle=s;r.lineWidth=l;if(r.setLineDash){r.setLineDash(e.borderDash||[]);r.lineDashOffset=e.borderDashOffset||0}r.beginPath();if(o)r.arc(t.xCenter,t.yCenter,i,0,Math.PI*2);else{c=t.getPointPosition(0,i);r.moveTo(c.x,c.y);for(var u=1;u<a;u++){c=t.getPointPosition(u,i);r.lineTo(c.x,c.y)}}r.closePath();r.stroke();r.restore()}function wr(t){return Mt.isNumber(t)?t:0}var Lr=$n.extend({setDimensions:function(){var t=this;t.width=t.maxWidth;t.height=t.maxHeight;t.paddingTop=fr(t.options)/2;t.xCenter=Math.floor(t.width/2);t.yCenter=Math.floor((t.height-t.paddingTop)/2);t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var r=this;var i=r.chart;var o=Number.POSITIVE_INFINITY;var a=Number.NEGATIVE_INFINITY;Mt.each(i.data.datasets,function(t,e){if(i.isDatasetVisible(e)){var n=i.getDatasetMeta(e);Mt.each(t.data,function(t,e){var i=+r.getRightValue(t);if(isNaN(i)||n.data[e].hidden)return;o=Math.min(i,o);a=Math.max(i,a)})}});r.min=o===Number.POSITIVE_INFINITY?0:o;r.max=a===Number.NEGATIVE_INFINITY?0:a;r.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/fr(this.options))},convertTicksToLabels:function(){var e=this;$n.prototype.convertTicksToLabels.call(e);e.pointLabels=e.chart.data.labels.map(function(){var t=Mt.callback(e.options.pointLabels.callback,arguments,e);return t||t===0?t:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this;var e=t.options;if(e.display&&e.pointLabels.display)vr(t);else t.setCenterPoint(0,0,0,0)},setReductions:function(t,e,i){var n=this;var r=e.l/Math.sin(i.l);var o=Math.max(e.r-n.width,0)/Math.sin(i.r);var a=-e.t/Math.cos(i.t);var s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);r=wr(r);o=wr(o);a=wr(a);s=wr(s);n.drawingArea=Math.min(Math.floor(t-(r+o)/2),Math.floor(t-(a+s)/2));n.setCenterPoint(r,o,a,s)},setCenterPoint:function(t,e,i,n){var r=this;var o=r.width-e-r.drawingArea;var a=t+r.drawingArea;var s=i+r.drawingArea;var l=r.height-r.paddingTop-n-r.drawingArea;r.xCenter=Math.floor((a+o)/2+r.left);r.yCenter=Math.floor((s+l)/2+r.top+r.paddingTop)},getIndexAngle:function(t){var e=this.chart;var i=360/e.data.labels.length;var n=e.options||{};var r=n.startAngle||0;var o=(t*i+r)%360;return(o<0?o+360:o)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(Mt.isNullOrUndef(t))return NaN;var i=e.drawingArea/(e.max-e.min);if(e.options.ticks.reverse)return(e.max-t)*i;return(t-e.min)*i},getPointPosition:function(t,e){var i=this;var n=i.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this;var i=e.min;var n=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:i<0&&n<0?n:i>0&&n>0?i:0)},_drawGrid:function(){var i=this;var t=i.ctx;var e=i.options;var n=e.gridLines;var r=e.angleLines;var o=ur(r.lineWidth,n.lineWidth);var a=ur(r.color,n.color);var s,l,c;if(e.pointLabels.display)xr(i);if(n.display)Mt.each(i.ticks,function(t,e){if(e!==0){l=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);kr(i,n,l,e)}});if(r.display&&o&&a){t.save();t.lineWidth=o;t.strokeStyle=a;if(t.setLineDash){t.setLineDash(pr([r.borderDash,n.borderDash,[]]));t.lineDashOffset=pr([r.borderDashOffset,n.borderDashOffset,0])}for(s=i.chart.data.labels.length-1;s>=0;s--){l=i.getDistanceFromCenterForValue(e.ticks.reverse?i.min:i.max);c=i.getPointPosition(s,l);t.beginPath();t.moveTo(i.xCenter,i.yCenter);t.lineTo(c.x,c.y);t.stroke()}t.restore()}},_drawLabels:function(){var i=this;var n=i.ctx;var t=i.options;var r=t.ticks;if(!r.display)return;var e=i.getIndexAngle(0);var o=Mt.options._parseFont(r);var a=ur(r.fontColor,dt.global.defaultFontColor);var s,l;n.save();n.font=o.string;n.translate(i.xCenter,i.yCenter);n.rotate(e);n.textAlign="center";n.textBaseline="middle";Mt.each(i.ticks,function(t,e){if(e===0&&!r.reverse)return;s=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]);if(r.showLabelBackdrop){l=n.measureText(t).width;n.fillStyle=r.backdropColor;n.fillRect(-l/2-r.backdropPaddingX,-s-o.size/2-r.backdropPaddingY,l+r.backdropPaddingX*2,o.size+r.backdropPaddingY*2)}n.fillStyle=a;n.fillText(t,0,-s)});n.restore()},_drawTitle:Mt.noop}),Mr;Lr._defaults=dr;var Cr=Mt._deprecated,Sr=Mt.options.resolve,Pr=Mt.valueOrDefault,Tr=Number.MIN_SAFE_INTEGER||-9007199254740991,Er=Number.MAX_SAFE_INTEGER||9007199254740991,Dr={millisecond:{common:true,size:1,steps:1e3},second:{common:true,size:1e3,steps:60},minute:{common:true,size:6e4,steps:60},hour:{common:true,size:36e5,steps:24},day:{common:true,size:864e5,steps:30},week:{common:false,size:6048e5,steps:4},month:{common:true,size:2628e6,steps:12},quarter:{common:false,size:7884e6,steps:4},year:{common:true,size:3154e7}},Ar=Object.keys(Dr);function Or(t,e){return t-e}function Ir(t){var e={};var i=[];var n,r,o;for(n=0,r=t.length;n<r;++n){o=t[n];if(!e[o]){e[o]=true;i.push(o)}}return i}function Br(t){return Mt.valueOrDefault(t.time.min,t.ticks.min)}function Rr(t){return Mt.valueOrDefault(t.time.max,t.ticks.max)}function zr(t,e,i,n){if(n==="linear"||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var r=[];var o=[e];var a,s,l,c,u;for(a=0,s=t.length;a<s;++a){c=t[a];if(c>e&&c<i)o.push(c)}o.push(i);for(a=0,s=o.length;a<s;++a){u=o[a+1];l=o[a-1];c=o[a];if(l===undefined||u===undefined||Math.round((u+l)/2)!==c)r.push({time:c,pos:a/(s-1)})}return r}function Fr(t,e,i){var n=0;var r=t.length-1;var o,a,s;while(n>=0&&n<=r){o=n+r>>1;a=t[o-1]||null;s=t[o];if(!a)return{lo:null,hi:s};else if(s[e]<i)n=o+1;else if(a[e]>i)r=o-1;else return{lo:a,hi:s}}return{lo:s,hi:null}}function Nr(t,e,i,n){var r=Fr(t,e,i);var o=!r.lo?t[0]:!r.hi?t[t.length-2]:r.lo;var a=!r.lo?t[1]:!r.hi?t[t.length-1]:r.hi;var s=a[e]-o[e];var l=s?(i-o[e])/s:0;var c=(a[n]-o[n])*l;return o[n]+c}function jr(t,e){var i=t._adapter;var n=t.options.time;var r=n.parser;var o=r||n.format;var a=e;if(typeof r==="function")a=r(a);if(!Mt.isFinite(a))a=typeof o==="string"?i.parse(a,o):i.parse(a);if(a!==null)return+a;if(!r&&typeof o==="function"){a=o(e);if(!Mt.isFinite(a))a=i.parse(a)}return a}function Ur(t,e){if(Mt.isNullOrUndef(e))return null;var i=t.options.time;var n=jr(t,t.getRightValue(e));if(n===null)return n;if(i.round)n=+t._adapter.startOf(n,i.round);return n}function Hr(t,e,i,n){var r=Ar.length;var o,a,s;for(o=Ar.indexOf(t);o<r-1;++o){a=Dr[Ar[o]];s=a.steps?a.steps:Er;if(a.common&&Math.ceil((i-e)/(s*a.size))<=n)return Ar[o]}return Ar[r-1]}function Gr(t,e,i,n,r){var o,a;for(o=Ar.length-1;o>=Ar.indexOf(i);o--){a=Ar[o];if(Dr[a].common&&t._adapter.diff(r,n,a)>=e-1)return a}return Ar[i?Ar.indexOf(i):0]}function Zr(t){for(var e=Ar.indexOf(t)+1,i=Ar.length;e<i;++e)if(Dr[Ar[e]].common)return Ar[e]}function Wr(t,e,i,n){var r=t._adapter;var o=t.options;var a=o.time;var s=a.unit||Hr(a.minUnit,e,i,n);var l=Sr([a.stepSize,a.unitStepSize,1]);var c=s==="week"?a.isoWeekday:false;var u=e;var h=[];var p;if(c)u=+r.startOf(u,"isoWeek",c);u=+r.startOf(u,c?"day":s);if(r.diff(i,e,s)>1e5*l)throw e+" and "+i+" are too far apart with stepSize of "+l+" "+s;for(p=u;p<i;p=+r.add(p,l,s))h.push(p);if(p===i||o.bounds==="ticks")h.push(p);return h}function Vr(t,e,i,n,r){var o=0;var a=0;var s,l;if(r.offset&&e.length){s=Nr(t,"time",e[0],"pos");if(e.length===1)o=1-s;else o=(Nr(t,"time",e[1],"pos")-s)/2;l=Nr(t,"time",e[e.length-1],"pos");if(e.length===1)a=l;else a=(l-Nr(t,"time",e[e.length-2],"pos"))/2}return{start:o,end:a,factor:1/(o+1+a)}}function qr(t,e,i,n){var r=t._adapter;var o=+r.startOf(e[0].value,n);var a=e[e.length-1].value;var s,l;for(s=o;s<=a;s=+r.add(s,1,n)){l=i[s];if(l>=0)e[l].major=true}return e}function $r(t,e,i){var n=[];var r={};var o=e.length;var a,s;for(a=0;a<o;++a){s=e[a];r[s]=a;n.push({value:s,major:false})}return o===0||!i?n:qr(t,n,r,i)}var Yr={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:false,unit:false,round:false,displayFormat:false,isoWeekday:false,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:false,source:"auto",major:{enabled:false}}},Jr=jn.extend({initialize:function(){this.mergeTicksOptions();jn.prototype.initialize.call(this)},update:function(){var t=this;var e=t.options;var i=e.time||(e.time={});var n=t._adapter=new yn._date(e.adapters.date);Cr("time scale",i.format,"time.format","time.parser");Cr("time scale",i.min,"time.min","ticks.min");Cr("time scale",i.max,"time.max","ticks.max");Mt.mergeIf(i.displayFormats,n.formats());return jn.prototype.update.apply(t,arguments)},getRightValue:function(t){if(t&&t.t!==undefined)t=t.t;return jn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t=this;var e=t.chart;var i=t._adapter;var n=t.options;var r=n.time.unit||"day";var o=Er;var a=Tr;var s=[];var l=[];var c=[];var u,h,p,d,f,m,g;var v=t._getLabels();for(u=0,p=v.length;u<p;++u)c.push(Ur(t,v[u]));for(u=0,p=(e.data.datasets||[]).length;u<p;++u)if(e.isDatasetVisible(u)){f=e.data.datasets[u].data;if(Mt.isObject(f[0])){l[u]=[];for(h=0,d=f.length;h<d;++h){m=Ur(t,f[h]);s.push(m);l[u][h]=m}}else{l[u]=c.slice(0);if(!g){s=s.concat(c);g=true}}}else l[u]=[];if(c.length){o=Math.min(o,c[0]);a=Math.max(a,c[c.length-1])}if(s.length){s=p>1?Ir(s).sort(Or):s.sort(Or);o=Math.min(o,s[0]);a=Math.max(a,s[s.length-1])}o=Ur(t,Br(n))||o;a=Ur(t,Rr(n))||a;o=o===Er?+i.startOf(Date.now(),r):o;a=a===Tr?+i.endOf(Date.now(),r)+1:a;t.min=Math.min(o,a);t.max=Math.max(o+1,a);t._table=[];t._timestamps={data:s,datasets:l,labels:c}},buildTicks:function(){var t=this;var e=t.min;var i=t.max;var n=t.options;var r=n.ticks;var o=n.time;var a=t._timestamps;var s=[];var l=t.getLabelCapacity(e);var c=r.source;var u=n.distribution;var h,p,d;if(c==="data"||c==="auto"&&u==="series")a=a.data;else if(c==="labels")a=a.labels;else a=Wr(t,e,i,l);if(n.bounds==="ticks"&&a.length){e=a[0];i=a[a.length-1]}e=Ur(t,Br(n))||e;i=Ur(t,Rr(n))||i;for(h=0,p=a.length;h<p;++h){d=a[h];if(d>=e&&d<=i)s.push(d)}t.min=e;t.max=i;t._unit=o.unit||(r.autoSkip?Hr(o.minUnit,t.min,t.max,l):Gr(t,s.length,o.minUnit,t.min,t.max));t._majorUnit=!r.major.enabled||t._unit==="year"?undefined:Zr(t._unit);t._table=zr(t._timestamps.data,e,i,u);t._offsets=Vr(t._table,s,e,i,n);if(r.reverse)s.reverse();return $r(t,s,t._majorUnit)},getLabelForIndex:function(t,e){var i=this;var n=i._adapter;var r=i.chart.data;var o=i.options.time;var a=r.labels&&t<r.labels.length?r.labels[t]:"";var s=r.datasets[e].data[t];if(Mt.isObject(s))a=i.getRightValue(s);if(o.tooltipFormat)return n.format(jr(i,a),o.tooltipFormat);if(typeof a==="string")return a;return n.format(jr(i,a),o.displayFormats.datetime)},tickFormatFunction:function(t,e,i,n){var r=this;var o=r._adapter;var a=r.options;var s=a.time.displayFormats;var l=s[r._unit];var c=r._majorUnit;var u=s[c];var h=i[e];var p=a.ticks;var d=c&&u&&h&&h.major;var f=o.format(t,n?n:d?u:l);var m=d?p.major:p.minor;var g=Sr([m.callback,m.userCallback,p.callback,p.userCallback]);return g?g(f,e,i):f},convertTicksToLabels:function(t){var e=[];var i,n;for(i=0,n=t.length;i<n;++i)e.push(this.tickFormatFunction(t[i].value,i,t));return e},getPixelForOffset:function(t){var e=this;var i=e._offsets;var n=Nr(e._table,"time",t,"pos");return e.getPixelForDecimal((i.start+n)*i.factor)},getPixelForValue:function(t,e,i){var n=this;var r=null;if(e!==undefined&&i!==undefined)r=n._timestamps.datasets[i][e];if(r===null)r=Ur(n,t);if(r!==null)return n.getPixelForOffset(r)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this;var i=e._offsets;var n=e.getDecimalForPixel(t)/i.factor-i.end;var r=Nr(e._table,"pos",n,"time");return e._adapter._create(r)},_getLabelSize:function(t){var e=this;var i=e.options.ticks;var n=e.ctx.measureText(t).width;var r=Mt.toRadians(e.isHorizontal()?i.maxRotation:i.minRotation);var o=Math.cos(r);var a=Math.sin(r);var s=Pr(i.fontSize,dt.global.defaultFontSize);return{w:n*o+s*a,h:n*a+s*o}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this;var i=e.options.time;var n=i.displayFormats;var r=n[i.unit]||n.millisecond;var o=e.tickFormatFunction(t,0,$r(e,[t],e._majorUnit),r);var a=e._getLabelSize(o);var s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);if(e.options.offset)s--;return s>0?s:1}}),Kr;Jr._defaults=Yr;var Xr={category:Gn,linear:er,logarithmic:lr,radialLinear:Lr,time:Jr},Qr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};yn._date.override(typeof n==="function"?{_id:"moment",formats:function(){return Qr},parse:function(t,e){if(typeof t==="string"&&typeof e==="string")t=n(t,e);else if(!(t instanceof n))t=n(t);return t.isValid()?t.valueOf():null},format:function(t,e){return n(t).format(e)},add:function(t,e,i){return n(t).add(e,i).valueOf()},diff:function(t,e,i){return n(t).diff(n(e),i)},startOf:function(t,e,i){t=n(t);if(e==="isoWeek")return t.isoWeekday(i).valueOf();return t.startOf(e).valueOf()},endOf:function(t,e){return n(t).endOf(e).valueOf()},_create:function(t){return n(t)}}:{}),dt._set("global",{plugins:{filler:{propagate:true}}});var to={dataset:function(t){var e=t.fill;var i=t.chart;var n=i.getDatasetMeta(e);var r=n&&i.isDatasetVisible(e);var o=r&&n.dataset._children||[];var a=o.length||0;return!a?null:function(t,e){return e<a&&o[e]._view||null}},boundary:function(t){var i=t.boundary;var e=i?i.x:null;var n=i?i.y:null;if(Mt.isArray(i))return function(t,e){return i[e]};return function(t){return{x:e===null?t.x:e,y:n===null?t.y:n}}}};function eo(t,e,i){var n=t._model||{};var r=n.fill;var o;if(r===undefined)r=!!n.backgroundColor;if(r===false||r===null)return false;if(r===true)return"origin";o=parseFloat(r,10);if(isFinite(o)&&Math.floor(o)===o){if(r[0]==="-"||r[0]==="+")o=e+o;if(o===e||o<0||o>=i)return false;return o}switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return false}}function io(t){var e=t.el._model||{};var i=t.el._scale||{};var n=t.fill;var r=null;var o;if(isFinite(n))return null;if(n==="start")r=e.scaleBottom===undefined?i.bottom:e.scaleBottom;else if(n==="end")r=e.scaleTop===undefined?i.top:e.scaleTop;else if(e.scaleZero!==undefined)r=e.scaleZero;else if(i.getBasePixel)r=i.getBasePixel();if(r!==undefined&&r!==null){if(r.x!==undefined&&r.y!==undefined)return r;if(Mt.isFinite(r)){o=i.isHorizontal();return{x:o?r:null,y:o?null:r}}}return null}function no(t){var e=t.el._scale;var i=e.options;var n=e.chart.data.labels.length;var r=t.fill;var o=[];var a,s,l,c,u;if(!n)return null;a=i.ticks.reverse?e.max:e.min;s=i.ticks.reverse?e.min:e.max;l=e.getPointPositionForValue(0,a);for(c=0;c<n;++c){u=r==="start"||r==="end"?e.getPointPositionForValue(c,r==="start"?a:s):e.getBasePosition(c);if(i.gridLines.circular){u.cx=l.x;u.cy=l.y;u.angle=e.getIndexAngle(c)-Math.PI/2}o.push(u)}return o}function ro(t){var e=t.el._scale||{};if(e.getPointPositionForValue)return no(t);return io(t)}function oo(t,e,i){var n=t[e];var r=n.fill;var o=[e];var a;if(!i)return r;while(r!==false&&o.indexOf(r)===-1){if(!isFinite(r))return r;a=t[r];if(!a)return false;if(a.visible)return r;o.push(r);r=a.fill}return false}function ao(t){var e=t.fill;var i="dataset";if(e===false)return null;if(!isFinite(e))i="boundary";return to[i](t)}function so(t){return t&&!t.skip}function lo(t,e,i,n,r){var o,a,s,l;if(!n||!r)return;t.moveTo(e[0].x,e[0].y);for(o=1;o<n;++o)Mt.canvas.lineTo(t,e[o-1],e[o]);if(i[0].angle!==undefined){a=i[0].cx;s=i[0].cy;l=Math.sqrt(Math.pow(i[0].x-a,2)+Math.pow(i[0].y-s,2));for(o=r-1;o>0;--o)t.arc(a,s,l,i[o].angle,i[o-1].angle,true);return}t.lineTo(i[r-1].x,i[r-1].y);for(o=r-1;o>0;--o)Mt.canvas.lineTo(t,i[o],i[o-1],true)}function co(t,e,i,n,r,o){var a=e.length;var s=n.spanGaps;var l=[];var c=[];var u=0;var h=0;var p,d,f,m,g,v,_,y;t.beginPath();for(p=0,d=a;p<d;++p){f=p%a;m=e[f]._view;g=i(m,f,n);v=so(m);_=so(g);if(o&&y===undefined&&v){y=p+1;d=a+y}if(v&&_){u=l.push(m);h=c.push(g)}else if(u&&h)if(!s){lo(t,l,c,u,h);u=h=0;l=[];c=[]}else{if(v)l.push(m);if(_)c.push(g)}}lo(t,l,c,u,h);t.closePath();t.fillStyle=r;t.fill()}var uo={id:"filler",afterDatasetsUpdate:function(t,e){var i=(t.data.datasets||[]).length;var n=e.propagate;var r=[];var o,a,s,l;for(a=0;a<i;++a){o=t.getDatasetMeta(a);s=o.dataset;l=null;if(s&&s._model&&s instanceof he.Line)l={visible:t.isDatasetVisible(a),fill:eo(s,a,i),chart:t,el:s};o.$filler=l;r.push(l)}for(a=0;a<i;++a){l=r[a];if(!l)continue;l.fill=oo(r,a,n);l.boundary=ro(l);l.mapper=ao(l)}},beforeDatasetsDraw:function(t){var e=t._getSortedVisibleDatasetMetas();var i=t.ctx;var n,r,o,a,s,l,c;for(r=e.length-1;r>=0;--r){n=e[r].$filler;if(!n||!n.visible)continue;o=n.el;a=o._view;s=o._children||[];l=n.mapper;c=a.backgroundColor||dt.global.defaultColor;if(l&&c&&s.length){Mt.canvas.clipArea(i,t.chartArea);co(i,s,l,a,c,o._loop);Mt.canvas.unclipArea(i)}}}},ho=Mt.rtl.getRtlAdapter,po=Mt.noop,fo=Mt.valueOrDefault;function mo(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}dt._set("global",{legend:{display:true,position:"top",align:"center",fullWidth:true,reverse:false,weight:1e3,onClick:function(t,e){var i=e.datasetIndex;var n=this.chart;var r=n.getDatasetMeta(i);r.hidden=r.hidden===null?!n.data.datasets[i].hidden:null;n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(i){var n=i.data.datasets;var t=i.options.legend||{};var r=t.labels&&t.labels.usePointStyle;return i._getSortedDatasetMetas().map(function(t){var e=t.controller.getStyle(r?0:undefined);return{text:n[t.index].label,fillStyle:e.backgroundColor,hidden:!i.isDatasetVisible(t.index),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,rotation:e.rotation,datasetIndex:t.index}},this)}}},legendCallback:function(t){var e=document.createElement("ul");var i=t.data.datasets;var n,r,o,a;e.setAttribute("class",t.id+"-legend");for(n=0,r=i.length;n<r;n++){o=e.appendChild(document.createElement("li"));a=o.appendChild(document.createElement("span"));a.style.backgroundColor=i[n].backgroundColor;if(i[n].label)o.appendChild(document.createTextNode(i[n].label))}return e.outerHTML}});var go=Ot.extend({initialize:function(t){var e=this;Mt.extend(e,t);e.legendHitBoxes=[];e._hoveredItem=null;e.doughnutMode=false},beforeUpdate:po,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:po,beforeSetDimensions:po,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:po,beforeBuildLabels:po,buildLabels:function(){var e=this;var i=e.options.labels||{};var t=Mt.callback(i.generateLabels,[e.chart],e)||[];if(i.filter)t=t.filter(function(t){return i.filter(t,e.chart.data)});if(e.options.reverse)t.reverse();e.legendItems=t},afterBuildLabels:po,beforeFit:po,fit:function(){var t=this;var e=t.options;var r=e.labels;var i=e.display;var o=t.ctx;var n=Mt.options._parseFont(r);var a=n.size;var s=t.legendHitBoxes=[];var l=t.minSize;var c=t.isHorizontal();if(c){l.width=t.maxWidth;l.height=i?10:0}else{l.width=i?10:0;l.height=t.maxHeight}if(!i){t.width=l.width=t.height=l.height=0;return}o.font=n.string;if(c){var u=t.lineWidths=[0];var h=0;o.textAlign="left";o.textBaseline="middle";Mt.each(t.legendItems,function(t,e){var i=mo(r,a);var n=i+a/2+o.measureText(t.text).width;if(e===0||u[u.length-1]+n+2*r.padding>l.width){h+=a+r.padding;u[u.length-(e>0?0:1)]=0}s[e]={left:0,top:0,width:n,height:a};u[u.length-1]+=n+r.padding});l.height+=h}else{var p=r.padding;var d=t.columnWidths=[];var f=t.columnHeights=[];var m=r.padding;var g=0;var v=0;Mt.each(t.legendItems,function(t,e){var i=mo(r,a);var n=i+a/2+o.measureText(t.text).width;if(e>0&&v+a+2*p>l.height){m+=g+r.padding;d.push(g);f.push(v);g=0;v=0}g=Math.max(g,n);v+=a+p;s[e]={left:0,top:0,width:n,height:a}});m+=g;d.push(g);f.push(v);l.width+=m}t.width=l.width;t.height=l.height},afterFit:po,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this;var i=s.options;var l=i.labels;var t=dt.global;var c=t.defaultColor;var u=t.elements.line;var h=s.height;var p=s.columnHeights;var d=s.width;var f=s.lineWidths;if(!i.display)return;var m=ho(i.rtl,s.left,s.minSize.width);var g=s.ctx;var e=fo(l.fontColor,t.defaultFontColor);var n=Mt.options._parseFont(l);var v=n.size;var _;g.textAlign=m.textAlign("left");g.textBaseline="middle";g.lineWidth=.5;g.strokeStyle=e;g.fillStyle=e;g.font=n.string;var y=mo(l,v);var b=s.legendHitBoxes;var x=function(t,e,i){if(isNaN(y)||y<=0)return;g.save();var n=fo(i.lineWidth,u.borderWidth);g.fillStyle=fo(i.fillStyle,c);g.lineCap=fo(i.lineCap,u.borderCapStyle);g.lineDashOffset=fo(i.lineDashOffset,u.borderDashOffset);g.lineJoin=fo(i.lineJoin,u.borderJoinStyle);g.lineWidth=n;g.strokeStyle=fo(i.strokeStyle,c);if(g.setLineDash)g.setLineDash(fo(i.lineDash,u.borderDash));if(l&&l.usePointStyle){var r=y*Math.SQRT2/2;var o=m.xPlus(t,y/2);var a=e+v/2;Mt.canvas.drawPoint(g,i.pointStyle,r,o,a,i.rotation)}else{g.fillRect(m.leftForLtr(t,y),e,y,v);if(n!==0)g.strokeRect(m.leftForLtr(t,y),e,y,v)}g.restore()};var k=function(t,e,i,n){var r=v/2;var o=m.xPlus(t,y+r);var a=e+r;g.fillText(i.text,o,a);if(i.hidden){g.beginPath();g.lineWidth=2;g.moveTo(o,a);g.lineTo(m.xPlus(o,n),a);g.stroke()}};var w=function(t,e){switch(i.align){case"start":return l.padding;case"end":return t-e;default:return(t-e+l.padding)/2}};var L=s.isHorizontal();if(L)_={x:s.left+w(d,f[0]),y:s.top+l.padding,line:0};else _={x:s.left+l.padding,y:s.top+w(h,p[0]),line:0};Mt.rtl.overrideTextDirection(s.ctx,i.textDirection);var M=v+l.padding;Mt.each(s.legendItems,function(t,e){var i=g.measureText(t.text).width;var n=y+v/2+i;var r=_.x;var o=_.y;m.setWidth(s.minSize.width);if(L){if(e>0&&r+n+l.padding>s.left+s.minSize.width){o=_.y+=M;_.line++;r=_.x=s.left+w(d,f[_.line])}}else if(e>0&&o+M>s.top+s.minSize.height){r=_.x=r+s.columnWidths[_.line]+l.padding;_.line++;o=_.y=s.top+w(h,p[_.line])}var a=m.x(r);x(a,o,t);b[e].left=m.leftForLtr(a,b[e].width);b[e].top=o;k(a,o,t,i);if(L)_.x+=n+l.padding;else _.y+=M});Mt.rtl.restoreTextDirection(s.ctx,i.textDirection)},_getLegendItemAt:function(t,e){var i=this;var n,r,o;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom){o=i.legendHitBoxes;for(n=0;n<o.length;++n){r=o[n];if(t>=r.left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height)return i.legendItems[n]}}return null},handleEvent:function(t){var e=this;var i=e.options;var n=t.type==="mouseup"?"click":t.type;var r;if(n==="mousemove"){if(!i.onHover&&!i.onLeave)return}else if(n==="click"){if(!i.onClick)return}else return;r=e._getLegendItemAt(t.x,t.y);if(n==="click"){if(r&&i.onClick)i.onClick.call(e,t.native,r)}else{if(i.onLeave&&r!==e._hoveredItem){if(e._hoveredItem)i.onLeave.call(e,t.native,e._hoveredItem);e._hoveredItem=r}if(i.onHover&&r)i.onHover.call(e,t.native,r)}}});function vo(t,e){var i=new go({ctx:t.ctx,options:e,chart:t});ui.configure(t,i,e);ui.addBox(t,i);t.legend=i}var _o={id:"legend",_element:go,beforeInit:function(t){var e=t.options.legend;if(e)vo(t,e)},beforeUpdate:function(t){var e=t.options.legend;var i=t.legend;if(e){Mt.mergeIf(e,dt.global.legend);if(i){ui.configure(t,i,e);i.options=e}else vo(t,e)}else if(i){ui.removeBox(t,i);delete t.legend}},afterEvent:function(t,e){var i=t.legend;if(i)i.handleEvent(e)}},yo=Mt.noop;dt._set("global",{title:{display:false,fontStyle:"bold",fullWidth:true,padding:10,position:"top",text:"",weight:2e3}});var bo=Ot.extend({initialize:function(t){var e=this;Mt.extend(e,t);e.legendHitBoxes=[]},beforeUpdate:yo,update:function(t,e,i){var n=this;n.beforeUpdate();n.maxWidth=t;n.maxHeight=e;n.margins=i;n.beforeSetDimensions();n.setDimensions();n.afterSetDimensions();n.beforeBuildLabels();n.buildLabels();n.afterBuildLabels();n.beforeFit();n.fit();n.afterFit();n.afterUpdate();return n.minSize},afterUpdate:yo,beforeSetDimensions:yo,setDimensions:function(){var t=this;if(t.isHorizontal()){t.width=t.maxWidth;t.left=0;t.right=t.width}else{t.height=t.maxHeight;t.top=0;t.bottom=t.height}t.paddingLeft=0;t.paddingTop=0;t.paddingRight=0;t.paddingBottom=0;t.minSize={width:0,height:0}},afterSetDimensions:yo,beforeBuildLabels:yo,buildLabels:yo,afterBuildLabels:yo,beforeFit:yo,fit:function(){var t=this;var e=t.options;var i=t.minSize={};var n=t.isHorizontal();var r,o;if(!e.display){t.width=i.width=t.height=i.height=0;return}r=Mt.isArray(e.text)?e.text.length:1;o=r*Mt.options._parseFont(e).lineHeight+e.padding*2;t.width=i.width=n?t.maxWidth:o;t.height=i.height=n?o:t.maxHeight},afterFit:yo,isHorizontal:function(){var t=this.options.position;return t==="top"||t==="bottom"},draw:function(){var t=this;var e=t.ctx;var i=t.options;if(!i.display)return;var n=Mt.options._parseFont(i);var r=n.lineHeight;var o=r/2+i.padding;var a=0;var s=t.top;var l=t.left;var c=t.bottom;var u=t.right;var h,p,d;e.fillStyle=Mt.valueOrDefault(i.fontColor,dt.global.defaultFontColor);e.font=n.string;if(t.isHorizontal()){p=l+(u-l)/2;d=s+o;h=u-l}else{p=i.position==="left"?l+o:u-o;d=s+(c-s)/2;h=c-s;a=Math.PI*(i.position==="left"?-.5:.5)}e.save();e.translate(p,d);e.rotate(a);e.textAlign="center";e.textBaseline="middle";var f=i.text;if(Mt.isArray(f)){var m=0;for(var g=0;g<f.length;++g){e.fillText(f[g],0,m,h);m+=r}}else e.fillText(f,0,0,h);e.restore()}});function xo(t,e){var i=new bo({ctx:t.ctx,options:e,chart:t});ui.configure(t,i,e);ui.addBox(t,i);t.titleBlock=i}var ko,wo={},Lo,Mo=_o,Co={id:"title",_element:bo,beforeInit:function(t){var e=t.options.title;if(e)xo(t,e)},beforeUpdate:function(t){var e=t.options.title;var i=t.titleBlock;if(e){Mt.mergeIf(e,dt.global.title);if(i){ui.configure(t,i,e);i.options=e}else xo(t,e)}else if(i){ui.removeBox(t,i);delete t.titleBlock}}},So;for(So in wo.filler=uo,wo.legend=Mo,wo.title=Co,fn.helpers=Mt,mn(),fn._adapters=yn,fn.Animation=Bt,fn.animationService=Rt,fn.controllers=Ze,fn.DatasetController=Ht,fn.defaults=dt,fn.Element=Ot,fn.elements=he,fn.Interaction=Ke,fn.layouts=ui,fn.platform=ji,fn.plugins=Ui,fn.Scale=jn,fn.scaleService=Hi,fn.Ticks=bn,fn.Tooltip=rn,fn.helpers.each(Xr,function(t,e){fn.scaleService.registerScaleType(e,t,t._defaults)}),wo)if(wo.hasOwnProperty(So))fn.plugins.register(wo[So]);fn.platform.initialize();var Po=fn;if(typeof window!=="undefined")window.Chart=fn;return(fn.Chart=fn).Legend=wo.legend._element,fn.Title=wo.title._element,fn.pluginService=fn.plugins,fn.PluginBase=fn.Element.extend({}),fn.canvasHelpers=fn.helpers.canvas,fn.layoutService=fn.layouts,fn.LinearScaleBase=$n,fn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(i){fn[i]=function(t,e){return new fn(t,fn.helpers.merge(e||{},{type:i.charAt(0).toLowerCase()+i.slice(1)}))}}),Po}(function(){try{return i(2470)}catch(t){}}())},7310:function(t,e,i){"use strict";t.exports=i(2702).polyfill()},2702:function(t,e,nt){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
t.exports=function(){"use strict";function n(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function l(t){return typeof t==="function"}var t=void 0;if(Array.isArray)t=Array.isArray;else t=function(t){return Object.prototype.toString.call(t)==="[object Array]"};var i=t,r=0,e=void 0,o=void 0,a=function t(e,i){b[r]=e;b[r+1]=i;r+=2;if(r===2)if(o)o(x);else w()};function s(t){o=t}function c(t){a=t}var u=typeof window!=="undefined"?window:undefined,h=u||{},p=h.MutationObserver||h.WebKitMutationObserver,d=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",f=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return process.nextTick(x)}}function g(){if(typeof e!=="undefined")return function(){e(x)};return y()}function v(){var t=0;var e=new p(x);var i=document.createTextNode("");e.observe(i,{characterData:true});return function(){i.data=t=++t%2}}function _(){var t=new MessageChannel;t.port1.onmessage=x;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(x,1)}}var b=new Array(1e3);function x(){for(var t=0;t<r;t+=2){var e=b[t];var i=b[t+1];e(i);b[t]=undefined;b[t+1]=undefined}r=0}function k(){try{var t=Function("return this")().require("vertx");e=t.runOnLoop||t.runOnContext;return g()}catch(t){return y()}}var w=void 0;if(d)w=m();else if(p)w=v();else if(f)w=_();else if(u===undefined&&"function"==="function")w=k();else w=y();function L(t,e){var i=this;var n=new this.constructor(S);if(n[C]===undefined)q(n);var r=i._state;if(r){var o=arguments[r-1];a(function(){return G(r,n,o,i._result)})}else U(i,n,t,e);return n}function M(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e)return t;var i=new e(S);z(i,t);return i}var C=Math.random().toString(36).substring(2);function S(){}var P=void 0,T=1,E=2;function D(){return new TypeError("You cannot resolve a promise with itself")}function A(){return new TypeError("A promises callback cannot return that same promise.")}function O(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function I(t,n,r){a(function(e){var i=false;var t=O(r,n,function(t){if(i)return;i=true;if(n!==t)z(e,t);else N(e,t)},function(t){if(i)return;i=true;j(e,t)},"Settle: "+(e._label||" unknown promise"));if(!i&&t){i=true;j(e,t)}},t)}function B(e,t){if(t._state===T)N(e,t._result);else if(t._state===E)j(e,t._result);else U(t,undefined,function(t){return z(e,t)},function(t){return j(e,t)})}function R(t,e,i){if(e.constructor===t.constructor&&i===L&&e.constructor.resolve===M)B(t,e);else if(i===undefined)N(t,e);else if(l(i))I(t,e,i);else N(t,e)}function z(e,t){if(e===t)j(e,D());else if(n(t)){var i=void 0;try{i=t.then}catch(t){j(e,t);return}R(e,t,i)}else N(e,t)}function F(t){if(t._onerror)t._onerror(t._result);H(t)}function N(t,e){if(t._state!==P)return;t._result=e;t._state=T;if(t._subscribers.length!==0)a(H,t)}function j(t,e){if(t._state!==P)return;t._state=E;t._result=e;a(F,t)}function U(t,e,i,n){var r=t._subscribers;var o=r.length;t._onerror=null;r[o]=e;r[o+T]=i;r[o+E]=n;if(o===0&&t._state)a(H,t)}function H(t){var e=t._subscribers;var i=t._state;if(e.length===0)return;var n=void 0,r=void 0,o=t._result;for(var a=0;a<e.length;a+=3){n=e[a];r=e[a+i];if(n)G(i,n,r,o);else r(o)}t._subscribers.length=0}function G(t,e,i,n){var r=l(i),o=void 0,a=void 0,s=true;if(r){try{o=i(n)}catch(t){s=false;a=t}if(e===o){j(e,A());return}}else o=n;if(e._state!==P);else if(r&&s)z(e,o);else if(s===false)j(e,a);else if(t===T)N(e,o);else if(t===E)j(e,o)}function Z(i,t){try{t(function t(e){z(i,e)},function t(e){j(i,e)})}catch(t){j(i,t)}}var W=0;function V(){return W++}function q(t){t[C]=W++;t._state=undefined;t._result=undefined;t._subscribers=[]}function $(){return new Error("Array Methods must be provided an Array")}var Y=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(S);if(!this.promise[C])q(this.promise);if(i(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0)N(this.promise,this._result);else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0)N(this.promise,this._result)}}else j(this.promise,$())}t.prototype._enumerate=function t(e){for(var i=0;this._state===P&&i<e.length;i++)this._eachEntry(e[i],i)};t.prototype._eachEntry=function t(e,i){var n=this._instanceConstructor;var r=n.resolve;if(r===M){var o=void 0;var a=void 0;var s=false;try{o=e.then}catch(t){s=true;a=t}if(o===L&&e._state!==P)this._settledAt(e._state,i,e._result);else if(typeof o!=="function"){this._remaining--;this._result[i]=e}else if(n===et){var l=new n(S);if(s)j(l,a);else R(l,e,o);this._willSettleAt(l,i)}else this._willSettleAt(new n(function(t){return t(e)}),i)}else this._willSettleAt(r(e),i)};t.prototype._settledAt=function t(e,i,n){var r=this.promise;if(r._state===P){this._remaining--;if(e===E)j(r,n);else this._result[i]=n}if(this._remaining===0)N(r,this._result)};t.prototype._willSettleAt=function t(e,i){var n=this;U(e,undefined,function(t){return n._settledAt(T,i,t)},function(t){return n._settledAt(E,i,t)})};return t}();function J(t){return new Y(this,t).promise}function K(r){var o=this;if(i(r))return new o(function(t,e){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(t,e)});else return new o(function(t,e){return e(new TypeError("You must pass an array to race."))})}function X(t){var e=new this(S);return j(e,t),e}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function e(t){this[C]=V();this._result=this._state=undefined;this._subscribers=[];if(S!==t){typeof t!=="function"&&Q();this instanceof e?Z(this,t):tt()}}e.prototype.catch=function t(e){return this.then(null,e)};e.prototype.finally=function t(e){var i=this;var n=i.constructor;if(l(e))return i.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})});return i.then(e,e)};return e}();function it(){var t=void 0;if(void 0!==nt.g)t=nt.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et}return et.prototype.then=L,et.all=function(t){return new Y(this,t).promise},et.race=function(r){var o=this;return i(r)?new o(function(t,e){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},et.resolve=M,et.reject=function(t){var e=new this(S);return j(e,t),e},et._setScheduler=function(t){o=t},et._setAsap=function(t){a=t},et._asap=a,et.polyfill=function(){var t=void 0;if(void 0!==nt.g)t=nt.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=et},et.Promise=et}()},4144:function(t,e){var i,n;i=[e,t],void 0===(n="function"==typeof(n=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function h(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(e){try{delete window[e]}catch(t){window[e]=undefined}}function d(t){var e=document.getElementById(t);if(e)document.getElementsByTagName("head")[0].removeChild(e)}function n(o){var a=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var s=o;var l=a.timeout||i.timeout;var c=a.jsonpCallback||i.jsonpCallback;var u=undefined;return new Promise(function(t,e){var i=a.jsonpCallbackFunction||h();var n=c+"_"+i;window[i]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)}});if(u)clearTimeout(u);d(n);p(i)};s+=s.indexOf("?")===-1?"?":"&";var r=document.createElement("script");r.setAttribute("src",""+s+c+"="+i);if(a.charset)r.setAttribute("charset",a.charset);r.id=n;document.getElementsByTagName("head")[0].appendChild(r);u=setTimeout(function(){e(new Error("JSONP request to "+o+" timed out"));p(i);d(n);window[i]=function(){p(i)}},l);r.onerror=function(){e(new Error("JSONP request to "+o+" failed"));p(i);d(n);if(u)clearTimeout(u)}})}e.exports=n})?n.apply(e,i):n)||(t.exports=n)},4953:function(t){
/* flatpickr v4.6.6, @license MIT */
t.exports=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Mt=function(){Mt=Object.assign||function t(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o))e[o]=i[o]}return e};return Mt.apply(this,arguments)};function Ct(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)n[r]=o[a];return n}var St=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Pt={_disable:[],_enable:[],allowInput:false,allowInvalidPreload:false,altFormat:"F j, Y",altInput:false,altInputClass:"form-control input",animate:typeof window==="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:true,clickOpens:true,closeOnSelect:true,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:false,enable:[],enableSeconds:false,enableTime:false,errorHandler:function(t){return typeof console!=="undefined"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0);e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:false,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:false,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:undefined,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:false,showMonths:1,static:false,time_24hr:false,weekNumbers:false,wrap:false},Tt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:false},Et=function(t,e){if(e===void 0)e=2;return("000"+t).slice(e*-1)},Dt=function(t){return t===true?1:0};function At(i,n,r){if(r===void 0)r=false;var o;return function(){var t=this,e=arguments;o!==null&&clearTimeout(o);o=window.setTimeout(function(){o=null;if(!r)i.apply(t,e)},n);if(r&&!o)i.apply(t,e)}}var Ot=function(t){return t instanceof Array?t:[t]};function It(t,e,i){if(i===true)return t.classList.add(e);t.classList.remove(e)}function Bt(t,e,i){var n=window.document.createElement(t);e=e||"";i=i||"";n.className=e;if(i!==undefined)n.textContent=i;return n}function Rt(t){while(t.firstChild)t.removeChild(t.firstChild)}function zt(t,e){if(e(t))return t;else if(t.parentNode)return zt(t.parentNode,e);return undefined}function Ft(t,e){var i=Bt("div","numInputWrapper"),n=Bt("input","numInput "+t),r=Bt("span","arrowUp"),o=Bt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1)n.type="number";else{n.type="text";n.pattern="\\d*"}if(e!==undefined)for(var a in e)n.setAttribute(a,e[a]);i.appendChild(n);i.appendChild(r);i.appendChild(o);return i}function Nt(e){try{if(typeof e.composedPath==="function"){var t=e.composedPath();return t[0]}return e.target}catch(t){return e.target}}var t=function(){return undefined},jt=function(t,e,i){return i.months[e?"shorthand":"longhand"][t]},b={D:t,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,i){t.setHours(t.getHours()%12+12*Dt(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,i){var n=parseInt(e);var r=new Date(t.getFullYear(),0,2+(n-1)*7,0,0,0,0);r.setDate(r.getDate()-r.getDay()+i.firstDayOfWeek);return r},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:t,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:t,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},Ut={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},l={Z:function(t){return t.toISOString()},D:function(t,e,i){return e.weekdays.shorthand[l.w(t,e,i)]},F:function(t,e,i){return jt(l.n(t,e,i)-1,false,e)},G:function(t,e,i){return Et(l.h(t,e,i))},H:function(t){return Et(t.getHours())},J:function(t,e){return e.ordinal!==undefined?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[Dt(t.getHours()>11)]},M:function(t,e){return jt(t.getMonth(),true,e)},S:function(t){return Et(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,i){return i.getWeek(t)},Y:function(t){return Et(t.getFullYear(),4)},d:function(t){return Et(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return Et(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return Et(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},Ht=function(t){var e=t.config,o=e===void 0?Pt:e,i=t.l10n,a=i===void 0?Tt:i,n=t.isMobile,s=n===void 0?false:n;return function(n,t,e){var r=e||a;if(o.formatDate!==undefined&&!s)return o.formatDate(n,t,r);return t.split("").map(function(t,e,i){return l[t]&&i[e-1]!=="\\"?l[t](n,r,o):t!=="\\"?t:""}).join("")}},Gt=function(t){var e=t.config,_=e===void 0?Pt:e,i=t.l10n,y=i===void 0?Tt:i;return function(t,e,i,n){if(t!==0&&!t)return undefined;var r=n||y;var o;var a=t;if(t instanceof Date)o=new Date(t.getTime());else if(typeof t!=="string"&&t.toFixed!==undefined)o=new Date(t);else if(typeof t==="string"){var s=e||(_||Pt).dateFormat;var l=String(t).trim();if(l==="today"){o=new Date;i=true}else if(/Z$/.test(l)||/GMT$/.test(l))o=new Date(t);else if(_&&_.parseDate)o=_.parseDate(t,s);else{o=!_||!_.noCalendar?new Date((new Date).getFullYear(),0,1,0,0,0,0):new Date((new Date).setHours(0,0,0,0));var c=void 0,u=[];for(var h=0,p=0,d="";h<s.length;h++){var f=s[h];var m=f==="\\";var g=s[h-1]==="\\"||m;if(Ut[f]&&!g){d+=Ut[f];var v=new RegExp(d).exec(t);if(v&&(c=true))u[f!=="Y"?"push":"unshift"]({fn:b[f],val:v[++p]})}else if(!m)d+=".";u.forEach(function(t){var e=t.fn,i=t.val;return o=e(o,i,r)||o})}o=c?o:undefined}}if(!(o instanceof Date&&!isNaN(o.getTime()))){_.errorHandler(new Error("Invalid date provided: "+a));return undefined}if(i===true)o.setHours(0,0,0,0);return o}};function Zt(t,e,i){if(i===void 0)i=true;if(i!==false)return new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0);return t.getTime()-e.getTime()}var Wt=function(t,e,i){return t>Math.min(e,i)&&t<Math.max(e,i)},Vt={DAY:864e5};if(typeof Object.assign!=="function")Object.assign=function(i){var t=[];for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!i)throw TypeError("Cannot convert undefined or null to object");var n=function(e){if(e)Object.keys(e).forEach(function(t){return i[t]=e[t]})};for(var r=0,o=t;r<o.length;r++){var a=o[r];n(a)}return i};var qt=300;function a(p,u){var L={config:Mt(Mt({},Pt),$t.defaultConfig),l10n:Tt};L.parseDate=Gt({config:L.config,l10n:L.l10n});L._handlers=[];L.pluginElements=[];L.loadedPlugins=[];L._bind=a;L._setHoursFromDate=o;L._positionCalendar=et;L.changeMonth=z;L.changeYear=G;L.clear=F;L.close=N;L._createElement=Bt;L.destroy=j;L.isEnabled=Z;L.jumpToDate=v;L.open=J;L.redraw=rt;L.set=lt;L.setDate=ut;L.toggle=mt;function e(){L.utils={getDaysInMonth:function(t,e){if(t===void 0)t=L.currentMonth;if(e===void 0)e=L.currentYear;if(t===1&&(e%4===0&&e%100!==0||e%400===0))return 29;return L.l10n.daysInMonth[t]}}}function t(){L.element=L.input=p;L.isOpen=false;X();tt();dt();pt();e();if(!L.isMobile)b();g();if(L.selectedDates.length||L.config.noCalendar){if(L.config.enableTime)o(L.config.noCalendar?L.latestSelectedDateObj||L.config.minDate:undefined);kt(false)}i();var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(!L.isMobile&&t)et();gt("onReady")}function h(t){return t.bind(L)}function i(){var e=L.config;if(e.weekNumbers===false&&e.showMonths===1)return;else if(e.noCalendar!==true)window.requestAnimationFrame(function(){if(L.calendarContainer!==undefined){L.calendarContainer.style.visibility="hidden";L.calendarContainer.style.display="block"}if(L.daysContainer!==undefined){var t=(L.days.offsetWidth+1)*e.showMonths;L.daysContainer.style.width=t+"px";L.calendarContainer.style.width=t+(L.weekWrapper!==undefined?L.weekWrapper.offsetWidth:0)+"px";L.calendarContainer.style.removeProperty("visibility");L.calendarContainer.style.removeProperty("display")}})}function d(t){if(L.selectedDates.length===0){var e=L.config.minDate!==undefined?new Date(L.config.minDate.getTime()):new Date;var i=l(),n=i.hours,r=i.minutes,o=i.seconds;e.setHours(n,r,o,0);L.setDate(e,false)}if(t!==undefined&&t.type!=="blur")Lt(t);var a=L._input.value;f();kt();if(L._input.value!==a)L._debouncedChange()}function s(t,e){return t%12+12*Dt(e===L.l10n.amPM[1])}function r(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}function f(){if(L.hourElement===undefined||L.minuteElement===undefined)return;var t=(parseInt(L.hourElement.value.slice(-2),10)||0)%24,e=(parseInt(L.minuteElement.value,10)||0)%60,i=L.secondElement!==undefined?(parseInt(L.secondElement.value,10)||0)%60:0;if(L.amPM!==undefined)t=s(t,L.amPM.textContent);var n=L.config.minTime!==undefined||L.config.minDate&&L.minDateHasTime&&L.latestSelectedDateObj&&Zt(L.latestSelectedDateObj,L.config.minDate,true)===0;var r=L.config.maxTime!==undefined||L.config.maxDate&&L.maxDateHasTime&&L.latestSelectedDateObj&&Zt(L.latestSelectedDateObj,L.config.maxDate,true)===0;if(r){var o=L.config.maxTime!==undefined?L.config.maxTime:L.config.maxDate;t=Math.min(t,o.getHours());if(t===o.getHours())e=Math.min(e,o.getMinutes());if(e===o.getMinutes())i=Math.min(i,o.getSeconds())}if(n){var a=L.config.minTime!==undefined?L.config.minTime:L.config.minDate;t=Math.max(t,a.getHours());if(t===a.getHours())e=Math.max(e,a.getMinutes());if(e===a.getMinutes())i=Math.max(i,a.getSeconds())}c(t,e,i)}function o(t){var e=t||L.latestSelectedDateObj;if(e)c(e.getHours(),e.getMinutes(),e.getSeconds())}function l(){var t=L.config.defaultHour;var e=L.config.defaultMinute;var i=L.config.defaultSeconds;if(L.config.minDate!==undefined){var n=L.config.minDate.getHours();var r=L.config.minDate.getMinutes();t=Math.max(t,n);if(t===n)e=Math.max(r,e);if(t===n&&e===r)i=L.config.minDate.getSeconds()}if(L.config.maxDate!==undefined){var o=L.config.maxDate.getHours();var a=L.config.maxDate.getMinutes();t=Math.min(t,o);if(t===o)e=Math.min(a,e);if(t===o&&e===a)i=L.config.maxDate.getSeconds()}return{hours:t,minutes:e,seconds:i}}function c(t,e,i){if(L.latestSelectedDateObj!==undefined)L.latestSelectedDateObj.setHours(t%24,e,i||0,0);if(!L.hourElement||!L.minuteElement||L.isMobile)return;L.hourElement.value=Et(!L.config.time_24hr?(12+t)%12+12*Dt(t%12===0):t);L.minuteElement.value=Et(e);if(L.amPM!==undefined)L.amPM.textContent=L.l10n.amPM[Dt(t>=12)];if(L.secondElement!==undefined)L.secondElement.value=Et(i)}function n(t){var e=Nt(t);var i=parseInt(e.value)+(t.delta||0);if(i/1e3>1||t.key==="Enter"&&!/[^\d]/.test(i.toString()))G(i)}function a(e,i,n,r){if(i instanceof Array)return i.forEach(function(t){return a(e,t,n,r)});if(e instanceof Array)return e.forEach(function(t){return a(t,i,n,r)});e.addEventListener(i,n,r);L._handlers.push({element:e,event:i,handler:n,options:r})}function m(){gt("onChange")}function g(){if(L.config.wrap)["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(L.element.querySelectorAll("[data-"+e+"]"),function(t){return a(t,"click",L[e])})});if(L.isMobile){ft();return}var t=At(Y,50);L._debouncedChange=At(m,qt);if(L.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent))a(L.daysContainer,"mouseover",function(t){if(L.config.mode==="range")$(Nt(t))});a(window.document.body,"keydown",q);if(!L.config.inline&&!L.config.static)a(window,"resize",t);if(window.ontouchstart!==undefined)a(window.document,"touchstart",H);else a(window.document,"click",H);a(window.document,"focus",H,{capture:true});if(L.config.clickOpens===true){a(L._input,"focus",L.open);a(L._input,"click",L.open)}if(L.daysContainer!==undefined){a(L.monthNav,"click",wt);a(L.monthNav,["keyup","increment"],n);a(L.daysContainer,"click",at)}if(L.timeContainer!==undefined&&L.minuteElement!==undefined&&L.hourElement!==undefined){var e=function(t){return Nt(t).select()};a(L.timeContainer,["increment"],d);a(L.timeContainer,"blur",d,{capture:true});a(L.timeContainer,"click",_);a([L.hourElement,L.minuteElement],["focus","click"],e);if(L.secondElement!==undefined)a(L.secondElement,"focus",function(){return L.secondElement&&L.secondElement.select()});if(L.amPM!==undefined)a(L.amPM,"click",function(t){d(t);m()})}if(L.config.allowInput)a(L._input,"blur",V)}function v(t,e){var i=t!==undefined?L.parseDate(t):L.latestSelectedDateObj||(L.config.minDate&&L.config.minDate>L.now?L.config.minDate:L.config.maxDate&&L.config.maxDate<L.now?L.config.maxDate:L.now);var n=L.currentYear;var r=L.currentMonth;try{if(i!==undefined){L.currentYear=i.getFullYear();L.currentMonth=i.getMonth()}}catch(t){t.message="Invalid date supplied: "+i;L.config.errorHandler(t)}if(e&&L.currentYear!==n){gt("onYearChange");T()}if(e&&(L.currentYear!==n||L.currentMonth!==r))gt("onMonthChange");L.redraw()}function _(t){var e=Nt(t);if(~e.className.indexOf("arrow"))y(t,e.classList.contains("arrowUp")?1:-1)}function y(t,e,i){var n=t&&Nt(t);var r=i||n&&n.parentNode&&n.parentNode.firstChild;var o=vt("increment");o.delta=e;r&&r.dispatchEvent(o)}function b(){var t=window.document.createDocumentFragment();L.calendarContainer=Bt("div","flatpickr-calendar");L.calendarContainer.tabIndex=-1;if(!L.config.noCalendar){t.appendChild(A());L.innerContainer=Bt("div","flatpickr-innerContainer");if(L.config.weekNumbers){var e=R(),i=e.weekWrapper,n=e.weekNumbers;L.innerContainer.appendChild(i);L.weekNumbers=n;L.weekWrapper=i}L.rContainer=Bt("div","flatpickr-rContainer");L.rContainer.appendChild(I());if(!L.daysContainer){L.daysContainer=Bt("div","flatpickr-days");L.daysContainer.tabIndex=-1}P();L.rContainer.appendChild(L.daysContainer);L.innerContainer.appendChild(L.rContainer);t.appendChild(L.innerContainer)}if(L.config.enableTime)t.appendChild(O());It(L.calendarContainer,"rangeMode",L.config.mode==="range");It(L.calendarContainer,"animate",L.config.animate===true);It(L.calendarContainer,"multiMonth",L.config.showMonths>1);L.calendarContainer.appendChild(t);var r=L.config.appendTo!==undefined&&L.config.appendTo.nodeType!==undefined;if(L.config.inline||L.config.static){L.calendarContainer.classList.add(L.config.inline?"inline":"static");if(L.config.inline)if(!r&&L.element.parentNode)L.element.parentNode.insertBefore(L.calendarContainer,L._input.nextSibling);else if(L.config.appendTo!==undefined)L.config.appendTo.appendChild(L.calendarContainer);if(L.config.static){var o=Bt("div","flatpickr-wrapper");if(L.element.parentNode)L.element.parentNode.insertBefore(o,L.element);o.appendChild(L.element);if(L.altInput)o.appendChild(L.altInput);o.appendChild(L.calendarContainer)}}if(!L.config.static&&!L.config.inline)(L.config.appendTo!==undefined?L.config.appendTo:window.document.body).appendChild(L.calendarContainer)}function x(t,e,i,n){var r=Z(e,true),o=Bt("span","flatpickr-day "+t,e.getDate().toString());o.dateObj=e;o.$i=n;o.setAttribute("aria-label",L.formatDate(e,L.config.ariaDateFormat));if(t.indexOf("hidden")===-1&&Zt(e,L.now)===0){L.todayDateElem=o;o.classList.add("today");o.setAttribute("aria-current","date")}if(r){o.tabIndex=-1;if(_t(e)){o.classList.add("selected");L.selectedDateElem=o;if(L.config.mode==="range"){It(o,"startRange",L.selectedDates[0]&&Zt(e,L.selectedDates[0],true)===0);It(o,"endRange",L.selectedDates[1]&&Zt(e,L.selectedDates[1],true)===0);if(t==="nextMonthDay")o.classList.add("inRange")}}}else o.classList.add("flatpickr-disabled");if(L.config.mode==="range")if(yt(e)&&!_t(e))o.classList.add("inRange");if(L.weekNumbers&&L.config.showMonths===1&&t!=="prevMonthDay"&&i%7===1)L.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+L.config.getWeek(e)+"</span>");gt("onDayCreate",o);return o}function k(t){t.focus();if(L.config.mode==="range")$(t)}function w(t){var e=t>0?0:L.config.showMonths-1;var i=t>0?L.config.showMonths:-1;for(var n=e;n!=i;n+=t){var r=L.daysContainer.children[n];var o=t>0?0:r.children.length-1;var a=t>0?r.children.length:-1;for(var s=o;s!=a;s+=t){var l=r.children[s];if(l.className.indexOf("hidden")===-1&&Z(l.dateObj))return l}}return undefined}function M(t,e){var i=t.className.indexOf("Month")===-1?t.dateObj.getMonth():L.currentMonth;var n=e>0?L.config.showMonths:-1;var r=e>0?1:-1;for(var o=i-L.currentMonth;o!=n;o+=r){var a=L.daysContainer.children[o];var s=i-L.currentMonth===o?t.$i+e:e<0?a.children.length-1:0;var l=a.children.length;for(var c=s;c>=0&&c<l&&c!=(e>0?l:-1);c+=r){var u=a.children[c];if(u.className.indexOf("hidden")===-1&&Z(u.dateObj)&&Math.abs(t.$i-c)>=Math.abs(e))return k(u)}}L.changeMonth(r);C(w(r),0);return undefined}function C(t,e){var i=W(document.activeElement||document.body);var n=t!==undefined?t:i?document.activeElement:L.selectedDateElem!==undefined&&W(L.selectedDateElem)?L.selectedDateElem:L.todayDateElem!==undefined&&W(L.todayDateElem)?L.todayDateElem:w(e>0?1:-1);if(n===undefined)L._input.focus();else if(!i)k(n);else M(n,e)}function S(t,e){var i=(new Date(t,e,1).getDay()-L.l10n.firstDayOfWeek+7)%7;var n=L.utils.getDaysInMonth((e-1+12)%12,t);var r=L.utils.getDaysInMonth(e,t),o=window.document.createDocumentFragment(),a=L.config.showMonths>1,s=a?"prevMonthDay hidden":"prevMonthDay",l=a?"nextMonthDay hidden":"nextMonthDay";var c=n+1-i,u=0;for(;c<=n;c++,u++)o.appendChild(x(s,new Date(t,e-1,c),c,u));for(c=1;c<=r;c++,u++)o.appendChild(x("",new Date(t,e,c),c,u));for(var h=r+1;h<=42-i&&(L.config.showMonths===1||u%7!==0);h++,u++)o.appendChild(x(l,new Date(t,e+1,h%r),h,u));var p=Bt("div","dayContainer");p.appendChild(o);return p}function P(){if(L.daysContainer===undefined)return;Rt(L.daysContainer);if(L.weekNumbers)Rt(L.weekNumbers);var t=document.createDocumentFragment();for(var e=0;e<L.config.showMonths;e++){var i=new Date(L.currentYear,L.currentMonth,1);i.setMonth(L.currentMonth+e);t.appendChild(S(i.getFullYear(),i.getMonth()))}L.daysContainer.appendChild(t);L.days=L.daysContainer.firstChild;if(L.config.mode==="range"&&L.selectedDates.length===1)$()}function T(){if(L.config.showMonths>1||L.config.monthSelectorType!=="dropdown")return;var t=function(t){if(L.config.minDate!==undefined&&L.currentYear===L.config.minDate.getFullYear()&&t<L.config.minDate.getMonth())return false;return!(L.config.maxDate!==undefined&&L.currentYear===L.config.maxDate.getFullYear()&&t>L.config.maxDate.getMonth())};L.monthsDropdownContainer.tabIndex=-1;L.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++){if(!t(e))continue;var i=Bt("option","flatpickr-monthDropdown-month");i.value=new Date(L.currentYear,e).getMonth().toString();i.textContent=jt(e,L.config.shorthandCurrentMonth,L.l10n);i.tabIndex=-1;if(L.currentMonth===e)i.selected=true;L.monthsDropdownContainer.appendChild(i)}}function E(){var t=Bt("div","flatpickr-month");var e=window.document.createDocumentFragment();var i;if(L.config.showMonths>1||L.config.monthSelectorType==="static")i=Bt("span","cur-month");else{L.monthsDropdownContainer=Bt("select","flatpickr-monthDropdown-months");L.monthsDropdownContainer.setAttribute("aria-label",L.l10n.monthAriaLabel);a(L.monthsDropdownContainer,"change",function(t){var e=Nt(t);var i=parseInt(e.value,10);L.changeMonth(i-L.currentMonth);gt("onMonthChange")});T();i=L.monthsDropdownContainer}var n=Ft("cur-year",{tabindex:"-1"});var r=n.getElementsByTagName("input")[0];r.setAttribute("aria-label",L.l10n.yearAriaLabel);if(L.config.minDate)r.setAttribute("min",L.config.minDate.getFullYear().toString());if(L.config.maxDate){r.setAttribute("max",L.config.maxDate.getFullYear().toString());r.disabled=!!L.config.minDate&&L.config.minDate.getFullYear()===L.config.maxDate.getFullYear()}var o=Bt("div","flatpickr-current-month");o.appendChild(i);o.appendChild(n);e.appendChild(o);t.appendChild(e);return{container:t,yearElement:r,monthElement:i}}function D(){Rt(L.monthNav);L.monthNav.appendChild(L.prevMonthNav);if(L.config.showMonths){L.yearElements=[];L.monthElements=[]}for(var t=L.config.showMonths;t--;){var e=E();L.yearElements.push(e.yearElement);L.monthElements.push(e.monthElement);L.monthNav.appendChild(e.container)}L.monthNav.appendChild(L.nextMonthNav)}function A(){L.monthNav=Bt("div","flatpickr-months");L.yearElements=[];L.monthElements=[];L.prevMonthNav=Bt("span","flatpickr-prev-month");L.prevMonthNav.innerHTML=L.config.prevArrow;L.nextMonthNav=Bt("span","flatpickr-next-month");L.nextMonthNav.innerHTML=L.config.nextArrow;D();Object.defineProperty(L,"_hidePrevMonthArrow",{get:function(){return L.__hidePrevMonthArrow},set:function(t){if(L.__hidePrevMonthArrow!==t){It(L.prevMonthNav,"flatpickr-disabled",t);L.__hidePrevMonthArrow=t}}});Object.defineProperty(L,"_hideNextMonthArrow",{get:function(){return L.__hideNextMonthArrow},set:function(t){if(L.__hideNextMonthArrow!==t){It(L.nextMonthNav,"flatpickr-disabled",t);L.__hideNextMonthArrow=t}}});L.currentYearElement=L.yearElements[0];bt();return L.monthNav}function O(){L.calendarContainer.classList.add("hasTime");if(L.config.noCalendar)L.calendarContainer.classList.add("noCalendar");L.timeContainer=Bt("div","flatpickr-time");L.timeContainer.tabIndex=-1;var t=Bt("span","flatpickr-time-separator",":");var e=Ft("flatpickr-hour",{"aria-label":L.l10n.hourAriaLabel});L.hourElement=e.getElementsByTagName("input")[0];var i=Ft("flatpickr-minute",{"aria-label":L.l10n.minuteAriaLabel});L.minuteElement=i.getElementsByTagName("input")[0];L.hourElement.tabIndex=L.minuteElement.tabIndex=-1;L.hourElement.value=Et(L.latestSelectedDateObj?L.latestSelectedDateObj.getHours():L.config.time_24hr?L.config.defaultHour:r(L.config.defaultHour));L.minuteElement.value=Et(L.latestSelectedDateObj?L.latestSelectedDateObj.getMinutes():L.config.defaultMinute);L.hourElement.setAttribute("step",L.config.hourIncrement.toString());L.minuteElement.setAttribute("step",L.config.minuteIncrement.toString());L.hourElement.setAttribute("min",L.config.time_24hr?"0":"1");L.hourElement.setAttribute("max",L.config.time_24hr?"23":"12");L.minuteElement.setAttribute("min","0");L.minuteElement.setAttribute("max","59");L.timeContainer.appendChild(e);L.timeContainer.appendChild(t);L.timeContainer.appendChild(i);if(L.config.time_24hr)L.timeContainer.classList.add("time24hr");if(L.config.enableSeconds){L.timeContainer.classList.add("hasSeconds");var n=Ft("flatpickr-second");L.secondElement=n.getElementsByTagName("input")[0];L.secondElement.value=Et(L.latestSelectedDateObj?L.latestSelectedDateObj.getSeconds():L.config.defaultSeconds);L.secondElement.setAttribute("step",L.minuteElement.getAttribute("step"));L.secondElement.setAttribute("min","0");L.secondElement.setAttribute("max","59");L.timeContainer.appendChild(Bt("span","flatpickr-time-separator",":"));L.timeContainer.appendChild(n)}if(!L.config.time_24hr){L.amPM=Bt("span","flatpickr-am-pm",L.l10n.amPM[Dt((L.latestSelectedDateObj?L.hourElement.value:L.config.defaultHour)>11)]);L.amPM.title=L.l10n.toggleTitle;L.amPM.tabIndex=-1;L.timeContainer.appendChild(L.amPM)}return L.timeContainer}function I(){if(!L.weekdayContainer)L.weekdayContainer=Bt("div","flatpickr-weekdays");else Rt(L.weekdayContainer);for(var t=L.config.showMonths;t--;){var e=Bt("div","flatpickr-weekdaycontainer");L.weekdayContainer.appendChild(e)}B();return L.weekdayContainer}function B(){if(!L.weekdayContainer)return;var t=L.l10n.firstDayOfWeek;var e=Ct(L.l10n.weekdays.shorthand);if(t>0&&t<e.length)e=Ct(e.splice(t,e.length),e.splice(0,t));for(var i=L.config.showMonths;i--;)L.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+e.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function R(){L.calendarContainer.classList.add("hasWeeks");var t=Bt("div","flatpickr-weekwrapper");t.appendChild(Bt("span","flatpickr-weekday",L.l10n.weekAbbreviation));var e=Bt("div","flatpickr-weeks");t.appendChild(e);return{weekWrapper:t,weekNumbers:e}}function z(t,e){if(e===void 0)e=true;var i=e?t:t-L.currentMonth;if(i<0&&L._hidePrevMonthArrow===true||i>0&&L._hideNextMonthArrow===true)return;L.currentMonth+=i;if(L.currentMonth<0||L.currentMonth>11){L.currentYear+=L.currentMonth>11?1:-1;L.currentMonth=(L.currentMonth+12)%12;gt("onYearChange");T()}P();gt("onMonthChange");bt()}function F(t,e){if(t===void 0)t=true;if(e===void 0)e=true;L.input.value="";if(L.altInput!==undefined)L.altInput.value="";if(L.mobileInput!==undefined)L.mobileInput.value="";L.selectedDates=[];L.latestSelectedDateObj=undefined;if(e===true){L.currentYear=L._initialDate.getFullYear();L.currentMonth=L._initialDate.getMonth()}if(L.config.enableTime===true){var i=l(),n=i.hours,r=i.minutes,o=i.seconds;c(n,r,o)}L.redraw();if(t)gt("onChange")}function N(){L.isOpen=false;if(!L.isMobile){if(L.calendarContainer!==undefined)L.calendarContainer.classList.remove("open");if(L._input!==undefined)L._input.classList.remove("active")}gt("onClose")}function j(){if(L.config!==undefined)gt("onDestroy");for(var t=L._handlers.length;t--;){var e=L._handlers[t];e.element.removeEventListener(e.event,e.handler,e.options)}L._handlers=[];if(L.mobileInput){if(L.mobileInput.parentNode)L.mobileInput.parentNode.removeChild(L.mobileInput);L.mobileInput=undefined}else if(L.calendarContainer&&L.calendarContainer.parentNode)if(L.config.static&&L.calendarContainer.parentNode){var i=L.calendarContainer.parentNode;i.lastChild&&i.removeChild(i.lastChild);if(i.parentNode){while(i.firstChild)i.parentNode.insertBefore(i.firstChild,i);i.parentNode.removeChild(i)}}else L.calendarContainer.parentNode.removeChild(L.calendarContainer);if(L.altInput){L.input.type="text";if(L.altInput.parentNode)L.altInput.parentNode.removeChild(L.altInput);delete L.altInput}if(L.input){L.input.type=L.input._type;L.input.classList.remove("flatpickr-input");L.input.removeAttribute("readonly")}["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(t){try{delete L[t]}catch(t){}})}function U(t){if(L.config.appendTo&&L.config.appendTo.contains(t))return true;return L.calendarContainer.contains(t)}function H(t){if(L.isOpen&&!L.config.inline){var e=Nt(t);var i=U(e);var n=e===L.input||e===L.altInput||L.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(L.input)||~t.path.indexOf(L.altInput));var r=t.type==="blur"?n&&t.relatedTarget&&!U(t.relatedTarget):!n&&!i&&!U(t.relatedTarget);var o=!L.config.ignoredFocusElements.some(function(t){return t.contains(e)});if(r&&o){if(L.timeContainer!==undefined&&L.minuteElement!==undefined&&L.hourElement!==undefined&&L.input.value!==""&&L.input.value!==undefined)d();L.close();if(L.config&&L.config.mode==="range"&&L.selectedDates.length===1){L.clear(false);L.redraw()}}}}function G(t){if(!t||L.config.minDate&&t<L.config.minDate.getFullYear()||L.config.maxDate&&t>L.config.maxDate.getFullYear())return;var e=t,i=L.currentYear!==e;L.currentYear=e||L.currentYear;if(L.config.maxDate&&L.currentYear===L.config.maxDate.getFullYear())L.currentMonth=Math.min(L.config.maxDate.getMonth(),L.currentMonth);else if(L.config.minDate&&L.currentYear===L.config.minDate.getFullYear())L.currentMonth=Math.max(L.config.minDate.getMonth(),L.currentMonth);if(i){L.redraw();gt("onYearChange");T()}}function Z(t,e){if(e===void 0)e=true;var i=L.parseDate(t,undefined,e);if(L.config.minDate&&i&&Zt(i,L.config.minDate,e!==undefined?e:!L.minDateHasTime)<0||L.config.maxDate&&i&&Zt(i,L.config.maxDate,e!==undefined?e:!L.maxDateHasTime)>0)return false;if(L.config.enable.length===0&&L.config.disable.length===0)return true;if(i===undefined)return false;var n=L.config.enable.length>0,r=n?L.config.enable:L.config.disable;for(var o=0,a=void 0;o<r.length;o++){a=r[o];if(typeof a==="function"&&a(i))return n;else if(a instanceof Date&&i!==undefined&&a.getTime()===i.getTime())return n;else if(typeof a==="string"&&i!==undefined){var s=L.parseDate(a,undefined,true);return s&&s.getTime()===i.getTime()?n:!n}else if(typeof a==="object"&&i!==undefined&&a.from&&a.to&&i.getTime()>=a.from.getTime()&&i.getTime()<=a.to.getTime())return n}return!n}function W(t){if(L.daysContainer!==undefined)return t.className.indexOf("hidden")===-1&&t.className.indexOf("flatpickr-disabled")===-1&&L.daysContainer.contains(t);return false}function V(t){var e=t.target===L._input;if(e&&!(t.relatedTarget&&U(t.relatedTarget)))L.setDate(L._input.value,true,t.target===L.altInput?L.config.altFormat:L.config.dateFormat)}function q(t){var e=Nt(t);var i=L.config.wrap?p.contains(e):e===L._input;var n=L.config.allowInput;var r=L.isOpen&&(!n||!i);var o=L.config.inline&&i&&!n;if(t.keyCode===13&&i)if(n){L.setDate(L._input.value,true,e===L.altInput?L.config.altFormat:L.config.dateFormat);return e.blur()}else L.open();else if(U(e)||r||o){var a=!!L.timeContainer&&L.timeContainer.contains(e);switch(t.keyCode){case 13:if(a){t.preventDefault();d();ot()}else at(t);break;case 27:t.preventDefault();ot();break;case 8:case 46:if(i&&!L.config.allowInput){t.preventDefault();L.clear()}break;case 37:case 39:if(!a&&!i){t.preventDefault();if(L.daysContainer!==undefined&&(n===false||document.activeElement&&W(document.activeElement))){var s=t.keyCode===39?1:-1;if(!t.ctrlKey)C(undefined,s);else{t.stopPropagation();z(s);C(w(1),0)}}}else if(L.hourElement)L.hourElement.focus();break;case 38:case 40:t.preventDefault();var l=t.keyCode===40?1:-1;if(L.daysContainer&&e.$i!==undefined||e===L.input||e===L.altInput){if(t.ctrlKey){t.stopPropagation();G(L.currentYear-l);C(w(1),0)}else if(!a)C(undefined,l*7)}else if(e===L.currentYearElement)G(L.currentYear-l);else if(L.config.enableTime){if(!a&&L.hourElement)L.hourElement.focus();d(t);L._debouncedChange()}break;case 9:if(a){var c=[L.hourElement,L.minuteElement,L.secondElement,L.amPM].concat(L.pluginElements).filter(function(t){return t});var u=c.indexOf(e);if(u!==-1){var h=c[u+(t.shiftKey?-1:1)];t.preventDefault();(h||L._input).focus()}}else if(!L.config.noCalendar&&L.daysContainer&&L.daysContainer.contains(e)&&t.shiftKey){t.preventDefault();L._input.focus()}break}}if(L.amPM!==undefined&&e===L.amPM)switch(t.key){case L.l10n.amPM[0].charAt(0):case L.l10n.amPM[0].charAt(0).toLowerCase():L.amPM.textContent=L.l10n.amPM[0];f();kt();break;case L.l10n.amPM[1].charAt(0):case L.l10n.amPM[1].charAt(0).toLowerCase():L.amPM.textContent=L.l10n.amPM[1];f();kt();break}if(i||U(e))gt("onKeyDown",t)}function $(a){if(L.selectedDates.length!==1||a&&(!a.classList.contains("flatpickr-day")||a.classList.contains("flatpickr-disabled")))return;var s=a?a.dateObj.getTime():L.days.firstElementChild.dateObj.getTime(),l=L.parseDate(L.selectedDates[0],undefined,true).getTime(),t=Math.min(s,L.selectedDates[0].getTime()),e=Math.max(s,L.selectedDates[0].getTime());var c=false;var u=0,h=0;for(var i=t;i<e;i+=Vt.DAY)if(!Z(new Date(i),true)){c=c||i>t&&i<e;if(i<l&&(!u||i>u))u=i;else if(i>l&&(!h||i<h))h=i}for(var n=0;n<L.config.showMonths;n++){var p=L.daysContainer.children[n];var r=function(t,e){var i=p.children[t],n=i.dateObj;var r=n.getTime();var o=u>0&&r<u||h>0&&r>h;if(o){i.classList.add("notAllowed");["inRange","startRange","endRange"].forEach(function(t){i.classList.remove(t)});return"continue"}else if(c&&!o)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(t){i.classList.remove(t)});if(a!==undefined){a.classList.add(s<=L.selectedDates[0].getTime()?"startRange":"endRange");if(l<s&&r===l)i.classList.add("startRange");else if(l>s&&r===l)i.classList.add("endRange");if(r>=u&&(h===0||r<=h)&&Wt(r,l,s))i.classList.add("inRange")}};for(var o=0,d=p.children.length;o<d;o++)r(o,d)}}function Y(){if(L.isOpen&&!L.config.static&&!L.config.inline)et()}function J(t,e){if(e===void 0)e=L._positionElement;if(L.isMobile===true){if(t){t.preventDefault();var i=Nt(t);i&&i.blur()}if(L.mobileInput!==undefined){L.mobileInput.focus();L.mobileInput.click()}gt("onOpen");return}if(L._input.disabled||L.config.inline)return;var n=L.isOpen;L.isOpen=true;if(!n){L.calendarContainer.classList.add("open");L._input.classList.add("active");gt("onOpen");et(e)}if(L.config.enableTime===true&&L.config.noCalendar===true)if(L.config.allowInput===false&&(t===undefined||!L.timeContainer.contains(t.relatedTarget)))setTimeout(function(){return L.hourElement.select()},50)}function K(n){return function(t){var e=L.config["_"+n+"Date"]=L.parseDate(t,L.config.dateFormat);var i=L.config["_"+(n==="min"?"max":"min")+"Date"];if(e!==undefined)L[n==="min"?"minDateHasTime":"maxDateHasTime"]=e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0;if(L.selectedDates){L.selectedDates=L.selectedDates.filter(function(t){return Z(t)});if(!L.selectedDates.length&&n==="min")o(e);kt()}if(L.daysContainer){rt();if(e!==undefined)L.currentYearElement[n]=e.getFullYear().toString();else L.currentYearElement.removeAttribute(n);L.currentYearElement.disabled=!!i&&e!==undefined&&i.getFullYear()===e.getFullYear()}}}function X(){var t=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"];var e=Mt(Mt({},JSON.parse(JSON.stringify(p.dataset||{}))),u);var i={};L.config.parseDate=e.parseDate;L.config.formatDate=e.formatDate;Object.defineProperty(L.config,"enable",{get:function(){return L.config._enable},set:function(t){L.config._enable=ht(t)}});Object.defineProperty(L.config,"disable",{get:function(){return L.config._disable},set:function(t){L.config._disable=ht(t)}});var n=e.mode==="time";if(!e.dateFormat&&(e.enableTime||n)){var r=$t.defaultConfig.dateFormat||Pt.dateFormat;i.dateFormat=e.noCalendar||n?"H:i"+(e.enableSeconds?":S":""):r+" H:i"+(e.enableSeconds?":S":"")}if(e.altInput&&(e.enableTime||n)&&!e.altFormat){var o=$t.defaultConfig.altFormat||Pt.altFormat;i.altFormat=e.noCalendar||n?"h:i"+(e.enableSeconds?":S K":" K"):o+(" h:i"+(e.enableSeconds?":S":"")+" K")}Object.defineProperty(L.config,"minDate",{get:function(){return L.config._minDate},set:K("min")});Object.defineProperty(L.config,"maxDate",{get:function(){return L.config._maxDate},set:K("max")});var a=function(e){return function(t){L.config[e==="min"?"_minTime":"_maxTime"]=L.parseDate(t,"H:i:S")}};Object.defineProperty(L.config,"minTime",{get:function(){return L.config._minTime},set:a("min")});Object.defineProperty(L.config,"maxTime",{get:function(){return L.config._maxTime},set:a("max")});if(e.mode==="time"){L.config.noCalendar=true;L.config.enableTime=true}Object.assign(L.config,i,e);for(var s=0;s<t.length;s++)L.config[t[s]]=L.config[t[s]]===true||L.config[t[s]]==="true";St.filter(function(t){return L.config[t]!==undefined}).forEach(function(t){L.config[t]=Ot(L.config[t]||[]).map(h)});L.isMobile=!L.config.disableMobile&&!L.config.inline&&L.config.mode==="single"&&!L.config.disable.length&&!L.config.enable.length&&!L.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var s=0;s<L.config.plugins.length;s++){var l=L.config.plugins[s](L)||{};for(var c in l)if(St.indexOf(c)>-1)L.config[c]=Ot(l[c]).map(h).concat(L.config[c]);else if(typeof e[c]==="undefined")L.config[c]=l[c]}if(!e.altInputClass)L.config.altInputClass=Q().className+" "+L.config.altInputClass;gt("onParseConfig")}function Q(){return L.config.wrap?p.querySelector("[data-input]"):p}function tt(){if(typeof L.config.locale!=="object"&&typeof $t.l10ns[L.config.locale]==="undefined")L.config.errorHandler(new Error("flatpickr: invalid locale "+L.config.locale));L.l10n=Mt(Mt({},$t.l10ns.default),typeof L.config.locale==="object"?L.config.locale:L.config.locale!=="default"?$t.l10ns[L.config.locale]:undefined);Ut.K="("+L.l10n.amPM[0]+"|"+L.l10n.amPM[1]+"|"+L.l10n.amPM[0].toLowerCase()+"|"+L.l10n.amPM[1].toLowerCase()+")";var t=Mt(Mt({},u),JSON.parse(JSON.stringify(p.dataset||{})));if(t.time_24hr===undefined&&$t.defaultConfig.time_24hr===undefined)L.config.time_24hr=L.l10n.time_24hr;L.formatDate=Ht(L);L.parseDate=Gt({config:L.config,l10n:L.l10n})}function et(t){if(L.calendarContainer===undefined)return;gt("onPreCalendarPosition");var e=t||L._positionElement;var i=Array.prototype.reduce.call(L.calendarContainer.children,function(t,e){return t+e.offsetHeight},0),n=L.calendarContainer.offsetWidth,r=L.config.position.split(" "),o=r[0],a=r.length>1?r[1]:null,s=e.getBoundingClientRect(),l=window.innerHeight-s.bottom,c=o==="above"||o!=="below"&&l<i&&s.top>i;var u=window.pageYOffset+s.top+(!c?e.offsetHeight+2:-i-2);It(L.calendarContainer,"arrowTop",!c);It(L.calendarContainer,"arrowBottom",c);if(L.config.inline)return;var h=window.pageXOffset+s.left;var p=false;var d=false;if(a==="center"){h-=(n-s.width)/2;p=true}else if(a==="right"){h-=n-s.width;d=true}It(L.calendarContainer,"arrowLeft",!p&&!d);It(L.calendarContainer,"arrowCenter",p);It(L.calendarContainer,"arrowRight",d);var f=window.document.body.offsetWidth-(window.pageXOffset+s.right);var m=h+n>window.document.body.offsetWidth;var g=f+n>window.document.body.offsetWidth;It(L.calendarContainer,"rightMost",m);if(L.config.static)return;L.calendarContainer.style.top=u+"px";if(!m){L.calendarContainer.style.left=h+"px";L.calendarContainer.style.right="auto"}else if(!g){L.calendarContainer.style.left="auto";L.calendarContainer.style.right=f+"px"}else{var v=it();if(v===undefined)return;var _=window.document.body.offsetWidth;var y=Math.max(0,_/2-n/2);var b=".flatpickr-calendar.centerMost:before";var x=".flatpickr-calendar.centerMost:after";var k=v.cssRules.length;var w="{left:"+s.left+"px;right:auto;}";It(L.calendarContainer,"rightMost",false);It(L.calendarContainer,"centerMost",true);v.insertRule(b+","+x+w,k);L.calendarContainer.style.left=y+"px";L.calendarContainer.style.right="auto"}}function it(){var t=null;for(var e=0;e<document.styleSheets.length;e++){var i=document.styleSheets[e];try{i.cssRules}catch(t){continue}t=i;break}return t!=null?t:nt()}function nt(){var t=document.createElement("style");document.head.appendChild(t);return t.sheet}function rt(){if(L.config.noCalendar||L.isMobile)return;T();bt();P()}function ot(){L._input.focus();if(window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==undefined)setTimeout(L.close,0);else L.close()}function at(t){t.preventDefault();t.stopPropagation();var e=function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")};var i=zt(Nt(t),e);if(i===undefined)return;var n=i;var r=L.latestSelectedDateObj=new Date(n.dateObj.getTime());var o=(r.getMonth()<L.currentMonth||r.getMonth()>L.currentMonth+L.config.showMonths-1)&&L.config.mode!=="range";L.selectedDateElem=n;if(L.config.mode==="single")L.selectedDates=[r];else if(L.config.mode==="multiple"){var a=_t(r);if(a)L.selectedDates.splice(parseInt(a),1);else L.selectedDates.push(r)}else if(L.config.mode==="range"){if(L.selectedDates.length===2)L.clear(false,false);L.latestSelectedDateObj=r;L.selectedDates.push(r);if(Zt(r,L.selectedDates[0],true)!==0)L.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()})}f();if(o){var s=L.currentYear!==r.getFullYear();L.currentYear=r.getFullYear();L.currentMonth=r.getMonth();if(s){gt("onYearChange");T()}gt("onMonthChange")}bt();P();kt();if(!o&&L.config.mode!=="range"&&L.config.showMonths===1)k(n);else if(L.selectedDateElem!==undefined&&L.hourElement===undefined)L.selectedDateElem&&L.selectedDateElem.focus();if(L.hourElement!==undefined)L.hourElement!==undefined&&L.hourElement.focus();if(L.config.closeOnSelect){var l=L.config.mode==="single"&&!L.config.enableTime;var c=L.config.mode==="range"&&L.selectedDates.length===2&&!L.config.enableTime;if(l||c)ot()}m()}var st={locale:[tt,B],showMonths:[D,i,I],minDate:[v],maxDate:[v]};function lt(t,e){if(t!==null&&typeof t==="object"){Object.assign(L.config,t);for(var i in t)if(st[i]!==undefined)st[i].forEach(function(t){return t()})}else{L.config[t]=e;if(st[t]!==undefined)st[t].forEach(function(t){return t()});else if(St.indexOf(t)>-1)L.config[t]=Ot(e)}L.redraw();kt(true)}function ct(t,e){var i=[];if(t instanceof Array)i=t.map(function(t){return L.parseDate(t,e)});else if(t instanceof Date||typeof t==="number")i=[L.parseDate(t,e)];else if(typeof t==="string")switch(L.config.mode){case"single":case"time":i=[L.parseDate(t,e)];break;case"multiple":i=t.split(L.config.conjunction).map(function(t){return L.parseDate(t,e)});break;case"range":i=t.split(L.l10n.rangeSeparator).map(function(t){return L.parseDate(t,e)});break}else L.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));L.selectedDates=L.config.allowInvalidPreload?i:i.filter(function(t){return t instanceof Date&&Z(t,false)});if(L.config.mode==="range")L.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()})}function ut(t,e,i){if(e===void 0)e=false;if(i===void 0)i=L.config.dateFormat;if(t!==0&&!t||t instanceof Array&&t.length===0)return L.clear(e);ct(t,i);L.latestSelectedDateObj=L.selectedDates[L.selectedDates.length-1];L.redraw();v(undefined,e);o();if(L.selectedDates.length===0)L.clear(false);kt(e);if(e)gt("onChange")}function ht(t){return t.slice().map(function(t){if(typeof t==="string"||typeof t==="number"||t instanceof Date)return L.parseDate(t,undefined,true);else if(t&&typeof t==="object"&&t.from&&t.to)return{from:L.parseDate(t.from,undefined),to:L.parseDate(t.to,undefined)};return t}).filter(function(t){return t})}function pt(){L.selectedDates=[];L.now=L.parseDate(L.config.now)||new Date;var t=L.config.defaultDate||((L.input.nodeName==="INPUT"||L.input.nodeName==="TEXTAREA")&&L.input.placeholder&&L.input.value===L.input.placeholder?null:L.input.value);if(t)ct(t,L.config.dateFormat);L._initialDate=L.selectedDates.length>0?L.selectedDates[0]:L.config.minDate&&L.config.minDate.getTime()>L.now.getTime()?L.config.minDate:L.config.maxDate&&L.config.maxDate.getTime()<L.now.getTime()?L.config.maxDate:L.now;L.currentYear=L._initialDate.getFullYear();L.currentMonth=L._initialDate.getMonth();if(L.selectedDates.length>0)L.latestSelectedDateObj=L.selectedDates[0];if(L.config.minTime!==undefined)L.config.minTime=L.parseDate(L.config.minTime,"H:i");if(L.config.maxTime!==undefined)L.config.maxTime=L.parseDate(L.config.maxTime,"H:i");L.minDateHasTime=!!L.config.minDate&&(L.config.minDate.getHours()>0||L.config.minDate.getMinutes()>0||L.config.minDate.getSeconds()>0);L.maxDateHasTime=!!L.config.maxDate&&(L.config.maxDate.getHours()>0||L.config.maxDate.getMinutes()>0||L.config.maxDate.getSeconds()>0)}function dt(){L.input=Q();if(!L.input){L.config.errorHandler(new Error("Invalid input element specified"));return}L.input._type=L.input.type;L.input.type="text";L.input.classList.add("flatpickr-input");L._input=L.input;if(L.config.altInput){L.altInput=Bt(L.input.nodeName,L.config.altInputClass);L._input=L.altInput;L.altInput.placeholder=L.input.placeholder;L.altInput.disabled=L.input.disabled;L.altInput.required=L.input.required;L.altInput.tabIndex=L.input.tabIndex;L.altInput.type="text";L.input.setAttribute("type","hidden");if(!L.config.static&&L.input.parentNode)L.input.parentNode.insertBefore(L.altInput,L.input.nextSibling)}if(!L.config.allowInput)L._input.setAttribute("readonly","readonly");L._positionElement=L.config.positionElement||L._input}function ft(){var t=L.config.enableTime?L.config.noCalendar?"time":"datetime-local":"date";L.mobileInput=Bt("input",L.input.className+" flatpickr-mobile");L.mobileInput.tabIndex=1;L.mobileInput.type=t;L.mobileInput.disabled=L.input.disabled;L.mobileInput.required=L.input.required;L.mobileInput.placeholder=L.input.placeholder;L.mobileFormatStr=t==="datetime-local"?"Y-m-d\\TH:i:S":t==="date"?"Y-m-d":"H:i:S";if(L.selectedDates.length>0)L.mobileInput.defaultValue=L.mobileInput.value=L.formatDate(L.selectedDates[0],L.mobileFormatStr);if(L.config.minDate)L.mobileInput.min=L.formatDate(L.config.minDate,"Y-m-d");if(L.config.maxDate)L.mobileInput.max=L.formatDate(L.config.maxDate,"Y-m-d");if(L.input.getAttribute("step"))L.mobileInput.step=String(L.input.getAttribute("step"));L.input.type="hidden";if(L.altInput!==undefined)L.altInput.type="hidden";try{if(L.input.parentNode)L.input.parentNode.insertBefore(L.mobileInput,L.input.nextSibling)}catch(t){}a(L.mobileInput,"change",function(t){L.setDate(Nt(t).value,false,L.mobileFormatStr);gt("onChange");gt("onClose")})}function mt(t){if(L.isOpen===true)return L.close();L.open(t)}function gt(t,e){if(L.config===undefined)return;var i=L.config[t];if(i!==undefined&&i.length>0)for(var n=0;i[n]&&n<i.length;n++)i[n](L.selectedDates,L.input.value,L,e);if(t==="onChange"){L.input.dispatchEvent(vt("change"));L.input.dispatchEvent(vt("input"))}}function vt(t){var e=document.createEvent("Event");e.initEvent(t,true,true);return e}function _t(t){for(var e=0;e<L.selectedDates.length;e++)if(Zt(L.selectedDates[e],t)===0)return""+e;return false}function yt(t){if(L.config.mode!=="range"||L.selectedDates.length<2)return false;return Zt(t,L.selectedDates[0])>=0&&Zt(t,L.selectedDates[1])<=0}function bt(){if(L.config.noCalendar||L.isMobile||!L.monthNav)return;L.yearElements.forEach(function(t,e){var i=new Date(L.currentYear,L.currentMonth,1);i.setMonth(L.currentMonth+e);if(L.config.showMonths>1||L.config.monthSelectorType==="static")L.monthElements[e].textContent=jt(i.getMonth(),L.config.shorthandCurrentMonth,L.l10n)+" ";else L.monthsDropdownContainer.value=i.getMonth().toString();t.value=i.getFullYear().toString()});L._hidePrevMonthArrow=L.config.minDate!==undefined&&(L.currentYear===L.config.minDate.getFullYear()?L.currentMonth<=L.config.minDate.getMonth():L.currentYear<L.config.minDate.getFullYear());L._hideNextMonthArrow=L.config.maxDate!==undefined&&(L.currentYear===L.config.maxDate.getFullYear()?L.currentMonth+1>L.config.maxDate.getMonth():L.currentYear>L.config.maxDate.getFullYear())}function xt(e){return L.selectedDates.map(function(t){return L.formatDate(t,e)}).filter(function(t,e,i){return L.config.mode!=="range"||L.config.enableTime||i.indexOf(t)===e}).join(L.config.mode!=="range"?L.config.conjunction:L.l10n.rangeSeparator)}function kt(t){if(t===void 0)t=true;if(L.mobileInput!==undefined&&L.mobileFormatStr)L.mobileInput.value=L.latestSelectedDateObj!==undefined?L.formatDate(L.latestSelectedDateObj,L.mobileFormatStr):"";L.input.value=xt(L.config.dateFormat);if(L.altInput!==undefined)L.altInput.value=xt(L.config.altFormat);if(t!==false)gt("onValueUpdate")}function wt(t){var e=Nt(t);var i=L.prevMonthNav.contains(e);var n=L.nextMonthNav.contains(e);if(i||n)z(i?-1:1);else if(L.yearElements.indexOf(e)>=0)e.select();else if(e.classList.contains("arrowUp"))L.changeYear(L.currentYear+1);else if(e.classList.contains("arrowDown"))L.changeYear(L.currentYear-1)}function Lt(t){t.preventDefault();var e=t.type==="keydown",i=Nt(t),n=i;if(L.amPM!==undefined&&i===L.amPM)L.amPM.textContent=L.l10n.amPM[Dt(L.amPM.textContent===L.l10n.amPM[0])];var r=parseFloat(n.getAttribute("min")),o=parseFloat(n.getAttribute("max")),a=parseFloat(n.getAttribute("step")),s=parseInt(n.value,10),l=t.delta||(e?t.which===38?1:-1:0);var c=s+a*l;if(typeof n.value!=="undefined"&&n.value.length===2){var u=n===L.hourElement,h=n===L.minuteElement;if(c<r){c=o+c+Dt(!u)+(Dt(u)&&Dt(!L.amPM));if(h)y(undefined,-1,L.hourElement)}else if(c>o){c=n===L.hourElement?c-o-Dt(!L.amPM):r;if(h)y(undefined,1,L.hourElement)}if(L.amPM&&u&&(a===1?c+s===23:Math.abs(c-s)>a))L.amPM.textContent=L.l10n.amPM[Dt(L.amPM.textContent===L.l10n.amPM[0])];n.value=Et(c)}}t();return L}function i(t,e){var i=Array.prototype.slice.call(t).filter(function(t){return t instanceof HTMLElement});var n=[];for(var r=0;r<i.length;r++){var o=i[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;if(o._flatpickr!==undefined){o._flatpickr.destroy();o._flatpickr=undefined}o._flatpickr=a(o,e||{});n.push(o._flatpickr)}catch(t){console.error(t)}}return n.length===1?n[0]:n}if(typeof HTMLElement!=="undefined"&&typeof HTMLCollection!=="undefined"&&typeof NodeList!=="undefined"){HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return i(this,t)};HTMLElement.prototype.flatpickr=function(t){return i([this],t)}}var $t=function(t,e){if(typeof t==="string")return i(window.document.querySelectorAll(t),e);else if(t instanceof Node)return i([t],e);else return i(t,e)};if($t.defaultConfig={},$t.l10ns={en:Mt({},Tt),default:Mt({},Tt)},$t.localize=function(t){$t.l10ns.default=Mt(Mt({},$t.l10ns.default),t)},$t.setDefaults=function(t){$t.defaultConfig=Mt(Mt({},$t.defaultConfig),t)},$t.parseDate=Gt({}),$t.formatDate=Ht({}),$t.compareDates=Zt,typeof jQuery!=="undefined"&&typeof jQuery.fn!=="undefined")jQuery.fn.flatpickr=function(t){return i(this,t)};if(Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t==="string"?parseInt(t,10):t))},typeof window!=="undefined")window.flatpickr=$t;return $t}()},624:function(t,e,i){"use strict";var n,r,o,a=[i(5525),i(4785),i(8291),i(2709),i(2506),i(9176)],s=-1,l=[],c=!1;function u(){n&&r&&(n=!1,r.length?l=r.concat(l):s=-1,l.length&&h())}function h(){if(!n){n=!(c=!1);for(var t=l.length,e=setTimeout(u);t;){for(r=l,l=[];r&&++s<t;)r[s].run();s=-1,t=l.length}r=null,n=!(s=-1),clearTimeout(e)}}for(var p=-1,d=a.length;++p<d;)if(a[p]&&a[p].test&&a[p].test()){o=a[p].install(h);break}function f(t,e){this.fun=t,this.array=e}f.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),c||n||(c=!0,o())}},2709:function(t,e,i){"use strict";e.test=function(){return!i.g.setImmediate&&void 0!==i.g.MessageChannel},e.install=function(t){var e=new i.g.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}},8291:function(t,e,n){"use strict";var r=n.g.MutationObserver||n.g.WebKitMutationObserver;e.test=function(){return r},e.install=function(t){var e=0,t=new r(t),i=n.g.document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}},4785:function(t,e,i){"use strict";e.test=function(){return"function"==typeof i.g.queueMicrotask},e.install=function(t){return function(){i.g.queueMicrotask(t)}}},2506:function(t,e,i){"use strict";e.test=function(){return"document"in i.g&&"onreadystatechange"in i.g.document.createElement("script")},e.install=function(e){return function(){var t=i.g.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},i.g.document.documentElement.appendChild(t),e}}},9176:function(t,e){"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},7977:function(t,e,i){var n=i(5243),r=i(4144),o=i(5568);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if((t="string"==typeof t?{bingMapsKey:t}:t)&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));t=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=r(t,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",r=i;0<r;r--){var o=0,a=1<<r-1;0!=(t&a)&&o++,0!=(e&a)&&(o+=2),n+=o.toString()}return n}(t.x,t.y,t.z),t=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(t+="&st="+this.options.style),t},onAdd:function(e){e.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,e),this._attributions.forEach(function(t){e.attributionControl.addAttribution(t)})},onRemove:function(e){e.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(t){e.attributionControl.removeAttribution(t)}),n.TileLayer.prototype.onRemove.call(this,e)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();t=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return r(t,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));t=t.resourceSets[0].resources[0];return this._url=t.imageUrl,this._imageryProviders=t.imageryProviders||[],this.options.subdomains=t.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t,n,e,r=this._map;r&&r.attributionControl&&(t=r.getZoom(),n=[(e=(e=r.getBounds().toBBoxString()).split(","))[1],e[0],e[3],e[2]],this._fetch.then(function(){var e=this._getAttributions(n,t),i=this._attributions;e.forEach(function(t){-1<i.indexOf(t)||r.attributionControl.addAttribution(t)}),i.filter(function(t){-1<e.indexOf(t)||r.attributionControl.removeAttribution(t)}),this._attributions=e}.bind(this)))},_getAttributions:function(n,r){return this._imageryProviders.reduce(function(t,e){for(var i=0;i<e.coverageAreas.length;i++)if(o(n,e.coverageAreas[i].bbox)&&r>=e.coverageAreas[i].zoomMin&&r<=e.coverageAreas[i].zoomMax)return t.push(e.attribution),t;return t},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},5356:function(t,e,i){var n;n=[i(5243)],void 0===(i="function"==typeof(i=function(u){u.Map.mergeOptions({contextmenuItems:[]}),u.Map.ContextMenu=u.Handler.extend({_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){u.Handler.prototype.initialize.call(this,t);this._items=[];this._visible=false;var e=this._container=u.DomUtil.create("div",u.Map.ContextMenu.BASE_CLS,t._container);e.style.zIndex=1e4;e.style.position="absolute";if(t.options.contextmenuWidth)e.style.width=t.options.contextmenuWidth+"px";this._createItems();u.DomEvent.on(e,"click",u.DomEvent.stop).on(e,"mousedown",u.DomEvent.stop).on(e,"dblclick",u.DomEvent.stop).on(e,"contextmenu",u.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();u.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this);if(u.Browser.touch)u.DomEvent.on(document,this._touchstart,this._hide,this);this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();u.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this);if(u.Browser.touch)u.DomEvent.off(document,this._touchstart,this._hide,this);this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,e){if(t instanceof u.LatLng)t=this._map.latLngToContainerPoint(t);this._showAtPoint(t,e)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=e!==undefined?e:this._items.length;var i=this._createItem(this._container,t,e);this._items.push(i);this._sizeChanged=true;this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:e});return i.el},removeItem:function(t){var e=this._container;if(!isNaN(t))t=e.children[t];if(t){this._removeItem(u.Util.stamp(t));this._sizeChanged=true;this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t});return t}return null},removeAllItems:function(){var t=this._container.children,e;while(t.length){e=t[0];this._removeItem(u.Util.stamp(e))}return t},hideAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display="none"}},showAllItems:function(){var t,e,i;for(e=0,i=this._items.length;e<i;e++){t=this._items[e];t.el.style.display=""}},setDisabled:function(t,e){var i=this._container,n=u.Map.ContextMenu.BASE_CLS+"-item";if(!isNaN(t))t=i.children[t];if(t&&u.DomUtil.hasClass(t,n))if(e){u.DomUtil.addClass(t,n+"-disabled");this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})}else{u.DomUtil.removeClass(t,n+"-disabled");this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})}},isVisible:function(){return this._visible},_createItems:function(){var t=this._map.options.contextmenuItems,e,i,n;for(i=0,n=t.length;i<n;i++)this._items.push(this._createItem(this._container,t[i]))},_createItem:function(t,e,i){if(e.separator||e==="-")return this._createSeparator(t,i);var n=u.Map.ContextMenu.BASE_CLS+"-item",r=e.disabled?n+" "+n+"-disabled":n,o=this._insertElementAt("a",r,t,i),a=this._createEventHandler(o,e.callback,e.context,e.hideOnSelect),s=this._getIcon(e),l=this._getIconCls(e),c="";if(s)c='<img class="'+u.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>';else if(l)c='<span class="'+u.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>';o.innerHTML=c+e.text;o.href="#";u.DomEvent.on(o,"mouseover",this._onItemMouseOver,this).on(o,"mouseout",this._onItemMouseOut,this).on(o,"mousedown",u.DomEvent.stopPropagation).on(o,"click",a);if(u.Browser.touch)u.DomEvent.on(o,this._touchstart,u.DomEvent.stopPropagation);if(!u.Browser.pointer)u.DomEvent.on(o,"click",this._onItemMouseOut,this);return{id:u.Util.stamp(o),el:o,callback:a}},_removeItem:function(t){var e,i,n,r,o;for(n=0,r=this._items.length;n<r;n++){e=this._items[n];if(e.id===t){i=e.el;o=e.callback;if(o){u.DomEvent.off(i,"mouseover",this._onItemMouseOver,this).off(i,"mouseover",this._onItemMouseOut,this).off(i,"mousedown",u.DomEvent.stopPropagation).off(i,"click",o);if(u.Browser.touch)u.DomEvent.off(i,this._touchstart,u.DomEvent.stopPropagation);if(!u.Browser.pointer)u.DomEvent.on(i,"click",this._onItemMouseOut,this)}this._container.removeChild(i);this._items.splice(n,1);return e}}return null},_createSeparator:function(t,e){var i=this._insertElementAt("div",u.Map.ContextMenu.BASE_CLS+"-separator",t,e);return{id:u.Util.stamp(i),el:i}},_createEventHandler:function(e,i,n,r){var o=this,a=this._map,s=u.Map.ContextMenu.BASE_CLS+"-item-disabled",r=r!==undefined?r:true;return function(t){if(u.DomUtil.hasClass(e,s))return;if(r)o._hide();if(i)i.call(n||a,o._showLocation);o._map.fire("contextmenu.select",{contextmenu:o,el:e})}},_insertElementAt:function(t,e,i,n){var r,o=document.createElement(t);o.className=e;if(n!==undefined)r=i.children[n];if(r)i.insertBefore(o,r);else i.appendChild(o);return o},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(t,e){if(this._items.length){var i=this._map,n=i.containerPointToLayerPoint(t),r=i.layerPointToLatLng(n),o=u.extend(e||{},{contextmenu:this});this._showLocation={latlng:r,layerPoint:n,containerPoint:t};if(e&&e.relatedTarget)this._showLocation.relatedTarget=e.relatedTarget;this._setPosition(t);if(!this._visible){this._container.style.display="block";this._visible=true}this._map.fire("contextmenu.show",o)}},_hide:function(){if(this._visible){this._visible=false;this._container.style.display="none";this._map.fire("contextmenu.hide",{contextmenu:this})}},_getIcon:function(t){return u.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return u.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var e=this._map.getSize(),i=this._container,n=this._getElementSize(i),r;if(this._map.options.contextmenuAnchor){r=u.point(this._map.options.contextmenuAnchor);t=t.add(r)}i._leaflet_pos=t;if(t.x+n.x>e.x){i.style.left="auto";i.style.right=Math.min(Math.max(e.x-t.x,0),e.x-n.x-1)+"px"}else{i.style.left=Math.max(t.x,0)+"px";i.style.right="auto"}if(t.y+n.y>e.y){i.style.top="auto";i.style.bottom=Math.min(Math.max(e.y-t.y,0),e.y-n.y-1)+"px"}else{i.style.top=Math.max(t.y,0)+"px";i.style.bottom="auto"}},_getElementSize:function(t){var e=this._size,i=t.style.display;if(!e||this._sizeChanged){e={};t.style.left="-999999px";t.style.right="auto";t.style.display="block";e.x=t.offsetWidth;e.y=t.offsetHeight;t.style.left="auto";t.style.display=i;this._sizeChanged=false}return e},_onKeyDown:function(t){var e=t.keyCode;if(e===27)this._hide()},_onItemMouseOver:function(t){u.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){u.DomUtil.removeClass(t.target||t.srcElement,"over")}}),u.Map.addInitHook("addHandler","contextmenu",u.Map.ContextMenu),u.Mixin.ContextMenu={bindContextMenu:function(t){u.setOptions(this,t);this._initContextMenu();return this},unbindContextMenu:function(){this.off("contextmenu",this._showContextMenu,this);return this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){var e=[];for(var i=0;i<this.options.contextmenuItems.length;i++)if(this.options.contextmenuItems[i].index==t)e.push(i);var n=e.pop();while(n!==undefined){this.options.contextmenuItems.splice(n,1);n=e.pop()}},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index);this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[];this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var e,i,n,r,o;if(this._map.contextmenu){i=u.extend({relatedTarget:this},t);n=this._map.mouseEventToContainerPoint(t.originalEvent);if(!this.options.contextmenuInheritItems)this._map.contextmenu.hideAllItems();for(r=0,o=this.options.contextmenuItems.length;r<o;r++){e=this.options.contextmenuItems[r];this._items.push(this._map.contextmenu.insertItem(e,e.index))}this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(n,i)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._map.contextmenu.removeItem(this._items[t]);this._items.length=0;if(!this.options.contextmenuInheritItems)this._map.contextmenu.showAllItems()}};var t=[u.Marker,u.Path],e={contextmenu:false,contextmenuItems:[],contextmenuInheritItems:true},i,n,r;for(n=0,r=t.length;n<r;n++){i=t[n];if(!i.prototype.options)i.prototype.options=e;else i.mergeOptions(e);i.addInitHook(function(){if(this.options.contextmenu)this._initContextMenu()});i.include(u.Mixin.ContextMenu)}return u.Map.ContextMenu})?i.apply(e,n):i)||(t.exports=i)},810:function(t,e,i){var n,r,o;r=function(n){n.EdgeBuffer={previousMethods:{getTiledPixelBounds:n.GridLayer.prototype._getTiledPixelBounds}},n.GridLayer.include({_getTiledPixelBounds:function(t,e,i){e=n.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,t,e,i),i=1;return 0<(i=void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles?this.options.edgeBufferTiles:i)&&(i=n.GridLayer.prototype.getTileSize.call(this).multiplyBy(i),e=new n.Bounds(e.min.subtract(i),e.max.add(i))),e}})},o=window,n=[i(5243)],void 0===(i="function"==typeof(i=r)?i.apply(e,n):i)||(t.exports=i),void 0!==o&&o.L&&!o.L.EdgeBuffer&&r(o.L)},8292:function(){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){var t,e;this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t&&(e=L.bind(this._onFullscreenChange,this),this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)}))}),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},5830:function(t,e){!function(t){"use strict";var n={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var e=!1,i=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?e=!0:"moveend"==t.type&&(e=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t=this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac?this._map.options.gestureHandlingOptions.text:(i=this._getUserLanguage(),(t=n[i=i||"en"]?n[i]:t)||-1===i.indexOf("-")||(i=i.split("-")[0],t=n[i]),t||n[i="en"]),e=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(e=!0);var i=t.scroll;e&&(i=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",i)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){e||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",i),t.GestureHandling=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7244:function(t,e,i){var n,r,o;r=function(a){var t=a.Control.extend({includes:a.Evented?a.Evented.prototype:a.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(t,e){a.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=a.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",a.DomEvent.disableClickPropagation(this._container),a.DomEvent.on(this._container,"mousewheel",a.DomEvent.stopPropagation);t={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs},t=a.Util.extend(this.options.mapOptions,t);return this._miniMap=new a.Map(this._container,t),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(a.Util.bind(function(){this._aimingRect=a.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=a.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){a.Control.prototype.addTo.call(this,t);t=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(t,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,e,i,n,r,o){n=a.DomUtil.create("a",i,n);n.innerHTML=t,n.href="#",n.title=e;e=a.DomEvent.stopPropagation;return a.DomEvent.on(n,"click",e).on(n,"mousedown",e).on(n,"dblclick",e).on(n,"click",a.DomEvent.preventDefault).on(n,"click",r,o),n},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){var e;this._miniMapMoving?this._miniMapMoving=!1:(e=this.options.centerFixed||this._mainMap.getCenter(),this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){var e,i;this.options.centerFixed||(i=this._aimingRect.getBounds(),e=this._miniMap.latLngToContainerPoint(i.getSouthWest()),i=this._miniMap.latLngToContainerPoint(i.getNorthEast()),this._lastAimingRectPosition={sw:e,ne:i})},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new a.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),t=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=t,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return!this._userToggledDisplay&&this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){a.Util.requestAnimFrame(function(){a.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),a.Browser.any3d||a.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){a.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var t={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",t),this.fire("toggle",t)}});return a.Map.mergeOptions({miniMapControl:!1}),a.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new t).addTo(this))}),t},o=window,n=[i(5243)],void 0===(i="function"==typeof(i=r)?i.apply(e,n):i)||(t.exports=i),void 0!==o&&o.L&&(o.L.Control.MiniMap=r(L),o.L.control.minimap=function(t,e){return new o.L.Control.MiniMap(t,e)})},9627:function(){!function(){"use strict";function e(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}var a=Symbol("newer"),s=Symbol("older");function l(t,e){this.key=t,this.value=e,this[a]=void 0,this[s]=void 0}function t(t){this.entry=t}function i(t){this.entry=t}function n(t){this.entry=t}e.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[a]&&(t===this.oldest&&(this.oldest=t[a]),t[a][s]=t[s]),t[s]&&(t[s][a]=t[a]),t[a]=void 0,t[s]=this.newest,this.newest&&(this.newest[a]=t),this.newest=t)},e.prototype.assign=function(t){var e,i=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var n=t[Symbol.iterator](),r=n.next();!r.done;r=n.next()){var o=new l(r.value[0],r.value[1]);if(this._keymap.set(o.key,o),e?(e[a]=o)[s]=e:this.oldest=o,e=o,0==i--)throw new Error("overflow")}this.newest=e,this.size=this._keymap.size},e.prototype.get=function(t){t=this._keymap.get(t);if(t)return this._markEntryAsUsed(t),t.value},e.prototype.set=function(t,e){var i=this._keymap.get(t);return i?(i.value=e,this._markEntryAsUsed(i)):(this._keymap.set(t,i=new l(t,e)),this.newest?(this.newest[a]=i)[s]=this.newest:this.oldest=i,this.newest=i,++this.size,this.size>this.limit&&this.shift()),this},e.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[a]?(this.oldest=this.oldest[a],this.oldest[s]=void 0):(this.oldest=void 0,this.newest=void 0),t[a]=t[s]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},e.prototype.find=function(t){t=this._keymap.get(t);return t?t.value:void 0},e.prototype.has=function(t){return this._keymap.has(t)},e.prototype.delete=function(t){t=this._keymap.get(t);if(t)return this._keymap.delete(t.key),t[a]&&t[s]?(t[s][a]=t[a],t[a][s]=t[s]):t[a]?(t[a][s]=void 0,this.oldest=t[a]):t[s]?(t[s][a]=void 0,this.newest=t[s]):this.oldest=this.newest=void 0,this.size--,t.value},e.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},e.prototype.keys=function(){return new i(this.oldest)},e.prototype.values=function(){return new n(this.oldest)},e.prototype.entries=function(){return this},e.prototype[Symbol.iterator]=function(){return new t(this.oldest)},e.prototype.forEach=function(t,e){"object"!=typeof e&&(e=this);for(var i=this.oldest;i;)t.call(e,i.value,i.key,this),i=i[a]},e.prototype.toJSON=function(){for(var t=new Array(this.size),e=0,i=this.oldest;i;)t[e++]={key:i.key,value:i.value},i=i[a];return t},e.prototype.toString=function(){for(var t="",e=this.oldest;e;)t+=String(e.key)+":"+e.value,(e=e[a])&&(t+=" < ");return t},t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},i.prototype[Symbol.iterator]=function(){return this},i.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:t.key}):{done:!0,value:void 0}},n.prototype[Symbol.iterator]=function(){return this},n.prototype.next=function(){var t=this.entry;return t?(this.entry=t[a],{done:!1,value:t.value}):{done:!0,value:void 0}};var r,o=function(){return r=r||new Promise(function(t,e){var i=0,n=null,n=setInterval(function(){return 20<=i?(clearInterval(n),e(new Error("window.google not found after 10 seconds"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),t(window.google)):void++i},500)})};L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:21,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._isMounted=!0,this.once("spawned",function(){if(this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}),this._tileCallbacks={},this._lru=new e(100),this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(e){var i=this;L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._logoContainer&&e._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&e._controlCorners.bottomright.appendChild(this._attributionContainer),o().then(function(){var t;i._isMounted&&(i._ready=!0,i._initMutant(),(e=i._map)&&(t=i.options.updateWhenIdle?"moveend":"move",e.on(t,i._update,i),i.once("remove",function(){this._map.off(t,this._update,this)}),google.maps.event.addListenerOnce(i._mutant,"idle",function(){i._map&&(i._checkZoomLevels(),i._mutantIsReady=!0)}),i._update()))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),google.maps.event.clearListeners(t,"idle"),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle"),t.off("move moveend",this._update,this),this._isMounted=!1},addGoogleLayer:function(e,i){var n=this;return this._subLayers||(this._subLayers={}),o().then(function(){var t=new google.maps[e](i);n._mutant&&t.setMap(n._mutant),n._subLayers[e]=t}),this},removeGoogleLayer:function(e){var i=this;return o().then(function(){var t=i._subLayers&&i._subLayers[e];t&&(t.setMap(null),delete i._subLayers[e])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex=800,this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;this.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){var t,i=this;this._mutant||(t=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"}),this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=i._mutantContainer.querySelectorAll("a"),e=0;e<t.length;++e)t[e].style.pointerEvents="auto"}),this.fire("spawned",{mapObject:t}))},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var r,o=i.addedNodes[n];o instanceof HTMLImageElement?this._onMutatedImage(o):o instanceof HTMLElement&&(Array.prototype.forEach.call(o.querySelectorAll("img"),this._boundOnMutatedImage),"white"===o.style.backgroundColor&&L.DomUtil.remove(o),0===o.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(o),Array.prototype.forEach.call(o.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove),(0<o.querySelectorAll(".gmnoprint").length||0<o.querySelectorAll('a[title="Click to see this area on Google Maps"]').length)&&(r=this._attributionContainer=L.DomUtil.create("div","leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(r),r.style.height="14px",r.style.background="none",this._map._controlCorners.bottomright.appendChild(r),r.appendChild(o)),1e6==o.style.zIndex&&(this._map._controlCorners.bottomleft.appendChild(o),this._logoContainer=o))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(e){var t,i=e.src.match(this._roadRegexp),n=0;i?(t={z:i[1],x:i[2],y:i[3]},1<this._imagesPerTile&&(n=e.style.zIndex=1)):((i=e.src.match(this._satRegexp))&&(t={x:i[1],y:i[2],z:i[3]}),n=0),t?(t=this._tileCoordsToKey(t),e.style.position="absolute",e.style.visibility="hidden",n=t+"/"+n,this._lru.set(n,e),n in this._tileCallbacks&&this._tileCallbacks[n]&&(this._tileCallbacks[n].forEach(function(t){return t(e)}),delete this._tileCallbacks[n])):e.src.match(this._staticRegExp)&&(e.style.visibility="hidden")},createTile:function(t,i){var e=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.style.textAlign="left",n.dataset.pending=this._imagesPerTile,i=i.bind(this,null,n);for(var r=0;r<this._imagesPerTile;++r){var o=e+"/"+r,a=this._lru.get(o);a?(n.appendChild(this._clone(a)),--n.dataset.pending):(this._tileCallbacks[o]=this._tileCallbacks[o]||[],this._tileCallbacks[o].push(function(e){return function(t){e.appendChild(this._clone(t)),--e.dataset.pending,parseInt(e.dataset.pending)||i()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(i),n},_clone:function(t){t=t.cloneNode(!0);return t.style.visibility="visible",t},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(){var t,e,i;this._mutant&&(i=this._map.getCenter(),t=new google.maps.LatLng(i.lat,i.lng),e=Math.round(this._map.getZoom()),i=this._mutant.getZoom(),this._mutant.setCenter(t),e!==i&&(this._mutant.setZoom(e),this._mutantIsReady&&this._checkZoomLevels())),L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this.options.zoomSnap<1?1.8:1,t=this._map.getSize().multiplyBy(t);this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){var t;this._mutant&&(t=this._map.getCenter(),t=new google.maps.LatLng(t.lat,t.lng),this._mutant.setCenter(t),this._mutant.setZoom(Math.round(this._map.getZoom())))}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}}()},687:function(t,e,i){var n,r,o;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/
r=function(s){function i(e,i,t){(t=t.split(" ")).forEach(function(t){s.DomUtil[e].call(this,i,t)})}function e(t,e){i("addClass",t,e)}function n(t,e){i("removeClass",t,e)}var t=s.Marker.extend({initialize:function(t,e){s.Util.setOptions(this,e),this._latlng=t,this.createIcon()},createIcon:function(){var t=this.options,e="";void 0!==t.color&&(e+="stroke:"+t.color+";"),void 0!==t.weight&&(e+="stroke-width:"+t.weight+";"),void 0!==t.fillColor&&(e+="fill:"+t.fillColor+";"),void 0!==t.fillOpacity&&(e+="fill-opacity:"+t.fillOpacity+";"),void 0!==t.opacity&&(e+="opacity:"+t.opacity+";");e=this._getIconSVG(t,e);this._locationIcon=s.divIcon({className:e.className,html:e.svg,iconSize:[e.w,e.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var i=t.radius,n=i+t.weight,t=2*n;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+t+'" version="1.1" viewBox="-'+n+" -"+n+" "+t+" "+t+'"><circle r="'+i+'" style="'+e+'" /></svg>',w:t,h:t}},setStyle:function(t){s.Util.setOptions(this,t),this.createIcon()}}),r=t.extend({initialize:function(t,e,i){s.Util.setOptions(this,i),this._latlng=t,this._heading=e,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var i=t.radius,n=t.width+t.weight,i=2*(i+t.depth+t.weight),t="M0,0 l"+t.width/2+","+t.depth+" l-"+n+",0 z";return{className:"leaflet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+i+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+i+'" style="'+("transform: rotate("+this._heading+"deg)")+'"><path d="'+t+'" style="'+e+'" /></svg>',w:n,h:i}}}),r=s.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:t,compassClass:r,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(t,e){t=s.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",t);return t.title=e.strings.title,t.role="button",t.href="#",{link:t,icon:s.DomUtil.create(e.iconElementTag,e.icon,t)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(t){for(var e in t)"object"==typeof this.options[e]?s.extend(this.options[e],t[e]):this.options[e]=t[e];this.options.followMarkerStyle=s.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=s.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=s.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(t){var e=s.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=e,this._map=t,this._layer=this.options.layer||new s.LayerGroup,this._layer.addTo(t),this._event=void 0,this._compassHeading=null,this._prevBounds=null;t=this.options.createButtonCallback(e,this.options);return this._link=t.link,this._icon=t.icon,s.DomEvent.on(this._link,"click",function(t){s.DomEvent.stopPropagation(t),s.DomEvent.preventDefault(t),this._onClick()},this).on(this._link,"dblclick",s.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),e},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){var e=this.options.clickBehavior,i=e.outOfView;switch(i=e[i=this._map.getBounds().contains(this._event.latlng)?t?e.inView:e.inViewNotFollowing:i]?e[i]:i){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){var t,e,i;this._active||(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),!this.options.showCompass||((t="ondeviceorientationabsolute"in window)||"ondeviceorientation"in window)&&(e=this,i=function(){s.DomEvent.on(window,t?"deviceorientationabsolute":"deviceorientation",e._onDeviceOrientation,e)},DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&i()}):i()))},_deactivate:function(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?s.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&s.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){var t;this._drawMarker(),this._isOutsideMapBounds()?(this._event=void 0,this.options.onLocationOutsideMapBounds(this)):this._justClicked&&!1!==this.options.initialZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel):this.options.keepCurrentZoomLevel?(t=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]):(t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds,this._ignoreEvent=!0,t.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),s.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this))},_drawCompass:function(){var t,e;this._event&&(t=this._event.latlng,this.options.showCompass&&t&&null!==this._compassHeading&&(e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle,this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)),!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null))},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var t,e,i,n=this._event.accuracy,r=this._event.latlng;this.options.drawCircle&&(t=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle,this._circle?this._circle.setLatLng(r).setRadius(n).setStyle(t):this._circle=s.circle(r,n,t).addTo(this._layer)),i=this.options.metric?(e=n.toFixed(0),this.options.strings.metersUnit):(e=(3.2808399*n).toFixed(0),this.options.strings.feetUnit),this.options.drawMarker&&(n=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle,this._marker?(this._marker.setLatLng(r),this._marker.setStyle&&this._marker.setStyle(n)):this._marker=new this.options.markerClass(r,n).addTo(this._layer)),this._drawCompass();var o=this.options.strings.popup;function a(){return"string"==typeof o?s.Util.template(o,{distance:e,unit:i}):"function"==typeof o?o({distance:e,unit:i}):o}this.options.showPopup&&o&&this._marker&&this._marker.bindPopup(a())._popup.setLatLng(r),this.options.showPopup&&o&&this._compass&&this._compass.bindPopup(a())._popup.setLatLng(r)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(t){!isNaN(parseFloat(t))&&isFinite(t)?(t=Math.round(t),this._compassHeading=t,s.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(n(this._container,"active following"),e(this._container,"requesting"),n(this._icon,this.options.icon),e(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),e(this._container,"active"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),e(this._container,"active following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon))},_cleanClasses:function(){s.DomUtil.removeClass(this._container,"requesting"),s.DomUtil.removeClass(this._container,"active"),s.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),e(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return s.control.locate=function(t){return new s.Control.Locate(t)},r},o=window,n=[i(5243)],void 0===(i="function"==typeof(i=r)?i.apply(e,n):i)||(t.exports=i),void 0!==o&&o.L&&(o.L.Control.Locate=r(L))},5732:function(t,e){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):(t.getLatLng?this._map?t.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow())):(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t})):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t})),this)},addLayers:function(i,n){if(!L.Util.isArray(i))return this.addLayer(i);var r,o=this._featureGroup,a=this._nonPointGroup,s=this.options.chunkedLoading,l=this.options.chunkInterval,c=this.options.chunkProgress,u=i.length,h=0,p=!0;if(this._map){var d=(new Date).getTime(),f=L.bind(function(){var t=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();h<u;h++){if(s&&h%200==0){var e=(new Date).getTime()-t;if(l<e)break}(r=i[h])instanceof L.LayerGroup?(p&&(i=i.slice(),p=!1),this._extractNonGroupLayers(r,i),u=i.length):r.getLatLng?this.hasLayer(r)||(this._addLayer(r,this._maxZoom),n||this.fire("layeradd",{layer:r}),r.__parent&&2===r.__parent.getChildCount()&&(e=(e=r.__parent.getAllChildMarkers())[0]===r?e[1]:e[0],o.removeLayer(e))):(a.addLayer(r),n||this.fire("layeradd",{layer:r}))}c&&c(h,u,(new Date).getTime()-d),h===u?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(f,this.options.chunkDelay)},this);f()}else for(var t=this._needsClustering;h<u;h++)(r=i[h])instanceof L.LayerGroup?(p&&(i=i.slice(),p=!1),this._extractNonGroupLayers(r,i),u=i.length):r.getLatLng?this.hasLayer(r)||t.push(r):a.addLayer(r);return this},removeLayers:function(t){var e,i=t.length,n=this._featureGroup,r=this._nonPointGroup,o=!0;if(!this._map){for(l=0;l<i;l++)(e=t[l])instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(e,t),i=t.length):(this._arraySplice(this._needsClustering,e),r.removeLayer(e),this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}));return this}if(this._unspiderfy){this._unspiderfy();for(var a=t.slice(),s=i,l=0;l<s;l++)(e=a[l])instanceof L.LayerGroup?(this._extractNonGroupLayers(e,a),s=a.length):this._unspiderfyLayer(e)}for(l=0;l<i;l++)(e=t[l])instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(e,t),i=t.length):e.__parent?(this._removeLayer(e,!0,!0),this.fire("layerremove",{layer:e}),n.hasLayer(e)&&(n.removeLayer(e),e.clusterShow&&e.clusterShow())):(r.removeLayer(e),this.fire("layerremove",{layer:e}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;0<=e;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,r,o=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),n=o.length-1;0<=n;n--){for(i=!0,r=a.length-1;0<=r;r--)if(a[r].layer===o[n]){i=!1;break}i&&t.call(e,o[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var i=null;return e=parseInt(e,10),this.eachLayer(function(t){L.stamp(t)===e&&(i=t)}),i},hasLayer:function(t){if(!t)return!1;for(var e=this._needsClustering,i=e.length-1;0<=i;i--)if(e[i]===t)return!0;for(i=(e=this._needsRemoving).length-1;0<=i;i--)if(e[i].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;"function"!=typeof e&&(e=function(){});var n=function(){!i.hasLayer(t)&&!i.hasLayer(t.__parent)||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)(n=this._needsRemoving[e]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;0<=i;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());r<=e&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){var e;this._ignoreMove||t.target.__dragStart||(e=t.target._popup&&t.target._popup.isOpen(),this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup())},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,r=this._gridUnclustered,o=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,c=t.__parent,u=c._markers;for(this._arraySplice(u,t);c&&(c._childCount--,c._boundsNeedUpdate=!0,!(c._zoom<s));)e&&c._childCount<=1?(l=c._markers[0]===t?c._markers[1]:c._markers[0],n[c._zoom].removeObject(c,a.project(c._cLatLng,c._zoom)),r[c._zoom].addObject(l,a.project(l.getLatLng(),c._zoom)),this._arraySplice(c.__parent._childClusters,c),c.__parent._markers.push(l),l.__parent=c.__parent,c._icon&&(o.removeLayer(c),i||o.addLayer(l))):c._iconNeedsUpdate=!0,c=c.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),t=" marker-cluster-";return t+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+t,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,i=e;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),2<t.layer.getChildCount()&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){var t;this._inZoomAnimation||(t=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t)},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n="function"!=typeof i?function(){return i}:i;null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;e<=r;r--)this._gridClusters[r]=new L.DistanceGrid(n(r)),this._gridUnclustered[r]=new L.DistanceGrid(n(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n=this._gridClusters,r=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);o<=e;e--){i=this._map.project(t.getLatLng(),e);var a=n[e].getNearObject(i);if(a)return a._addChild(t),void(t.__parent=a);if(a=r[e].getNearObject(i)){var s=a.__parent;s&&this._removeLayer(a,!1);var l=new this._markerCluster(this,e,a,t);n[e].addObject(l,this._map.project(l._cLatLng,e)),a.__parent=l;for(var c=t.__parent=l,u=e-1;u>s._zoom;u--)c=new this._markerCluster(this,u,c),n[u].addObject(c,this._map.project(a.getLatLng(),u));return s._addChild(c),void this._removeFromGridUnclustered(a,e)}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){e===t?this._featureGroup.addLayer(t):2===e._childCount?(e._addToMap(),t=e.getAllChildMarkers(),this._featureGroup.removeLayer(t[0]),this._featureGroup.removeLayer(t[1])):e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),r=0;for(e=e||[];r<n.length;r++)(i=n[r])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(r,o){var a,s=this._getExpandedVisibleBounds(),l=this._featureGroup,t=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(s,r,t,function(t){var e,i=t._latlng,n=t._markers;for(s.contains(i)||(i=null),t._isSingleParent()&&r+1===o?(l.removeLayer(t),t._recursivelyAddChildrenToMap(null,o,s)):(t.clusterHide(),t._recursivelyAddChildrenToMap(i,o,s)),a=n.length-1;0<=a;a--)e=n[a],s.contains(e._latlng)||l.removeLayer(e)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),l.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(s,r,o,function(t){t._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,r,t,function(t){l.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(2<e._childCount?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,i,n){var r=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(r,o,i+1,n);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(r,n),this._enqueue(function(){var t;1===e._childCount?(t=e._markers[0],this._ignoreMove=!0,t.setLatLng(t.getLatLng()),this._ignoreMove=!1,t.clusterShow&&t.clusterShow()):e._recursively(r,n,o,function(t){t._recursivelyRemoveChildrenFromMap(r,o,i+1)}),a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i].getAllChildMarkers(t);for(var n=this._markers.length-1;0<=n;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),r=this._zoom+1,i=i.getZoom();0<e.length&&r<n;){r++;for(var o=[],a=0;a<e.length;a++)o=o.concat(e[a]._childClusters);e=o}r<n?this._group._map.setView(this._latlng,r):n<=i?this._group._map.setView(this._latlng,i+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n=this._markers,r=this._childClusters,o=0,a=0,s=this._childCount;if(0!==s){for(this._resetBounds(),t=0;t<n.length;t++)e=n[t]._latlng,this._bounds.extend(e),o+=e.lat,a+=e.lng;for(t=0;t<r.length;t++)(i=r[t])._boundsNeedUpdate&&i._recalculateBounds(),this._bounds.extend(i._bounds),e=i._wLatLng,i=i._childCount,o+=e.lat*i,a+=e.lng*i;this._latlng=this._wLatLng=new L.LatLng(o/s,a/s),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,r,e){this._recursively(t,this._group._map.getMinZoom(),e-1,function(t){for(var e,i=t._markers,n=i.length-1;0<=n;n--)(e=i[n])._icon&&(e._setPos(r),e.clusterHide())},function(t){for(var e,i=t._childClusters,n=i.length-1;0<=n;n--)(e=i[n])._icon&&(e._setPos(r),e.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,i,n,r){this._recursively(e,r,i,function(t){t._recursivelyAnimateChildrenIn(e,t._group._map.latLngToLayerPoint(t.getLatLng()).round(),n),t._isSingleParent()&&n-1===r?(t.clusterShow(),t._recursivelyRemoveChildrenFromMap(e,i,n)):t.clusterHide(),t._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(n,r,o){this._recursively(o,this._group._map.getMinZoom()-1,r,function(t){if(r!==t._zoom)for(var e=t._markers.length-1;0<=e;e--){var i=t._markers[e];o.contains(i._latlng)&&(n&&(i._backupLatlng=i.getLatLng(),i.setLatLng(n),i.clusterHide&&i.clusterHide()),t._group._featureGroup.addLayer(i))}},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;0<=e;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n]._restorePosition();else for(var r=this._childClusters.length-1;0<=r;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var r,o;this._recursively(t,e-1,i-1,function(t){for(o=t._markers.length-1;0<=o;o--)r=t._markers[o],n&&n.contains(r._latlng)||(t._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(t){for(o=t._childClusters.length-1;0<=o;o--)r=t._childClusters[o],n&&n.contains(r._latlng)||(t._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(t,e,i,n,r){var o,a,s=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),r&&l===i&&r(this)),l<e||l<i)for(o=s.length-1;0<=o;o--)(a=s[o])._boundsNeedUpdate&&a._recalculateBounds(),t.intersects(a._bounds)&&a._recursively(t,e,i,n,r)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,n=r[n]=r[n]||{},n=n[i]=n[i]||[],i=L.Util.stamp(t);this._objectPoint[i]=e,n.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,r=this._getCoord(e.x),o=this._getCoord(e.y),e=this._grid,a=e[o]=e[o]||{},s=a[r]=a[r]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=s.length;i<n;i++)if(s[i]===t)return s.splice(i,1),1===n&&delete a[r],!0},eachObject:function(t,e){var i,n,r,o,a,s,l=this._grid;for(i in l)for(n in a=l[i])for(r=0,o=(s=a[n]).length;r<o;r++)t.call(e,s[r])&&(r--,o--)},getNearObject:function(t){for(var e,i,n,r,o,a,s,l=this._getCoord(t.x),c=this._getCoord(t.y),u=this._objectPoint,h=this._sqCellSize,p=null,d=c-1;d<=c+1;d++)if(n=this._grid[d])for(e=l-1;e<=l+1;e++)if(r=n[e])for(i=0,o=r.length;i<o;i++)a=r[i],((s=this._sqDist(u[L.Util.stamp(a)],t))<h||s<=h&&null===p)&&(h=s,p=a);return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,t=e.y-t.y;return i*i+t*t}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){for(var i,n,r=0,o=null,a=[],s=e.length-1;0<=s;s--)i=e[s],0<(n=this.getDistant(i,t))&&(a.push(i),r<n&&(r=n,o=i));return{maxPoint:o,newPoints:a}},buildConvexHull:function(t,e){var i=[],e=this.findMostDistantPointFromBaseLine(t,e);return e.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],e.maxPoint],e.newPoints))).concat(this.buildConvexHull([e.maxPoint,t[1]],e.newPoints)):[t[0]]},getConvexHull:function(t){for(var e=!1,i=!1,n=!1,r=!1,o=null,a=null,s=null,l=null,c=null,u=null,h=t.length-1;0<=h;h--){var p=t[h];(!1===e||p.lat>e)&&(e=(o=p).lat),(!1===i||p.lat<i)&&(i=(a=p).lat),(!1===n||p.lng>n)&&(n=(s=p).lng),(!1===r||p.lng<r)&&(r=(l=p).lng)}return c=i!==e?(u=a,o):(u=l,s),[].concat(this.buildConvexHull([u,c],t),this.buildConvexHull([c,u],t))}},L.MarkerCluster.include({getConvexHull:function(){for(var t,e=this.getAllChildMarkers(),i=[],n=e.length-1;0<=n;n--)t=e[n].getLatLng(),i.push(t);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){var t,e;this._group._spiderfied===this||this._group._inZoomAnimation||(t=this.getAllChildMarkers(null,!0),e=this._group._map.latLngToLayerPoint(this._latlng),this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,e):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,e):(e.y+=10,this._generatePointsCircle(t.length,e)),this._animationSpiderfy(t,e))},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,o=this._2PI/t,a=[],r=Math.max(r,35);for(a.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*o,a[i]=new L.Point(e.x+r*Math.cos(n),e.y+r*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){for(var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,o=i*this._spiralLengthFactor*this._2PI,a=0,s=[],l=s.length=t;0<=l;l--)l<t&&(s[l]=new L.Point(e.x+n*Math.cos(a),e.y+n*Math.sin(a))._round()),n+=o/(a+=r/n+5e-4*l);return s},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,r=i._featureGroup,o=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=o.length-1;0<=e;e--)t=o[e],r.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:o}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,r,o,a=this._group,s=a._map,l=a._featureGroup,c=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,i=0;i<t.length;i++)o=s.layerPointToLatLng(e[i]),n=t[i],r=new L.Polyline([this._latlng,o],c),s.addLayer(r),n._spiderLeg=r,n._preSpiderfyLatlng=n._latlng,n.setLatLng(o),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,r,o,a,s,l=this,c=this._group,u=c._map,h=c._featureGroup,p=this._latlng,d=u.latLngToLayerPoint(p),f=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),g=m.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=g,c._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],s=u.layerPointToLatLng(e[i]),r=new L.Polyline([p,s],m),u.addLayer(r),n._spiderLeg=r,f&&(a=(o=r._path).getTotalLength()+.1,o.style.strokeDasharray=a,o.style.strokeDashoffset=a),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),h.addLayer(n),n._setPos&&n._setPos(d);for(c._forceLayout(),c._animationStart(),i=t.length-1;0<=i;i--)s=u.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.clusterShow&&n.clusterShow(),f&&((o=(r=n._spiderLeg)._path).style.strokeDashoffset=0,r.setStyle({opacity:g}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,n,r,o,a=this,s=this._group,l=s._map,c=s._featureGroup,u=t?l._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):l.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(null,!0),p=L.Path.SVG;for(s._ignoreMove=!0,s._animationStart(),this.setOpacity(1),i=h.length-1;0<=i;i--)(e=h[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,o=!0,e._setPos&&(e._setPos(u),o=!1),e.clusterHide&&(e.clusterHide(),o=!1),o&&c.removeLayer(e),p&&(o=(r=(n=e._spiderLeg)._path).getTotalLength()+.1,r.style.strokeDashoffset=o,n.setStyle({opacity:0})));s._ignoreMove=!1,setTimeout(function(){var t=0;for(i=h.length-1;0<=i;i--)(e=h[i])._spiderLeg&&t++;for(i=h.length-1;0<=i;i--)(e=h[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),1<t&&c.removeLayer(e),l.removeLayer(e._spiderLeg),delete e._spiderLeg);s._animationEnd(),s.fire("unspiderfied",{cluster:a,markers:h})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},5243:function(t,e){
/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e=Object.freeze;function l(t){for(var e,i,n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var o=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function p(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function s(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function n(t,e,i){var n,r,o=function(){n=!1,r&&(a.apply(i,r),r=!1)},a=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(o,e),n=!0)};return a}function r(t,e,i){var n=e[1],r=e[0],e=n-r;return t===n&&i?t:((t-r)%e+e)%e+r}function c(){return!1}function a(t,e){e=Math.pow(10,void 0===e?6:e);return Math.round(t*e)/e}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return u(t).split(/\s+/)}function d(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?o(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,i){var n,r=[];for(n in t)r.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,i){return t.replace(m,function(t,e){e=i[e];if(void 0===e)throw new Error("No value provided for variable "+t);return e="function"==typeof e?e(i):e})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function k(t){var e=+new Date,i=Math.max(0,16-(e-x));return x=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||b("RequestAnimationFrame")||k,M=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,i){if(!i||w!==k)return w.call(window,p(t,e));t.call(e)}function S(t){t&&M.call(window,t)}var P=(Object.freeze||Object)({freeze:e,extend:l,create:o,bind:p,lastId:i,stamp:s,throttle:n,wrapNum:r,falseFn:c,formatNum:a,trim:u,splitWords:h,setOptions:d,getParamString:f,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:w,cancelFn:M,requestAnimFrame:C,cancelAnimFrame:S});function T(){}T.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i,n=e.__super__=this.prototype,r=o(n);for(i in(r.constructor=e).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(e[i]=this[i]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),l.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=l(o(r.options),t.options)),l(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},T.include=function(t){return l(this.prototype,t),this},T.mergeOptions=function(t){return l(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},(Ai={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._on(t[r],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._off(t[r],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n);for(var t={fn:e,ctx:i=i===this?void 0:i},r=n,o=0,a=r.length;o<a;o++)if(r[o].fn===e&&r[o].ctx===i)return;r.push(t)},_off:function(t,e,i){var n,r,o;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx===i&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,o=n.length;r<o;r++)n[r].fn=c;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var r=p(function(){this.off(t,e,i).off(t,r,i)},this);return this.on(t,e,i).on(t,r,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}}).addEventListener=Ai.on,Ai.removeEventListener=Ai.clearAllEventListeners=Ai.off,Ai.addOneTimeEventListener=Ai.once,Ai.fireEvent=Ai.fire,Ai.hasEventListeners=Ai.listens;var E=T.extend(Ai);function D(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var A=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function O(t,e,i){return t instanceof D?t:v(t)?new D(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new D(t.x,t.y):new D(t,e,i)}function I(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function B(t,e){return!t||t instanceof I?t:new I(t,e)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function z(t,e){return t instanceof R?t:new R(t,e)}function F(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function N(t,e,i){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,i)}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new D(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new D(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,t=t.y-this.y;return Math.sqrt(e*e+t*t)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},I.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new D(this.min.x,this.max.y)},getTopRight:function(){return new D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t=("number"==typeof t[0]||t instanceof D?O:B)(t))instanceof I?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=B(t);var e=this.min,i=this.max,n=t.min,r=t.max,t=r.x>=e.x&&n.x<=i.x,i=r.y>=e.y&&n.y<=i.y;return t&&i},overlaps:function(t){t=B(t);var e=this.min,i=this.max,n=t.min,r=t.max,t=r.x>e.x&&n.x<i.x,i=r.y>e.y&&n.y<i.y;return t&&i},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast;if(t instanceof F)i=e=t;else{if(!(t instanceof R))return t?this.extend(N(t)||z(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,t=Math.abs(e.lng-i.lng)*t;return new R(new F(e.lat-n,e.lng-t),new F(i.lat+n,i.lng+t))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof F||"lat"in t?N:z)(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof R?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),t=r.lat>=e.lat&&n.lat<=i.lat,i=r.lng>=e.lng&&n.lng<=i.lng;return t&&i},overlaps:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),t=r.lat>e.lat&&n.lat<i.lat,i=r.lng>e.lng&&n.lng<i.lng;return t&&i},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var j={latLngToPoint:function(t,e){t=this.projection.project(t),e=this.scale(e);return this.transformation._transform(t,e)},pointToLatLng:function(t,e){e=this.scale(e),e=this.transformation.untransform(t,e);return this.projection.unproject(e)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,t=this.scale(t);return new I(this.transformation.transform(e.min,t),this.transformation.transform(e.max,t))},infinite:!(F.prototype={equals:function(t,e){return!!t&&(t=N(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,N(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,t=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-t],[this.lat+e,this.lng+t])},clone:function(){return new F(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?r(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,e=e.lng-i.lng;if(0==n&&0==e)return t;i=t.getSouthWest(),t=t.getNorthEast();return new R(new F(i.lat-n,i.lng-e),new F(t.lat-n,t.lng-e))}},U=l({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),i=Math.sin((e.lng-t.lng)*i/2),i=o*o+Math.cos(n)*Math.cos(r)*i*i,i=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return this.R*i}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,i=Math.max(Math.min(i,t.lat),-i),i=Math.sin(i*e);return new D(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new I([-t,-t],[t,t])}()};function G(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function Z(t,e,i,n){return new G(t,e,i,n)}G.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new D((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=l({},U,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return Z(t,.5,-t,.5)}()}),V=l({},W,{code:"EPSG:900913"});function q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){for(var i,n,r,o,a="",s=0,l=t.length;s<l;s++){for(i=0,n=(r=t[s]).length;i<n;i++)a+=(i?"L":"M")+(o=r[i]).x+" "+o.y;a+=e?wt?"z":"x":""}return a||"M0 0"}var Y=document.documentElement.style,J=(Ct="ActiveXObject"in window)&&!document.addEventListener,K="msLaunchUri"in navigator&&!("documentMode"in document),X=Mt("webkit"),Q=Mt("android"),tt=Mt("android 2")||Mt("android 3"),et=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=Q&&Mt("Google")&&et<537&&!("AudioNode"in window),nt=!!window.opera,rt=Mt("chrome"),ot=Mt("gecko")&&!X&&!nt&&!Ct,at=!rt&&Mt("safari"),st=Mt("phantom"),lt="OTransition"in Y,ct=0===navigator.platform.indexOf("Win"),ut=Ct&&"transition"in Y,ht="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tt,pt="MozPerspective"in Y,dt=!window.L_DISABLE_3D&&(ut||ht||pt)&&!lt&&!st,ft="undefined"!=typeof orientation||Mt("mobile"),mt=ft&&X,gt=ft&&ht,et=!window.PointerEvent&&window.MSPointerEvent,vt=!(X||!window.PointerEvent&&!et),_t=!window.L_NO_TOUCH&&(vt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),yt=ft&&nt,Y=ft&&ot,bt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),xt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t},kt=!!document.createElement("canvas").getContext,wt=!(!document.createElementNS||!q("svg").createSVGRect),Lt=!wt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';t=t.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(t){return!1}}();function Mt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Ct=(Object.freeze||Object)({ie:Ct,ielt9:J,edge:K,webkit:X,android:Q,android23:tt,androidStock:it,opera:nt,chrome:rt,gecko:ot,safari:at,phantom:st,opera12:lt,win:ct,ie3d:ut,webkit3d:ht,gecko3d:pt,any3d:dt,mobile:ft,mobileWebkit:mt,mobileWebkit3d:gt,msPointer:et,pointer:vt,touch:_t,mobileOpera:yt,mobileGecko:Y,retina:bt,passiveEvents:xt,canvas:kt,svg:wt,vml:Lt}),St=et?"MSPointerDown":"pointerdown",Pt=et?"MSPointerMove":"pointermove",Tt=et?"MSPointerUp":"pointerup",Et=et?"MSPointerCancel":"pointercancel",Dt=["INPUT","SELECT","OPTION"],At={},Ot=!1,It=0;function Bt(t,e,i,n){function r(t){Nt(t,o)}var o,a,s,l,c,u;function h(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Nt(t,a)}return"touchstart"===e?(s=t,l=i,c=n,u=p(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Dt.indexOf(t.target.tagName)<0))return;De(t)}Nt(t,l)}),s["_leaflet_touchstart"+c]=u,s.addEventListener(St,u,!1),Ot||(document.documentElement.addEventListener(St,Rt,!0),document.documentElement.addEventListener(Pt,zt,!0),document.documentElement.addEventListener(Tt,Ft,!0),document.documentElement.addEventListener(Et,Ft,!0),Ot=!0)):"touchmove"===e?(a=i,(u=t)["_leaflet_touchmove"+n]=h,u.addEventListener(Pt,h,!1)):"touchend"===e&&(o=i,(t=t)["_leaflet_touchend"+n]=r,t.addEventListener(Tt,r,!1),t.addEventListener(Et,r,!1)),this}function Rt(t){At[t.pointerId]=t,It++}function zt(t){At[t.pointerId]&&(At[t.pointerId]=t)}function Ft(t){delete At[t.pointerId],It--}function Nt(t,e){for(var i in t.touches=[],At)t.touches.push(At[i]);t.changedTouches=[t],e(t)}var jt=et?"MSPointerDown":vt?"pointerdown":"touchstart",Ut=et?"MSPointerUp":vt?"pointerup":"touchend",Ht="_leaflet_";function Gt(t,r,e){var o,a,s=!1;function i(t){var e,i;if(vt){if(!K||"mouse"===t.pointerType)return;i=It}else i=t.touches.length;1<i||(i=(e=Date.now())-(o||e),a=t.touches?t.touches[0]:t,s=0<i&&i<=250,o=e)}function n(t){if(s&&!a.cancelBubble){if(vt){if(!K||"mouse"===t.pointerType)return;var e,i,n={};for(i in a)e=a[i],n[i]=e&&e.bind?e.bind(a):e;a=n}a.type="dblclick",a.button=0,r(a),o=null}}return t[Ht+jt+e]=i,t[Ht+Ut+e]=n,t[Ht+"dblclick"+e]=r,t.addEventListener(jt,i,!!xt&&{passive:!1}),t.addEventListener(Ut,n,!!xt&&{passive:!1}),t.addEventListener("dblclick",r,!1),this}function Zt(t,e){var i=t[Ht+jt+e],n=t[Ht+Ut+e],e=t[Ht+"dblclick"+e];return t.removeEventListener(jt,i,!!xt&&{passive:!1}),t.removeEventListener(Ut,n,!!xt&&{passive:!1}),K||t.removeEventListener("dblclick",e,!1),this}var Wt,Vt,qt,$t,Yt,Jt,Kt=de(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xt=de(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===Xt||"OTransition"===Xt?Xt+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];return"auto"===(i=(!i||"auto"===i)&&document.defaultView?(t=document.defaultView.getComputedStyle(t,null))?t[e]:null:i)?null:i}function ie(t,e,i){t=document.createElement(t);return t.className=e||"",i&&i.appendChild(t),t}function ne(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function se(t,e){if(void 0!==t.classList)return t.classList.contains(e);t=he(t);return 0<t.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t)}function le(t,e){var i;if(void 0!==t.classList)for(var n=h(e),r=0,o=n.length;r<o;r++)t.classList.add(n[r]);else se(t,e)||ue(t,((i=he(t))?i+" ":"")+e)}function ce(t,e){void 0!==t.classList?t.classList.remove(e):ue(t,u((" "+he(t)+" ").replace(" "+e+" "," ")))}function ue(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function he(t){return void 0===(t=t.correspondingElement?t.correspondingElement:t).className.baseVal?t.className:t.className.baseVal}function pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function de(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function fe(t,e,i){e=e||new D(0,0);t.style[Kt]=(ut?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(i?" scale("+i+")":"")}function me(t,e){t._leaflet_pos=e,dt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ge(t){return t._leaflet_pos||new D(0,0)}function ve(){we(window,"dragstart",De)}function _e(){Me(window,"dragstart",De)}function ye(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(be(),Yt=($t=t).style.outline,t.style.outline="none",we(window,"keydown",be))}function be(){$t&&($t.style.outline=Yt,Yt=$t=void 0,Me(window,"keydown",be))}function xe(t){for(;t=t.parentNode,!(t.offsetWidth&&t.offsetHeight||t===document.body););return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function we(t,e,i,n){if("object"==typeof e)for(var r in e)Ce(t,r,e[r],i);else for(var o=0,a=(e=h(e)).length;o<a;o++)Ce(t,e[o],i,n);return this}Vt="onselectstart"in document?(Wt=function(){we(window,"selectstart",De)},function(){Me(window,"selectstart",De)}):(Jt=de(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Wt=function(){var t;Jt&&(t=document.documentElement.style,qt=t[Jt],t[Jt]="none")},function(){Jt&&(document.documentElement.style[Jt]=qt,qt=void 0)}),X=(Object.freeze||Object)({TRANSFORM:Kt,TRANSITION:Xt,TRANSITION_END:Qt,get:te,getStyle:ee,create:ie,remove:ne,empty:re,toFront:oe,toBack:ae,hasClass:se,addClass:le,removeClass:ce,setClass:ue,getClass:he,setOpacity:pe,testProp:de,setTransform:fe,setPosition:me,getPosition:ge,disableTextSelection:Wt,enableTextSelection:Vt,disableImageDrag:ve,enableImageDrag:_e,preventOutline:ye,restoreOutline:be,getSizedParentNode:xe,getScale:ke});var Le="_leaflet_events";function Me(t,e,i,n){if("object"==typeof e)for(var r in e)Se(t,r,e[r],i);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Se(t,e[o],i,n);else{for(var s in t[Le])Se(t,s,t[Le][s]);delete t[Le]}return this}function Ce(e,t,i,n){var r=t+s(i)+(n?"_"+s(n):"");if(e[Le]&&e[Le][r])return this;var o=function(t){return i.call(n||e,t||window.event)},a=o;vt&&0===t.indexOf("touch")?Bt(e,t,o,r):!_t||"dblclick"!==t||vt&&rt?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!!xt&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,je(e,t)&&a(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&Q&&(o=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=Re&&i-Re;if(n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated)return Ae(t);Re=i,e(t)}(t,a)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o):Gt(e,o,r),e[Le]=e[Le]||{},e[Le][r]=o}function Se(t,e,i,n){var r,o=e+s(i)+(n?"_"+s(n):""),a=t[Le]&&t[Le][o];if(!a)return this;vt&&0===e.indexOf("touch")?(n=(r=t)["_leaflet_"+(i=e)+(n=o)],"touchstart"===i?r.removeEventListener(St,n,!1):"touchmove"===i?r.removeEventListener(Pt,n,!1):"touchend"===i&&(r.removeEventListener(Tt,n,!1),r.removeEventListener(Et,n,!1))):!_t||"dblclick"!==e||vt&&rt?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!!xt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a):Zt(t,o),t[Le][o]=null}function Pe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ne(t),this}function Te(t){return Ce(t,"mousewheel",Pe),this}function Ee(t){return we(t,"mousedown touchstart dblclick",Pe),Ce(t,"click",Fe),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ae(t){return De(t),Pe(t),this}function Oe(t,e){if(!e)return new D(t.clientX,t.clientY);var i=ke(e),n=i.boundingClientRect;return new D((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ie=ct&&rt?2*window.devicePixelRatio:ot?window.devicePixelRatio:1;function Be(t){return K?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ie:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Re,ze={};function Fe(t){ze[t.type]=!0}function Ne(t){var e=ze[t.type];return ze[t.type]=!1,e}function je(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var nt=(Object.freeze||Object)({on:we,off:Me,stopPropagation:Pe,disableScrollPropagation:Te,disableClickPropagation:Ee,preventDefault:De,stop:Ae,getMousePosition:Oe,getWheelDelta:Be,fakeStop:Fe,skipped:Ne,isExternalTarget:je,addListener:we,removeListener:Me}),Ue=E.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ge(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){t=this._startPos.add(this._offset.multiplyBy(t));e&&t._round(),me(this._el,t),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),He=E.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(N(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xt&&dt&&!yt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(N(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),n=(t instanceof D?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),n=this.containerPointToLatLng(r.add(n));return this.setView(n,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var i=O(e.paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};n=n.subtract(i).divideBy(2),i=this.project(t.getSouthWest(),r),t=this.project(t.getNorthEast(),r);return{center:this.unproject(i.add(t).divideBy(2).add(n),r),zoom:r}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");t=this._getBoundsCenterZoom(t,e);return this.setView(t.center,t.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=O(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Ue,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(le(this._mapPane,"leaflet-pan-anim"),i=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var i},flyTo:function(n,r,t){if(!1===(t=t||{}).animate||!dt)return this.setView(n,r,t);this._stop();var o=this.project(this.getCenter()),a=this.project(n),e=this.getSize(),s=this._zoom;n=N(n),r=void 0===r?s:r;var l=Math.max(e.x,e.y),i=l*this.getZoomScale(s,r),c=a.distanceTo(o)||1,u=1.42,h=u*u;function p(t){t=(i*i-l*l+(t?-1:1)*h*h*c*c)/(2*(t?i:l)*h*c),t=Math.sqrt(t*t+1)-t;return t<1e-9?-18:Math.log(t)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=p(0);function g(t){return l*(f(m)*(d(t=m+u*t)/f(t))-d(m))/h}var v=Date.now(),_=(p(1)-m)/u,y=t.duration?1e3*t.duration:1e3*_*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e=(Date.now()-v)/y,i=(i=e,(1-Math.pow(1-i,1.5))*_);e<=1?(this._flyToFrame=C(t,this),this._move(this.unproject(o.add(a.subtract(o).multiplyBy(g(i)/c)),s),this.getScaleZoom(l/(l*(f(m)/f(m+u*i))),s),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){t=this._getBoundsCenterZoom(t,e);return this.flyTo(t.center,t.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),t=this._limitCenter(i,this._zoom,z(t));return i.equals(t)||this.panTo(t,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),r=B([s.min.add(i),s.max.subtract(n)]);return r.contains(a)||(this._enforcingBounds=!0,t=o.subtract(a),s=O(a.x+t.x,a.y+t.y),(a.x<r.min.x||a.x>r.max.x)&&(s.x=o.x-t.x,0<t.x?s.x+=l.x-i.x:s.x-=l.x-n.x),(a.y<r.min.y||a.y>r.max.y)&&(s.y=o.y-t.y,0<t.y?s.y+=l.y-i.y:s.y-=l.y-n.y),this.panTo(this.unproject(s),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),r=i.divideBy(2).round(),r=n.subtract(r);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),i=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,t=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+t+"."})},_handleGeolocationResponse:function(t){var e,i=new F(t.coords.latitude,t.coords.longitude),n=i.toBounds(2*t.coords.accuracy),r=this._locateOptions;r.setView&&(e=this.getBoundsZoom(n),this.setView(i,r.maxZoom?Math.min(e,r.maxZoom):e));var o,a={latlng:i,bounds:n,timestamp:t.timestamp};for(o in t.coords)"number"==typeof t.coords[o]&&(a[o]=t.coords[o]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;e=this[t]=new e(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ne(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){e=ie("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=z(t),i=O(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),t=this.getSize().subtract(i),i=B(this.project(s,n),this.project(a,n)).getSize(),s=dt?this.options.zoomSnap:1,a=t.x/i.x,i=t.y/i.y,i=e?Math.max(a,i):Math.min(a,i),n=this.getScaleZoom(i,n);return s&&(n=Math.round(n/(s/100))*(s/100),n=e?Math.ceil(n/s)*s:Math.floor(n/s)*s),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){e=this._getTopLeftPoint(t,e);return new I(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;e=i.zoom(t*i.scale(e));return isNaN(e)?1/0:e},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(N(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){t=O(t).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(t){return this.project(N(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(N(t),N(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){t=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return Oe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){t=this._container=te(t);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");we(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt,le(t,"leaflet-container"+(_t?" leaflet-touch":"")+(bt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(at?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){me(this._mapPane,new D(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Me:we;e((this._targets[s(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),dt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((i=this._targets[s(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(r&&!je(o,t))break;if(n.push(i),r)break}if(o===this._container)break;o=o.parentNode}return n=!(n.length||a||r)&&je(o,t)?[this]:n},_handleDOMEvent:function(t){var e;this._loaded&&!Ne(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ye(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type&&((r=l({},t)).type="preclick",this._fireDOMEvent(r,r.type,i)),!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var n=i[0];"contextmenu"===e&&n.listens(e,!0)&&De(t);var r,o={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(r=n.getLatLng&&(!n._radius||n._radius<=10),o.containerPoint=r?this.latLngToContainerPoint(n.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=r?n.getLatLng():this.layerPointToLatLng(o.layerPoint));for(var a=0;a<i.length;a++)if(i[a].fire(e,o,!0),o.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ge(this._mapPane)||new D(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){i=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,i){i=this._getNewPixelOrigin(i,e);return B([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),r=new I(n.subtract(r),n.add(r)),i=this._getBoundsOffset(r,i,e);return i.round().equals([0,0])?t:this.unproject(n.add(i),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),i=new I(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,i){e=B(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),i=e.min.subtract(t.min),t=e.max.subtract(t.max);return new D(this._rebound(i.x,-t.x),this._rebound(i.y,-t.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=dt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){t=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(t))&&(this.panBy(t,e),!0)},_createAnimProxy:function(){var t=this._proxy=ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Kt,i=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),n=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(n))&&(C(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),C(function(){this._moveEnd(!0)},this))}}),Ge=T.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),t=t._controlCorners[i];return le(e,"leaflet-control"),-1!==i.indexOf("bottom")?t.insertBefore(e,t.firstChild):t.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),st=function(t){return new Ge(t)};He.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",o=this._controlContainer=ie("div",r+"control-container",this._container);function t(t,e){var i=r+t+" "+r+e;n[t+e]=ie("div",i,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ne(this._controlCorners[t]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ze=Ge.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ge.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);t=this._getLayer(s(t));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ie("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ee(e),Te(e);var n=this._section=ie("section",t+"-list");i&&(this._map.on("click",this.collapse,this),Q||we(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ie("a",t+"-toggle",e);r.href="#",r.title="Layers",_t?(we(r,"click",Ae),we(r,"click",this.expand,this)):we(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ie("div",t+"-base",n),this._separator=ie("div",t+"-separator",n),this._overlaysList=ie("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(p(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];for(var t,e,i,n=0,r=0;r<this._layers.length;r++)i=this._layers[r],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,n+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<n,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),t=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;t&&this._map.fire(t,e)},_createRadioElement:function(t,e){t='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",e=document.createElement("div");return e.innerHTML=t,e.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+s(this),n),this._layerControlInputs.push(e),e.layerId=s(t.layer),we(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;n=document.createElement("div");return i.appendChild(n),n.appendChild(e),n.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;0<=o;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;0<=r;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),We=Ge.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ie("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){n=ie("a",i,n);return n.innerHTML=t,n.href="#",n.title=e,n.setAttribute("role","button"),n.setAttribute("aria-label",e),Ee(n),we(n,"click",Ae),we(n,"click",r,this),we(n,"click",this._refocusOnMap,this),n},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ce(this._zoomInButton,e),ce(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||le(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||le(this._zoomInButton,e)}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new We,this.addControl(this.zoomControl))});var Ve=Ge.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ie("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ie("div",e,i)),t.imperial&&(this._iScale=ie("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i=3.2808399*t;5280<i?(e=i/5280,t=this._getRoundNum(e),this._updateScale(this._iScale,t+" mi",t/e)):(e=this._getRoundNum(i),this._updateScale(this._iScale,e+" ft",e/i))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),t=t/e;return e*(t=10<=t?10:5<=t?5:3<=t?3:2<=t?2:1)}}),qe=Ge.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=ie("div","leaflet-control-attribution"),Ee(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t,e=[];for(t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&(new qe).addTo(this)}),Ge.Layers=Ze,Ge.Zoom=We,Ge.Scale=Ve,Ge.Attribution=qe,st.layers=function(t,e,i){return new Ze(t,e,i)},st.zoom=function(t){return new We(t)},st.scale=function(t){return new Ve(t)},st.attribution=function(t){return new qe(t)},(lt=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}})).addTo=function(t,e){return t.addHandler(e,this),this};var $e,ht={Events:Ai},Ye=_t?"touchstart mousedown":"mousedown",Je={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ke={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Xe=E.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(we(this._dragStartTarget,Ye,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xe._dragging===this&&this.finishDrag(),Me(this._dragStartTarget,Ye,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,i;!t._simulated&&this._enabled&&(this._moved=!1,se(this._element,"leaflet-zoom-anim")||Xe._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((Xe._dragging=this)._preventOutline&&ye(this._element),ve(),Wt(),this._moving||(this.fire("down"),e=t.touches?t.touches[0]:t,i=xe(this._element),this._startPoint=new D(e.clientX,e.clientY),this._parentScale=ke(i),we(document,Ke[t.type],this._onMove,this),we(document,Je[t.type],this._onUp,this))))},_onMove:function(t){var e;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((e=new D((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ge(this._element).subtract(e),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=C(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ke)Me(document,Ke[t],this._onMove,this),Me(document,Je[t],this._onUp,this);_e(),Vt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Xe._dragging=!1}});function Qe(t,e){if(!e||!t.length)return t.slice();e*=e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,r,o){var a,s,l,c=0;for(s=r+1;s<=o-1;s++)l=ri(e[s],e[r],e[o],!0),c<l&&(a=s,c=l);n<c&&(i[a]=1,t(e,i,n,r,a),t(e,i,n,a,o))}(t,n,e,0,i-1);var r,o=[];for(r=0;r<i;r++)n[r]&&o.push(t[r]);return o}(t=function(t,e){for(var i=[t[0]],n=1,r=0,o=t.length;n<o;n++)(function(t,e){var i=e.x-t.x,t=e.y-t.y;return i*i+t*t})(t[n],t[r])>e&&(i.push(t[n]),r=n);r<o-1&&i.push(t[o-1]);return i}(t,e),e)}function ti(t,e,i){return Math.sqrt(ri(t,e,i,!0))}function ei(t,e,i,n,r){var o,a,s,l=n?$e:ni(t,i),c=ni(e,i);for($e=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=ni(a=ii(t,e,o=l||c,i,r),i),o===l?(t=a,l=s):(e=a,c=s)}}function ii(t,e,i,n,r){var o,a,s=e.x-t.x,l=e.y-t.y,e=n.min,n=n.max;return 8&i?(o=t.x+s*(n.y-t.y)/l,a=n.y):4&i?(o=t.x+s*(e.y-t.y)/l,a=e.y):2&i?(o=n.x,a=t.y+l*(n.x-t.x)/s):1&i&&(o=e.x,a=t.y+l*(e.x-t.x)/s),new D(o,a,r)}function ni(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ri(t,e,i,n){var r=e.x,o=e.y,a=i.x-r,s=i.y-o,e=a*a+s*s;return 0<e&&(1<(e=((t.x-r)*a+(t.y-o)*s)/e)?(r=i.x,o=i.y):0<e&&(r+=a*e,o+=s*e)),a=t.x-r,s=t.y-o,n?a*a+s*s:new D(r,o)}function oi(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function ai(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),oi(t)}function si(t,e,i){for(var n,r,o,a,s,l,c,u=[1,4,2,8],h=0,p=t.length;h<p;h++)t[h]._code=ni(t[h],e);for(o=0;o<4;o++){for(l=u[o],n=[],h=0,r=(p=t.length)-1;h<p;r=h++)a=t[h],s=t[r],a._code&l?s._code&l||((c=ii(s,a,l,e,i))._code=ni(c,e),n.push(c)):(s._code&l&&((c=ii(s,a,l,e,i))._code=ni(c,e),n.push(c)),n.push(a));t=n}return t}pt=(Object.freeze||Object)({simplify:Qe,pointToSegmentDistance:ti,closestPointOnSegment:function(t,e,i){return ri(t,e,i)},clipSegment:ei,_getEdgeIntersection:ii,_getBitCode:ni,_sqClosestPointOnSegment:ri,isFlat:oi,_flat:ai});var mt=(Object.freeze||Object)({clipPolygon:si}),gt={project:function(t){return new D(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new I([-180,-90],[180,90])},li={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),r=o*Math.sin(n),o=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),o/2),n=-i*Math.log(Math.max(o,1e-10));return new D(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&1e-7<Math.abs(c);l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*i,t.x*i/n)}},Y=(Object.freeze||Object)({LonLat:gt,Mercator:li,SphericalMercator:H}),et=l({},U,{code:"EPSG:3395",projection:li,transformation:function(){var t=.5/(Math.PI*li.R);return Z(t,.5,-t,.5)}()}),ci=l({},U,{code:"EPSG:4326",projection:gt,transformation:Z(1/180,1,-1/180,.5)}),ct=l({},j,{projection:gt,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,t=e.lat-t.lat;return Math.sqrt(i*i+t*t)},infinite:!0});j.Earth=U,j.EPSG3395=et,j.EPSG3857=W,j.EPSG900913=V,j.EPSG4326=ci,j.Simple=ct;var ui=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,i=t.target;i.hasLayer(this)&&(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents&&(e=this.getEvents(),i.on(e,this),this.once("remove",function(){i.off(e,this)},this)),this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this}))}});He.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){t=s(t);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,n=this._getZoomSpan();for(t in this._zoomBoundLayers)var r=this._zoomBoundLayers[t].options,e=void 0===r.minZoom?e:Math.min(e,r.minZoom),i=void 0===r.maxZoom?i:Math.max(i,r.maxZoom);this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hi=ui.extend({initialize:function(t,e){var i,n;if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){t=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:s}),pi=hi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),hi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?((t=t in this._layers?this._layers[t]:t).removeEventParent(this),hi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t,e=new R;for(t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),di=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}e=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(e,t),e},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"],r=O(n="number"==typeof n?[n,n]:n),n=O("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return bt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),fi=di.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return fi.imagePath||(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+di.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ie("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),mi=lt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xe(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=ge(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),r=B(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));r.contains(o)||(n=O((Math.max(r.max.x,o.x)-r.max.x)/(a.max.x-r.max.x)-(Math.min(r.min.x,o.x)-r.min.x)/(a.min.x-r.min.x),(Math.max(r.max.y,o.y)-r.max.y)/(a.max.y-r.max.y)-(Math.min(r.min.y,o.y)-r.min.y)/(a.min.y-r.min.y)).multiplyBy(n),i.panBy(n,{animate:!1}),this._draggable._newPos._add(n),this._draggable._startPos._add(n),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ge(e._icon),r=e._map.layerPointToLatLng(n);i&&me(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),gi=ui.extend({options:{icon:new fi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),le(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),i=!1;r!==this._shadow&&(this._removeShadow(),i=!0),r&&(le(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&i&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(t)},_initInteraction:function(){var t;this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mi&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mi(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),vi=ui.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),_i=vi.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return vi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),i=[t+i,e+i];this._pxBounds=new I(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),yi=_i.extend({initialize:function(t,e,i){if(d(this,e="number"==typeof e?l({},i,{radius:e}):e),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:vi.prototype.setStyle,_project:function(){var t,e,i,n,r,o=this._latlng.lng,a=this._latlng.lat,s=this._map,l=s.options.crs;l.distance===U.distance?(r=Math.PI/180,t=this._mRadius/U.R/r,e=s.project([a+t,o]),n=s.project([a-t,o]),i=e.add(n).divideBy(2),n=s.unproject(i).lat,r=Math.acos((Math.cos(t*r)-Math.sin(a*r)*Math.sin(n*r))/(Math.cos(a*r)*Math.cos(n*r)))/r,!isNaN(r)&&0!==r||(r=t/Math.cos(Math.PI/180*a)),this._point=i.subtract(s.getPixelOrigin()),this._radius=isNaN(r)?0:i.x-s.project([n,o-r]).x,this._radiusY=i.y-e.y):(l=l.unproject(l.project(this._latlng).subtract([this._mRadius,0])),this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(l).x),this._updateBounds()}}),bi=vi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,o=ri,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=o(t,e=l[c-1],i=l[c],!0);h<n&&(n=h,r=o(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a=this._rings[0],s=a.length;if(!s)return null;for(e=t=0;t<s-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(i=t=0;t<s-1;t++)if(n=a[t],r=a[t+1],e<(i+=o=n.distanceTo(r)))return o=(i-e)/o,this._map.layerPointToLatLng([r.x-o*(r.x-n.x),r.y-o*(r.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=N(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return oi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=oi(t),n=0,r=t.length;n<r;n++)i?(e[n]=N(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),t=new D(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(t,e,i){var n,r,o=t[0]instanceof F,a=t.length;if(o){for(r=[],n=0;n<a;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n]);e.push(r)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,i,n,r,o=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(e=0,i=(r=this._rings[a]).length;e<i-1;e++)(n=ei(r[e],r[e+1],t,e,!0))&&(o[s]=o[s]||[],o[s].push(n[0]),n[1]===r[e+1]&&e!==i-2||(o[s].push(n[1]),s++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=Qe(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((e||0!==n)&&ti(t,s[r],s[n])<=l)return!0;return!1}});bi._flat=ai;var xi=bi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(t=o=a=s=0,e=u-1;t<u;e=t++)i=c[t],n=c[e],r=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*r,s+=(i.y+n.y)*r,o+=3*r;return l=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=bi.prototype._convertLatLngs.call(this,t),t=e.length;return 2<=t&&e[0]instanceof F&&e[0].equals(e[t-1])&&e.pop(),e},_setLatLngs:function(t){bi.prototype._setLatLngs.call(this,t),oi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(oi(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,e=new D(e,e),t=new I(t.min.subtract(e),t.max.add(e));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,n=0,r=this._rings.length;n<r;n++)(i=si(this._rings[n],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,o,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)i=e[o],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||bi.prototype._containsPoint.call(this,t,!0)}}),ki=pi.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=v(t)?t:t.features;if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=wi(t,o);return a?(a.feature=Ei(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function wi(t,e){var i,n,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Mi;if(!s&&!a)return null;switch(a.type){case"Point":return Li(c,t,i=u(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=u(s[r]),l.push(Li(c,t,i,e));return new pi(l);case"LineString":case"MultiLineString":return n=Ci(s,"LineString"===a.type?0:1,u),new bi(n,e);case"Polygon":case"MultiPolygon":return n=Ci(s,"Polygon"===a.type?1:2,u),new xi(n,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=wi({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new pi(l);default:throw new Error("Invalid GeoJSON object.")}}function Li(t,e,i,n){return t?t(e,i):new gi(i,n&&n.markersInheritOptions&&n)}function Mi(t){return new F(t[1],t[0],t[2])}function Ci(t,e,i){for(var n,r=[],o=0,a=t.length;o<a;o++)n=e?Ci(t[o],e-1,i):(i||Mi)(t[o]),r.push(n);return r}function Si(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Pi(t,e,i,n){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Pi(t[o],e-1,i,n):Si(t[o],n));return!e&&i&&r.push(r[0]),r}function Ti(t,e){return t.feature?l({},t.feature,{geometry:e}):Ei(e)}function Ei(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Di(t,e){return new ki(t,e)}ot={toGeoJSON:function(t){return Ti(this,{type:"Point",coordinates:Si(this.getLatLng(),t)})}},gi.include(ot),yi.include(ot),_i.include(ot),bi.include({toGeoJSON:function(t){var e=!oi(this._latlngs);return Ti(this,{type:(e?"Multi":"")+"LineString",coordinates:Pi(this._latlngs,e?1:0,!1,t)})}}),xi.include({toGeoJSON:function(t){var e=!oi(this._latlngs),i=e&&!oi(this._latlngs[0]),t=Pi(this._latlngs,i?2:e?1:0,!0,t);return Ti(this,{type:(i?"Multi":"")+"Polygon",coordinates:t=!e?[t]:t})}}),hi.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)}),Ti(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var i="GeometryCollection"===t,n=[];return this.eachLayer(function(t){t.toGeoJSON&&(t=t.toGeoJSON(e),i?n.push(t.geometry):"FeatureCollection"===(t=Ei(t)).type?n.push.apply(n,t.features):n.push(t))}),i?Ti(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Ai=Di,Oi=ui.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=z(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ie("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),t=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,t,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();me(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ii=Oi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ie("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=p(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],r=0;r<i.length;r++)n.push(i[r].src);this._url=0<i.length?n:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=ie("source");a.src=this._url[o],e.appendChild(a)}}}}),Bi=Oi.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=c,t.onmousemove=c}}),Ri=ui.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(p(ne,void 0,this._container),200)):ne(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof ui||(i=e,e=t),e instanceof pi)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,i;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),i=O(this.options.offset),e=this._getAnchor(),this._zoomAnimated?me(this._container,t.add(e)):i=i.add(t).add(e),e=this._containerBottom=-i.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+i.x,this._container.style.bottom=e+"px",this._container.style.left=i+"px")},_getAnchor:function(){return[0,0]}}),zi=Ri.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Ri.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vi||this._source.on("preclick",Pe))},onRemove:function(t){Ri.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vi||this._source.off("preclick",Pe))},getEvents:function(){var t=Ri.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ie("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ie("div",t+"-content-wrapper",e);this._contentNode=ie("div",t+"-content",i),Ee(i),Te(this._contentNode),we(i,"contextmenu",Pe),this._tipContainer=ie("div",t+"-tip-container",e),this._tip=ie("div",t+"-tip",this._tipContainer),this.options.closeButton&&((e=this._closeButton=ie("a",t+"-close-button",e)).href="#close",e.innerHTML="&#215;",we(e,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth,i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,r=this.options.maxHeight,i="leaflet-popup-scrolled";r&&r<n?(e.height=r+"px",le(t,i)):ce(t,i),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),t=this._getAnchor();me(this._container,e.add(t))},_adjustPan:function(){var t,e,i,n,r,o,a,s,l;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,a=parseInt(ee(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+a,i=this._containerWidth,(s=new D(this._containerLeft,-e-this._containerBottom))._add(ge(this._container)),n=t.layerPointToContainerPoint(s),l=O(this.options.autoPanPadding),r=O(this.options.autoPanPaddingTopLeft||l),o=O(this.options.autoPanPaddingBottomRight||l),a=t.getSize(),l=s=0,n.x+i+o.x>a.x&&(s=n.x+i-a.x+o.x),n.x-s-r.x<0&&(s=n.x-r.x),n.y+e+o.y>a.y&&(l=n.y+e-a.y+o.y),n.y-l-r.y<0&&(l=n.y-r.y),(s||l)&&t.fire("autopanstart").panBy([s,l]))},_onCloseButtonClick:function(t){this._close(),Ae(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(t,e,i){return t instanceof zi||(t=new zi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ui.include({bindPopup:function(t,e){return t instanceof zi?(d(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new zi(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ae(t),e instanceof vi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Fi=Ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Ri.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Ri.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Ri.prototype.getEvents.call(this);return _t&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ie("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,a=i.offsetWidth,s=i.offsetHeight,l=O(this.options.offset),e=this._getAnchor();t="top"===o?t.add(O(-a/2+l.x,-s+l.y+e.y,!0)):"bottom"===o?t.subtract(O(a/2-l.x,-l.y,!0)):"center"===o?t.subtract(O(a/2+l.x,s/2-e.y+l.y,!0)):"right"===o||"auto"===o&&r.x<n.x?(o="right",t.add(O(l.x+e.x,e.y-s/2+l.y,!0))):(o="left",t.subtract(O(a+e.x-l.x,s/2-e.y-l.y,!0))),ce(i,"leaflet-tooltip-right"),ce(i,"leaflet-tooltip-left"),ce(i,"leaflet-tooltip-top"),ce(i,"leaflet-tooltip-bottom"),le(i,"leaflet-tooltip-"+o),me(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pe(this._container,t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(t)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});He.include({openTooltip:function(t,e,i){return t instanceof Fi||(t=new Fi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ui.include({bindTooltip:function(t,e){return t instanceof Fi?(d(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new Fi(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,i;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),_t&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ce(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(t=this._map.mouseEventToContainerPoint(t.originalEvent),t=this._map.containerPointToLayerPoint(t),e=this._map.layerPointToLatLng(t)),this._tooltip.setLatLng(e)}});var Ni=di.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),t=this.options;return t.html instanceof Element?(re(e),e.appendChild(t.html)):e.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=O(t.bgPos),e.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});di.Default=fi;var ji=ui.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ft,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ne(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof D?t:new D(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){pe(this._container,this.options.opacity);var t,e=+new Date,i=!1,n=!1;for(t in this._tiles){var r,o=this._tiles[t];o.current&&o.loaded&&(r=Math.min(1,(e-o.loaded)/200),pe(o.el,r),r<1?i=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0))}n&&!this._noPrune&&this._pruneTiles(),i&&(S(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ne(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],r=this._map;return n||((n=this._levels[t]={}).el=ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(i=this._tiles[t]).retain=i.current;for(t in this._tiles)(i=this._tiles[t]).current&&!i.active&&(e=i.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ne(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),t=Math.floor(e/2),e=i-1,i=new D(+r,+t);i.z=+e;i=this._tileCoordsToKey(i),i=this._tiles[i];return i&&i.active?i.retain=!0:(i&&i.loaded&&(i.retain=!0),n<e&&this._retainParent(r,t,e,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new D(r,o);a.z=i+1;a=this._tileCoordsToKey(a),a=this._tiles[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),i=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();dt?fe(t.el,i,n):me(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(i,this._tileZoom),t=e.project(t,this._tileZoom).floor(),i=e.getSize().divideBy(2*i);return new I(t.subtract(i),t.add(i))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n,e=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(e),o=r.getCenter(),a=[],e=this.options.keepBuffer,s=new I(r.getBottomLeft().subtract([e,-e]),r.getTopRight().add([e,-e]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var l=this._tiles[n].coords;l.z===this._tileZoom&&s.contains(new D(l.x,l.y))||(this._tiles[n].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var c=r.min.y;c<=r.max.y;c++)for(var u=r.min.x;u<=r.max.x;u++){var h,p=new D(u,c);p.z=this._tileZoom,this._isValidTile(p)&&((h=this._tiles[this._tileCoordsToKey(p)])?h.current=!0:a.push(p))}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));for(var d=document.createDocumentFragment(),u=0;u<a.length;u++)this._addTile(a[u],d);this._level.el.appendChild(d)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;t=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),i=n.add(i);return[e.unproject(n,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){t=this._tileCoordsToNwSe(t),t=new R(t[0],t[1]);return t=!this.options.noWrap?this._map.wrapLatLngBounds(t):t},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),t=new D(+e[0],+e[1]);return t.z=+e[2],t},_removeTile:function(t){var e=this._tiles[t];e&&(ne(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,J&&this.options.opacity<1&&pe(t,this.options.opacity),Q&&!tt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&C(p(this._tileReady,this,t,null,r)),me(r,i),this._tiles[n]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(pe(i.el,0),S(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(le(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new D(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Ui=ji.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&bt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Q||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return we(i,"load",p(this._tileOnLoad,this,e,i)),we(i,"error",p(this._tileOnError,this,e,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:bt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(t=this._globalTileRange.max.y-t.y,this.options.tms&&(e.y=t),e["-y"]=t),g(this._url,l(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return(t=this.options.zoomReverse?e-t:t)+this.options.zoomOffset},_getSubdomain:function(t){t=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=y,ne(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return it||e.el.setAttribute("src",y),ji.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return ji.prototype._tileReady.call(this,t,e,i)}});function Hi(t,e){return new Ui(t,e)}var Gi=Ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i,n=l({},this.defaultWmsParams);for(i in e)i in this.options||(n[i]=e[i]);var r=(e=d(this,e)).detectRetina&&bt?2:1,t=this.getTileSize();n.width=t.x*r,n.height=t.y*r,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,Ui.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,i=B(i.project(e[0]),i.project(e[1])),e=i.min,i=i.max,i=(1.3<=this._wmsVersion&&this._crs===ci?[e.y,e.x,i.y,i.x]:[e.x,e.y,i.x,i.y]).join(","),t=Ui.prototype.getTileUrl.call(this,t);return t+f(this.wmsParams,t,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});Ui.WMS=Gi,Hi.wms=function(t,e){return new Gi(t,e)};var Zi=ui.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=ge(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),o=this._map.project(t,e).subtract(o),o=r.multiplyBy(-i).add(n).add(r).subtract(o);dt?fe(this._container,o,i):me(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wi=Zi.extend({getEvents:function(){var t=Zi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");we(t,"mousemove",this._onMouseMove,this),we(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,ne(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,i,n;this._map._animatingZoom&&this._bounds||(Zi.prototype._update.call(this),t=this._bounds,e=this._container,i=t.getSize(),n=bt?2:1,me(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",bt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){Zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);t=(this._layers[s(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,e=e.prev;i?i.prev=e:this._drawLast=e,e?e.next=i:this._drawFirst=i,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,i=t.options.dashArray.split(/[, ]+/),n=[],r=0;r<i.length;r++){if(e=Number(i[r]),isNaN(e))return;n.push(e)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e,i=this._redrawBounds;this._ctx.save(),i&&(e=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)o=a[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){var e,i,n,r;this._drawing&&!t._empty()&&(e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),1!=(r=(Math.max(Math.round(t._radiusY),1)||n)/n)&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!=r&&i.restore(),this._fillStroke(i,t))},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(Fe(t),this._fireEvent([i],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ce(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(le(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e,i,n=t._order;n&&(e=n.next,i=n.prev,e&&((e.prev=i)?i.next=e:e&&(this._drawFirst=e),n.prev=this._drawLast,(this._drawLast.next=n).next=null,this._drawLast=n,this._requestRedraw(t)))},_bringToBack:function(t){var e,i,n=t._order;n&&(e=n.next,(i=n.prev)&&((i.next=e)?e.prev=i:i&&(this._drawLast=i),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)))}});function Vi(t){return kt?new Wi(t):null}var qi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),gt={_initContainer:function(){this._container=ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qi("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ne(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e=e||(t._stroke=qi("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i=i||(t._fill=qi("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){ae(t._container)}},$i=Lt?qi:q,Yi=Zi.extend({getEvents:function(){var t=Zi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=$i("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$i("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,i;this._map._animatingZoom&&this._bounds||(Zi.prototype._update.call(this),e=(t=this._bounds).getSize(),i=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),me(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=$i("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ne(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,t=t.options;e&&(t.stroke?(e.setAttribute("stroke",t.color),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("stroke-width",t.weight),e.setAttribute("stroke-linecap",t.lineCap),e.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?e.setAttribute("stroke-dasharray",t.dashArray):e.removeAttribute("stroke-dasharray"),t.dashOffset?e.setAttribute("stroke-dashoffset",t.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),t.fill?(e.setAttribute("fill",t.fillColor||t.color),e.setAttribute("fill-opacity",t.fillOpacity),e.setAttribute("fill-rule",t.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){ae(t._path)}});function Ji(t){return wt||Lt?new Yi(t):null}Lt&&Yi.include(gt),He.include({getRenderer:function(t){t=(t=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Vi(t)||Ji(t)}});var Ki=xi.extend({initialize:function(t,e){xi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Yi.create=$i,Yi.pointsToPath=$,ki.geometryToLayer=wi,ki.coordsToLatLng=Mi,ki.coordsToLatLngs=Ci,ki.latLngToCoords=Si,ki.latLngsToCoords=Pi,ki.getFeature=Ti,ki.asFeature=Ei,He.mergeOptions({boxZoom:!0}),et=lt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Wt(),ve(),this._startPoint=this._map.mouseEventToContainerPoint(t),we(document,{contextmenu:Ae,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ie("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),t=e.getSize();me(this._box,e.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},_finish:function(){this._moved&&(ne(this._box),ce(this._container,"leaflet-crosshair")),Vt(),_e(),Me(document,{contextmenu:Ae,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0),t=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),He.addInitHook("addHandler","boxZoom",et),He.mergeOptions({doubleClickZoom:!0}),W=lt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,n=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),He.addInitHook("addHandler","doubleClickZoom",W),He.mergeOptions({dragging:!0,inertia:!tt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),V=lt.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new Xe(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=z(this._map.options.maxBounds),this._offsetLimit=B(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,i;this._map.options.inertia&&(e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(i),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,e=(n+e+i)%t-e-i,e=Math.abs(r+i)<Math.abs(e+i)?r:e;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=e},_onDragEnd:function(t){var e,i,n,r,o=this._map,a=o.options,s=!a.inertia||this._times.length<2;o.fire("dragend",t),s?o.fire("moveend"):(this._prunePositions(+new Date),i=this._lastPos.subtract(this._positions[0]),t=(this._lastTime-this._times[0])/1e3,e=a.easeLinearity,i=(s=i.multiplyBy(e/t)).distanceTo([0,0]),t=Math.min(a.inertiaMaxSpeed,i),i=s.multiplyBy(t/i),n=t/(a.inertiaDeceleration*e),(r=i.multiplyBy(-n/2).round()).x||r.y?(r=o._limitOffset(r,o.options.maxBounds),C(function(){o.panBy(r,{duration:n,easeLinearity:e,noMoveStart:!0,animate:!0})})):o.fire("moveend"))}}),He.addInitHook("addHandler","dragging",V),He.mergeOptions({keyboard:!0,keyboardPanDelta:80}),ct=lt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),we(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,i;this._focused||(t=document.body,i=document.documentElement,e=t.scrollTop||i.scrollTop,i=t.scrollLeft||i.scrollLeft,this._map._container.focus(),window.scrollTo(i,e))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},i=this.keyCodes,n=0,r=i.left.length;n<r;n++)e[i.left[n]]=[-1*t,0];for(n=0,r=i.right.length;n<r;n++)e[i.right[n]]=[t,0];for(n=0,r=i.down.length;n<r;n++)e[i.down[n]]=[0,t];for(n=0,r=i.up.length;n<r;n++)e[i.up[n]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},i=this.keyCodes,n=0,r=i.zoomIn.length;n<r;n++)e[i.zoomIn[n]]=t;for(n=0,r=i.zoomOut.length;n<r;n++)e[i.zoomOut[n]]=-t},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=O(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Ae(t)}}}),He.addInitHook("addHandler","keyboard",ct),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),ot=lt.extend({addHooks:function(){we(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Be(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);i=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),i),Ae(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,n=i?Math.ceil(n/i)*i:n,n=t._limitZoom(e+(0<this._delta?n:-n))-e;this._delta=0,this._startTime=null,n&&("center"===t.options.scrollWheelZoom?t.setZoom(e+n):t.setZoomAround(this._lastMousePos,e+n))}}),He.addInitHook("addHandler","scrollWheelZoom",ot),He.mergeOptions({tap:!0,tapTolerance:15}),ft=lt.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],t=e.target;this._startPos=this._newPos=new D(e.clientX,e.clientY),t.tagName&&"a"===t.tagName.toLowerCase()&&le(t,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),we(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e;clearTimeout(this._holdTimeout),Me(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((t=(e=t.changedTouches[0]).target)&&t.tagName&&"a"===t.tagName.toLowerCase()&&ce(t,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){t=t.touches[0];this._newPos=new D(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}),_t&&!vt&&He.addInitHook("addHandler","tap",ft),He.mergeOptions({touchZoom:_t&&!tt,bounceAtZoomLimits:!0}),gt=lt.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,i,n=this._map;!t.touches||2!==t.touches.length||n._animatingZoom||this._zooming||(e=n.mouseEventToContainerPoint(t.touches[0]),i=n.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(e.add(i)._divideBy(2))),this._startDist=e.distanceTo(i),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend",this._onTouchEnd,this),De(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),r=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&1<r)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==r)return}else{n=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==r&&0===n.x&&0===n.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(n),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);e=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=C(e,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Me(document,"touchmove",this._onTouchMove),Me(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),He.addInitHook("addHandler","touchZoom",gt),He.BoxZoom=et,He.DoubleClickZoom=W,He.Drag=V,He.Keyboard=ct,He.ScrollWheelZoom=ot,He.Tap=ft,He.TouchZoom=gt,Object.freeze=e,t.version="1.6.0",t.Control=Ge,t.control=st,t.Browser=Ct,t.Evented=E,t.Mixin=ht,t.Util=P,t.Class=T,t.Handler=lt,t.extend=l,t.bind=p,t.stamp=s,t.setOptions=d,t.DomEvent=nt,t.DomUtil=X,t.PosAnimation=Ue,t.Draggable=Xe,t.LineUtil=pt,t.PolyUtil=mt,t.Point=D,t.point=O,t.Bounds=I,t.bounds=B,t.Transformation=G,t.transformation=Z,t.Projection=Y,t.LatLng=F,t.latLng=N,t.LatLngBounds=R,t.latLngBounds=z,t.CRS=j,t.GeoJSON=ki,t.geoJSON=Di,t.geoJson=Ai,t.Layer=ui,t.LayerGroup=hi,t.layerGroup=function(t,e){return new hi(t,e)},t.FeatureGroup=pi,t.featureGroup=function(t){return new pi(t)},t.ImageOverlay=Oi,t.imageOverlay=function(t,e,i){return new Oi(t,e,i)},t.VideoOverlay=Ii,t.videoOverlay=function(t,e,i){return new Ii(t,e,i)},t.SVGOverlay=Bi,t.svgOverlay=function(t,e,i){return new Bi(t,e,i)},t.DivOverlay=Ri,t.Popup=zi,t.popup=function(t,e){return new zi(t,e)},t.Tooltip=Fi,t.tooltip=function(t,e){return new Fi(t,e)},t.Icon=di,t.icon=function(t){return new di(t)},t.DivIcon=Ni,t.divIcon=function(t){return new Ni(t)},t.Marker=gi,t.marker=function(t,e){return new gi(t,e)},t.TileLayer=Ui,t.tileLayer=Hi,t.GridLayer=ji,t.gridLayer=function(t){return new ji(t)},t.SVG=Yi,t.svg=Ji,t.Renderer=Zi,t.Canvas=Wi,t.canvas=Vi,t.Path=vi,t.CircleMarker=_i,t.circleMarker=function(t,e){return new _i(t,e)},t.Circle=yi,t.circle=function(t,e,i){return new yi(t,e,i)},t.Polyline=bi,t.polyline=function(t,e){return new bi(t,e)},t.Polygon=xi,t.polygon=function(t,e){return new xi(t,e)},t.Rectangle=Ki,t.rectangle=function(t,e){return new Ki(t,e)},t.Map=He,t.map=function(t,e){return new He(t,e)};var Xi=window.L;t.noConflict=function(){return window.L=Xi,this},window.L=t}(e)},6492:function(){},7653:function(){},4111:function(){},4528:function(){},6145:function(){},1170:function(){},3336:function(){},3981:function(){},2559:function(){},7615:function(){},2171:function(){},1909:function(){},434:function(){},3067:function(){},2189:function(){},5964:function(){},4301:function(){},7344:function(){},7252:function(){},6192:function(t,e){var i,n,r=function(){function n(t,e){function a(t,e){u=function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var n=0;n<t;n+=1)e[i][n]=null}return e}(h=4*s+17),i(0,0),i(h-7,0),i(0,h-7),o(),r(),f(t,e),7<=s&&p(t),null==n&&(n=g(s,l,c)),m(n,e)}var s=t,l=_[e],u=null,h=0,n=null,c=[],d={},i=function(t,e){for(var i=-1;i<=7;i+=1)if(!(t+i<=-1||h<=t+i))for(var n=-1;n<=7;n+=1)e+n<=-1||h<=e+n||(u[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},r=function(){for(var t=8;t<h-8;t+=1)null==u[t][6]&&(u[t][6]=t%2==0);for(var e=8;e<h-8;e+=1)null==u[6][e]&&(u[6][e]=e%2==0)},o=function(){for(var t=y.getPatternPosition(s),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var n=t[e],r=t[i];if(null==u[n][r])for(var o=-2;o<=2;o+=1)for(var a=-2;a<=2;a+=1)u[n+o][r+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},p=function(t){for(var e=y.getBCHTypeNumber(s),i=0;i<18;i+=1){var n=!t&&1==(e>>i&1);u[Math.floor(i/3)][i%3+h-8-3]=n}for(i=0;i<18;i+=1){n=!t&&1==(e>>i&1);u[i%3+h-8-3][Math.floor(i/3)]=n}},f=function(t,e){for(var e=l<<3|e,i=y.getBCHTypeInfo(e),n=0;n<15;n+=1){var r=!t&&1==(i>>n&1);n<6?u[n][8]=r:n<8?u[n+1][8]=r:u[h-15+n][8]=r}for(n=0;n<15;n+=1){r=!t&&1==(i>>n&1);n<8?u[8][h-n-1]=r:n<9?u[8][15-n-1+1]=r:u[8][15-n-1]=r}u[h-8][8]=!t},m=function(t,e){for(var i=-1,n=h-1,r=7,o=0,a=y.getMaskFunction(e),s=h-1;0<s;s-=2)for(6==s&&--s;;){for(var l,c=0;c<2;c+=1)null==u[n][s-c]&&(l=!1,o<t.length&&(l=1==(t[o]>>>r&1)),a(n,s-c)&&(l=!l),u[n][s-c]=l,-1==--r&&(o+=1,r=7));if((n+=i)<0||h<=n){n-=i,i=-i;break}}},g=function(t,e,i){for(var n=L.getRSBlocks(t,e),r=M(),o=0;o<i.length;o+=1){var a=i[o];r.put(a.getMode(),4),r.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(r)}for(var s=0,o=0;o<n.length;o+=1)s+=n[o].dataCount;if(r.getLengthInBits()>8*s)throw"code length overflow. ("+r.getLengthInBits()+">"+8*s+")";for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(236,8),r.getLengthInBits()>=8*s));)r.put(17,8);return function(t,e){for(var i=0,n=0,r=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l,n=Math.max(n,l),r=Math.max(r,c);o[s]=new Array(l);for(var u=0;u<o[s].length;u+=1)o[s][u]=255&t.getBuffer()[u+i];i+=l;var c=y.getErrorCorrectPolynomial(c),h=b(o[s],c.getLength()-1).mod(c);a[s]=new Array(c.getLength()-1);for(u=0;u<a[s].length;u+=1){var p=u+h.getLength()-a[s].length;a[s][u]=0<=p?h.getAt(p):0}}for(var d=0,u=0;u<e.length;u+=1)d+=e[u].totalCount;for(var f=new Array(d),m=0,u=0;u<n;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(f[m]=o[s][u],m+=1);for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(f[m]=a[s][u],m+=1);return f}(r,n)};d.addData=function(t,e){var i=null;switch(e=e||"Byte"){case"Numeric":i=C(t);break;case"Alphanumeric":i=S(t);break;case"Byte":i=P(t);break;case"Kanji":i=T(t);break;default:throw"mode:"+e}c.push(i),n=null},d.isDark=function(t,e){if(t<0||h<=t||e<0||h<=e)throw t+","+e;return u[t][e]},d.getModuleCount=function(){return h},d.make=function(){if(s<1){for(var t=1;t<40;t++){for(var e=L.getRSBlocks(t,l),i=M(),n=0;n<c.length;n++){var r=c[n];i.put(r.getMode(),4),i.put(r.getLength(),y.getLengthInBits(r.getMode(),t)),r.write(i)}for(var o=0,n=0;n<e.length;n++)o+=e[n].dataCount;if(i.getLengthInBits()<=8*o)break}s=t}a(!1,function(){for(var t=0,e=0,i=0;i<8;i+=1){a(!0,i);var n=y.getLostPoint(d);(0==i||n<t)&&(t=n,e=i)}return e}())},d.createTableTag=function(t,e){t=t||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",i+='">',i+="<tbody>";for(var n=0;n<d.getModuleCount();n+=1){i+="<tr>";for(var r=0;r<d.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=d.isDark(n,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},d.createSvgTag=function(t,e,i,n){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,i=r.alt,n=r.title),t=t||2,e=void 0===e?4*t:e,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var o,a,s,l=d.getModuleCount()*t+2*e,c="",u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(c+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',c+=r.scalable?"":' width="'+l+'px" height="'+l+'px"',c+=' viewBox="0 0 '+l+" "+l+'" ',c+=' preserveAspectRatio="xMinYMin meet"',c+=n.text||i.text?' role="img" aria-labelledby="'+v([n.id,i.id].join(" ").trim())+'"':"",c+=">",c+=n.text?'<title id="'+v(n.id)+'">'+v(n.text)+"</title>":"",c+=i.text?'<description id="'+v(i.id)+'">'+v(i.text)+"</description>":"",c+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',c+='<path d="',a=0;a<d.getModuleCount();a+=1)for(s=a*t+e,o=0;o<d.getModuleCount();o+=1)d.isDark(a,o)&&(c+="M"+(o*t+e)+","+s+u);return c+='" stroke="transparent" fill="black"/>',c+="</svg>"},d.createDataURL=function(i,t){i=i||2,t=void 0===t?4*i:t;var e=d.getModuleCount()*i+2*t,n=t,r=e-t;return D(e,e,function(t,e){if(n<=t&&t<r&&n<=e&&e<r){t=Math.floor((t-n)/i),e=Math.floor((e-n)/i);return d.isDark(e,t)?0:1}return 1})},d.createImgTag=function(t,e,i){t=t||2,e=void 0===e?4*t:e;var n=d.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=d.createDataURL(t,e),r+='"',r+=' width="',r+=n,r+='"',r+=' height="',r+=n,r+='"',i&&(r+=' alt="',r+=v(i),r+='"'),r+="/>"};var v=function(t){for(var e="",i=0;i<t.length;i+=1){var n=t.charAt(i);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return d.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;for(var e,i,n,r,o=+d.getModuleCount()+2*t,a=t,s=o-t,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},c={"██":"▀","█ ":"▀"," █":" ","  ":" "},u="",h=0;h<o;h+=2){for(i=Math.floor(h-a),n=Math.floor(h+1-a),e=0;e<o;e+=1)r="█",a<=e&&e<s&&a<=h&&h<s&&d.isDark(i,Math.floor(e-a))&&(r=" "),a<=e&&e<s&&a<=h+1&&h+1<s&&d.isDark(n,Math.floor(e-a))?r+=" ":r+="█",u+=(t<1&&s<=h+1?c:l)[r];u+="\n"}return o%2&&0<t?u.substring(0,u.length-o-1)+Array(1+o).join("▀"):u.substring(0,u.length-1)}(e);--t,e=void 0===e?2*t:e;for(var i,n,r,o=d.getModuleCount()*t+2*e,a=e,s=o-e,l=Array(t+1).join("██"),c=Array(t+1).join("  "),u="",h="",p=0;p<o;p+=1){for(n=Math.floor((p-a)/t),h="",i=0;i<o;i+=1)r=1,h+=(r=a<=i&&i<s&&a<=p&&p<s&&d.isDark(n,Math.floor((i-a)/t))?0:r)?l:c;for(n=0;n<t;n+=1)u+=h+"\n"}return u.substring(0,u.length-1)},d.renderTo2dContext=function(t,e){e=e||2;for(var i=d.getModuleCount(),n=0;n<i;n++)for(var r=0;r<i;r++)t.fillStyle=d.isDark(n,r)?"black":"white",t.fillRect(n*e,r*e,e,e)},d}n.stringToBytes=(n.stringToBytesFuncs={default:function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e.push(255&n)}return e}}).default,n.createStringToBytes=function(s,l){var r=function(){function t(){var t=e.read();if(-1==t)throw"eof";return t}for(var e=E(s),i=0,n={};;){var r=e.read();if(-1==r)break;var o=t(),a=t()<<8|t();n[String.fromCharCode(r<<8|o)]=a,i+=1}if(i!=l)throw i+" != "+l;return n}(),o="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);n<128?e.push(n):"number"==typeof(n=r[t.charAt(i)])?(255&n)==n?e.push(n):(e.push(n>>>8),e.push(255&n)):e.push(o)}return e}};var e,i=1,o=2,r=4,a=8,_={L:1,M:0,Q:3,H:2},s=0,l=1,c=2,u=3,h=4,p=5,d=6,f=7,y=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],(t={}).getBCHTypeInfo=function(t){for(var e=t<<10;0<=m(e)-m(1335);)e^=1335<<m(e)-m(1335);return 21522^(t<<10|e)},t.getBCHTypeNumber=function(t){for(var e=t<<12;0<=m(e)-m(7973);)e^=7973<<m(e)-m(7973);return t<<12|e},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(t){switch(t){case s:return function(t,e){return(t+e)%2==0};case l:return function(t,e){return t%2==0};case c:return function(t,e){return e%3==0};case u:return function(t,e){return(t+e)%3==0};case h:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case p:return function(t,e){return t*e%2+t*e%3==0};case d:return function(t,e){return(t*e%2+t*e%3)%2==0};case f:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},t.getErrorCorrectPolynomial=function(t){for(var e=b([1],0),i=0;i<t;i+=1)e=e.multiply(b([1,g.gexp(i)],0));return e},t.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case i:return 10;case o:return 9;case r:case a:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case i:return 12;case o:return 11;case r:return 16;case a:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case i:return 14;case o:return 13;case r:return 16;case a:return 12;default:throw"mode:"+t}}},t.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;n<e;n+=1)for(var r=0;r<e;r+=1){for(var o=0,a=t.isDark(n,r),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l+=1)r+l<0||e<=r+l||0==s&&0==l||a==t.isDark(n+s,r+l)&&(o+=1);5<o&&(i+=3+o-5)}for(n=0;n<e-1;n+=1)for(r=0;r<e-1;r+=1){var c=0;t.isDark(n,r)&&(c+=1),t.isDark(n+1,r)&&(c+=1),t.isDark(n,r+1)&&(c+=1),t.isDark(n+1,r+1)&&(c+=1),0!=c&&4!=c||(i+=3)}for(n=0;n<e;n+=1)for(r=0;r<e-6;r+=1)t.isDark(n,r)&&!t.isDark(n,r+1)&&t.isDark(n,r+2)&&t.isDark(n,r+3)&&t.isDark(n,r+4)&&!t.isDark(n,r+5)&&t.isDark(n,r+6)&&(i+=40);for(r=0;r<e;r+=1)for(n=0;n<e-6;n+=1)t.isDark(n,r)&&!t.isDark(n+1,r)&&t.isDark(n+2,r)&&t.isDark(n+3,r)&&t.isDark(n+4,r)&&!t.isDark(n+5,r)&&t.isDark(n+6,r)&&(i+=40);for(var u=0,r=0;r<e;r+=1)for(n=0;n<e;n+=1)t.isDark(n,r)&&(u+=1);return i+=10*(Math.abs(100*u/e/e-50)/5)},t);function m(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e}var g=function(){for(var e=new Array(256),i=new Array(256),t=0;t<8;t+=1)e[t]=1<<t;for(t=8;t<256;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;t<255;t+=1)i[e[t]]=t;var n={glog:function(t){if(t<1)throw"glog("+t+")";return i[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return e[t]}};return n}();function b(n,r){if(void 0===n.length)throw n.length+"/"+r;var e=function(){for(var t=0;t<n.length&&0==n[t];)t+=1;for(var e=new Array(n.length-t+r),i=0;i<n.length-t;i+=1)e[i]=n[i+t];return e}(),o={getAt:function(t){return e[t]},getLength:function(){return e.length},multiply:function(t){for(var e=new Array(o.getLength()+t.getLength()-1),i=0;i<o.getLength();i+=1)for(var n=0;n<t.getLength();n+=1)e[i+n]^=g.gexp(g.glog(o.getAt(i))+g.glog(t.getAt(n)));return b(e,0)},mod:function(t){if(o.getLength()-t.getLength()<0)return o;for(var e=g.glog(o.getAt(0))-g.glog(t.getAt(0)),i=new Array(o.getLength()),n=0;n<o.getLength();n+=1)i[n]=o.getAt(n);for(n=0;n<t.getLength();n+=1)i[n]^=g.gexp(g.glog(t.getAt(n))+e);return b(i,0).mod(t)}};return o}function v(){var i=[],r={writeByte:function(t){i.push(255&t)},writeShort:function(t){r.writeByte(t),r.writeByte(t>>>8)},writeBytes:function(t,e,i){e=e||0,i=i||t.length;for(var n=0;n<i;n+=1)r.writeByte(t[n+e])},writeString:function(t){for(var e=0;e<t.length;e+=1)r.writeByte(t.charCodeAt(e))},toByteArray:function(){return i},toString:function(){var t="";t+="[";for(var e=0;e<i.length;e+=1)0<e&&(t+=","),t+=i[e];return t+="]"}};return r}function x(){function i(t){a+=String.fromCharCode(e(63&t))}var n=0,r=0,o=0,a="",t={},e=function(t){if(!(t<0)){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return t.writeByte=function(t){for(n=n<<8|255&t,r+=8,o+=1;6<=r;)i(n>>>r-6),r-=6},t.flush=function(){if(0<r&&(i(n<<6-r),r=n=0),o%3!=0)for(var t=3-o%3,e=0;e<t;e+=1)a+="="},t.toString=function(){return a},t}function k(t,e){var n=t,r=e,d=new Array(t*e),e={setPixel:function(t,e,i){d[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=o(2);t.writeByte(2);for(var i=0;255<e.length-i;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,i=1+(1<<t),n=t+1,r=f(),o=0;o<e;o+=1)r.add(String.fromCharCode(o));r.add(String.fromCharCode(e)),r.add(String.fromCharCode(i));var a,s,l,t=v(),c=(a=t,l=s=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;8<=s+e;)a.writeByte(255&(t<<s|l)),e-=8-s,t>>>=8-s,s=l=0;l|=t<<s,s+=e},flush:function(){0<s&&a.writeByte(l)}});c.write(e,n);var u=0,h=String.fromCharCode(d[u]);for(u+=1;u<d.length;){var p=String.fromCharCode(d[u]);u+=1,r.contains(h+p)?h+=p:(c.write(r.indexOf(h),n),r.size()<4095&&(r.size()==1<<n&&(n+=1),r.add(h+p)),h=p)}return c.write(r.indexOf(h),n),c.write(i,n),c.flush(),t.toByteArray()},f=function(){var e={},i=0,n={add:function(t){if(n.contains(t))throw"dup key:"+t;e[t]=i,i+=1},size:function(){return i},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return e}var w,t,L=(w=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],(t={}).getRSBlocks=function(t,e){var i=function(t,e){switch(e){case _.L:return w[4*(t-1)+0];case _.M:return w[4*(t-1)+1];case _.Q:return w[4*(t-1)+2];case _.H:return w[4*(t-1)+3];default:return}}(t,e);if(void 0===i)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var n,r,o=i.length/3,a=[],s=0;s<o;s+=1)for(var l=i[3*s+0],c=i[3*s+1],u=i[3*s+2],h=0;h<l;h+=1)a.push((n=u,r=void 0,(r={}).totalCount=c,r.dataCount=n,r));return a},t),M=function(){var i=[],n=0,r={getBuffer:function(){return i},getAt:function(t){var e=Math.floor(t/8);return 1==(i[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return n},putBit:function(t){var e=Math.floor(n/8);i.length<=e&&i.push(0),t&&(i[e]|=128>>>n%8),n+=1}};return r},C=function(t){var e=i,n=t,t={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+2<e.length;)t.put(r(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(r(e.substring(i,i+1)),4):e.length-i==2&&t.put(r(e.substring(i,i+2)),7))}},r=function(t){for(var e=0,i=0;i<t.length;i+=1)e=10*e+o(t.charAt(i));return e},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return t},S=function(t){var e=o,n=t,t={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return t},P=function(t){var e=r,i=n.stringToBytes(t),t={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return t},T=function(t){var e=a,i=n.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(){var t=i("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var r=i(t),t={getMode:function(){return e},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,i=0;i+1<e.length;){var n=(255&e[i])<<8|255&e[i+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(i+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),i+=2}if(i<e.length)throw"illegal char at "+(i+1)}};return t},E=function(t){var i=t,n=0,r=0,o=0,t={read:function(){for(;o<8;){if(n>=i.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=i.charAt(n);if(n+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(r=r<<6|a(t.charCodeAt(0)),o+=6)}var e=r>>>o-8&255;return o-=8,e}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return t},D=function(t,e,i){for(var n=k(t,e),r=0;r<e;r+=1)for(var o=0;o<t;o+=1)n.setPixel(o,r,i(o,r));var a=v();n.write(a);for(var s=x(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return n}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||57344<=n?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},i=[],void 0===(n="function"==typeof(n=function(){return r})?n.apply(e,i):n)||(t.exports=n)},686:function(t,e,i){var n;
/*!
 * Select2 4.0.13
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */n=[i(3609)],void 0===(i="function"==typeof(i=function(i){var t=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd)var e=i.fn.select2.amd;var e;(function(){if(!e||!e.requirejs){if(!e)e={};else r=e;
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var t,r,u;(function(d){var o,a,f,m,g={},v={},_={},y={},i=Object.prototype.hasOwnProperty,n=[].slice,b=/\.js$/;function x(t,e){return i.call(t,e)}function s(t,e){var i,n,r,o,a,s,l,c,u,h,p,d,f=e&&e.split("/"),m=_.map,g=m&&m["*"]||{};if(t){t=t.split("/");a=t.length-1;if(_.nodeIdCompat&&b.test(t[a]))t[a]=t[a].replace(b,"");if(t[0].charAt(0)==="."&&f){d=f.slice(0,f.length-1);t=d.concat(t)}for(u=0;u<t.length;u++){p=t[u];if(p==="."){t.splice(u,1);u-=1}else if(p==="..")if(u===0||u===1&&t[2]===".."||t[u-1]==="..")continue;else if(u>0){t.splice(u-1,2);u-=2}}t=t.join("/")}if((f||g)&&m){i=t.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(f)for(h=f.length;h>0;h-=1){r=m[f.slice(0,h).join("/")];if(r){r=r[n];if(r){o=r;s=u;break}}}if(o)break;if(!l&&g&&g[n]){l=g[n];c=u}}if(!o&&l){o=l;s=c}if(o){i.splice(0,s,o);t=i.join("/")}}return t}function k(e,i){return function(){var t=n.call(arguments,0);if(typeof t[0]!=="string"&&t.length===1)t.push(null);return a.apply(d,t.concat([e,i]))}}function l(e){return function(t){return s(t,e)}}function w(e){return function(t){g[e]=t}}function L(t){if(x(v,t)){var e=v[t];delete v[t];y[t]=true;o.apply(d,e)}if(!x(g,t)&&!x(y,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;if(i>-1){e=t.substring(0,i);t=t.substring(i+1,t.length)}return[e,t]}function M(t){return t?c(t):[]}f=function(t,e){var i,n=c(t),r=n[0],o=e[1];t=n[1];if(r){r=s(r,o);i=L(r)}if(r)if(i&&i.normalize)t=i.normalize(t,l(o));else t=s(t,o);else{t=s(t,o);n=c(t);r=n[0];t=n[1];if(r)i=L(r)}return{f:r?r+"!"+t:t,n:t,pr:r,p:i}};function e(t){return function(){return _&&_.config&&_.config[t]||{}}}m={require:function(t){return k(t)},exports:function(t){var e=g[t];if(typeof e!=="undefined")return e;else return g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:e(t)}}};o=function(t,e,i,n){var r,o,a,s,l,c,u=[],h=typeof i,p;n=n||t;c=M(n);if(h==="undefined"||h==="function"){e=!e.length&&i.length?["require","exports","module"]:e;for(l=0;l<e.length;l+=1){s=f(e[l],c);o=s.f;if(o==="require")u[l]=m.require(t);else if(o==="exports"){u[l]=m.exports(t);p=true}else if(o==="module")r=u[l]=m.module(t);else if(x(g,o)||x(v,o)||x(y,o))u[l]=L(o);else if(s.p){s.p.load(s.n,k(n,true),w(o),{});u[l]=g[o]}else throw new Error(t+" missing "+o)}a=i?i.apply(g[t],u):undefined;if(t)if(r&&r.exports!==d&&r.exports!==g[t])g[t]=r.exports;else if(a!==d||!p)g[t]=a}else if(t)g[t]=i};t=r=a=function(t,e,i,n,r){if(typeof t==="string"){if(m[t])return m[t](e);return L(f(t,M(e)).f)}else if(!t.splice){_=t;if(_.deps)a(_.deps,_.callback);if(!e)return;if(e.splice){t=e;e=i;i=null}else t=d}e=e||function(){};if(typeof i==="function"){i=n;n=r}if(n)o(d,t,e,i);else setTimeout(function(){o(d,t,e,i)},4);return a};a.config=function(t){return a(t)};t._defined=g;u=function(t,e,i){if(typeof t!=="string")throw new Error("See almond README: incorrect module build, no module name");if(!e.splice){i=e;e=[]}if(!x(g,t)&&!x(v,t))v[t]=[t,e,i]};u.amd={jQuery:true}})();e.requirejs=t;e.require=r;e.define=u}})();e.define("almond",function(){});e.define("jquery",[],function(){var t=i||$;if(t==null&&console&&console.error)console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.");return t});e.define("select2/utils",["jquery"],function(o){var r={};r.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var r in e)if(i.call(e,r))t[r]=e[r];n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};function h(t){var e=t.prototype;var i=[];for(var n in e){var r=e[n];if(typeof r!=="function")continue;if(n==="constructor")continue;i.push(n)}return i}r.Decorate=function(n,r){var t=h(r);var e=h(n);function o(){var t=Array.prototype.unshift;var e=r.prototype.constructor.length;var i=n.prototype.constructor;if(e>0){t.call(arguments,n.prototype.constructor);i=r.prototype.constructor}i.apply(this,arguments)}r.displayName=n.displayName;function i(){this.constructor=o}o.prototype=new i;for(var a=0;a<e.length;a++){var s=e[a];o.prototype[s]=n.prototype[s]}var l=function(t){var e=function(){};if(t in o.prototype)e=o.prototype[t];var i=r.prototype[t];return function(){var t=Array.prototype.unshift;t.call(arguments,e);return i.apply(this,arguments)}};for(var c=0;c<t.length;c++){var u=t[c];o.prototype[u]=l(u)}return o};var t=function(){this.listeners={}};t.prototype.on=function(t,e){this.listeners=this.listeners||{};if(t in this.listeners)this.listeners[t].push(e);else this.listeners[t]=[e]};t.prototype.trigger=function(t){var e=Array.prototype.slice;var i=e.call(arguments,1);this.listeners=this.listeners||{};if(i==null)i=[];if(i.length===0)i.push({});i[0]._type=t;if(t in this.listeners)this.invoke(this.listeners[t],e.call(arguments,1));if("*"in this.listeners)this.invoke(this.listeners["*"],arguments)};t.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)};r.Observable=t;r.generateChars=function(t){var e="";for(var i=0;i<t;i++){var n=Math.floor(Math.random()*36);e+=n.toString(36)}return e};r.bind=function(t,e){return function(){t.apply(e,arguments)}};r._convertData=function(t){for(var e in t){var i=e.split("-");var n=t;if(i.length===1)continue;for(var r=0;r<i.length;r++){var o=i[r];o=o.substring(0,1).toLowerCase()+o.substring(1);if(!(o in n))n[o]={};if(r==i.length-1)n[o]=t[e];n=n[o]}delete t[e]}return t};r.hasScroll=function(t,e){var i=o(e);var n=e.style.overflowX;var r=e.style.overflowY;if(n===r&&(r==="hidden"||r==="visible"))return false;if(n==="scroll"||r==="scroll")return true;return i.innerHeight()<e.scrollHeight||i.innerWidth()<e.scrollWidth};r.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof t!=="string")return t;return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})};r.appendMany=function(t,e){if(o.fn.jquery.substr(0,3)==="1.7"){var i=o();o.map(e,function(t){i=i.add(t)});e=i}t.append(e)};r.__cache={};var i=0;r.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");if(e==null)if(t.id){e=t.id;t.setAttribute("data-select2-id",e)}else{t.setAttribute("data-select2-id",++i);e=i.toString()}return e};r.StoreData=function(t,e,i){var n=r.GetUniqueElementId(t);if(!r.__cache[n])r.__cache[n]={};r.__cache[n][e]=i};r.GetData=function(t,e){var i=r.GetUniqueElementId(t);if(e){if(r.__cache[i]){if(r.__cache[i][e]!=null)return r.__cache[i][e];return o(t).data(e)}return o(t).data(e)}else return r.__cache[i]};r.RemoveData=function(t){var e=r.GetUniqueElementId(t);if(r.__cache[e]!=null)delete r.__cache[e];t.removeAttribute("data-select2-id")};return r});e.define("select2/results",["jquery","./utils"],function(f,m){function n(t,e,i){this.$element=t;this.data=i;this.options=e;n.__super__.constructor.call(this)}m.Extend(n,m.Observable);n.prototype.render=function(){var t=f('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple"))t.attr("aria-multiselectable","true");this.$results=t;return t};n.prototype.clear=function(){this.$results.empty()};n.prototype.displayMessage=function(t){var e=this.options.get("escapeMarkup");this.clear();this.hideLoading();var i=f('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var n=this.options.get("translations").get(t.message);i.append(e(n(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)};n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};n.prototype.append=function(t){this.hideLoading();var e=[];if(t.results==null||t.results.length===0){if(this.$results.children().length===0)this.trigger("results:message",{message:"noResults"});return}t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i];var r=this.option(n);e.push(r)}this.$results.append(e)};n.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)};n.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)};n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]");var e=t.filter("[aria-selected=true]");if(e.length>0)e.first().trigger("mouseenter");else t.first().trigger("mouseenter");this.ensureHighlightVisible()};n.prototype.setClasses=function(){var i=this;this.data.current(function(t){var n=f.map(t,function(t){return t.id.toString()});var e=i.$results.find(".select2-results__option[aria-selected]");e.each(function(){var t=f(this);var e=m.GetData(this,"data");var i=""+e.id;if(e.element!=null&&e.element.selected||e.element==null&&f.inArray(i,n)>-1)t.attr("aria-selected","true");else t.attr("aria-selected","false")})})};n.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:e(t)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};n.prototype.option=function(t){var e=document.createElement("li");e.className="select2-results__option";var i={role:"option","aria-selected":"false"};var n=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(t.element!=null&&n.call(t.element,":disabled")||t.element==null&&t.disabled){delete i["aria-selected"];i["aria-disabled"]="true"}if(t.id==null)delete i["aria-selected"];if(t._resultId!=null)e.id=t._resultId;if(t.title)e.title=t.title;if(t.children){i.role="group";i["aria-label"]=t.text;delete i["aria-selected"]}for(var r in i){var o=i[r];e.setAttribute(r,o)}if(t.children){var a=f(e);var s=document.createElement("strong");s.className="select2-results__group";var l=f(s);this.template(t,s);var c=[];for(var u=0;u<t.children.length;u++){var h=t.children[u];var p=this.option(h);c.push(p)}var d=f("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(c);a.append(s);a.append(d)}else this.template(t,e);m.StoreData(e,"data",t);return e};n.prototype.bind=function(e,t){var l=this;var i=e.id+"-results";this.$results.attr("id",i);e.on("results:all",function(t){l.clear();l.append(t.data);if(e.isOpen()){l.setClasses();l.highlightFirstItem()}});e.on("results:append",function(t){l.append(t.data);if(e.isOpen())l.setClasses()});e.on("query",function(t){l.hideMessages();l.showLoading(t)});e.on("select",function(){if(!e.isOpen())return;l.setClasses();if(l.options.get("scrollAfterSelect"))l.highlightFirstItem()});e.on("unselect",function(){if(!e.isOpen())return;l.setClasses();if(l.options.get("scrollAfterSelect"))l.highlightFirstItem()});e.on("open",function(){l.$results.attr("aria-expanded","true");l.$results.attr("aria-hidden","false");l.setClasses();l.ensureHighlightVisible()});e.on("close",function(){l.$results.attr("aria-expanded","false");l.$results.attr("aria-hidden","true");l.$results.removeAttr("aria-activedescendant")});e.on("results:toggle",function(){var t=l.getHighlightedResults();if(t.length===0)return;t.trigger("mouseup")});e.on("results:select",function(){var t=l.getHighlightedResults();if(t.length===0)return;var e=m.GetData(t[0],"data");if(t.attr("aria-selected")=="true")l.trigger("close",{});else l.trigger("select",{data:e})});e.on("results:previous",function(){var t=l.getHighlightedResults();var e=l.$results.find("[aria-selected]");var i=e.index(t);if(i<=0)return;var n=i-1;if(t.length===0)n=0;var r=e.eq(n);r.trigger("mouseenter");var o=l.$results.offset().top;var a=r.offset().top;var s=l.$results.scrollTop()+(a-o);if(n===0)l.$results.scrollTop(0);else if(a-o<0)l.$results.scrollTop(s)});e.on("results:next",function(){var t=l.getHighlightedResults();var e=l.$results.find("[aria-selected]");var i=e.index(t);var n=i+1;if(n>=e.length)return;var r=e.eq(n);r.trigger("mouseenter");var o=l.$results.offset().top+l.$results.outerHeight(false);var a=r.offset().top+r.outerHeight(false);var s=l.$results.scrollTop()+a-o;if(n===0)l.$results.scrollTop(0);else if(a>o)l.$results.scrollTop(s)});e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")});e.on("results:message",function(t){l.displayMessage(t)});if(f.fn.mousewheel)this.$results.on("mousewheel",function(t){var e=l.$results.scrollTop();var i=l.$results.get(0).scrollHeight-e+t.deltaY;var n=t.deltaY>0&&e-t.deltaY<=0;var r=t.deltaY<0&&i<=l.$results.height();if(n){l.$results.scrollTop(0);t.preventDefault();t.stopPropagation()}else if(r){l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height());t.preventDefault();t.stopPropagation()}});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var e=f(this);var i=m.GetData(this,"data");if(e.attr("aria-selected")==="true"){if(l.options.get("multiple"))l.trigger("unselect",{originalEvent:t,data:i});else l.trigger("close",{});return}l.trigger("select",{originalEvent:t,data:i})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var e=m.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted");l.trigger("results:focus",{data:e,element:f(this)})})};n.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t};n.prototype.destroy=function(){this.$results.remove()};n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(t.length===0)return;var e=this.$results.find("[aria-selected]");var i=e.index(t);var n=this.$results.offset().top;var r=t.offset().top;var o=this.$results.scrollTop()+(r-n);var a=r-n;o-=t.outerHeight(false)*2;if(i<=2)this.$results.scrollTop(0);else if(a>this.$results.outerHeight()||a<0)this.$results.scrollTop(o)};n.prototype.template=function(t,e){var i=this.options.get("templateResult");var n=this.options.get("escapeMarkup");var r=i(t,e);if(r==null)e.style.display="none";else if(typeof r==="string")e.innerHTML=n(r);else f(e).append(r)};return n});e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t});e.define("select2/selection/base",["jquery","../utils","../keys"],function(r,o,a){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}o.Extend(i,o.Observable);i.prototype.render=function(){var t=r('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(o.GetData(this.$element[0],"old-tabindex")!=null)this._tabindex=o.GetData(this.$element[0],"old-tabindex");else if(this.$element.attr("tabindex")!=null)this._tabindex=this.$element.attr("tabindex");t.attr("title",this.$element.attr("title"));t.attr("tabindex",this._tabindex);t.attr("aria-disabled","false");this.$selection=t;return t};i.prototype.bind=function(t,e){var i=this;var n=t.id+"-results";this.container=t;this.$selection.on("focus",function(t){i.trigger("focus",t)});this.$selection.on("blur",function(t){i._handleBlur(t)});this.$selection.on("keydown",function(t){i.trigger("keypress",t);if(t.which===a.SPACE)t.preventDefault()});t.on("results:focus",function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)});t.on("selection:update",function(t){i.update(t.data)});t.on("open",function(){i.$selection.attr("aria-expanded","true");i.$selection.attr("aria-owns",n);i._attachCloseHandler(t)});t.on("close",function(){i.$selection.attr("aria-expanded","false");i.$selection.removeAttr("aria-activedescendant");i.$selection.removeAttr("aria-owns");i.$selection.trigger("focus");i._detachCloseHandler(t)});t.on("enable",function(){i.$selection.attr("tabindex",i._tabindex);i.$selection.attr("aria-disabled","false")});t.on("disable",function(){i.$selection.attr("tabindex","-1");i.$selection.attr("aria-disabled","true")})};i.prototype._handleBlur=function(t){var e=this;window.setTimeout(function(){if(document.activeElement==e.$selection[0]||r.contains(e.$selection[0],document.activeElement))return;e.trigger("blur",t)},1)};i.prototype._attachCloseHandler=function(t){r(document.body).on("mousedown.select2."+t.id,function(t){var e=r(t.target);var i=e.closest(".select2");var n=r(".select2.select2-container--open");n.each(function(){if(this==i[0])return;var t=o.GetData(this,"element");t.select2("close")})})};i.prototype._detachCloseHandler=function(t){r(document.body).off("mousedown.select2."+t.id)};i.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)};i.prototype.destroy=function(){this._detachCloseHandler(this.container)};i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")};i.prototype.isEnabled=function(){return!this.isDisabled()};i.prototype.isDisabled=function(){return this.options.get("disabled")};return i});e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i,n){function r(){r.__super__.constructor.apply(this,arguments)}i.Extend(r,e);r.prototype.render=function(){var t=r.__super__.render.call(this);t.addClass("select2-selection--single");t.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return t};r.prototype.bind=function(e,t){var i=this;r.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(t){if(t.which!==1)return;i.trigger("toggle",{originalEvent:t})});this.$selection.on("focus",function(t){});this.$selection.on("blur",function(t){});e.on("focus",function(t){if(!e.isOpen())i.$selection.trigger("focus")})};r.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty();t.removeAttr("title")};r.prototype.display=function(t,e){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(t,e))};r.prototype.selectionContainer=function(){return t("<span></span>")};r.prototype.update=function(t){if(t.length===0){this.clear();return}var e=t[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(e,i);i.empty().append(n);var r=e.title||e.text;if(r)i.attr("title",r);else i.removeAttr("title")};return r});e.define("select2/selection/multiple",["jquery","./base","../utils"],function(o,t,l){function i(t,e){i.__super__.constructor.apply(this,arguments)}l.Extend(i,t);i.prototype.render=function(){var t=i.__super__.render.call(this);t.addClass("select2-selection--multiple");t.html('<ul class="select2-selection__rendered"></ul>');return t};i.prototype.bind=function(t,e){var r=this;i.__super__.bind.apply(this,arguments);this.$selection.on("click",function(t){r.trigger("toggle",{originalEvent:t})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(r.isDisabled())return;var e=o(this);var i=e.parent();var n=l.GetData(i[0],"data");r.trigger("unselect",{originalEvent:t,data:n})})};i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty();t.removeAttr("title")};i.prototype.display=function(t,e){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(t,e))};i.prototype.selectionContainer=function(){var t=o('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return t};i.prototype.update=function(t){this.clear();if(t.length===0)return;var e=[];for(var i=0;i<t.length;i++){var n=t[i];var r=this.selectionContainer();var o=this.display(n,r);r.append(o);var a=n.title||n.text;if(a)r.attr("title",a);l.StoreData(r[0],"data",n);e.push(r)}var s=this.$selection.find(".select2-selection__rendered");l.appendMany(s,e)};return i});e.define("select2/selection/placeholder",["../utils"],function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));t.call(this,e,i)}e.prototype.normalizePlaceholder=function(t,e){if(typeof e==="string")e={id:"",text:e};return e};e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();i.html(this.display(e));i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return i};e.prototype.update=function(t,e){var i=e.length==1&&e[0].id!=this.placeholder.id;var n=e.length>1;if(n||i)return t.call(this,e);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)};return e});e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(r,n,s){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);if(this.placeholder==null)if(this.options.get("debug")&&window.console&&console.error)console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)});e.on("keypress",function(t){n._handleKeyboardClear(t,e)})};t.prototype._handleClear=function(t,e){if(this.isDisabled())return;var i=this.$selection.find(".select2-selection__clear");if(i.length===0)return;e.stopPropagation();var n=s.GetData(i[0],"data");var r=this.$element.val();this.$element.val(this.placeholder.id);var o={data:n};this.trigger("clear",o);if(o.prevented){this.$element.val(r);return}for(var a=0;a<n.length;a++){o={data:n[a]};this.trigger("unselect",o);if(o.prevented){this.$element.val(r);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};t.prototype._handleKeyboardClear=function(t,e,i){if(i.isOpen())return;if(e.which==n.DELETE||e.which==n.BACKSPACE)this._handleClear(e)};t.prototype.update=function(t,e){t.call(this,e);if(this.$selection.find(".select2-selection__placeholder").length>0||e.length===0)return;var i=this.options.get("translations").get("removeAllItems");var n=r('<span class="select2-selection__clear" title="'+i()+'">'+"&times;"+"</span>");s.StoreData(n[0],"data",e);this.$selection.find(".select2-selection__rendered").prepend(n)};return t});e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,s,l){function t(t,e,i){t.call(this,e,i)}t.prototype.render=function(t){var e=n('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=e;this.$search=e.find("input");var i=t.call(this);this._transferTabIndex();return i};t.prototype.bind=function(t,e,i){var r=this;var n=e.id+"-results";t.call(this,e,i);e.on("open",function(){r.$search.attr("aria-controls",n);r.$search.trigger("focus")});e.on("close",function(){r.$search.val("");r.$search.removeAttr("aria-controls");r.$search.removeAttr("aria-activedescendant");r.$search.trigger("focus")});e.on("enable",function(){r.$search.prop("disabled",false);r._transferTabIndex()});e.on("disable",function(){r.$search.prop("disabled",true)});e.on("focus",function(t){r.$search.trigger("focus")});e.on("results:focus",function(t){if(t.data._resultId)r.$search.attr("aria-activedescendant",t.data._resultId);else r.$search.removeAttr("aria-activedescendant")});this.$selection.on("focusin",".select2-search--inline",function(t){r.trigger("focus",t)});this.$selection.on("focusout",".select2-search--inline",function(t){r._handleBlur(t)});this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation();r.trigger("keypress",t);r._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===l.BACKSPACE&&r.$search.val()===""){var i=r.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var n=s.GetData(i[0],"data");r.searchRemoveChoice(n);t.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(t){if(r.$search.val())t.stopPropagation()});var o=document.documentMode;var a=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(t){if(a){r.$selection.off("input.search input.searchcheck");return}r.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(a&&t.type==="input"){r.$selection.off("input.search input.searchcheck");return}var e=t.which;if(e==l.SHIFT||e==l.CTRL||e==l.ALT)return;if(e==l.TAB)return;r.handleSearch(t)})};t.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};t.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)};t.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");t.call(this,e);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(i)this.$search.trigger("focus")};t.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};t.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e});this.$search.val(e.text);this.handleSearch()};t.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(this.$search.attr("placeholder")!=="")t=this.$selection.find(".select2-selection__rendered").width();else{var e=this.$search.val().length+1;t=e*.75+"em"}this.$search.css("width",t)};return t});e.define("select2/selection/eventRelay",["jquery"],function(a){function t(){}t.prototype.bind=function(t,e,i){var n=this;var r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var o=["opening","closing","selecting","unselecting","clearing"];t.call(this,e,i);e.on("*",function(t,e){if(a.inArray(t,r)===-1)return;e=e||{};var i=a.Event("select2:"+t,{params:e});n.$element.trigger(i);if(a.inArray(t,o)===-1)return;e.prevented=i.isDefaultPrevented()})};return t});e.define("select2/translation",["jquery","require"],function(e,i){function n(t){this.dict=t||{}}n.prototype.all=function(){return this.dict};n.prototype.get=function(t){return this.dict[t]};n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)};n._cache={};n.loadPath=function(t){if(!(t in n._cache)){var e=i(t);n._cache[t]=e}return new n(n._cache[t])};return n});e.define("select2/diacritics",[],function(){var t={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"};return t});e.define("select2/data/base",["../utils"],function(n){function i(t,e){i.__super__.constructor.call(this)}n.Extend(i,n.Observable);i.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")};i.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")};i.prototype.bind=function(t,e){};i.prototype.destroy=function(){};i.prototype.generateResultId=function(t,e){var i=t.id+"-result-";i+=n.generateChars(4);if(e.id!=null)i+="-"+e.id.toString();else i+="-"+n.generateChars(4);return i};return i});e.define("select2/data/select",["./base","../utils","jquery"],function(t,s,l){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}s.Extend(i,t);i.prototype.current=function(t){var i=[];var n=this;this.$element.find(":selected").each(function(){var t=l(this);var e=n.item(t);i.push(e)});t(i)};i.prototype.select=function(r){var o=this;r.selected=true;if(l(r.element).is("option")){r.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple"))this.current(function(t){var e=[];r=[r];r.push.apply(r,t);for(var i=0;i<r.length;i++){var n=r[i].id;if(l.inArray(n,e)===-1)e.push(n)}o.$element.val(e);o.$element.trigger("input").trigger("change")});else{var t=r.id;this.$element.val(t);this.$element.trigger("input").trigger("change")}};i.prototype.unselect=function(r){var o=this;if(!this.$element.prop("multiple"))return;r.selected=false;if(l(r.element).is("option")){r.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i].id;if(n!==r.id&&l.inArray(n,e)===-1)e.push(n)}o.$element.val(e);o.$element.trigger("input").trigger("change")})};i.prototype.bind=function(t,e){var i=this;this.container=t;t.on("select",function(t){i.select(t.data)});t.on("unselect",function(t){i.unselect(t.data)})};i.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})};i.prototype.query=function(n,t){var r=[];var o=this;var e=this.$element.children();e.each(function(){var t=l(this);if(!t.is("option")&&!t.is("optgroup"))return;var e=o.item(t);var i=o.matches(n,e);if(i!==null)r.push(i)});t({results:r})};i.prototype.addOptions=function(t){s.appendMany(this.$element,t)};i.prototype.option=function(t){var e;if(t.children){e=document.createElement("optgroup");e.label=t.text}else{e=document.createElement("option");if(e.textContent!==undefined)e.textContent=t.text;else e.innerText=t.text}if(t.id!==undefined)e.value=t.id;if(t.disabled)e.disabled=true;if(t.selected)e.selected=true;if(t.title)e.title=t.title;var i=l(e);var n=this._normalizeItem(t);n.element=e;s.StoreData(e,"data",n);return i};i.prototype.item=function(t){var e={};e=s.GetData(t[0],"data");if(e!=null)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};var i=t.children("option");var n=[];for(var r=0;r<i.length;r++){var o=l(i[r]);var a=this.item(o);n.push(a)}e.children=n}e=this._normalizeItem(e);e.element=t[0];s.StoreData(t[0],"data",e);return e};i.prototype._normalizeItem=function(t){if(t!==Object(t))t={id:t,text:t};t=l.extend({},{text:""},t);var e={selected:false,disabled:false};if(t.id!=null)t.id=t.id.toString();if(t.text!=null)t.text=t.text.toString();if(t._resultId==null&&t.id&&this.container!=null)t._resultId=this.generateResultId(this.container,t);return l.extend({},e,t)};i.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)};return i});e.define("select2/data/array",["./select","../utils","jquery"],function(t,f,m){function n(t,e){this._dataToConvert=e.get("data")||[];n.__super__.constructor.call(this,t,e)}f.Extend(n,t);n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e);this.addOptions(this.convertToOptions(this._dataToConvert))};n.prototype.select=function(i){var t=this.$element.find("option").filter(function(t,e){return e.value==i.id.toString()});if(t.length===0){t=this.option(i);this.addOptions(t)}n.__super__.select.call(this,i)};n.prototype.convertToOptions=function(t){var e=this;var i=this.$element.find("option");var n=i.map(function(){return e.item(m(this)).id}).get();var r=[];function o(t){return function(){return m(this).val()==t.id}}for(var a=0;a<t.length;a++){var s=this._normalizeItem(t[a]);if(m.inArray(s.id,n)>=0){var l=i.filter(o(s));var c=this.item(l);var u=m.extend(true,{},s,c);var h=this.option(u);l.replaceWith(h);continue}var p=this.option(s);if(s.children){var d=this.convertToOptions(s.children);f.appendMany(p,d)}r.push(p)}return r};return n});e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,a){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax"));if(this.ajaxOptions.processResults!=null)this.processResults=this.ajaxOptions.processResults;i.__super__.constructor.call(this,t,e)}e.Extend(i,t);i.prototype._applyDefaults=function(t){var e={data:function(t){return a.extend({},t,{q:t.term})},transport:function(t,e,i){var n=a.ajax(t);n.then(e);n.fail(i);return n}};return a.extend({},e,t,true)};i.prototype.processResults=function(t){return t};i.prototype.query=function(i,n){var t=[];var r=this;if(this._request!=null){if(a.isFunction(this._request.abort))this._request.abort();this._request=null}var e=a.extend({type:"GET"},this.ajaxOptions);if(typeof e.url==="function")e.url=e.url.call(this.$element,i);if(typeof e.data==="function")e.data=e.data.call(this.$element,i);function o(){var t=e.transport(e,function(t){var e=r.processResults(t,i);if(r.options.get("debug")&&window.console&&console.error)if(!e||!e.results||!a.isArray(e.results))console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.");n(e)},function(){if("status"in t&&(t.status===0||t.status==="0"))return;r.trigger("results:message",{message:"errorLoading"})});r._request=t}if(this.ajaxOptions.delay&&i.term!=null){if(this._queryTimeout)window.clearTimeout(this._queryTimeout);this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)}else o()};return i});e.define("select2/data/tags",["jquery"],function(u){function t(t,e,i){var n=i.get("tags");var r=i.get("createTag");if(r!==undefined)this.createTag=r;var o=i.get("insertTag");if(o!==undefined)this.insertTag=o;t.call(this,e,i);if(u.isArray(n))for(var a=0;a<n.length;a++){var s=n[a];var l=this._normalizeItem(s);var c=this.option(l);this.$element.append(c)}}t.prototype.query=function(t,h,p){var d=this;this._removeOldTags();if(h.term==null||h.page!=null){t.call(this,h,p);return}function f(t,e){var i=t.results;for(var n=0;n<i.length;n++){var r=i[n];var o=r.children!=null&&!f({results:r.children},true);var a=(r.text||"").toUpperCase();var s=(h.term||"").toUpperCase();var l=a===s;if(l||o){if(e)return false;t.data=i;p(t);return}}if(e)return true;var c=d.createTag(h);if(c!=null){var u=d.option(c);u.attr("data-select2-tag",true);d.addOptions([u]);d.insertTag(i,c)}t.results=i;p(t)}t.call(this,h,f)};t.prototype.createTag=function(t,e){var i=u.trim(e.term);if(i==="")return null;return{id:i,text:i}};t.prototype.insertTag=function(t,e,i){e.unshift(i)};t.prototype._removeOldTags=function(t){var e=this.$element.find("option[data-select2-tag]");e.each(function(){if(this.selected)return;u(this).remove()})};return t});e.define("select2/data/tokenizer",["jquery"],function(p){function t(t,e,i){var n=i.get("tokenizer");if(n!==undefined)this.tokenizer=n;t.call(this,e,i)}t.prototype.bind=function(t,e,i){t.call(this,e,i);this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")};t.prototype.query=function(t,e,i){var r=this;function n(t){var e=r._normalizeItem(t);var i=r.$element.find("option").filter(function(){return p(this).val()===e.id});if(!i.length){var n=r.option(e);n.attr("data-select2-tag",true);r._removeOldTags();r.addOptions([n])}o(e)}function o(t){r.trigger("select",{data:t})}e.term=e.term||"";var a=this.tokenizer(e,this.options,n);if(a.term!==e.term){if(this.$search.length){this.$search.val(a.term);this.$search.trigger("focus")}e.term=a.term}t.call(this,e,i)};t.prototype.tokenizer=function(t,e,i,n){var r=i.get("tokenSeparators")||[];var o=e.term;var a=0;var s=this.createTag||function(t){return{id:t.term,text:t.term}};while(a<o.length){var l=o[a];if(p.inArray(l,r)===-1){a++;continue}var c=o.substr(0,a);var u=p.extend({},e,{term:c});var h=s(u);if(h==null){a++;continue}n(h);o=o.substr(a+1)||"";a=0}return{term:o}};return t});e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength");t.call(this,e,i)}t.prototype.query=function(t,e,i){e.term=e.term||"";if(e.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}});return}t.call(this,e,i)};return t});e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength");t.call(this,e,i)}t.prototype.query=function(t,e,i){e.term=e.term||"";if(this.maximumInputLength>0&&e.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}});return}t.call(this,e,i)};return t});e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength");t.call(this,e,i)}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("select",function(){n._checkIfMaximumSelected()})};t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected(function(){t.call(n,e,i)})};t.prototype._checkIfMaximumSelected=function(t,i){var n=this;this.current(function(t){var e=t!=null?t.length:0;if(n.maximumSelectionLength>0&&e>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}if(i)i()})};return t});e.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(t,e){this.$element=t;this.options=e;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$dropdown=t;return t};i.prototype.bind=function(){};i.prototype.position=function(t,e){};i.prototype.destroy=function(){this.$dropdown.remove()};return i});e.define("select2/dropdown/search",["jquery","../utils"],function(o,t){function e(){}e.prototype.render=function(t){var e=t.call(this);var i=o('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=i;this.$search=i.find("input");e.prepend(i);return e};e.prototype.bind=function(t,e,i){var n=this;var r=e.id+"-results";t.call(this,e,i);this.$search.on("keydown",function(t){n.trigger("keypress",t);n._keyUpPrevented=t.isDefaultPrevented()});this.$search.on("input",function(t){o(this).off("keyup")});this.$search.on("keyup input",function(t){n.handleSearch(t)});e.on("open",function(){n.$search.attr("tabindex",0);n.$search.attr("aria-controls",r);n.$search.trigger("focus");window.setTimeout(function(){n.$search.trigger("focus")},0)});e.on("close",function(){n.$search.attr("tabindex",-1);n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.val("");n.$search.trigger("blur")});e.on("focus",function(){if(!e.isOpen())n.$search.trigger("focus")});e.on("results:all",function(t){if(t.query.term==null||t.query.term===""){var e=n.showSearch(t);if(e)n.$searchContainer.removeClass("select2-search--hide");else n.$searchContainer.addClass("select2-search--hide")}});e.on("results:focus",function(t){if(t.data._resultId)n.$search.attr("aria-activedescendant",t.data._resultId);else n.$search.removeAttr("aria-activedescendant")})};e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.showSearch=function(t,e){return true};return e});e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));t.call(this,e,i,n)}t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results);t.call(this,e)};t.prototype.normalizePlaceholder=function(t,e){if(typeof e==="string")e={id:"",text:e};return e};t.prototype.removePlaceholder=function(t,e){var i=e.slice(0);for(var n=e.length-1;n>=0;n--){var r=e[n];if(this.placeholder.id===r.id)i.splice(n,1)}return i};return t});e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(t,e,i,n){this.lastParams={};t.call(this,e,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}t.prototype.append=function(t,e){this.$loadingMore.remove();this.loading=false;t.call(this,e);if(this.showLoadingMore(e)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("query",function(t){n.lastParams=t;n.loading=true});e.on("query:append",function(t){n.lastParams=t;n.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};t.prototype.loadMoreIfNeeded=function(){var t=n.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!t)return;var e=this.$results.offset().top+this.$results.outerHeight(false);var i=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(e+50>=i)this.loadMore()};t.prototype.loadMore=function(){this.loading=true;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)};t.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more};t.prototype.createLoadingMore=function(){var t=n("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var e=this.options.get("translations").get("loadingMore");t.html(e(this.lastParams));return t};return t});e.define("select2/dropdown/attachBody",["jquery","../utils"],function(d,s){function t(t,e,i){this.$dropdownParent=d(i.get("dropdownParent")||document.body);t.call(this,e,i)}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("open",function(){n._showDropdown();n._attachPositioningHandler(e);n._bindContainerResultHandlers(e)});e.on("close",function(){n._hideDropdown();n._detachPositioningHandler(e)});this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})};t.prototype.destroy=function(t){t.call(this);this.$dropdownContainer.remove()};t.prototype.position=function(t,e,i){e.attr("class",i.attr("class"));e.removeClass("select2");e.addClass("select2-container--open");e.css({position:"absolute",top:-999999});this.$container=i};t.prototype.render=function(t){var e=d("<span></span>");var i=t.call(this);e.append(i);this.$dropdownContainer=e;return e};t.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()};t.prototype._bindContainerResultHandlers=function(t,e){if(this._containerResultsHandlersBound)return;var i=this;e.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});e.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});e.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});e.on("select",function(){i._positionDropdown();i._resizeDropdown()});e.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=true};t.prototype._attachPositioningHandler=function(t,e){var i=this;var n="scroll.select2."+e.id;var r="resize.select2."+e.id;var o="orientationchange.select2."+e.id;var a=this.$container.parents().filter(s.hasScroll);a.each(function(){s.StoreData(this,"select2-scroll-position",{x:d(this).scrollLeft(),y:d(this).scrollTop()})});a.on(n,function(t){var e=s.GetData(this,"select2-scroll-position");d(this).scrollTop(e.y)});d(window).on(n+" "+r+" "+o,function(t){i._positionDropdown();i._resizeDropdown()})};t.prototype._detachPositioningHandler=function(t,e){var i="scroll.select2."+e.id;var n="resize.select2."+e.id;var r="orientationchange.select2."+e.id;var o=this.$container.parents().filter(s.hasScroll);o.off(i);d(window).off(i+" "+n+" "+r)};t.prototype._positionDropdown=function(){var t=d(window);var e=this.$dropdown.hasClass("select2-dropdown--above");var i=this.$dropdown.hasClass("select2-dropdown--below");var n=null;var r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(false);var o={height:this.$container.outerHeight(false)};o.top=r.top;o.bottom=r.top+o.height;var a={height:this.$dropdown.outerHeight(false)};var s={top:t.scrollTop(),bottom:t.scrollTop()+t.height()};var l=s.top<r.top-a.height;var c=s.bottom>r.bottom+a.height;var u={left:r.left,top:o.bottom};var h=this.$dropdownParent;if(h.css("position")==="static")h=h.offsetParent();var p={top:0,left:0};if(d.contains(document.body,h[0])||h[0].isConnected)p=h.offset();u.top-=p.top;u.left-=p.left;if(!e&&!i)n="below";if(!c&&l&&!e)n="above";else if(!l&&c&&e)n="below";if(n=="above"||e&&n!=="below")u.top=o.top-p.top-a.height;if(n!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)}this.$dropdownContainer.css(u)};t.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){t.minWidth=t.width;t.position="relative";t.width="auto"}this.$dropdown.css(t)};t.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return t});e.define("select2/dropdown/minimumResultsForSearch",[],function(){function r(t){var e=0;for(var i=0;i<t.length;i++){var n=t[i];if(n.children)e+=r(n.children);else e++}return e}function t(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0)this.minimumResultsForSearch=Infinity;t.call(this,e,i,n)}t.prototype.showSearch=function(t,e){if(r(e.data.results)<this.minimumResultsForSearch)return false;return t.call(this,e)};return t});e.define("select2/dropdown/selectOnClose",["../utils"],function(o){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("close",function(t){n._handleSelectOnClose(t)})};t.prototype._handleSelectOnClose=function(t,e){if(e&&e.originalSelect2Event!=null){var i=e.originalSelect2Event;if(i._type==="select"||i._type==="unselect")return}var n=this.getHighlightedResults();if(n.length<1)return;var r=o.GetData(n[0],"data");if(r.element!=null&&r.element.selected||r.element==null&&r.selected)return;this.trigger("select",{data:r})};return t});e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i);e.on("select",function(t){n._selectTriggered(t)});e.on("unselect",function(t){n._selectTriggered(t)})};t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;if(i&&(i.ctrlKey||i.metaKey))return;this.trigger("close",{originalEvent:i,originalSelect2Event:e})};return t});e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum;var i="Please delete "+e+" character";if(e!=1)i+="s";return i},inputTooShort:function(t){var e=t.minimum-t.input.length;var i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";if(t.maximum!=1)e+="s";return e},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}});e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(u,c,h,p,d,f,m,g,v,_,a,i,y,b,x,k,w,L,M,C,S,P,T,E,D,A,O,I,t){function e(){this.reset()}e.prototype.apply=function(t){t=u.extend(true,{},this.defaults,t);if(t.dataAdapter==null){if(t.ajax!=null)t.dataAdapter=x;else if(t.data!=null)t.dataAdapter=b;else t.dataAdapter=y;if(t.minimumInputLength>0)t.dataAdapter=_.Decorate(t.dataAdapter,L);if(t.maximumInputLength>0)t.dataAdapter=_.Decorate(t.dataAdapter,M);if(t.maximumSelectionLength>0)t.dataAdapter=_.Decorate(t.dataAdapter,C);if(t.tags)t.dataAdapter=_.Decorate(t.dataAdapter,k);if(t.tokenSeparators!=null||t.tokenizer!=null)t.dataAdapter=_.Decorate(t.dataAdapter,w);if(t.query!=null){var e=c(t.amdBase+"compat/query");t.dataAdapter=_.Decorate(t.dataAdapter,e)}if(t.initSelection!=null){var i=c(t.amdBase+"compat/initSelection");t.dataAdapter=_.Decorate(t.dataAdapter,i)}}if(t.resultsAdapter==null){t.resultsAdapter=h;if(t.ajax!=null)t.resultsAdapter=_.Decorate(t.resultsAdapter,E);if(t.placeholder!=null)t.resultsAdapter=_.Decorate(t.resultsAdapter,T);if(t.selectOnClose)t.resultsAdapter=_.Decorate(t.resultsAdapter,O)}if(t.dropdownAdapter==null){if(t.multiple)t.dropdownAdapter=S;else{var n=_.Decorate(S,P);t.dropdownAdapter=n}if(t.minimumResultsForSearch!==0)t.dropdownAdapter=_.Decorate(t.dropdownAdapter,A);if(t.closeOnSelect)t.dropdownAdapter=_.Decorate(t.dropdownAdapter,I);if(t.dropdownCssClass!=null||t.dropdownCss!=null||t.adaptDropdownCssClass!=null){var r=c(t.amdBase+"compat/dropdownCss");t.dropdownAdapter=_.Decorate(t.dropdownAdapter,r)}t.dropdownAdapter=_.Decorate(t.dropdownAdapter,D)}if(t.selectionAdapter==null){if(t.multiple)t.selectionAdapter=d;else t.selectionAdapter=p;if(t.placeholder!=null)t.selectionAdapter=_.Decorate(t.selectionAdapter,f);if(t.allowClear)t.selectionAdapter=_.Decorate(t.selectionAdapter,m);if(t.multiple)t.selectionAdapter=_.Decorate(t.selectionAdapter,g);if(t.containerCssClass!=null||t.containerCss!=null||t.adaptContainerCssClass!=null){var o=c(t.amdBase+"compat/containerCss");t.selectionAdapter=_.Decorate(t.selectionAdapter,o)}t.selectionAdapter=_.Decorate(t.selectionAdapter,v)}t.language=this._resolveLanguage(t.language);t.language.push("en");var a=[];for(var s=0;s<t.language.length;s++){var l=t.language[s];if(a.indexOf(l)===-1)a.push(l)}t.language=a;t.translations=this._processTranslations(t.language,t.debug);return t};e.prototype.reset=function(){function l(t){function e(t){return i[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function c(t,e){if(u.trim(t.term)==="")return e;if(e.children&&e.children.length>0){var i=u.extend(true,{},e);for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];var o=c(t,r);if(o==null)i.children.splice(n,1)}if(i.children.length>0)return i;return c(t,i)}var a=l(e.text).toUpperCase();var s=l(t.term).toUpperCase();if(a.indexOf(s)>-1)return e;return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:_.escapeMarkup,language:{},matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}};e.prototype.applyFromElement=function(t,e){var i=t.language;var n=this.defaults.language;var r=e.prop("lang");var o=e.closest("[lang]").prop("lang");var a=Array.prototype.concat.call(this._resolveLanguage(r),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(o));t.language=a;return t};e.prototype._resolveLanguage=function(t){if(!t)return[];if(u.isEmptyObject(t))return[];if(u.isPlainObject(t))return[t];var e;if(!u.isArray(t))e=[t];else e=t;var i=[];for(var n=0;n<e.length;n++){i.push(e[n]);if(typeof e[n]==="string"&&e[n].indexOf("-")>0){var r=e[n].split("-");var o=r[0];i.push(o)}}return i};e.prototype._processTranslations=function(t,e){var i=new a;for(var n=0;n<t.length;n++){var r=new a;var o=t[n];if(typeof o==="string")try{r=a.loadPath(o)}catch(t){try{o=this.defaults.amdLanguageBase+o;r=a.loadPath(o)}catch(t){if(e&&window.console&&console.warn)console.warn('Select2: The language file for "'+o+'" could '+"not be automatically loaded. A fallback will be used instead.")}}else if(u.isPlainObject(o))r=new a(o);else r=o;i.extend(r)}return i};e.prototype.set=function(t,e){var i=u.camelCase(t);var n={};n[i]=e;var r=_._convertData(n);u.extend(true,this.defaults,r)};var n=new e;return n});e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,p,r,d){function t(t,e){this.options=t;if(e!=null)this.fromElement(e);if(e!=null)this.options=r.applyFromElement(this.options,e);this.options=r.apply(this.options);if(e&&e.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,i)}}t.prototype.fromElement=function(t){var e=["select2"];if(this.options.multiple==null)this.options.multiple=t.prop("multiple");if(this.options.disabled==null)this.options.disabled=t.prop("disabled");if(this.options.dir==null)if(t.prop("dir"))this.options.dir=t.prop("dir");else if(t.closest("[dir]").prop("dir"))this.options.dir=t.closest("[dir]").prop("dir");else this.options.dir="ltr";t.prop("disabled",this.options.disabled);t.prop("multiple",this.options.multiple);if(d.GetData(t[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn)console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.");d.StoreData(t[0],"data",d.GetData(t[0],"select2Tags"));d.StoreData(t[0],"tags",true)}if(d.GetData(t[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn)console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.");t.attr("ajax--url",d.GetData(t[0],"ajaxUrl"));d.StoreData(t[0],"ajax-Url",d.GetData(t[0],"ajaxUrl"))}var i={};function n(t,e){return e.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var o=t[0].attributes[r].name;var a="data-";if(o.substr(0,a.length)==a){var s=o.substring(a.length);var l=d.GetData(t[0],s);var c=s.replace(/-([a-z])/g,n);i[c]=l}}if(p.fn.jquery&&p.fn.jquery.substr(0,2)=="1."&&t[0].dataset)i=p.extend(true,{},t[0].dataset,i);var u=p.extend(true,{},d.GetData(t[0]),i);u=d._convertData(u);for(var h in u){if(p.inArray(h,e)>-1)continue;if(p.isPlainObject(this.options[h]))p.extend(this.options[h],u[h]);else this.options[h]=u[h]}return this};t.prototype.get=function(t){return this.options[t]};t.prototype.set=function(t,e){this.options[t]=e};return t});e.define("select2/core",["jquery","./options","./utils","./keys"],function(a,c,u,n){var h=function(t,e){if(u.GetData(t[0],"select2")!=null)u.GetData(t[0],"select2").destroy();this.$element=t;this.id=this._generateId(t);e=e||{};this.options=new c(e,t);h.__super__.constructor.call(this);var i=t.attr("tabindex")||0;u.StoreData(t[0],"old-tabindex",i);t.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(t,this.options);var r=this.render();this._placeContainer(r);var o=this.options.get("selectionAdapter");this.selection=new o(t,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);var a=this.options.get("dropdownAdapter");this.dropdown=new a(t,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);var s=this.options.get("resultsAdapter");this.results=new s(t,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(t){l.trigger("selection:update",{data:t})});t.addClass("select2-hidden-accessible");t.attr("aria-hidden","true");this._syncAttributes();u.StoreData(t[0],"select2",this);t.data("select2",this)};u.Extend(h,u.Observable);h.prototype._generateId=function(t){var e="";if(t.attr("id")!=null)e=t.attr("id");else if(t.attr("name")!=null)e=t.attr("name")+"-"+u.generateChars(2);else e=u.generateChars(4);e=e.replace(/(:|\.|\[|\]|,)/g,"");e="select2-"+e;return e};h.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));if(e!=null)t.css("width",e)};h.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(e=="resolve"){var n=this._resolveWidth(t,"style");if(n!=null)return n;return this._resolveWidth(t,"element")}if(e=="element"){var r=t.outerWidth(false);if(r<=0)return"auto";return r+"px"}if(e=="style"){var o=t.attr("style");if(typeof o!=="string")return null;var a=o.split(";");for(var s=0,l=a.length;s<l;s=s+1){var c=a[s].replace(/\s/g,"");var u=c.match(i);if(u!==null&&u.length>=1)return u[1]}return null}if(e=="computedstyle"){var h=window.getComputedStyle(t[0]);return h.width}return e};h.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};h.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})});this.$element.on("focus.select2",function(t){e.trigger("focus",t)});this._syncA=u.bind(this._syncAttributes,this);this._syncS=u.bind(this._syncSubtree,this);if(this.$element[0].attachEvent)this.$element[0].attachEvent("onpropertychange",this._syncA);var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(t!=null){this._observer=new t(function(t){e._syncA();e._syncS(null,t)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",e._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",e._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,false)}};h.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerSelectionEvents=function(){var i=this;var n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()});this.selection.on("focus",function(t){i.focus(t)});this.selection.on("*",function(t,e){if(a.inArray(t,n)!==-1)return;i.trigger(t,e)})};h.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(t,e){i.trigger(t,e)})};h.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")});this.on("close",function(){i.$container.removeClass("select2-container--open")});this.on("enable",function(){i.$container.removeClass("select2-container--disabled")});this.on("disable",function(){i.$container.addClass("select2-container--disabled")});this.on("blur",function(){i.$container.removeClass("select2-container--focus")});this.on("query",function(e){if(!i.isOpen())i.trigger("open",{});this.dataAdapter.query(e,function(t){i.trigger("results:all",{data:t,query:e})})});this.on("query:append",function(e){this.dataAdapter.query(e,function(t){i.trigger("results:append",{data:t,query:e})})});this.on("keypress",function(t){var e=t.which;if(i.isOpen()){if(e===n.ESC||e===n.TAB||e===n.UP&&t.altKey){i.close(t);t.preventDefault()}else if(e===n.ENTER){i.trigger("results:select",{});t.preventDefault()}else if(e===n.SPACE&&t.ctrlKey){i.trigger("results:toggle",{});t.preventDefault()}else if(e===n.UP){i.trigger("results:previous",{});t.preventDefault()}else if(e===n.DOWN){i.trigger("results:next",{});t.preventDefault()}}else if(e===n.ENTER||e===n.SPACE||e===n.DOWN&&t.altKey){i.open();t.preventDefault()}})};h.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen())this.close();this.trigger("disable",{})}else this.trigger("enable",{})};h.prototype._isChangeMutation=function(t,e){var i=false;var n=this;if(t&&t.target&&(t.target.nodeName!=="OPTION"&&t.target.nodeName!=="OPTGROUP"))return;if(!e)i=true;else if(e.addedNodes&&e.addedNodes.length>0)for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];if(o.selected)i=true}else if(e.removedNodes&&e.removedNodes.length>0)i=true;else if(a.isArray(e))a.each(e,function(t,e){if(n._isChangeMutation(t,e)){i=true;return false}});return i};h.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e);var n=this;if(i)this.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})};h.prototype.trigger=function(t,e){var i=h.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(e===undefined)e={};if(t in n){var r=n[t];var o={prevented:false,name:t,args:e};i.call(this,r,o);if(o.prevented){e.prevented=true;return}}i.call(this,t,e)};h.prototype.toggleDropdown=function(){if(this.isDisabled())return;if(this.isOpen())this.close();else this.open()};h.prototype.open=function(){if(this.isOpen())return;if(this.isDisabled())return;this.trigger("query",{})};h.prototype.close=function(t){if(!this.isOpen())return;this.trigger("close",{originalEvent:t})};h.prototype.isEnabled=function(){return!this.isDisabled()};h.prototype.isDisabled=function(){return this.options.get("disabled")};h.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};h.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};h.prototype.focus=function(t){if(this.hasFocus())return;this.$container.addClass("select2-container--focus");this.trigger("focus",{})};h.prototype.enable=function(t){if(this.options.get("debug")&&window.console&&console.warn)console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.");if(t==null||t.length===0)t=[true];var e=!t[0];this.$element.prop("disabled",e)};h.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn)console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.");var e=[];this.dataAdapter.current(function(t){e=t});return e};h.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn)console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.");if(t==null||t.length===0)return this.$element.val();var e=t[0];if(a.isArray(e))e=a.map(e,function(t){return t.toString()});this.$element.val(e).trigger("input").trigger("change")};h.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent)this.$element[0].detachEvent("onpropertychange",this._syncA);if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false)}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");u.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};h.prototype.render=function(){var t=a('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$container=t;this.$container.addClass("select2-container--"+this.options.get("theme"));u.StoreData(t[0],"element",this.$element);return t};return h});e.define("jquery-mousewheel",["jquery"],function(t){return t});e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(r,t,o,e,a){if(r.fn.select2==null){var s=["open","close","destroy"];r.fn.select2=function(i){i=i||{};if(typeof i==="object"){this.each(function(){var t=r.extend(true,{},i);var e=new o(r(this),t)});return this}else if(typeof i==="string"){var e;var n=Array.prototype.slice.call(arguments,1);this.each(function(){var t=a.GetData(this,"select2");if(t==null&&window.console&&console.error)console.error("The select2('"+i+"') method was called on an "+"element that is not using Select2.");e=t[i].apply(t,n)});if(r.inArray(i,s)>-1)return this;return e}else throw new Error("Invalid arguments for Select2: "+i)}}if(r.fn.select2.defaults==null)r.fn.select2.defaults=e;return o});return{define:e.define,require:e.require}}(),e=t.require("jquery.select2");return i.fn.select2.amd=t,e})?i.apply(e,n):i)||(t.exports=i)},5911:function(t,e,i){var n,r;!function(){"use strict";n=[i(3609)],void 0===(r="function"==typeof(r=function(Ft,Nt){"use strict";var n={beforeShow:t,move:t,change:t,show:t,hide:t,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},jt=[],Ut=!!/msie/i.exec(window.navigator.userAgent),Ht=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div");var i=e.style;i.cssText="background-color:rgba(0,0,0,.5)";return t(i.backgroundColor,"rgba")||t(i.backgroundColor,"hsla")}(),Gt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Zt=function(){var t="";if(Ut)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function Wt(t,e,i,n){var r=[];for(var o=0;o<t.length;o++){var a=t[o];if(a){var s=tinycolor(a);var l=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(e,a)?" sp-thumb-active":"";var c=s.toString(n.preferredFormat||"rgb");var u=Ht?"background-color:"+s.toRgbString():"filter:"+s.toFilter();r.push('<span title="'+c+'" data-color="'+s.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+u+';"></span></span>')}else{var h="sp-clear-display";r.push(Ft("<div />").append(Ft('<span data-color="" style="background-color:transparent;" class="'+h+'"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+r.join("")+"</div>"}function Vt(){for(var t=0;t<jt.length;t++)if(jt[t])jt[t].hide()}function qt(t,e){var i=Ft.extend({},n,t);i.callbacks={move:r(i.move,e),change:r(i.change,e),show:r(i.show,e),hide:r(i.hide,e),beforeShow:r(i.beforeShow,e)};return i}function o(t,e){var c=qt(e,t),n=c.flat,i=c.showSelectionPalette,r=c.localStorageKey,o=c.theme,a=c.callbacks,s=Kt(Dt,10),l=false,u=false,h=0,p=0,d=0,f=0,m=0,g=0,v=0,_=0,y=0,b=0,x=0,k=1,w=[],L=[],M={},C=c.selectionPalette.slice(0),S=c.maxSelectionSize,P="sp-dragging",T=null;var E=t.ownerDocument,D=E.body,A=Ft(t),O=false,I=Ft(Zt,E).addClass(o),B=I.find(".sp-picker-container"),R=I.find(".sp-color"),z=I.find(".sp-dragger"),F=I.find(".sp-hue"),N=I.find(".sp-slider"),j=I.find(".sp-alpha-inner"),U=I.find(".sp-alpha"),H=I.find(".sp-alpha-handle"),G=I.find(".sp-input"),Z=I.find(".sp-palette"),W=I.find(".sp-initial"),V=I.find(".sp-cancel"),q=I.find(".sp-clear"),$=I.find(".sp-choose"),Y=I.find(".sp-palette-toggle"),J=A.is("input"),K=J&&A.attr("type")==="color"&&Xt(),X=J&&!n,Q=X?Ft(Gt).addClass(o).addClass(c.className).addClass(c.replacerClassName):Ft([]),tt=X?Q:A,et=Q.find(".sp-preview-inner"),it=c.color||J&&A.val(),nt=false,rt=c.preferredFormat,ot=!c.showButtons||c.clickoutFiresChange,at=!it,st=c.allowEmpty&&!K;function lt(){if(c.showPaletteOnly)c.showPalette=true;Y.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);if(c.palette){w=c.palette.slice(0);L=Ft.isArray(w[0])?w:[w];M={};for(var t=0;t<L.length;t++)for(var e=0;e<L[t].length;e++){var i=tinycolor(L[t][e]).toRgbString();M[i]=true}}I.toggleClass("sp-flat",n);I.toggleClass("sp-input-disabled",!c.showInput);I.toggleClass("sp-alpha-enabled",c.showAlpha);I.toggleClass("sp-clear-enabled",st);I.toggleClass("sp-buttons-disabled",!c.showButtons);I.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly);I.toggleClass("sp-palette-disabled",!c.showPalette);I.toggleClass("sp-palette-only",c.showPaletteOnly);I.toggleClass("sp-initial-disabled",!c.showInitial);I.addClass(c.className).addClass(c.containerClassName);Dt()}function ct(){if(Ut)I.find("*:not(input)").attr("unselectable","on");lt();if(X)A.after(Q).hide();if(!st)q.hide();if(n)A.after(I).hide();else{var t=c.appendTo==="parent"?A.parent():Ft(c.appendTo);if(t.length!==1)t=Ft("body");t.append(I)}ut();tt.on("click.spectrum touchstart.spectrum",function(t){if(!O)_t();t.stopPropagation();if(!Ft(t.target).is("input"))t.preventDefault()});if(A.is(":disabled")||c.disabled===true)Bt();I.click(Yt);G.change(vt);G.on("paste",function(){setTimeout(vt,1)});G.keydown(function(t){if(t.keyCode==13)vt()});V.text(c.cancelText);V.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();wt();kt()});q.attr("title",c.clearText);q.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();at=true;St();if(n)Et(true)});$.text(c.chooseText);$.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();if(Ut&&G.is(":focus"))G.trigger("change");if(Ct()){Et(true);kt()}});Y.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);Y.on("click.spectrum",function(t){t.stopPropagation();t.preventDefault();c.showPaletteOnly=!c.showPaletteOnly;if(!c.showPaletteOnly&&!n)I.css("left","-="+(B.outerWidth(true)+5));lt()});Jt(U,function(t,e,i){k=t/g;at=false;if(i.shiftKey)k=Math.round(k*10)/10;St()},mt,gt);Jt(F,function(t,e){y=parseFloat(e/f);at=false;if(!c.showAlpha)k=1;St()},mt,gt);Jt(R,function(t,e,i){if(!i.shiftKey)T=null;else if(!T){var n=b*h;var r=p-x*p;var o=Math.abs(t-n)>Math.abs(e-r);T=o?"x":"y"}var a=!T||T==="x";var s=!T||T==="y";if(a)b=parseFloat(t/h);if(s)x=parseFloat((p-e)/p);at=false;if(!c.showAlpha)k=1;St()},mt,gt);if(!!it){Lt(it);Pt();rt=c.preferredFormat||tinycolor(it).format;ht(it)}else Pt();if(n)yt();function e(t){if(t.data&&t.data.ignore){Lt(Ft(t.target).closest(".sp-thumb-el").data("color"));St()}else{Lt(Ft(t.target).closest(".sp-thumb-el").data("color"));St();if(c.hideAfterPaletteSelect){Et(true);kt()}else Et()}return false}var i=Ut?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Z.on(i,".sp-thumb-el",e);W.on(i,".sp-thumb-el:nth-child(1)",{ignore:true},e)}function ut(){if(r&&window.localStorage){try{var t=window.localStorage[r].split(",#");if(t.length>1){delete window.localStorage[r];Ft.each(t,function(t,e){ht(e)})}}catch(t){}try{C=window.localStorage[r].split(";")}catch(t){}}}function ht(t){if(i){var e=tinycolor(t).toRgbString();if(!M[e]&&Ft.inArray(e,C)===-1){C.push(e);while(C.length>S)C.shift()}if(r&&window.localStorage)try{window.localStorage[r]=C.join(";")}catch(t){}}}function pt(){var t=[];if(c.showPalette)for(var e=0;e<C.length;e++){var i=tinycolor(C[e]).toRgbString();if(!M[i])t.push(C[e])}return t.reverse().slice(0,c.maxSelectionSize)}function dt(){var i=Mt();var t=Ft.map(L,function(t,e){return Wt(t,i,"sp-palette-row sp-palette-row-"+e,c)});ut();if(C)t.push(Wt(pt(),i,"sp-palette-row sp-palette-row-selection",c));Z.html(t.join(""))}function ft(){if(c.showInitial){var t=nt;var e=Mt();W.html(Wt([t,e],e,"sp-palette-row-initial",c))}}function mt(){if(p<=0||h<=0||f<=0)Dt();u=true;I.addClass(P);T=null;A.trigger("dragstart.spectrum",[Mt()])}function gt(){u=false;I.removeClass(P);A.trigger("dragstop.spectrum",[Mt()])}function vt(){var t=G.val();if((t===null||t==="")&&st){Lt(null);St();Et()}else{var e=tinycolor(t);if(e.isValid()){Lt(e);St();Et()}else G.addClass("sp-validation-error")}}function _t(){if(l)kt();else yt()}function yt(){var t=Ft.Event("beforeShow.spectrum");if(l){Dt();return}A.trigger(t,[Mt()]);if(a.beforeShow(Mt())===false||t.isDefaultPrevented())return;Vt();l=true;Ft(E).on("keydown.spectrum",bt);Ft(E).on("click.spectrum",xt);Ft(window).on("resize.spectrum",s);Q.addClass("sp-active");I.removeClass("sp-hidden");Dt();Pt();nt=Mt();ft();a.show(nt);A.trigger("show.spectrum",[nt])}function bt(t){if(t.keyCode===27)kt()}function xt(t){if(t.button==2)return;if(u)return;if(ot)Et(true);else wt();kt()}function kt(){if(!l||n)return;l=false;Ft(E).off("keydown.spectrum",bt);Ft(E).off("click.spectrum",xt);Ft(window).off("resize.spectrum",s);Q.removeClass("sp-active");I.addClass("sp-hidden");a.hide(Mt());A.trigger("hide.spectrum",[Mt()])}function wt(){Lt(nt,true);Et(true)}function Lt(t,e){if(tinycolor.equals(t,Mt())){Pt();return}var i,n;if(!t&&st)at=true;else{at=false;i=tinycolor(t);n=i.toHsv();y=n.h%360/360;b=n.s;x=n.v;k=n.a}Pt();if(i&&i.isValid()&&!e)rt=c.preferredFormat||i.getFormat()}function Mt(t){t=t||{};if(st&&at)return null;return tinycolor.fromRatio({h:y,s:b,v:x,a:Math.round(k*1e3)/1e3},{format:t.format||rt})}function Ct(){return!G.hasClass("sp-validation-error")}function St(){Pt();a.move(Mt());A.trigger("move.spectrum",[Mt()])}function Pt(){G.removeClass("sp-validation-error");Tt();var t=tinycolor.fromRatio({h:y,s:1,v:1});R.css("background-color",t.toHexString());var e=rt;if(k<1&&!(k===0&&e==="name"))if(e==="hex"||e==="hex3"||e==="hex6"||e==="name")e="rgb";var i=Mt({format:e}),n="";et.removeClass("sp-clear-display");et.css("background-color","transparent");if(!i&&st)et.addClass("sp-clear-display");else{var r=i.toHexString(),o=i.toRgbString();if(Ht||i.alpha===1)et.css("background-color",o);else{et.css("background-color","transparent");et.css("filter",i.toFilter())}if(c.showAlpha){var a=i.toRgb();a.a=0;var s=tinycolor(a).toRgbString();var l="linear-gradient(left, "+s+", "+r+")";if(Ut)j.css("filter",tinycolor(s).toFilter({gradientType:1},r));else{j.css("background","-webkit-"+l);j.css("background","-moz-"+l);j.css("background","-ms-"+l);j.css("background","linear-gradient(to right, "+s+", "+r+")")}}n=i.toString(e)}if(c.showInput)G.val(n);if(c.showPalette)dt();ft()}function Tt(){var t=b;var e=x;if(st&&at){H.hide();N.hide();z.hide()}else{H.show();N.show();z.show();var i=t*h;var n=p-e*p;i=Math.max(-d,Math.min(h-d,i-d));n=Math.max(-d,Math.min(p-d,n-d));z.css({top:n+"px",left:i+"px"});var r=k*g;H.css({left:r-v/2+"px"});var o=y*f;N.css({top:o-_+"px"})}}function Et(t){var e=Mt(),i="",n=!tinycolor.equals(e,nt);if(e){i=e.toString(rt);ht(e)}if(J)A.val(i);if(t&&n){a.change(e);A.trigger("change",[e])}}function Dt(){if(!l)return;h=R.width();p=R.height();d=z.height();m=F.width();f=F.height();_=N.height();g=U.width();v=H.width();if(!n){I.css("position","absolute");if(c.offset)I.offset(c.offset);else I.offset($t(I,tt))}Tt();if(c.showPalette)dt();A.trigger("reflow.spectrum")}function At(){A.show();tt.off("click.spectrum touchstart.spectrum");I.remove();Q.remove();jt[zt.id]=null}function Ot(t,e){if(t===Nt)return Ft.extend({},c);if(e===Nt)return c[t];c[t]=e;if(t==="preferredFormat")rt=c.preferredFormat;lt()}function It(){O=false;A.attr("disabled",false);tt.removeClass("sp-disabled")}function Bt(){kt();O=true;A.attr("disabled",true);tt.addClass("sp-disabled")}function Rt(t){c.offset=t;Dt()}ct();var zt={show:yt,hide:kt,toggle:_t,reflow:Dt,option:Ot,enable:It,disable:Bt,offset:Rt,set:function(t){Lt(t);Et()},get:Mt,destroy:At,container:I};zt.id=jt.push(zt)-1;return zt}function $t(t,e){var i=0;var n=t.outerWidth();var r=t.outerHeight();var o=e.outerHeight();var a=t[0].ownerDocument;var s=a.documentElement;var l=s.clientWidth+Ft(a).scrollLeft();var c=s.clientHeight+Ft(a).scrollTop();var u=e.offset();var h=u.left;var p=u.top;p+=o;h-=Math.min(h,h+n>l&&l>n?Math.abs(h+n-l):0);p-=Math.min(p,p+r>c&&c>r?Math.abs(r+o-i):i);return{top:p,bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}}function t(){}function Yt(t){t.stopPropagation()}function r(t,e){var i=Array.prototype.slice;var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function Jt(a,s,i,t){s=s||function(){};i=i||function(){};t=t||function(){};var l=document;var c=false;var u={};var h=0;var p=0;var d="ontouchstart"in window;var n={};n["selectstart"]=f;n["dragstart"]=f;n["touchmove mousemove"]=r;n["touchend mouseup"]=m;function f(t){if(t.stopPropagation)t.stopPropagation();if(t.preventDefault)t.preventDefault();t.returnValue=false}function r(t){if(c){if(Ut&&l.documentMode<9&&!t.button)return m();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0];var i=e&&e.pageX||t.pageX;var n=e&&e.pageY||t.pageY;var r=Math.max(0,Math.min(i-u.left,p));var o=Math.max(0,Math.min(n-u.top,h));if(d)f(t);s.apply(a,[r,o,t])}}function e(t){var e=t.which?t.which==3:t.button==2;if(!e&&!c)if(i.apply(a,arguments)!==false){c=true;h=Ft(a).height();p=Ft(a).width();u=Ft(a).offset();Ft(l).on(n);Ft(l.body).addClass("sp-dragging");r(t);f(t)}}function m(){if(c){Ft(l).off(n);Ft(l.body).removeClass("sp-dragging");setTimeout(function(){t.apply(a,arguments)},0)}c=false}Ft(a).on("touchstart mousedown",e)}function Kt(n,r,o){var a;return function(){var t=this,e=arguments;var i=function(){a=null;n.apply(t,e)};if(o)clearTimeout(a);if(o||!a)a=setTimeout(i,r)}}function Xt(){return Ft.fn.spectrum.inputTypeColorSupport()}var a="spectrum.id";Ft.fn.spectrum=function(i,t){if(typeof i=="string"){var n=this;var r=Array.prototype.slice.call(arguments,1);this.each(function(){var t=jt[Ft(this).data(a)];if(t){var e=t[i];if(!e)throw new Error("Spectrum: no such method: '"+i+"'");if(i=="get")n=t.get();else if(i=="container")n=t.container;else if(i=="option")n=t.option.apply(t,r);else if(i=="destroy"){t.destroy();Ft(this).removeData(a)}else e.apply(t,r)}});return n}return this.spectrum("destroy").each(function(){var t=Ft.extend({},Ft(this).data(),i);var e=o(this,t);Ft(this).data(a,e.id)})},Ft.fn.spectrum.load=true,Ft.fn.spectrum.loadOpts={},Ft.fn.spectrum.draggable=Jt,Ft.fn.spectrum.defaults=n,Ft.fn.spectrum.inputTypeColorSupport=function t(){if(typeof t._cachedResult==="undefined"){var e=Ft("<input type='color'/>")[0];t._cachedResult=e.type==="color"&&e.value!==""}return t._cachedResult},Ft.spectrum={},Ft.spectrum.localization={},Ft.spectrum.palettes={},Ft.fn.spectrum.processNativeColorInputs=function(){var t=Ft("input[type=color]");if(t.length&&!Xt())t.spectrum({preferredFormat:"hex6"})},function(){var n=/^[\s,#]+/,r=/\s+$/,o=0,p=Math,a=p.round,c=p.min,u=p.max,t=p.random;var h=function(t,e){t=t?t:"";e=e||{};if(t instanceof h)return t;if(!(this instanceof h))return new h(t,e);var i=s(t);this._originalInput=t;this._r=i.r;this._g=i.g;this._b=i.b;this._a=i.a;this._roundA=a(1e3*this._a)/1e3;this._format=e.format||i.format;this._gradientType=e.gradientType;if(this._r<1)this._r=a(this._r);if(this._g<1)this._g=a(this._g);if(this._b<1)this._b=a(this._b);this._ok=i.ok;this._tc_id=o++};h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},setAlpha:function(t){this._a=O(t);this._roundA=a(1e3*this._a)/1e3;return this},toHsv:function(){var t=m(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=m(this._r,this._g,this._b);var e=a(t.h*360),i=a(t.s*100),n=a(t.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b);var e=a(t.h*360),i=a(t.s*100),n=a(t.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return v(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(I(this._r,255)*100)+"%",g:a(I(this._g,255)*100)+"%",b:a(I(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(I(this._r,255)*100)+"%, "+a(I(this._g,255)*100)+"%, "+a(I(this._b,255)*100)+"%)":"rgba("+a(I(this._r,255)*100)+"%, "+a(I(this._g,255)*100)+"%, "+a(I(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0)return"transparent";if(this._a<1)return false;return D[e(this._r,this._g,this._b,true)]||false},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a);var i=e;var n=this._gradientType?"GradientType = 1, ":"";if(t){var r=h(t);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=false;var n=this._a<1&&this._a>=0;var r=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="name");if(r){if(t==="name"&&this._a===0)return this.toName();return this.toRgbString()}if(t==="rgb")i=this.toRgbString();if(t==="prgb")i=this.toPercentageRgbString();if(t==="hex"||t==="hex6")i=this.toHexString();if(t==="hex3")i=this.toHexString(true);if(t==="hex8")i=this.toHex8String();if(t==="name")i=this.toName();if(t==="hsl")i=this.toHslString();if(t==="hsv")i=this.toHsvString();return i||this.toHexString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));this._r=i._r;this._g=i._g;this._b=i._b;this.setAlpha(i._a);return this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(i,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}};h.fromRatio=function(t,e){if(typeof t=="object"){var i={};for(var n in t)if(t.hasOwnProperty(n))if(n==="a")i[n]=t[n];else i[n]=j(t[n]);t=i}return h(t,e)};function s(t){var e={r:0,g:0,b:0};var i=1;var n=false;var r=false;if(typeof t=="string")t=Z(t);if(typeof t=="object"){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")){e=l(t.r,t.g,t.b);n=true;r=String(t.r).substr(-1)==="%"?"prgb":"rgb"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")){t.s=j(t.s);t.v=j(t.v);e=g(t.h,t.s,t.v);n=true;r="hsv"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=j(t.s);t.l=j(t.l);e=f(t.h,t.s,t.l);n=true;r="hsl"}if(t.hasOwnProperty("a"))i=t.a}i=O(i);return{ok:n,format:t.format||r,r:c(255,u(e.r,0)),g:c(255,u(e.g,0)),b:c(255,u(e.b,0)),a:i}}function l(t,e,i){return{r:I(t,255)*255,g:I(e,255)*255,b:I(i,255)*255}}function d(t,e,i){t=I(t,255);e=I(e,255);i=I(i,255);var n=u(t,e,i),r=c(t,e,i);var o,a,s=(n+r)/2;if(n==r)o=a=0;else{var l=n-r;a=s>.5?l/(2-n-r):l/(n+r);switch(n){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return{h:o,s:a,l:s}}function f(t,e,i){var n,r,o;t=I(t,360);e=I(e,100);i=I(i,100);function a(t,e,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return t+(e-t)*6*i;if(i<1/2)return e;if(i<2/3)return t+(e-t)*(2/3-i)*6;return t}if(e===0)n=r=o=i;else{var s=i<.5?i*(1+e):i+e-i*e;var l=2*i-s;n=a(l,s,t+1/3);r=a(l,s,t);o=a(l,s,t-1/3)}return{r:n*255,g:r*255,b:o*255}}function m(t,e,i){t=I(t,255);e=I(e,255);i=I(i,255);var n=u(t,e,i),r=c(t,e,i);var o,a,s=n;var l=n-r;a=n===0?0:l/n;if(n==r)o=0;else{switch(n){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return{h:o,s:a,v:s}}function g(t,e,i){t=I(t,360)*6;e=I(e,100);i=I(i,100);var n=p.floor(t),r=t-n,o=i*(1-e),a=i*(1-r*e),s=i*(1-(1-r)*e),l=n%6,c=[i,a,o,o,s,i][l],u=[s,i,i,a,o,o][l],h=[o,o,s,i,i,a][l];return{r:c*255,g:u*255,b:h*255}}function e(t,e,i,n){var r=[N(a(t).toString(16)),N(a(e).toString(16)),N(a(i).toString(16))];if(n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0);return r.join("")}function v(t,e,i,n){var r=[N(U(n)),N(a(t).toString(16)),N(a(e).toString(16)),N(a(i).toString(16))];return r.join("")}h.equals=function(t,e){if(!t||!e)return false;return h(t).toRgbString()==h(e).toRgbString()};h.random=function(){return h.fromRatio({r:t(),g:t(),b:t()})};function i(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.s-=e/100;i.s=B(i.s);return h(i)}function _(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.s+=e/100;i.s=B(i.s);return h(i)}function y(t){return h(t).desaturate(100)}function b(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.l+=e/100;i.l=B(i.l);return h(i)}function x(t,e){e=e===0?0:e||10;var i=h(t).toRgb();i.r=u(0,c(255,i.r-a(255*-(e/100))));i.g=u(0,c(255,i.g-a(255*-(e/100))));i.b=u(0,c(255,i.b-a(255*-(e/100))));return h(i)}function k(t,e){e=e===0?0:e||10;var i=h(t).toHsl();i.l-=e/100;i.l=B(i.l);return h(i)}function w(t,e){var i=h(t).toHsl();var n=(a(i.h)+e)%360;i.h=n<0?360+n:n;return h(i)}function L(t){var e=h(t).toHsl();e.h=(e.h+180)%360;return h(e)}function M(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+120)%360,s:e.s,l:e.l}),h({h:(i+240)%360,s:e.s,l:e.l})]}function C(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+90)%360,s:e.s,l:e.l}),h({h:(i+180)%360,s:e.s,l:e.l}),h({h:(i+270)%360,s:e.s,l:e.l})]}function S(t){var e=h(t).toHsl();var i=e.h;return[h(t),h({h:(i+72)%360,s:e.s,l:e.l}),h({h:(i+216)%360,s:e.s,l:e.l})]}function P(t,e,i){e=e||6;i=i||30;var n=h(t).toHsl();var r=360/i;var o=[h(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;){n.h=(n.h+r)%360;o.push(h(n))}return o}function T(t,e){e=e||6;var i=h(t).toHsv();var n=i.h,r=i.s,o=i.v;var a=[];var s=1/e;while(e--){a.push(h({h:n,s:r,v:o}));o=(o+s)%1}return a}h.mix=function(t,e,i){i=i===0?0:i||50;var n=h(t).toRgb();var r=h(e).toRgb();var o=i/100;var a=o*2-1;var s=r.a-n.a;var l;if(a*s==-1)l=a;else l=(a+s)/(1+a*s);l=(l+1)/2;var c=1-l;var u={r:r.r*l+n.r*c,g:r.g*l+n.g*c,b:r.b*l+n.b*c,a:r.a*o+n.a*(1-o)};return h(u)};h.readability=function(t,e){var i=h(t);var n=h(e);var r=i.toRgb();var o=n.toRgb();var a=i.getBrightness();var s=n.getBrightness();var l=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:l}};h.isReadable=function(t,e){var i=h.readability(t,e);return i.brightness>125&&i.color>500};h.mostReadable=function(t,e){var i=null;var n=0;var r=false;for(var o=0;o<e.length;o++){var a=h.readability(t,e[o]);var s=a.brightness>125&&a.color>500;var l=3*(a.brightness/125)+a.color/500;if(s&&!r||s&&r&&l>n||!s&&!r&&l>n){r=s;n=l;i=h(e[o])}}return i};var E=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var D=h.hexNames=A(E);function A(t){var e={};for(var i in t)if(t.hasOwnProperty(i))e[t[i]]=i;return e}function O(t){t=parseFloat(t);if(isNaN(t)||t<0||t>1)t=1;return t}function I(t,e){if(z(t))t="100%";var i=F(t);t=c(e,u(0,parseFloat(t)));if(i)t=parseInt(t*e,10)/100;if(p.abs(t-e)<1e-6)return 1;return t%e/parseFloat(e)}function B(t){return c(1,u(0,t))}function R(t){return parseInt(t,16)}function z(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function F(t){return typeof t==="string"&&t.indexOf("%")!=-1}function N(t){return t.length==1?"0"+t:""+t}function j(t){if(t<=1)t=t*100+"%";return t}function U(t){return Math.round(parseFloat(t)*255).toString(16)}function H(t){return R(t)/255}var G=function(){var t="[-\\+]?\\d+%?";var e="[-\\+]?\\d*\\.\\d+%?";var i="(?:"+e+")|(?:"+t+")";var n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";var r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e=false;if(E[t]){t=E[t];e=true}else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;if(i=G.rgb.exec(t))return{r:i[1],g:i[2],b:i[3]};if(i=G.rgba.exec(t))return{r:i[1],g:i[2],b:i[3],a:i[4]};if(i=G.hsl.exec(t))return{h:i[1],s:i[2],l:i[3]};if(i=G.hsla.exec(t))return{h:i[1],s:i[2],l:i[3],a:i[4]};if(i=G.hsv.exec(t))return{h:i[1],s:i[2],v:i[3]};if(i=G.hsva.exec(t))return{h:i[1],s:i[2],v:i[3],a:i[4]};if(i=G.hex8.exec(t))return{a:H(i[1]),r:R(i[2]),g:R(i[3]),b:R(i[4]),format:e?"name":"hex8"};if(i=G.hex6.exec(t))return{r:R(i[1]),g:R(i[2]),b:R(i[3]),format:e?"name":"hex"};if(i=G.hex3.exec(t))return{r:R(i[1]+""+i[1]),g:R(i[2]+""+i[2]),b:R(i[3]+""+i[3]),format:e?"name":"hex"};return false}window.tinycolor=h}(),Ft(function(){if(Ft.fn.spectrum.load)Ft.fn.spectrum.processNativeColorInputs()})})?r.apply(e,n):r)||(t.exports=r)}()},3609:function(t){"use strict";t.exports=jQuery},2470:function(t){"use strict";if("undefined"==typeof moment){var e=new Error("Cannot find module 'moment'");throw e.code="MODULE_NOT_FOUND",e}t.exports=moment},5525:function(){}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t].call(e.exports,e,e.exports,r),e.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r(1241),r(7653),r(2171),r(6492),r(7615),r(2559),r(4301),r(1170),r(6145),r(3336),r(3981),r(2189),r(5964),r(4528),r(7344),r(7252),r(434),r(1909),r(4111),r(3067)}();